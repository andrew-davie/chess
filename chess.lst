------- FILE ./chess.asm LEVEL 1 PASS 2
      1  8000 ????						; Chess
      2  8000 ????						; Atari 2600 Chess display system
      3  8000 ????						; Copyright (c) 2019-2020 Andrew Davie
      4  8000 ????						; andrew@taswegian.com
      5  8000 ????
      6  8000 ????
      7  8000 ????	       00 40	   TIA_BASE_ADDRESS =	$40
      8  8000 ????
      9  8000 ????				      processor	6502
------- FILE vcs.h LEVEL 2 PASS 2
      0  8000 ????				      include	"vcs.h"
      1  8000 ????						; VCS.H
      2  8000 ????						; Version 1.05, 13/November/2003
      3  8000 ????
      4  8000 ????	       00 69	   VERSION_VCS =	105
      5  8000 ????
      6  8000 ????						; This file defines hardware registers and memory mapping for the
      7  8000 ????						; Atari 2600. It is distributed as a companion machine-specific support package
      8  8000 ????						; for the DASM compiler. Updates to this file, DASM, and associated tools are
      9  8000 ????						; available at at http://www.atari2600.org/dasm
     10  8000 ????						;
     11  8000 ????						; Many thanks to the original author(s) of this file, and to everyone who has
     12  8000 ????						; contributed to understanding the Atari 2600.  If you take issue with the
     13  8000 ????						; contents, or naming of registers, please write to me (atari2600@taswegian.com)
     14  8000 ????						; with your views.  Please contribute, if you think you can improve this
     15  8000 ????						; file!
     16  8000 ????						;
     17  8000 ????						; Latest Revisions...
     18  8000 ????						; 1.05  13/NOV/2003	  - Correction to 1.04 - now functions as requested by MR.
     19  8000 ????						;			  - Added VERSION_VCS equate (which will reflect 100x version #)
     20  8000 ????						;			    This will allow conditional code to verify VCS.H being
     21  8000 ????						;			    used for code assembly.
     22  8000 ????						; 1.04  12/NOV/2003	 Added TIA_BASE_WRITE_ADDRESS and TIA_BASE_READ_ADDRESS for
     23  8000 ????						;			 convenient disassembly/reassembly compatibility for hardware
     24  8000 ????						;			 mirrored reading/writing differences.	This is more a
     25  8000 ????						;			 readability issue, and binary compatibility with disassembled
     26  8000 ????						;			 and reassembled sources.  Per Manuel Rotschkar's suggestion.
     27  8000 ????						; 1.03  12/MAY/2003	 Added SEG segment at end of file to fix old-code compatibility
     28  8000 ????						;			 which was broken by the use of segments in this file, as
     29  8000 ????						;			 reported by Manuel Polik on [stella] 11/MAY/2003
     30  8000 ????						; 1.02  22/MAR/2003	 Added TIMINT($285)
     31  8000 ????						; 1.01				Constant offset added to allow use for 3F-style bankswitching
     32  8000 ????						;						 - define TIA_BASE_ADDRESS as $40 for Tigervision carts, otherwise
     33  8000 ????						;						   it is safe to leave it undefined, and the base address will
     34  8000 ????						;						   be set to 0.  Thanks to Eckhard Stolberg for the suggestion.
     35  8000 ????						;			    Note, may use -DLABEL=EXPRESSION to define TIA_BASE_ADDRESS
     36  8000 ????						;			  - register definitions are now generated through assignment
     37  8000 ????						;			    in uninitialised segments.	This allows a changeable base
     38  8000 ????						;			    address architecture.
     39  8000 ????						; 1.0	22/MAR/2003		Initial release
     40  8000 ????
     41  8000 ????
     42  8000 ????						;-------------------------------------------------------------------------------
     43  8000 ????
     44  8000 ????						; TIA_BASE_ADDRESS
     45  8000 ????						; The TIA_BASE_ADDRESS defines the base address of access to TIA registers.
     46  8000 ????						; Normally 0, the base address should (externally, before including this file)
     47  8000 ????						; be set to $40 when creating 3F-bankswitched (and other?) cartridges.
     48  8000 ????						; The reason is that this bankswitching scheme treats any access to locations
     49  8000 ????						; < $40 as a bankswitch.
     50  8000 ????
     51  8000 ????			  -	      IFNCONST	TIA_BASE_ADDRESS
     52  8000 ????			  -TIA_BASE_ADDRESS =	0
     53  8000 ????				      ENDIF
     54  8000 ????
     55  8000 ????						; Note: The address may be defined on the command-line using the -D switch, eg:
     56  8000 ????						; dasm.exe code.asm -DTIA_BASE_ADDRESS=$40 -f3 -v5 -ocode.bin
     57  8000 ????						; *OR* by declaring the label before including this file, eg:
     58  8000 ????						; TIA_BASE_ADDRESS = $40
     59  8000 ????						;   include "vcs.h"
     60  8000 ????
     61  8000 ????						; Alternate read/write address capability - allows for some disassembly compatibility
     62  8000 ????						; usage ; to allow reassembly to binary perfect copies).  This is essentially catering
     63  8000 ????						; for the mirrored ROM hardware registers.
     64  8000 ????
     65  8000 ????						; Usage: As per above, define the TIA_BASE_READ_ADDRESS and/or TIA_BASE_WRITE_ADDRESS
     66  8000 ????						; using the -D command-line switch, as required.  If the addresses are not defined,
     67  8000 ????						; they defaut to the TIA_BASE_ADDRESS.
     68  8000 ????
     69  8000 ????			  -	      IFNCONST	TIA_BASE_READ_ADDRESS
     70  8000 ????			  -TIA_BASE_READ_ADDRESS =	TIA_BASE_ADDRESS
     71  8000 ????				      ENDIF
     72  8000 ????
     73  8000 ????			  -	      IFNCONST	TIA_BASE_WRITE_ADDRESS
     74  8000 ????			  -TIA_BASE_WRITE_ADDRESS =	TIA_BASE_ADDRESS
     75  8000 ????				      ENDIF
     76  8000 ????
     77  8000 ????						;-------------------------------------------------------------------------------
     78  8000 ????
     79 U006d ????				      SEG.U	TIA_REGISTERS_WRITE
     80 U0040					      ORG	TIA_BASE_WRITE_ADDRESS
     81 U0040
     82 U0040							; DO NOT CHANGE THE RELATIVE ORDERING OF REGISTERS!
     83 U0040
     84 U0040		       00	   VSYNC      ds	1	; $00	 0000 00x0   Vertical Sync Set-Clear
     85 U0041		       00	   VBLANK     ds	1	; $01	 xx00 00x0   Vertical Blank Set-Clear
     86 U0042		       00	   WSYNC      ds	1	; $02	 ---- ----   Wait for Horizontal Blank
     87 U0043		       00	   RSYNC      ds	1	; $03	 ---- ----   Reset Horizontal Sync Counter
     88 U0044		       00	   NUSIZ0     ds	1	; $04	 00xx 0xxx   Number-Size player/missle 0
     89 U0045		       00	   NUSIZ1     ds	1	; $05	 00xx 0xxx   Number-Size player/missle 1
     90 U0046		       00	   COLUP0     ds	1	; $06	 xxxx xxx0   Color-Luminance Player 0
     91 U0047		       00	   COLUP1     ds	1	; $07	 xxxx xxx0   Color-Luminance Player 1
     92 U0048		       00	   COLUPF     ds	1	; $08	 xxxx xxx0   Color-Luminance Playfield
     93 U0049		       00	   COLUBK     ds	1	; $09	 xxxx xxx0   Color-Luminance Background
     94 U004a		       00	   CTRLPF     ds	1	; $0A	 00xx 0xxx   Control Playfield, Ball, Collisions
     95 U004b		       00	   REFP0      ds	1	; $0B	 0000 x000   Reflection Player 0
     96 U004c		       00	   REFP1      ds	1	; $0C	 0000 x000   Reflection Player 1
     97 U004d		       00	   PF0	      ds	1	; $0D	 xxxx 0000   Playfield Register Byte 0
     98 U004e		       00	   PF1	      ds	1	; $0E	 xxxx xxxx   Playfield Register Byte 1
     99 U004f		       00	   PF2	      ds	1	; $0F	 xxxx xxxx   Playfield Register Byte 2
    100 U0050		       00	   RESP0      ds	1	; $10	 ---- ----   Reset Player 0
    101 U0051		       00	   RESP1      ds	1	; $11	 ---- ----   Reset Player 1
    102 U0052		       00	   RESM0      ds	1	; $12	 ---- ----   Reset Missle 0
    103 U0053		       00	   RESM1      ds	1	; $13	 ---- ----   Reset Missle 1
    104 U0054		       00	   RESBL      ds	1	; $14	 ---- ----   Reset Ball
    105 U0055		       00	   AUDC0      ds	1	; $15	 0000 xxxx   Audio Control 0
    106 U0056		       00	   AUDC1      ds	1	; $16	 0000 xxxx   Audio Control 1
    107 U0057		       00	   AUDF0      ds	1	; $17	 000x xxxx   Audio Frequency 0
    108 U0058		       00	   AUDF1      ds	1	; $18	 000x xxxx   Audio Frequency 1
    109 U0059		       00	   AUDV0      ds	1	; $19	 0000 xxxx   Audio Volume 0
    110 U005a		       00	   AUDV1      ds	1	; $1A	 0000 xxxx   Audio Volume 1
    111 U005b		       00	   GRP0       ds	1	; $1B	 xxxx xxxx   Graphics Register Player 0
    112 U005c		       00	   GRP1       ds	1	; $1C	 xxxx xxxx   Graphics Register Player 1
    113 U005d		       00	   ENAM0      ds	1	; $1D	 0000 00x0   Graphics Enable Missle 0
    114 U005e		       00	   ENAM1      ds	1	; $1E	 0000 00x0   Graphics Enable Missle 1
    115 U005f		       00	   ENABL      ds	1	; $1F	 0000 00x0   Graphics Enable Ball
    116 U0060		       00	   HMP0       ds	1	; $20	 xxxx 0000   Horizontal Motion Player 0
    117 U0061		       00	   HMP1       ds	1	; $21	 xxxx 0000   Horizontal Motion Player 1
    118 U0062		       00	   HMM0       ds	1	; $22	 xxxx 0000   Horizontal Motion Missle 0
    119 U0063		       00	   HMM1       ds	1	; $23	 xxxx 0000   Horizontal Motion Missle 1
    120 U0064		       00	   HMBL       ds	1	; $24	 xxxx 0000   Horizontal Motion Ball
    121 U0065		       00	   VDELP0     ds	1	; $25	 0000 000x   Vertical Delay Player 0
    122 U0066		       00	   VDELP1     ds	1	; $26	 0000 000x   Vertical Delay Player 1
    123 U0067		       00	   VDELBL     ds	1	; $27	 0000 000x   Vertical Delay Ball
    124 U0068		       00	   RESMP0     ds	1	; $28	 0000 00x0   Reset Missle 0 to Player 0
    125 U0069		       00	   RESMP1     ds	1	; $29	 0000 00x0   Reset Missle 1 to Player 1
    126 U006a		       00	   HMOVE      ds	1	; $2A	 ---- ----   Apply Horizontal Motion
    127 U006b		       00	   HMCLR      ds	1	; $2B	 ---- ----   Clear Horizontal Move Registers
    128 U006c		       00	   CXCLR      ds	1	; $2C	 ---- ----   Clear Collision Latches
    129 U006d
    130 U006d							;-------------------------------------------------------------------------------
    131 U006d
    132 U004e ????				      SEG.U	TIA_REGISTERS_READ
    133 U0040					      ORG	TIA_BASE_READ_ADDRESS
    134 U0040
    135 U0040							;											bit 7	 bit 6
    136 U0040		       00	   CXM0P      ds	1	; $00	     xx00 0000	     Read Collision  M0-P1   M0-P0
    137 U0041		       00	   CXM1P      ds	1	; $01	     xx00 0000			     M1-P0   M1-P1
    138 U0042		       00	   CXP0FB     ds	1	; $02	     xx00 0000			     P0-PF   P0-BL
    139 U0043		       00	   CXP1FB     ds	1	; $03	     xx00 0000			     P1-PF   P1-BL
    140 U0044		       00	   CXM0FB     ds	1	; $04	     xx00 0000			     M0-PF   M0-BL
    141 U0045		       00	   CXM1FB     ds	1	; $05	     xx00 0000			     M1-PF   M1-BL
    142 U0046		       00	   CXBLPF     ds	1	; $06	     x000 0000			     BL-PF   -----
    143 U0047		       00	   CXPPMM     ds	1	; $07	     xx00 0000			     P0-P1   M0-M1
    144 U0048		       00	   INPT0      ds	1	; $08	     x000 0000	     Read Pot Port 0
    145 U0049		       00	   INPT1      ds	1	; $09	     x000 0000	     Read Pot Port 1
    146 U004a		       00	   INPT2      ds	1	; $0A	     x000 0000	     Read Pot Port 2
    147 U004b		       00	   INPT3      ds	1	; $0B	     x000 0000	     Read Pot Port 3
    148 U004c		       00	   INPT4      ds	1	; $0C		x000 0000	 Read Input (Trigger) 0
    149 U004d		       00	   INPT5      ds	1	; $0D		x000 0000	 Read Input (Trigger) 1
    150 U004e
    151 U004e							;-------------------------------------------------------------------------------
    152 U004e
    153 U0298 ????				      SEG.U	RIOT
    154 U0280					      ORG	$280
    155 U0280
    156 U0280							; RIOT MEMORY MAP
    157 U0280
    158 U0280		       00	   SWCHA      ds	1	; $280      Port A data register for joysticks:
    159 U0281							;			Bits 4-7 for player 1.  Bits 0-3 for player 2.
    160 U0281
    161 U0281		       00	   SWACNT     ds	1	; $281      Port A data direction register (DDR)
    162 U0282		       00	   SWCHB      ds	1	; $282		Port B data (console switches)
    163 U0283		       00	   SWBCNT     ds	1	; $283      Port B DDR
    164 U0284		       00	   INTIM      ds	1	; $284		Timer output
    165 U0285
    166 U0285		       00	   TIMINT     ds	1	; $285
    167 U0286
    168 U0286							; Unused/undefined registers ($285-$294)
    169 U0286
    170 U0286		       00		      ds	1	; $286
    171 U0287		       00		      ds	1	; $287
    172 U0288		       00		      ds	1	; $288
    173 U0289		       00		      ds	1	; $289
    174 U028a		       00		      ds	1	; $28A
    175 U028b		       00		      ds	1	; $28B
    176 U028c		       00		      ds	1	; $28C
    177 U028d		       00		      ds	1	; $28D
    178 U028e		       00		      ds	1	; $28E
    179 U028f		       00		      ds	1	; $28F
    180 U0290		       00		      ds	1	; $290
    181 U0291		       00		      ds	1	; $291
    182 U0292		       00		      ds	1	; $292
    183 U0293		       00		      ds	1	; $293
    184 U0294
    185 U0294		       00	   TIM1T      ds	1	; $294		set 1 clock interval
    186 U0295		       00	   TIM8T      ds	1	; $295      set 8 clock interval
    187 U0296		       00	   TIM64T     ds	1	; $296      set 64 clock interval
    188 U0297		       00	   T1024T     ds	1	; $297      set 1024 clock interval
    189 U0298
    190 U0298							;-------------------------------------------------------------------------------
    191 U0298							; The following required for back-compatibility with code which does not use
    192 U0298							; segments.
    193 U0298
    194  0000 ????				      SEG
    195  0000 ????
    196  0000 ????						; EOF
------- FILE ./chess.asm
------- FILE macro.h LEVEL 2 PASS 2
      0  0000 ????				      include	"macro.h"
      1  0000 ????
      2  0000 ????						; MACRO.H
      3  0000 ????						; Version 1.06, 3/SEPTEMBER/2004
      4  0000 ????
      5  0000 ????	       00 6a	   VERSION_MACRO =	106
      6  0000 ????
      7  0000 ????						;
      8  0000 ????						; THIS FILE IS EXPLICITLY SUPPORTED AS A DASM-PREFERRED COMPANION FILE
      9  0000 ????						; PLEASE DO *NOT* REDISTRIBUTE MODIFIED VERSIONS OF THIS FILE!
     10  0000 ????						;
     11  0000 ????						; This file defines DASM macros useful for development for the Atari 2600.
     12  0000 ????						; It is distributed as a companion machine-specific support package
     13  0000 ????						; for the DASM compiler. Updates to this file, DASM, and associated tools are
     14  0000 ????						; available at at http://www.atari2600.org/dasm
     15  0000 ????						;
     16  0000 ????						; Many thanks to the people who have contributed.  If you take issue with the
     17  0000 ????						; contents, or would like to add something, please write to me
     18  0000 ????						; (atari2600@taswegian.com) with your contribution.
     19  0000 ????						;
     20  0000 ????						; Latest Revisions...
     21  0000 ????						;
     22  0000 ????						; 1.06  03/SEP/2004	 - nice revision of VERTICAL_BLANK (Edwin Blink)
     23  0000 ????						; 1.05  14/NOV/2003	 - Added VERSION_MACRO equate (which will reflect 100x version #)
     24  0000 ????						;			   This will allow conditional code to verify MACRO.H being
     25  0000 ????						;			   used for code assembly.
     26  0000 ????						; 1.04  13/NOV/2003	 - SET_POINTER macro added (16-bit address load)
     27  0000 ????						;
     28  0000 ????						; 1.03  23/JUN/2003	 - CLEAN_START macro added - clears TIA, RAM, registers
     29  0000 ????						;
     30  0000 ????						; 1.02  14/JUN/2003	 - VERTICAL_SYNC macro added
     31  0000 ????						;			   (standardised macro for vertical synch code)
     32  0000 ????						; 1.01  22/MAR/2003	 - SLEEP macro added.
     33  0000 ????						;			 - NO_ILLEGAL_OPCODES switch implemented
     34  0000 ????						; 1.0	22/MAR/2003		Initial release
     35  0000 ????
     36  0000 ????						; Note: These macros use illegal opcodes.  To disable illegal opcode usage,
     37  0000 ????						;   define the symbol NO_ILLEGAL_OPCODES (-DNO_ILLEGAL_OPCODES=1 on command-line).
     38  0000 ????						;   If you do not allow illegal opcode usage, you must include this file
     39  0000 ????						;   *after* including VCS.H (as the non-illegal opcodes access hardware
     40  0000 ????						;   registers and require them to be defined first).
     41  0000 ????
     42  0000 ????						; Available macros...
     43  0000 ????						;   SLEEP n		 - sleep for n cycles
     44  0000 ????						;   VERTICAL_SYNC	 - correct 3 scanline vertical synch code
     45  0000 ????						;   CLEAN_START	 - set machine to known state on startup
     46  0000 ????						;   SET_POINTER	 - load a 16-bit absolute to a 16-bit variable
     47  0000 ????
     48  0000 ????						;-------------------------------------------------------------------------------
     49  0000 ????						; SLEEP duration
     50  0000 ????						; Original author: Thomas Jentzsch
     51  0000 ????						; Inserts code which takes the specified number of cycles to execute.	This is
     52  0000 ????						; useful for code where precise timing is required.
     53  0000 ????						; ILLEGAL-OPCODE VERSION DOES NOT AFFECT FLAGS OR REGISTERS.
     54  0000 ????						; LEGAL OPCODE VERSION MAY AFFECT FLAGS
     55  0000 ????						; Uses illegal opcode (DASM 2.20.01 onwards).
     56  0000 ????
     57  0000 ????				      MAC	sleep
     58  0000 ????			   .CYCLES    SET	{1}
     59  0000 ????
     60  0000 ????				      IF	.CYCLES < 2
     61  0000 ????				      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
     62  0000 ????				      ERR
     63  0000 ????				      ENDIF
     64  0000 ????
     65  0000 ????				      IF	.CYCLES & 1
     66  0000 ????				      IFNCONST	NO_ILLEGAL_OPCODES
     67  0000 ????				      nop	0
     68  0000 ????				      ELSE
     69  0000 ????				      bit	VSYNC
     70  0000 ????				      ENDIF
     71  0000 ????			   .CYCLES    SET	.CYCLES - 3
     72  0000 ????				      ENDIF
     73  0000 ????
     74  0000 ????				      REPEAT	.CYCLES / 2
     75  0000 ????				      nop
     76  0000 ????				      REPEND
     77  0000 ????				      ENDM		;usage: SLEEP n (n>1)
     78  0000 ????
     79  0000 ????						;-------------------------------------------------------------------------------
     80  0000 ????						; VERTICAL_SYNC
     81  0000 ????						; revised version by Edwin Blink -- saves bytes!
     82  0000 ????						; Inserts the code required for a proper 3 scanline vertical sync sequence
     83  0000 ????						; Note: Alters the accumulator
     84  0000 ????
     85  0000 ????						; OUT: A = 0
     86  0000 ????
     87  0000 ????				      MAC	vertical_sync
     88  0000 ????				      lda	#%1110	; each '1' bits generate a VSYNC ON line (bits 1..3)
     89  0000 ????			   .VSLP1     sta	WSYNC	; 1st '0' bit resets Vsync, 2nd '0' bit exit loop
     90  0000 ????				      sta	VSYNC
     91  0000 ????				      lsr
     92  0000 ????				      bne	.VSLP1	; branch until VYSNC has been reset
     93  0000 ????				      ENDM
     94  0000 ????
     95  0000 ????						;-------------------------------------------------------------------------------
     96  0000 ????						; CLEAN_START
     97  0000 ????						; Original author: Andrew Davie
     98  0000 ????						; Standardised start-up code, clears stack, all TIA registers and RAM to 0
     99  0000 ????						; Sets stack pointer to $FF, and all registers to 0
    100  0000 ????						; Sets decimal mode off, sets interrupt flag (kind of un-necessary)
    101  0000 ????						; Use as very first section of code on boot (ie: at reset)
    102  0000 ????						; Code written to minimise total ROM usage - uses weird 6502 knowledge :)
    103  0000 ????
    104  0000 ????				      MAC	clean_start
    105  0000 ????				      sei
    106  0000 ????				      cld
    107  0000 ????
    108  0000 ????				      ldx	#0
    109  0000 ????				      txa
    110  0000 ????				      tay
    111  0000 ????			   .CLEAR_STACK dex
    112  0000 ????				      txs
    113  0000 ????				      pha
    114  0000 ????				      bne	.CLEAR_STACK	; SP=$FF, X = A = Y = 0
    115  0000 ????
    116  0000 ????				      ENDM
    117  0000 ????
    118  0000 ????						;-------------------------------------------------------
    119  0000 ????						; SET_POINTER
    120  0000 ????						; Original author: Manuel Rotschkar
    121  0000 ????						;
    122  0000 ????						; Sets a 2 byte RAM pointer to an absolute address.
    123  0000 ????						;
    124  0000 ????						; Usage: SET_POINTER pointer, address
    125  0000 ????						; Example: SET_POINTER SpritePTR, SpriteData
    126  0000 ????						;
    127  0000 ????						; Note: Alters the accumulator, NZ flags
    128  0000 ????						; IN 1: 2 byte RAM location reserved for pointer
    129  0000 ????						; IN 2: absolute address
    130  0000 ????
    131  0000 ????				      MAC	set_pointer
    132  0000 ????			   .POINTER   SET	{1}
    133  0000 ????			   .ADDRESS   SET	{2}
    134  0000 ????
    135  0000 ????				      LDA	#<.ADDRESS	; Get Lowbyte of Address
    136  0000 ????				      STA	.POINTER	; Store in pointer
    137  0000 ????				      LDA	#>.ADDRESS	; Get Hibyte of Address
    138  0000 ????				      STA	.POINTER+1	; Store in pointer+1
    139  0000 ????
    140  0000 ????				      ENDM
    141  0000 ????
    142  0000 ????						;-------------------------------------------------------
    143  0000 ????						; BOUNDARY byte#
    144  0000 ????						; Original author: Denis Debro (borrowed from Bob Smith / Thomas)
    145  0000 ????						;
    146  0000 ????						; Push data to a certain position inside a page and keep count of how
    147  0000 ????						; many free bytes the programmer will have.
    148  0000 ????						;
    149  0000 ????						; eg: BOUNDARY 5    ; position at byte #5 in page
    150  0000 ????
    151  0000 ????			   __DASM__TOTAL_FREE_MEMORY SET	0
    152  0000 ????			   .FREE_BYTES SET	0
    153  0000 ????				      MAC	boundary
    154  0000 ????				      REPEAT	256
    155  0000 ????				      IF	<. % {1} = 0
    156  0000 ????				      MEXIT
    157  0000 ????				      ELSE
    158  0000 ????			   .FREE_BYTES SET	.FREE_BYTES + 1
    159  0000 ????				      .byte	$00
    160  0000 ????				      ENDIF
    161  0000 ????				      REPEND
    162  0000 ????			   __DASM__TOTAL_FREE_MEMORY SET	__DASM__TOTAL_FREE_MEMORY + .FREE_BYTES
    163  0000 ????				      ENDM
    164  0000 ????
    165  0000 ????
    166  0000 ????						; EOF
------- FILE ./chess.asm
------- FILE piece_defines.h LEVEL 2 PASS 2
      0  0000 ????				      include	"piece_defines.h"
      1  0000 ????						; Copyright (C)2020 Andrew Davie
      2  0000 ????
      3  0000 ????	       00 80	   BLACK      =	128
      4  0000 ????	       00 00	   WHITE      =	0
      5  0000 ????
      6  0000 ????	       00 80	   FLAG_COLOUR =	128	; mask
      7  0000 ????	       00 40	   FLAG_MOVED =	64	; mark ALL pieces when moved. Used for castling
      8  0000 ????						; but maybe useful for evaluation of development
      9  0000 ????	       00 20	   FLAG_ENPASSANT =	32
     10  0000 ????	       00 10	   FLAG_CASTLE =	16
     11  0000 ????
     12  0000 ????						;---------------------------------------------------------------------------------------------------
     13  0000 ????						; DEFINE THE PIECES
     14  0000 ????						; ID lives in bits 0-2
     15  0000 ????
     16  0000 ????	       00 00	   BLANK      =	0
     17  0000 ????	       00 00	   ███  =	BLANK
     18  0000 ????
     19  0000 ????	       00 01	   WPAWN      =	1
     20  0000 ????	       00 01	   WP	      =	WPAWN
     21  0000 ????	       00 02	   BPAWN      =	2
     22  0000 ????	       00 02	   BP	      =	BPAWN
     23  0000 ????	       00 03	   KNIGHT     =	3
     24  0000 ????	       00 03	   N	      =	KNIGHT
     25  0000 ????	       00 04	   BISHOP     =	4
     26  0000 ????	       00 04	   B	      =	BISHOP
     27  0000 ????	       00 05	   ROOK       =	5
     28  0000 ????	       00 05	   R	      =	ROOK
     29  0000 ????	       00 06	   QUEEN      =	6
     30  0000 ????	       00 06	   Q	      =	QUEEN
     31  0000 ????	       00 07	   KING       =	7
     32  0000 ????	       00 07	   K	      =	KING
     33  0000 ????	       00 08	   MARKER     =	8
     34  0000 ????
     35  0000 ????	       00 0f	   PIECE_MASK =	15	; trim off the flags leaving just piece ID
     36  0000 ????
     37  0000 ????						;---------------------------------------------------------------------------------------------------
     38  0000 ????
     39  0000 ????						; Movements
     40  0000 ????
     41  0000 ????	       00 0a	   _UP	      =	10	; up
     42  0000 ????	       ff ff ff ff _LEFT      =	-1	; left
     43  0000 ????	       ff ff ff f6 _DOWN      =	-10	; down
     44  0000 ????	       00 01	   _RIGHT     =	1	; right
     45  0000 ????
     46  0000 ????						; EOF
------- FILE ./chess.asm
     13  0000 ????
     14  0000 ????			   ORIGIN     SET	0
     15  0000 ????			   ORIGIN_RAM SET	0
     16  0000 ????
------- FILE segtime.asm LEVEL 2 PASS 2
      0  0000 ????				      include	"segtime.asm"
      1  0000 ????						;    Sokoboo - a Sokoban implementation
      2  0000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  0000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0000 ????						;
      5  0000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0000 ????						;
      7  0000 ????						;    Code related to the generic tile-based display engine was developed by
      8  0000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0000 ????						;
     12  0000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  0000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0000 ????						;    directory for Apache licensing details.
     15  0000 ????						;
     16  0000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0000 ????						;    See the copyright notices in the License directory for a list of level
     18  0000 ????						;    contributors.
     19  0000 ????						;
     20  0000 ????						;    Except where otherwise indicated, this software is released under the
     21  0000 ????						;    following licensing arrangement...
     22  0000 ????						;
     23  0000 ????						;    This program is free software: you can redistribute it and/or modify
     24  0000 ????						;    it under the terms of the GNU General Public License as published by
     25  0000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  0000 ????						;    (at your option) any later version.
     27  0000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0000 ????
     29  0000 ????						;    This program is distributed in the hope that it will be useful,
     30  0000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0000 ????						;    GNU General Public License for more details.
     33  0000 ????
     34  0000 ????						; segtime optimization (averages):
     35  0000 ????						;   lost time = segtime/2 * 64
     36  0000 ????						;   num-segments = (vblank + overscan time) (NTSC 276=62+51=113) / 2 / segtime
     37  0000 ????						;   overhead: num-segments * 8 (assuming minimal INTIM check only)
     38  0000 ????						;
     39  0000 ????						; segtime = 2:
     40  0000 ????						;   lost time = 64
     41  0000 ????						;   num-segments = 28
     42  0000 ????						;   overhead = 224!
     43  0000 ????						; segtime = 3:
     44  0000 ????						;   lost time = 96
     45  0000 ????						;   num-segments = 18
     46  0000 ????						;   overhead = 144!
     47  0000 ????						; segtime = 4: 	     <--!!!
     48  0000 ????						;   lost time = 128!
     49  0000 ????						;   num-segments = 28
     50  0000 ????						;   overhead = 112
     51  0000 ????						; segtime = 5:
     52  0000 ????						;   lost time = 160!
     53  0000 ????						;   num-segments = 11
     54  0000 ????						;   overhead = 88
     55  0000 ????						; segtime = 6:
     56  0000 ????						;   lost time = 192!
     57  0000 ????						;   num-segments = 9
     58  0000 ????						;   overhead = 72
     59  0000 ????						; segtime = 7:
     60  0000 ????						;   lost time = 224!
     61  0000 ????						;   num-segments = 8
     62  0000 ????						;   overhead = 64
     63  0000 ????						; segtime = 10:
     64  0000 ????						;   lost time = 320!
     65  0000 ????						;   num-segments = 5
     66  0000 ????						;   overhead = 40
     67  0000 ????						; segtime = 20:
     68  0000 ????						;   lost time = 640!
     69  0000 ????						;   num-segments = 2
     70  0000 ????						;   overhead = 16
     71  0000 ????						; segtime = 40:
     72  0000 ????						;   lost time = 1280!
     73  0000 ????						;   num-segments = 1
     74  0000 ????						;   overhead = 8
     75  0000 ????
     76  0000 ????						; optimal INTIM segtime is 4 + 1 = 5,
     77  0000 ????						; below wasted time increases rapidly, above only moderately
     78  0000 ????						; if the overhead becomes larger, optimal segtimes will increase too
     79  0000 ????						; also the lost time will become smaller, if smaller segments can be used instead,
     80  0000 ????						;  so larger segtimes are not that bad then
     81  0000 ????
     82  0000 ????
     83  0000 ????				      MAC	segtime
     84  0000 ????			   {1}	      SET	{2}
     85  0000 ????			   TEST_{1}   =	0
     86  0000 ????				      ENDM
     87  0000 ????
     88  0000 ????				      MAC	segtime_c
     89  0000 ????			   {1}	      SET	({2}+32)/64 + 2
     90  0000 ????			   TEST_{1}   =	0
     91  0000 ????				      ENDM
     92  0000 ????
     93  0000 ????						; Pathways
     94  0000 ????						; StealPart3, not enough time for SCD_SLOW --> 79✅
     95  0000 ????						; if QuickDraw does immediate exit, 58✅
     96  0000 ????
     97  0000 ????						;---------------------------------------------------------------------------------------------------
     98  0000 ????
      0  0000 ????				      SEGTIME_C	MINIMUM_SEGTIME, 95	;✅ processing slice minimum requirement
      1  0000 ????			   MINIMUM_SEGTIME SET	(95+32)/64 + 2
      2  0000 ????	       00 00	   TEST_MINIMUM_SEGTIME =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_MINIMUM_TIMESLICE, 54	;✅ abort time maximum requirement for timeslice
      1  0000 ????			   SEGTIME_MINIMUM_TIMESLICE SET	(54+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_MINIMUM_TIMESLICE =	0
    101  0000 ????
    102  0000 ????						; Note: we add 1 to the minimum because there's a bit of overhead at the start of the timeslice code which vectors
    103  0000 ????						; to the appropriate timeslice.  That timeslice then checks the segtime again -- and in the case of the minimum we
    104  0000 ????						; will already have used 55 cycles of the available timeslice to get to the segtime check. Given that there are only
    105  0000 ????						; 9 spare cycles in the 'unit' left, it's probably more efficient to abort earlier and save those 55 cycles for other
    106  0000 ????						; uses ...
    107  0000 ????
    108  0000 ????
    109  0000 ????						; The following timings have been physicaly timed via code/debugger... the comment shows the worst observed time.
    110  0000 ????						; Generally the allocated segtime should be a bit bigger than the worst observed, to cater for the minor code
    111  0000 ????						; outside the creature itself which might otherwise cause screen time over-run.
    112  0000 ????
    113  0000 ????						; The following are NOT object-related and timing is a bit of manual guesswork/calculation
    114  0000 ????						; Comment may indicate at what value a glitch was DEFINITELY seen. These timings may not be optimal.
    115  0000 ????
      0  0000 ????				      SEGTIME	SEGTIME_MAN,22	;18 ;12	  ;NFI
      1  0000 ????			   SEGTIME_MAN SET	22
      2  0000 ????	       00 00	   TEST_SEGTIME_MAN =	0
------- FILE ./chess.asm
     18  0000 ????
     19  0000 ????						;FIXED_BANK		 = 3 * 2048	      ;-->  8K ROM tested OK
     20  0000 ????						;FIXED_BANK		  = 7 * 2048	      ;-->  16K ROM tested OK
     21  0000 ????	       78 00	   FIXED_BANK =	15 * 2048	; ->> 32K
     22  0000 ????						;FIXED_BANK		 = 31 * 2048	       ; ->> 64K
     23  0000 ????						;FIXED_BANK		 = 239 * 2048	      ;--> 480K ROM tested OK (KK/CC2 compatibility)
     24  0000 ????						;FIXED_BANK		 = 127 * 2048	      ;--> 256K ROM tested OK
     25  0000 ????						;FIXED_BANK		 = 255 * 2048	      ;--> 512K ROM tested OK (CC2 can't handle this)
     26  0000 ????
     27  0000 ????	       00 01	   YES	      =	1
     28  0000 ????	       00 00	   NO	      =	0
     29  0000 ????
     30  0000 ????						; assemble diagnostics. Remove for release.
     31  0000 ????	       00 01	   ASSERTS    =	1
     32  0000 ????	       00 00	   TEST_POSITION =	0	; 0=normal, 1 = setup test position
     33  0000 ????
     34  0000 ????						;===================================
     35  0000 ????	       00 00	   FINAL_VERSION =	NO	; this OVERRIDES any selections below and sets everything correct for a final release
     36  0000 ????						;===================================
     37  0000 ????
     38  0000 ????						;-------------------------------------------------------------------------------
     39  0000 ????						; The following are optional YES/NO depending on phase of the moon
     40  0000 ????			   L276       SET	YES	; use 276 line display for NTSC
     41  0000 ????						;-------------------------------------------------------------------------------
     42  0000 ????						; DO NOT MODIFY THE BELOW SETTINGS -- USE THE ONES ABOVE!
     43  0000 ????						; Here we make sure everyting is OK based on the single switch -- less chance for accidents
     44  0000 ????			  -	      IF	FINAL_VERSION = YES
     45  0000 ????			  -L276       SET	YES	; use 276 line display for NTSC
     46  0000 ????				      ENDIF
     47  0000 ????
     48  0000 ????						;-------------------------------------------------------------------------------
     49  0000 ????
     50  0000 ????	       00 01	   COMPILE_ILLEGALOPCODES =	1
     51  0000 ????
     52  0000 ????	       00 07	   DIRECTION_BITS =	%111	; for ManLastDirection
     53  0000 ????
     54  0000 ????						;------------------------------------------------------------------------------
     55  0000 ????
     56  0000 ????	       00 01	   PLUSCART   =	YES
     57  0000 ????
     58  0000 ????						;------------------------------------------------------------------------------
     59  0000 ????
     60  0000 ????
     61  0000 ????	       00 08	   CHESSBOARD_ROWS =	8	; number of ROWS of chessboard
     62  0000 ????	       00 18	   LINES_PER_CHAR =	24	; MULTIPLE OF 3 SO RGB INTERFACES CHARS OK
     63  0000 ????	       00 48	   PIECE_SHAPE_SIZE =	72	; 3 PF bytes x 24 scanlines
     64  0000 ????
     65  0000 ????	       00 3f	   SET_BANK   =	$3F	; write address to switch ROM banks
     66  0000 ????	       00 3e	   SET_BANK_RAM =	$3E	; write address to switch RAM banks
     67  0000 ????
     68  0000 ????
     69  0000 ????	       10 00	   RAM_3E     =	$1000
     70  0000 ????	       04 00	   RAM_SIZE   =	$400
     71  0000 ????	       04 00	   RAM_WRITE  =	$400	; add this to RAM address when doing writes
     72  0000 ????
     73  0000 ????
     74  0000 ????						; Platform constants:
     75  0000 ????	       00 02	   PAL	      =	%10
     76  0000 ????	       00 02	   PAL_50     =	PAL|0
     77  0000 ????	       00 03	   PAL_60     =	PAL|1
     78  0000 ????
     79  0000 ????
     80  0000 ????				      IF	L276
     81  0000 ????	       00 30	   VBLANK_TIM_NTSC =	48	; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
     82  0000 ????			  -	      ELSE
     83  0000 ????			  -VBLANK_TIM_NTSC =	50	; NTSC 262
     84  0000 ????				      ENDIF
     85  0000 ????	       00 55	   VBLANK_TIM_PAL =	85	;85			    ; PAL 312 (we could increase this too, if we want to, but I suppose the used vertical screen size would become very small then)
     86  0000 ????
     87  0000 ????				      IF	L276
     88  0000 ????	       00 23	   OVERSCAN_TIM_NTSC =	35	;24 ;51			; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
     89  0000 ????			  -	      ELSE
     90  0000 ????			  -OVERSCAN_TIM_NTSC =	8	;51			    ; NTSC 262
     91  0000 ????				      ENDIF
     92  0000 ????	       00 29	   OVERSCAN_TIM_PAL =	41	; PAL 312 (we could increase this too, if we want to, but I suppose the used vertical screen size would become very small then)
     93  0000 ????
     94  0000 ????				      IF	L276
     95  0000 ????	       01 14	   SCANLINES_NTSC =	276	; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
     96  0000 ????			  -	      ELSE
     97  0000 ????			  -SCANLINES_NTSC =	262	; NTSC 262
     98  0000 ????				      ENDIF
     99  0000 ????	       01 38	   SCANLINES_PAL =	312
    100  0000 ????
    101  0000 ????
    102  0000 ????						;------------------------------------------------------------------------------
    103  0000 ????						; MACRO definitions
    104  0000 ????
    105  0000 ????
    106  0000 ????	       08 00	   ROM_BANK_SIZE =	$800
    107  0000 ????
    108  0000 ????				      MAC	newbank
    109  0000 ????				      SEG	{1}
    110  0000 ????				      ORG	ORIGIN
    111  0000 ????				      RORG	$F000
    112  0000 ????			   BANK_START SET	*
    113  0000 ????			   {1}	      SET	ORIGIN / 2048
    114  0000 ????			   ORIGIN     SET	ORIGIN + 2048
    115  0000 ????			   _CURRENT_BANK SET	{1}
    116  0000 ????				      ENDM		; bank name
    117  0000 ????
    118  0000 ????				      MAC	define_1k_segment
    119  0000 ????				      ALIGN	$400
    120  0000 ????			   SEGMENT_{1} SET	*
    121  0000 ????			   BANK_{1}   SET	_CURRENT_BANK
    122  0000 ????				      ENDM		; {seg name}
    123  0000 ????
    124  0000 ????				      MAC	check_bank_size
    125  0000 ????			   .TEMP      =	* - BANK_START
    126  0000 ????				      ECHO	{1}, "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
    127  0000 ????				      if	( .TEMP ) > ROM_BANK_SIZE
    128  0000 ????				      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
    129  0000 ????				      ERR
    130  0000 ????				      endif
    131  0000 ????				      ENDM		; name
    132  0000 ????
    133  0000 ????
    134  0000 ????				      MAC	check_half_bank_size
    135  0000 ????						; This macro is for checking the first 1K of ROM bank data that is to be copied to RAM.
    136  0000 ????						; Note that these ROM banks can contain 2K, so this macro will generally go 'halfway'
    137  0000 ????			   .TEMP      =	* - BANK_START
    138  0000 ????				      ECHO	{1}, "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
    139  0000 ????				      if	( .TEMP ) > ROM_BANK_SIZE/2
    140  0000 ????				      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
    141  0000 ????				      ERR
    142  0000 ????				      endif
    143  0000 ????				      ENDM		; name
    144  0000 ????
    145  0000 ????
    146  0000 ????						;---------------------------------------------------------------------------------------------------
    147  0000 ????
    148  0000 ????						; Macro inserts a page break if the object would overlap a page
    149  0000 ????
    150  0000 ????				      MAC	optional_pagebreak
    151  0000 ????				      LIST	OFF
    152  0000 ????				      IF	(>( * + {2} -1 )) > ( >* )
    153  0000 ????			   EARLY_LOCATION SET	*
    154  0000 ????				      ALIGN	256
    155  0000 ????				      ECHO	"PAGE BREAK INSERTED FOR ", {1}
    156  0000 ????				      ECHO	"REQUESTED SIZE = ", {2}
    157  0000 ????				      ECHO	"WASTED SPACE = ", *-EARLY_LOCATION
    158  0000 ????				      ECHO	"PAGEBREAK LOCATION = ", *
    159  0000 ????				      ENDIF
    160  0000 ????				      LIST	ON
    161  0000 ????				      ENDM		; { string, size }
    162  0000 ????
    163  0000 ????
    164  0000 ????				      MAC	check_page_crossing
    165  0000 ????				      LIST	OFF
    166  0000 ????				      if	( >BLOCK_END != >BLOCK_START )
    167  0000 ????				      ECHO	"PAGE CROSSING @ ", BLOCK_START
    168  0000 ????				      endif
    169  0000 ????				      LIST	ON
    170  0000 ????				      ENDM
    171  0000 ????
    172  0000 ????				      MAC	checkpage
    173  0000 ????				      LIST	OFF
    174  0000 ????				      IF	>. != >{1}
    175  0000 ????				      ECHO	""
    176  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    177  0000 ????				      ECHO	""
    178  0000 ????				      ERR
    179  0000 ????				      ENDIF
    180  0000 ????				      LIST	ON
    181  0000 ????				      ENDM
    182  0000 ????
    183  0000 ????				      MAC	checkpagex
    184  0000 ????				      LIST	OFF
    185  0000 ????				      IF	>. != >{1}
    186  0000 ????				      ECHO	""
    187  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ") @ {0}"
    188  0000 ????				      ECHO	{2}
    189  0000 ????				      ECHO	""
    190  0000 ????				      ERR
    191  0000 ????				      ENDIF
    192  0000 ????				      LIST	ON
    193  0000 ????				      ENDM
    194  0000 ????
    195  0000 ????
    196  0000 ????						;---------------------------------------------------------------------------------------------------
    197  0000 ????
    198  0000 ????				      MAC	def
    199  0000 ????			   BANK_{1}   SET	_CURRENT_BANK	; bank in which this subroutine resides
    200  0000 ????						;    SUBROUTINE      ; doesn't work in a macro!
    201  0000 ????			   {1}			; entry point
    202  0000 ????				      ENDM		; name of subroutine
    203  0000 ????
    204  0000 ????						;---------------------------------------------------------------------------------------------------
    205  0000 ????
    206  0000 ????				      MAC	newrambank
    207  0000 ????						; {1}	     bank name
    208  0000 ????						; {2}	     RAM bank number
    209  0000 ????
    210  0000 ????				      SEG.U	{1}
    211  0000 ????				      ORG	ORIGIN_RAM
    212  0000 ????				      RORG	RAM_3E
    213  0000 ????			   BANK_START SET	*
    214  0000 ????			   RAMBANK_{1} SET	ORIGIN_RAM / RAM_SIZE
    215  0000 ????			   _CURRENT_RAMBANK SET	RAMBANK_{1}
    216  0000 ????			   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    217  0000 ????				      ENDM		; bank name
    218  0000 ????
    219  0000 ????						; TODO - fix - this is faulty....
    220  0000 ????				      MAC	validate_ram_size
    221  0000 ????			   .RAM_BANK_SIZE SET	* - RAM_3E
    222  0000 ????				      IF	.RAM_BANK_SIZE > RAM_SIZE
    223  0000 ????				      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
    224  0000 ????				      ERR
    225  0000 ????				      ENDIF
    226  0000 ????				      ENDM
    227  0000 ????
    228  0000 ????						;---------------------------------------------------------------------------------------------------
    229  0000 ????
    230  0000 ????				      MAC	resync
    231  0000 ????						; resync screen, X and Y == 0 afterwards
    232  0000 ????				      lda	#%10	; make sure VBLANK is ON
    233  0000 ????				      sta	VBLANK
    234  0000 ????
    235  0000 ????				      ldx	#8	; 5 or more RESYNC_FRAMES
    236  0000 ????			   .loopResync
    237  0000 ????				      VERTICAL_SYNC
    238  0000 ????
    239  0000 ????				      ldy	#SCANLINES_NTSC/2 - 2
    240  0000 ????				      lda	Platform
    241  0000 ????				      eor	#PAL_50	; PAL-50?
    242  0000 ????				      bne	.ntsc
    243  0000 ????				      ldy	#SCANLINES_PAL/2 - 2
    244  0000 ????			   .ntsc
    245  0000 ????			   .loopWait
    246  0000 ????				      sta	WSYNC
    247  0000 ????				      sta	WSYNC
    248  0000 ????				      dey
    249  0000 ????				      bne	.loopWait
    250  0000 ????				      dex
    251  0000 ????				      bne	.loopResync
    252  0000 ????				      ENDM
    253  0000 ????
    254  0000 ????				      MAC	set_platform
    255  0000 ????						; 00 = NTSC
    256  0000 ????						; 01 = NTSC
    257  0000 ????						; 10 = PAL-50
    258  0000 ????						; 11 = PAL-60
    259  0000 ????				      lda	SWCHB
    260  0000 ????				      rol
    261  0000 ????				      rol
    262  0000 ????				      rol
    263  0000 ????				      and	#%11
    264  0000 ????				      eor	#PAL
    265  0000 ????				      sta	Platform	; P1 difficulty --> TV system (0=NTSC, 1=PAL)
    266  0000 ????				      ENDM
    267  0000 ????
    268  0000 ????
    269  0000 ????						;---------------------------------------------------------------------------------------------------
    270  0000 ????
    271  0000 ????				      MAC	jsram_safe
    272  0000 ????						; Saves bank of routine to variable for later restore.
    273  0000 ????						; Switches to the bank and does a JSR to the routine.
    274  0000 ????
    275  0000 ????				      lda	#BANK_{1}
    276  0000 ????				      sta	savedBank
    277  0000 ????				      sta	SET_BANK
    278  0000 ????				      jsr	{1}
    279  0000 ????				      ENDM		; {routine}
    280  0000 ????
    281  0000 ????
    282  0000 ????				      MAC	jsram
    283  0000 ????
    284  0000 ????				      lda	#BANK_{1}
    285  0000 ????				      sta	SET_BANK
    286  0000 ????				      jsr	{1}
    287  0000 ????				      ENDM		; {routine}
    288  0000 ????
    289  0000 ????						;---------------------------------------------------------------------------------------------------
    290  0000 ????
------- FILE zeropage.asm LEVEL 2 PASS 2
      0  0000 ????				      include	"zeropage.asm"
      1  0000 ????						; Chess
      2  0000 ????						; Atari 2600 Chess display system
      3  0000 ????						; Copyright (c) 2019-2020 Andrew Davie
      4  0000 ????						; andrew@taswegian.com
      5  0000 ????
      6 U00f3 ????				      SEG.U	variables
      7 U0080					      ORG	$80
      8 U0080		       00	   drawPieceNumber ds	1	; partial - square being drawn
      9 U0081
     10 U0081		       00	   rnd	      ds	1	; random
     11 U0082		       00	   drawPhase  ds	1	; ticks through the board draw process
     12 U0083		       00	   drawDelay  ds	1
     13 U0084		       00	   lastSquare ds	1
     14 U0085		       00	   drawCount  ds	1
     15 U0086		       00	   fromX12    ds	1
     16 U0087		       00	   toX12      ds	1
     17 U0088		       00 00	   highlight_row ds	2
     18 U008a		       00 00	   highlight_col ds	2
     19 U008c		       00	   mdelay     ds	1
     20 U008d		       00	   ccur       ds	1
     21 U008e		       00	   savedBank  ds	1	; switched-in bank for FIXED returns
     22 U008f		       00	   aiPhase    ds	1	; human/computer state machine
     23 U0090		       00	   aiFlashDelay ds	1
     24 U0091		       00	   aiFromSquare ds	1
     25 U0092		       00	   aiToSquare ds	1
     26 U0093		       00	   aiFromSquareX12 ds	1
     27 U0094		       00	   aiToSquareX12 ds	1
     28 U0095		       00	   aiMoveIndex ds	1
     29 U0096
     30 U0096		       00	   aiFlashPhase ds	1
     31 U0097
     32 U0097		       00	   currentPiece ds	1
     33 U0098		       00	   currentSquare ds	1
     34 U0099		       00	   returnBank ds	1
     35 U009a		       00	   enPassantPawn ds	1	; TODO - this belongs in PLY bank
     36 U009b		       00	   followPiece ds	1
     37 U009c		       00	   currentPly ds	1
     38 U009d		       00	   piecelistIndex ds	1
     39 U009e		       00	   sideToMove ds	1	; d7 == side, 0=white, 128 = black
     40 U009f		       00	   fromSquare ds	1
     41 U00a0		       00	   fromPiece  ds	1
     42 U00a1		       00	   toSquare   ds	1
     43 U00a2		       00	   toPiece    ds	1
     44 U00a3		       00	   lastPiece  ds	1
     45 U00a4		       00	   previousPiece ds	1
     46 U00a5
     47 U00a5		       00	   Platform   ds	1	; TV system (%0x=NTSC, %10=PAL-50, %11=PAL-60)
     48 U00a6							;BufferedJoystick		  ds 1	      ; player joystick input
     49 U00a6							;PreviousJoystick		  ds 1
     50 U00a6							;BGColour			  ds 1
     51 U00a6		       00	   aiPiece    ds	1
------- FILE ./chess.asm
------- FILE overlays.asm LEVEL 2 PASS 2
      0 U00a7					      include	"overlays.asm"
      1 U00a7							; Chess
      2 U00a7							; Atari 2600 Chess display system
      3 U00a7							; Copyright (c) 2019-2020 Andrew Davie
      4 U00a7							; andrew@taswegian.com
      5 U00a7
      6 U00a7							;---------------------------------------------------------------------------------------------------
      7 U00a7							; OVERLAYS!
      8 U00a7							; These variables are overlays, and should be managed with care
      9 U00a7							; They co-exist (each "OVERLAY" starts at the zero-page variable "Overlay"
     10 U00a7							; and thus, overlays cannot be used at the same time (that is, you cannot
     11 U00a7							; use a variable in overlay #1 while at the same time using a variable in
     12 U00a7							; overlay #2
     13 U00a7
     14 U00a7							; for clarity, prefix ALL overlay variables with double-underscore (__)
     15 U00a7
     16 U00a7							; TOTAL SPACE USED BY ANY OVERLAY GROUP SHOULD BE <= SIZE OF 'Overlay'
     17 U00a7							; ensure this by using the VALIDATE_OVERLAY macro
     18 U00a7							;---------------------------------------------------------------------------------------------------
     19 U00a7
     20 U00a7					      MAC	overlay
     21 U00a7				   OVERLAY_NAME SET	{1}
     22 U00a7					      SEG.U	OVERLAY_{1}
     23 U00a7					      org	Overlay
     24 U00a7					      ENDM		; {name}
     25 U00a7
     26 U00a7							;---------------------------------------------------------------------------------------------------
     27 U00a7
     28 U00a7					      MAC	validate_overlay
     29 U00a7					      LIST	OFF
     30 U00a7				   OVERLAY_DELTA SET	* - Overlay
     31 U00a7					      IF	OVERLAY_DELTA > MAXIMUM_REQUIRED_OVERLAY_SIZE
     32 U00a7				   MAXIMUM_REQUIRED_OVERLAY_SIZE SET	OVERLAY_DELTA
     33 U00a7					      ENDIF
     34 U00a7					      IF	OVERLAY_DELTA > OVERLAY_SIZE
     35 U00a7					      ECHO	"Overlay", OVERLAY_NAME, "is too big!"
     36 U00a7					      ECHO	"REQUIRED SIZE =", OVERLAY_DELTA
     37 U00a7					      ERR
     38 U00a7					      ENDIF
     39 U00a7					      LIST	ON
     40 U00a7					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
     41 U00a7					      ENDM
     42 U00a7
     43 U00a7							;---------------------------------------------------------------------------------------------------
     44 U00a7
     45 U00a7				   OVERLAY_SIZE SET	$4C	; maximum size
     46 U00a7				   MAXIMUM_REQUIRED_OVERLAY_SIZE SET	0
     47 U00a7
     48 U00a7
     49 U00a7							; This overlay variable is used for the overlay variables.  That's OK.
     50 U00a7							; However, it is positioned at the END of the variables so, if on the off chance we're overlapping
     51 U00a7							; stack space and variable, it is LIKELY that that won't be a problem, as the temp variables
     52 U00a7							; (especially the latter ones) are only used in rare occasions.
     53 U00a7
     54 U00a7							; FOR SAFETY, DO NOT USE THIS AREA DIRECTLY (ie: NEVER reference 'Overlay' in the code)
     55 U00a7							; ADD AN OVERLAY FOR EACH ROUTINE'S USE, SO CLASHES CAN BE EASILY CHECKED
     56 U00a7
     57 U00a7		       00 00 00 00*Overlay    ds	OVERLAY_SIZE	;--> overlay (share) variables
     58 U00f3				   END_OF_OVERLAY
     59 U00f3
     60 U00f3							;---------------------------------------------------------------------------------------------------
     61 U00f3							; And now... the overlays....
     62 U00f3
 ---- OVERLAYS ( $4c bytes ) ----
     63 U00f3					      ECHO	"---- OVERLAYS (", OVERLAY_SIZE, "bytes ) ----"
     64 U00f3
     65 U00f3							;---------------------------------------------------------------------------------------------------
     66 U00f3
      0 U00f3					      OVERLAY	"PieceBufferOverlay"
      1 U00f3				   OVERLAY_NAME SET	"PieceBufferOverlay"
      2 U00f3 ????				      SEG.U	OVERLAY_"PieceBufferOverlay"
      3 U00a7					      org	Overlay
     68 U00a7							; used in CopyPieceFromRAMBufferToScreen
     69 U00a7							; used in CopyPieceToRAMBuffer
     70 U00a7							; used in ClearChessBitmap
     71 U00a7							; used in CopyPieceToRowBitmap
     72 U00a7		       00 00 00 00*__pieceShapeBuffer ds	PIECE_SHAPE_SIZE
     73 U00ef		       00 00	   __ptr      ds	2	; pointer to data
     74 U00f1		       00 00	   __ptr2     ds	2	; pointer to data
      0 U00f3					      VALIDATE_OVERLAY
     11 U00f3					      LIST	ON
 PieceBufferOverlay - $0 bytes available
     12 U00f3					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
     76 U00f3
     77 U00f3							;---------------------------------------------------------------------------------------------------
     78 U00f3
      0 U00f3					      OVERLAY	"CopyROMShadowToRAM"
      1 U00f3				   OVERLAY_NAME SET	"CopyROMShadowToRAM"
      2 U00aa ????				      SEG.U	OVERLAY_"CopyROMShadowToRAM"
      3 U00a7					      org	Overlay
     80 U00a7		       00	   __CopyCount ds	1
     81 U00a8		       00	   __ROM_SourceBank ds	1
     82 U00a9		       00	   __index    ds	1
      0 U00aa					      VALIDATE_OVERLAY
     11 U00aa					      LIST	ON
 CopyROMShadowToRAM - $49 bytes available
     12 U00aa					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
     84 U00aa
     85 U00aa							;---------------------------------------------------------------------------------------------------
     86 U00aa
      0 U00aa					      OVERLAY	"DrawTheChessScreen"
      1 U00aa				   OVERLAY_NAME SET	"DrawTheChessScreen"
      2 U00a8 ????				      SEG.U	OVERLAY_"DrawTheChessScreen"
      3 U00a7					      org	Overlay
     88 U00a7		       00	   __rows     ds	1
      0 U00a8					      VALIDATE_OVERLAY
     11 U00a8					      LIST	ON
 DrawTheChessScreen - $4b bytes available
     12 U00a8					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
     90 U00a8
     91 U00a8							;---------------------------------------------------------------------------------------------------
     92 U00a8
      0 U00a8					      OVERLAY	"SetupShadowRAM"
      1 U00a8				   OVERLAY_NAME SET	"SetupShadowRAM"
      2 U00a9 ????				      SEG.U	OVERLAY_"SetupShadowRAM"
      3 U00a7					      org	Overlay
     94 U00a7		       00	   __destinationBank ds	1
     95 U00a8		       00	   __sourceBank ds	1
      0 U00a9					      VALIDATE_OVERLAY
     11 U00a9					      LIST	ON
 SetupShadowRAM - $4a bytes available
     12 U00a9					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
     97 U00a9
     98 U00a9							;---------------------------------------------------------------------------------------------------
      0 U00a9					      OVERLAY	"DrawPiece"
      1 U00a9				   OVERLAY_NAME SET	"DrawPiece"
      2 U00a9 ????				      SEG.U	OVERLAY_"DrawPiece"
      3 U00a7					      org	Overlay
    100 U00a7		       00	   __pieceColour ds	1
    101 U00a8		       00	   __boardc   ds	1
    102 U00a9
      0 U00a9					      VALIDATE_OVERLAY
     11 U00a9					      LIST	ON
 DrawPiece - $4a bytes available
     12 U00a9					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    104 U00a9
    105 U00a9
    106 U00a9							;---------------------------------------------------------------------------------------------------
      0 U00a9					      OVERLAY	"InitPly"
      1 U00a9				   OVERLAY_NAME SET	"InitPly"
      2 U00a8 ????				      SEG.U	OVERLAY_"InitPly"
      3 U00a7					      org	Overlay
    108 U00a7		       00	   __plyBank  ds	1
      0 U00a8					      VALIDATE_OVERLAY
     11 U00a8					      LIST	ON
 InitPly - $4b bytes available
     12 U00a8					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    110 U00a8
    111 U00a8							;---------------------------------------------------------------------------------------------------
      0 U00a8					      OVERLAY	"RandomPiece"
      1 U00a8				   OVERLAY_NAME SET	"RandomPiece"
      2 U00a8 ????				      SEG.U	OVERLAY_"RandomPiece"
      3 U00a7					      org	Overlay
    113 U00a7		       00	   __tempx    ds	1
      0 U00a8					      VALIDATE_OVERLAY
     11 U00a8					      LIST	ON
 RandomPiece - $4b bytes available
     12 U00a8					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    115 U00a8
      0 U00a8					      OVERLAY	"Overlay000"
      1 U00a8				   OVERLAY_NAME SET	"Overlay000"
      2 U00a8 ????				      SEG.U	OVERLAY_"Overlay000"
      3 U00a7					      org	Overlay
    117 U00a7		       00	   __fromRow  ds	1
      0 U00a8					      VALIDATE_OVERLAY
     11 U00a8					      LIST	ON
 Overlay000 - $4b bytes available
     12 U00a8					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    119 U00a8							;---------------------------------------------------------------------------------------------------
      0 U00a8					      OVERLAY	"Overlay001"
      1 U00a8				   OVERLAY_NAME SET	"Overlay001"
      2 U00a9 ????				      SEG.U	OVERLAY_"Overlay001"
      3 U00a7					      org	Overlay
    121 U00a7		       00	   __from     ds	1
    122 U00a8		       00	   __to       ds	1
      0 U00a9					      VALIDATE_OVERLAY
     11 U00a9					      LIST	ON
 Overlay001 - $4a bytes available
     12 U00a9					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    124 U00a9							;---------------------------------------------------------------------------------------------------
    125 U00a9
      0 U00a9					      OVERLAY	"Handlers"
      1 U00a9				   OVERLAY_NAME SET	"Handlers"
      2 U00aa ????				      SEG.U	OVERLAY_"Handlers"
      3 U00a7					      org	Overlay
    127 U00a7		       00	   __piece    ds	1
    128 U00a8		       00 00	   __vector   ds	2
      0 U00aa					      VALIDATE_OVERLAY
     11 U00aa					      LIST	ON
 Handlers - $49 bytes available
     12 U00aa					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    130 U00aa
    131 U00aa							;---------------------------------------------------------------------------------------------------
      0 U00aa					      OVERLAY	"Movers"
      1 U00aa				   OVERLAY_NAME SET	"Movers"
      2 U00aa ????				      SEG.U	OVERLAY_"Movers"
      3 U00a7					      org	Overlay
    133 U00a7		       00	   __fromCol  ds	1
    134 U00a8		       00	   __toCol    ds	1
    135 U00a9		       00	   __temp     ds	1
    136 U00aa
      0 U00aa					      VALIDATE_OVERLAY
     11 U00aa					      LIST	ON
 Movers - $49 bytes available
     12 U00aa					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    138 U00aa
    139 U00aa							;---------------------------------------------------------------------------------------------------
      0 U00aa					      OVERLAY	"checkPieces"
      1 U00aa				   OVERLAY_NAME SET	"checkPieces"
      2 U00a9 ????				      SEG.U	OVERLAY_"checkPieces"
      3 U00a7					      org	Overlay
    141 U00a7		       00	   __x	      ds	1
    142 U00a8		       00	   __bank     ds	1
    143 U00a9
      0 U00a9					      VALIDATE_OVERLAY
     11 U00a9					      LIST	ON
 checkPieces - $4a bytes available
     12 U00a9					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    145 U00a9
    146 U00a9							;---------------------------------------------------------------------------------------------------
      0 U00a9					      OVERLAY	"aiSelectStartSquare"
      1 U00a9				   OVERLAY_NAME SET	"aiSelectStartSquare"
      2 U00a8 ????				      SEG.U	OVERLAY_"aiSelectStartSquare"
      3 U00a7					      org	Overlay
    148 U00a7		       00	   __cursorColour ds	1
      0 U00a8					      VALIDATE_OVERLAY
     11 U00a8					      LIST	ON
 aiSelectStartSquare - $4b bytes available
     12 U00a8					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    150 U00a8
    151 U00a8							;---------------------------------------------------------------------------------------------------
      0 U00a8					      OVERLAY	"TitleScreen"
      1 U00a8				   OVERLAY_NAME SET	"TitleScreen"
      2 U00a9 ????				      SEG.U	OVERLAY_"TitleScreen"
      3 U00a7					      org	Overlay
    153 U00a7		       00 00	   __colour_table ds	2
      0 U00a9					      VALIDATE_OVERLAY
     11 U00a9					      LIST	ON
 TitleScreen - $4a bytes available
     12 U00a9					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    155 U00a9							;---------------------------------------------------------------------------------------------------
    156 U00a9
      0 U00a9					      OVERLAY	"SAFE_showMoveOptions"
      1 U00a9				   OVERLAY_NAME SET	"SAFE_showMoveOptions"
      2 U00ff ????				      SEG.U	OVERLAY_"SAFE_showMoveOptions"
      3 U00a7					      org	Overlay
    158 U00a7		       00 00	   __moveDotColour ds	2
      0 U00a9					      VALIDATE_OVERLAY
     11 U00a9					      LIST	ON
 SAFE_showMoveOptions - $4a bytes available
     12 U00a9					      ECHO	OVERLAY_NAME, "-", OVERLAY_SIZE - ( * - Overlay ), "bytes available"
    160 U00a9							;---------------------------------------------------------------------------------------------------
    161 U00a9
    162 U00f3					      ORG	END_OF_OVERLAY
 ---- END OF OVERLAYS ----
    163 U00f3					      ECHO	"---- END OF OVERLAYS ----"
 MAXIMUM OVERLAY SIZE NEEDED =  $4c
    164 U00f3					      ECHO	"MAXIMUM OVERLAY SIZE NEEDED = ", MAXIMUM_REQUIRED_OVERLAY_SIZE
    165 U00f3
    166 U00f3							;EOF
------- FILE ./chess.asm
------- FILE stack.asm LEVEL 2 PASS 2
      0 U00f3					      include	"stack.asm"
      1 U00f3							; Chess
      2 U00f3							; Atari 2600 Chess display system
      3 U00f3							; Copyright (c) 2019-2020 Andrew Davie
      4 U00f3							; andrew@taswegian.com
      5 U00f3
      6 U00f3
      7 U00f3		       00 0c	   RESERVED_FOR_STACK =	12	; bytes guaranteed not overwritten by variable use
      8 U00f3
      9 U00f3		       00 00 00 00*	      ds	RESERVED_FOR_STACK
     10 U00ff
     11 U00ff							; WARNING/NOTE - the alphabeta search violates the above size constraints
     12 U00ff							; HOWEVER, the "OVERLAY" segment is beneath this, and will be stomped, depending on # plys
     13 U00ff							;  but since overlay is not generally stressed during alphabeta, we're good.
------- FILE ./chess.asm
    294 U00ff
 FREE BYTES IN ZERO PAGE =  $0
    295 U00ff					      ECHO	"FREE BYTES IN ZERO PAGE = ", $FF - *
    296 U00ff				  -	      IF	* > $FF
    297 U00ff				  -	      ERR	"Zero Page overflow!"
    298 U00ff					      ENDIF
    299 U00ff
    300 U00ff							;------------------------------------------------------------------------------
    301 U00ff							;##############################################################################
    302 U00ff							;------------------------------------------------------------------------------
    303 U00ff
    304 U00ff							; NOW THE VERY INTERESTING '3E' RAM BANKS
    305 U00ff							; EACH BANK HAS A READ-ADDRESS AND A WRITE-ADDRESS, WITH 1k TOTAL ACCESSIBLE
    306 U00ff							; IN A 2K MEMORY SPACE
    307 U00ff
      0 U00ff					      NEWRAMBANK	CHESS_BOARD_ROW
      1 U00ff
      2 U00ff
      3 U00ff
      4 U0000 ????				      SEG.U	CHESS_BOARD_ROW
      5 U0000					      ORG	ORIGIN_RAM
      6 U0000					      RORG	RAM_3E
      7 U0000				   BANK_START SET	*
      8 U0000				   RAMBANK_CHESS_BOARD_ROW SET	ORIGIN_RAM / RAM_SIZE
      9 U0000				   _CURRENT_RAMBANK SET	RAMBANK_CHESS_BOARD_ROW
     10 U0000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    309 U0000					      REPEAT	(CHESSBOARD_ROWS) - 1
      0 U0000					      NEWRAMBANK	.DUMMY
      1 U0000
      2 U0000
      3 U0000
      4 U1c00 ????				      SEG.U	.DUMMY
      5 U0400					      ORG	ORIGIN_RAM
      6 U0400					      RORG	RAM_3E
      7 U0400				   BANK_START SET	*
      8 U0400				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U0400				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U0400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0400					      VALIDATE_RAM_SIZE
      1 U0400				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U0400				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U0400				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U0400				  -	      ERR
      5 U0400					      ENDIF
    309 U0400					      REPEND
      0 U0400					      NEWRAMBANK	.DUMMY
      1 U0400
      2 U0400
      3 U0400
      4 U0400					      SEG.U	.DUMMY
      5 U0800					      ORG	ORIGIN_RAM
      6 U0800					      RORG	RAM_3E
      7 U0800				   BANK_START SET	*
      8 U0800				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U0800				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U0800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0800					      VALIDATE_RAM_SIZE
      1 U0800				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U0800				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U0800				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U0800				  -	      ERR
      5 U0800					      ENDIF
    309 U0800					      REPEND
      0 U0800					      NEWRAMBANK	.DUMMY
      1 U0800
      2 U0800
      3 U0800
      4 U0800					      SEG.U	.DUMMY
      5 U0c00					      ORG	ORIGIN_RAM
      6 U0c00					      RORG	RAM_3E
      7 U0c00				   BANK_START SET	*
      8 U0c00				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U0c00				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U0c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0c00					      VALIDATE_RAM_SIZE
      1 U0c00				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U0c00				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U0c00				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U0c00				  -	      ERR
      5 U0c00					      ENDIF
    309 U0c00					      REPEND
      0 U0c00					      NEWRAMBANK	.DUMMY
      1 U0c00
      2 U0c00
      3 U0c00
      4 U0c00					      SEG.U	.DUMMY
      5 U1000					      ORG	ORIGIN_RAM
      6 U1000					      RORG	RAM_3E
      7 U1000				   BANK_START SET	*
      8 U1000				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U1000				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U1000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1000					      VALIDATE_RAM_SIZE
      1 U1000				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U1000				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U1000				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U1000				  -	      ERR
      5 U1000					      ENDIF
    309 U1000					      REPEND
      0 U1000					      NEWRAMBANK	.DUMMY
      1 U1000
      2 U1000
      3 U1000
      4 U1000					      SEG.U	.DUMMY
      5 U1400					      ORG	ORIGIN_RAM
      6 U1400					      RORG	RAM_3E
      7 U1400				   BANK_START SET	*
      8 U1400				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U1400				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U1400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1400					      VALIDATE_RAM_SIZE
      1 U1400				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U1400				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U1400				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U1400				  -	      ERR
      5 U1400					      ENDIF
    309 U1400					      REPEND
      0 U1400					      NEWRAMBANK	.DUMMY
      1 U1400
      2 U1400
      3 U1400
      4 U1400					      SEG.U	.DUMMY
      5 U1800					      ORG	ORIGIN_RAM
      6 U1800					      RORG	RAM_3E
      7 U1800				   BANK_START SET	*
      8 U1800				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U1800				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U1800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1800					      VALIDATE_RAM_SIZE
      1 U1800				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U1800				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U1800				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U1800				  -	      ERR
      5 U1800					      ENDIF
    309 U1800					      REPEND
      0 U1800					      NEWRAMBANK	.DUMMY
      1 U1800
      2 U1800
      3 U1800
      4 U1800					      SEG.U	.DUMMY
      5 U1c00					      ORG	ORIGIN_RAM
      6 U1c00					      RORG	RAM_3E
      7 U1c00				   BANK_START SET	*
      8 U1c00				   RAMBANK_.DUMMY SET	ORIGIN_RAM / RAM_SIZE
      9 U1c00				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY
     10 U1c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1c00					      VALIDATE_RAM_SIZE
      1 U1c00				   .RAM_BANK_SIZE SET	* - RAM_3E
      2 U1c00				  -	      IF	.RAM_BANK_SIZE > RAM_SIZE
      3 U1c00				  -	      ECHO	"RAM BANK OVERFLOW @ ", (* - RAM_3E)
      4 U1c00				  -	      ERR
      5 U1c00					      ENDIF
    312 U1c00					      REPEND
    313 U1c00
    314 U1c00							; NOTE: THIS BANK JUST *LOOKS* EMPTY.
    315 U1c00							; It actually contains everything copied from the ROM copy of the ROW RAM banks.
    316 U1c00							; The variable definitions are also in that ROM bank (even though they're RAM :)
    317 U1c00
    318 U1c00							; A neat feature of having multiple copies of the same code in different RAM banks
    319 U1c00							; is that we can use that code to switch between banks, and the system will happily
    320 U1c00							; execute the next instruction from the newly switched-in bank without a problem.
    321 U1c00
    322 U1c00							; Now we have the actual graphics data for each of the rows.  This consists of an
    323 U1c00							; actual bitmap (in exact PF-style format, 6 bytes per line) into which the
    324 U1c00							; character shapes are masked/copied. The depth of the character shapes may be
    325 U1c00							; changed by changing the #LINES_PER_CHAR value.  Note that this depth should be
    326 U1c00							; a multiple of 3, so that the RGB scanlines match at character joins.
    327 U1c00
    328 U1c00							; We have one bank for each chessboard row.  These banks are duplicates of the above,
    329 U1c00							; accessed via the above labels but with the appropriate bank switched in.
    330 U1c00
    331 U1c00							;------------------------------------------------------------------------------
    332 U1c00
    333 U1c00
    334 U1c00							;---------------------------------------------------------------------------------------------------
    335 U1c00
    336 U1c00
    337 U1c00		       00 fe	   RND_EOR_VAL =	$FE	;B4
    338 U1c00
    339 U1c00					      MAC	next_random
    340 U1c00					      lda	rnd
    341 U1c00					      lsr
    342 U1c00					      bcc	.skipEOR
    343 U1c00					      eor	#RND_EOR_VAL
    344 U1c00				   .skipEOR   sta	rnd
    345 U1c00					      ENDM
    346 U1c00
    347 U1c00							;--------------------------------------------------------------------------------
    348 U1c00
    349 U1c00					      MAC	phase
    350 U1c00					      lda	#{1}
    351 U1c00					      sta	aiPhase
    352 U1c00					      ENDM		;#
    353 U1c00
    354 U1c00							;--------------------------------------------------------------------------------
    355 U1c00
    356 U1c00							;ORIGIN      SET 0
    357 U1c00
------- FILE Handler_MACROS.asm LEVEL 2 PASS 2
      0 U1c00					      include	"Handler_MACROS.asm"
      1 U1c00							; Copyright (C)2020 Andrew Davie
      2 U1c00							; Common macros for piece move handlers
      3 U1c00
      4 U1c00							;---------------------------------------------------------------------------------------------------
      5 U1c00							; Looks at a square offset {1} to see if piece can move to it
      6 U1c00							; Adds the square to the movelist if it can
      7 U1c00							; Keeps moving in the same direction until it's blocked/off=board
      8 U1c00
      9 U1c00					      MAC	move_towards
     10 U1c00					      SUBROUTINE
     11 U1c00							; = 76 for single square (empty/take)
     12 U1c00
     13 U1c00					      ldx	currentSquare	; 3
     14 U1c00					      bne	.project	; 3   unconditional
     15 U1c00
     16 U1c00				   .empty     jsr	AddMove	; 57
     17 U1c00				   .project   ldy	ValidSquare+{1},x	; 4
     18 U1c00					      bmi	.invalid	; 2/3 off board!
     19 U1c00					      lda	Board,y	; 4   piece @ destination
     20 U1c00					      beq	.empty	; 2/3
     21 U1c00					      eor	currentPiece	; 3
     22 U1c00					      bpl	.invalid	; 2/3 same colour
     23 U1c00					      jsr	AddMove	; 57  and exit
     24 U1c00
     25 U1c00				   .invalid
     26 U1c00					      ENDM
     27 U1c00
     28 U1c00							;---------------------------------------------------------------------------------------------------
     29 U1c00
     30 U1c00					      MAC	move_to
     31 U1c00					      SUBROUTINE
     32 U1c00					      ldy	ValidSquare+{1},x
     33 U1c00					      bmi	.invalid	; off board!
     34 U1c00					      lda	Board,y	; piece @ destination
     35 U1c00					      beq	.squareEmpty
     36 U1c00					      eor	currentPiece
     37 U1c00					      bpl	.invalid	; same colour
     38 U1c00				   .squareEmpty jsr	AddMove
     39 U1c00				   .invalid
     40 U1c00					      ENDM
     41 U1c00
     42 U1c00
     43 U1c00					      MAC	move_to_x
     44 U1c00					      ldx	currentSquare
     45 U1c00					      MOVE_TO	{1}
     46 U1c00					      ENDM
     47 U1c00
     48 U1c00
     49 U1c00							;---------------------------------------------------------------------------------------------------
     50 U1c00							; EOF
------- FILE ./chess.asm
    359 U1c00
------- FILE BANK_GENERIC.asm LEVEL 2 PASS 2
      0 U1c00					      include	"BANK_GENERIC.asm"
      1 U1c00
      0 U1c00					      NEWBANK	GENERIC_BANK_1
      1  0164 ????				      SEG	GENERIC_BANK_1
      2  0000					      ORG	ORIGIN
      3  0000					      RORG	$F000
      4  0000				   BANK_START SET	*
      5  0000				   GENERIC_BANK_1 SET	ORIGIN / 2048
      6  0000				   ORIGIN     SET	ORIGIN + 2048
      7  0000				   _CURRENT_BANK SET	GENERIC_BANK_1
      3  0000
      0  0000					      DEFINE_1K_SEGMENT	DECODE_LEVEL_SHADOW
      1  0000					      ALIGN	$400
      2  0000				   SEGMENT_DECODE_LEVEL_SHADOW SET	*
      3  0000				   BANK_DECODE_LEVEL_SHADOW SET	_CURRENT_BANK
      5  0000
      6  0000				  -	      if	0
      7  0000				  -	      IF	PLUSCART = YES
      8  0000				  -	      .byte	"ChessAPI.php", #0 //TODO: change!
      9  0000				  -	      .byte	"pluscart.firmaplus.de", #0
     10  0000				  -	      ENDIF
     11  0000					      endif
     12  0000
     13  0000		       85 3e a9 00 STELLA_AUTODETECT .byte.b	$85,$3e,$a9,$00	; 3E
     14  0004
      0  0004					      CHECK_HALF_BANK_SIZE	"GENERIC_BANK_1 (DECODE_LEVEL)"
      1  0004
      2  0004
      3  0004		       00 04	   .TEMP      =	* - BANK_START
 GENERIC_BANK_1 (DECODE_LEVEL) (1K) SIZE =  $4 , FREE= $3fc
      4  0004					      ECHO	"GENERIC_BANK_1 (DECODE_LEVEL)", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  0004				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  0004				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  0004				  -	      ERR
      8  0004					      endif
     16  0004
     17  0004							;---------------------------------------------------------------------------------------------------
     18  0004							; ... the above is a (potentially) RAM-copied section -- the following is ROM-only.  Note that
     19  0004							; we do not configure a 1K boundary, as we con't really care when the above 'RAM'
     20  0004							; bank finishes.  Just continue on from where it left off...
     21  0004							;---------------------------------------------------------------------------------------------------
     22  0004
      0  0004					      DEF	Cart_Init
      1  0004				   BANK_Cart_Init SET	_CURRENT_BANK
      2  0004
      3  0004				   Cart_Init
     24  0004					      SUBROUTINE
     25  0004
     26  0004		       a9 00		      lda	#0
     27  0006		       8d 83 02 	      sta	SWBCNT	; console I/O always set to INPUT
     28  0009		       8d 81 02 	      sta	SWACNT	; set controller I/O to INPUT
     29  000c		       85 6b		      sta	HMCLR
     30  000e
     31  000e							; cleanup remains of title screen
     32  000e		       85 5b		      sta	GRP0
     33  0010		       85 5c		      sta	GRP1
     34  0012
     35  0012		       a9 10		      lda	#%00010000	; double width missile, double width player
     36  0014		       85 44		      sta	NUSIZ0
     37  0016		       85 45		      sta	NUSIZ1
     38  0018
     39  0018		       a9 04		      lda	#%100	; players/missiles BEHIND BG
     40  001a		       85 4a		      sta	CTRLPF
     41  001c
     42  001c		       60		      rts
     43  001d
     44  001d
     45  001d							;---------------------------------------------------------------------------------------------------
     46  001d
      0  001d					      DEF	Resync
      1  001d				   BANK_Resync SET	_CURRENT_BANK
      2  001d
      3  001d				   Resync
     48  001d					      SUBROUTINE
     49  001d
      0  001d					      RESYNC
      1  001d
      2  001d		       a9 02		      lda	#%10
      3  001f		       85 41		      sta	VBLANK
      4  0021
      5  0021		       a2 08		      ldx	#8
      6  0023				   .loopResync
      0  0023					      VERTICAL_SYNC
      1  0023		       a9 0e		      lda	#%1110
      2  0025		       85 42	   .VSLP1     sta	WSYNC
      3  0027		       85 40		      sta	VSYNC
      4  0029		       4a		      lsr
      5  002a		       d0 f9		      bne	.VSLP1
      8  002c
      9  002c		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  002e		       a5 a5		      lda	Platform
     11  0030		       49 02		      eor	#PAL_50
     12  0032		       d0 02		      bne	.ntsc
     13  0034		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  0036				   .ntsc
     15  0036				   .loopWait
     16  0036		       85 42		      sta	WSYNC
     17  0038		       85 42		      sta	WSYNC
     18  003a		       88		      dey
     19  003b		       d0 f9		      bne	.loopWait
     20  003d		       ca		      dex
     21  003e		       d0 e3		      bne	.loopResync
     51  0040		       60		      rts
     52  0041
     53  0041
     54  0041							;---------------------------------------------------------------------------------------------------
     55  0041
      0  0041					      DEF	aiStartClearBoard
      1  0041				   BANK_aiStartClearBoard SET	_CURRENT_BANK
      2  0041
      3  0041				   aiStartClearBoard
     57  0041					      SUBROUTINE
     58  0041
     59  0041		       a2 08		      ldx	#8
     60  0043		       86 85		      stx	drawCount	; = bank
     61  0045		       e6 82		      inc	drawPhase
     62  0047
     63  0047		       a9 ff		      lda	#-1
     64  0049		       85 88		      sta	highlight_row
     65  004b
      0  004b					      PHASE	AI_ClearEachRow
      1  004b		       a9 0f		      lda	#AI_ClearEachRow
      2  004d		       85 8f		      sta	aiPhase
     67  004f		       60		      rts
     68  0050
     69  0050							;---------------------------------------------------------------------------------------------------
     70  0050
      0  0050					      DEF	aiClearEachRow
      1  0050				   BANK_aiClearEachRow SET	_CURRENT_BANK
      2  0050
      3  0050				   aiClearEachRow
     72  0050					      SUBROUTINE
     73  0050
     74  0050		       c6 85		      dec	drawCount
     75  0052		       30 05		      bmi	.bitmapCleared
     76  0054		       a4 85		      ldy	drawCount
     77  0056		       4c b8 f8 	      jmp	CallClear
     78  0059
     79  0059				   .bitmapCleared
     80  0059
     81  0059		       a9 3f		      lda	#63
     82  005b		       85 80		      sta	drawPieceNumber
     83  005d
     84  005d		       e6 82		      inc	drawPhase
     85  005f
      0  005f					      PHASE	AI_DrawEntireBoard
      1  005f		       a9 10		      lda	#AI_DrawEntireBoard
      2  0061		       85 8f		      sta	aiPhase
     87  0063		       60		      rts
     88  0064
     89  0064
     90  0064							;---------------------------------------------------------------------------------------------------
     91  0064
      0  0064					      DEF	aiFB3
      1  0064				   BANK_aiFB3 SET	_CURRENT_BANK
      2  0064
      3  0064				   aiFB3
     93  0064					      SUBROUTINE
     94  0064
     95  0064		       a9 00		      lda	#BLANK
     96  0066		       85 a4		      sta	previousPiece
     97  0068
     98  0068		       e6 82		      inc	drawPhase
      0  006a					      PHASE	AI_EraseStartPiece
      1  006a		       a9 16		      lda	#AI_EraseStartPiece
      2  006c		       85 8f		      sta	aiPhase
    100  006e		       60		      rts
    101  006f
    102  006f							;---------------------------------------------------------------------------------------------------
    103  006f
      0  006f					      DEF	aiEraseStartPiece
      1  006f				   BANK_aiEraseStartPiece SET	_CURRENT_BANK
      2  006f
      3  006f				   aiEraseStartPiece
    105  006f					      SUBROUTINE
    106  006f
    107  006f		       a5 a1		      lda	toSquare
    108  0071		       c5 9f		      cmp	fromSquare
    109  0073		       f0 0e		      beq	.idleErase
    110  0075
    111  0075		       a9 06		      lda	#6	; on/off count
    112  0077		       85 85		      sta	drawCount	; flashing for piece about to move
    113  0079		       a9 00		      lda	#0
    114  007b		       85 83		      sta	drawDelay
    115  007d
    116  007d		       e6 82		      inc	drawPhase
      0  007f					      PHASE	AI_WriteStartPieceBlank
      1  007f		       a9 17		      lda	#AI_WriteStartPieceBlank
      2  0081		       85 8f		      sta	aiPhase
    118  0083		       60	   .idleErase rts
    119  0084
    120  0084
    121  0084							;---------------------------------------------------------------------------------------------------
    122  0084
      0  0084					      DEF	aiWriteStartPieceBlank
      1  0084				   BANK_aiWriteStartPieceBlank SET	_CURRENT_BANK
      2  0084
      3  0084				   aiWriteStartPieceBlank
    124  0084					      SUBROUTINE
    125  0084
    126  0084							; Flash the piece in-place preparatory to moving it.
    127  0084							; drawDelay = flash speed
    128  0084							; drawCount = # of flashes
    129  0084
    130  0084		       a5 83		      lda	drawDelay
    131  0086		       f0 03		      beq	deCount
    132  0088		       c6 83		      dec	drawDelay
    133  008a		       60		      rts
    134  008b
    135  008b				   deCount
    136  008b
    137  008b		       a5 85		      lda	drawCount
    138  008d		       f0 0e		      beq	flashDone
    139  008f		       c6 85		      dec	drawCount
    140  0091
    141  0091		       a9 04		      lda	#4
    142  0093		       85 83		      sta	drawDelay	; "getting ready to move" flash
    143  0095
    144  0095		       a5 9f		      lda	fromSquare
    145  0097		       85 80		      sta	drawPieceNumber
    146  0099		       20 d0 fd 	      jsr	SAFE_CopySinglePiece	; EOR-draw = flash
    147  009c		       60		      rts
    148  009d
    149  009d		       e6 82	   flashDone  inc	drawPhase
    150  009f							;		      PHASE AI_DEB2
      0  009f					      PHASE	AI_MarchToTargetA
      1  009f		       a9 18		      lda	#AI_MarchToTargetA
      2  00a1		       85 8f		      sta	aiPhase
    152  00a3		       60		      rts
    153  00a4
    154  00a4
    155  00a4							;---------------------------------------------------------------------------------------------------
    156  00a4
      0  00a4					      DEF	aiDEB2
      1  00a4				   BANK_aiDEB2 SET	_CURRENT_BANK
      2  00a4
      3  00a4				   aiDEB2
    158  00a4					      SUBROUTINE
    159  00a4
    160  00a4		       20 d0 fd 	      jsr	SAFE_CopySinglePiece
    161  00a7		       c6 80		      dec	drawPieceNumber
    162  00a9		       30 07		      bmi	.comp
    163  00ab
    164  00ab		       c6 82		      dec	drawPhase
      0  00ad					      PHASE	AI_DrawEntireBoard
      1  00ad		       a9 10		      lda	#AI_DrawEntireBoard
      2  00af		       85 8f		      sta	aiPhase
    166  00b1
    167  00b1		       60		      rts
    168  00b2
    169  00b2		       e6 82	   .comp      inc	drawPhase
      0  00b4					      PHASE	AI_FlipBuffers
      1  00b4		       a9 12		      lda	#AI_FlipBuffers
      2  00b6		       85 8f		      sta	aiPhase
    171  00b8		       60		      rts
    172  00b9
    173  00b9
    174  00b9							;---------------------------------------------------------------------------------------------------
    175  00b9
      0  00b9					      DEF	aiMarchB
      1  00b9				   BANK_aiMarchB SET	_CURRENT_BANK
      2  00b9
      3  00b9				   aiMarchB
    177  00b9					      SUBROUTINE
    178  00b9
    179  00b9							; Draw the piece in the new square
    180  00b9
    181  00b9		       a5 9f		      lda	fromSquare
    182  00bb		       85 80		      sta	drawPieceNumber
    183  00bd		       20 d0 fd 	      jsr	SAFE_CopySinglePiece	; draw the moving piece into the new square
    184  00c0
    185  00c0		       a9 06		      lda	#6	; snail trail delay
    186  00c2		       85 83		      sta	drawDelay
    187  00c4
    188  00c4		       e6 82		      inc	drawPhase
      0  00c6					      PHASE	AI_MarchToTargetB
      1  00c6		       a9 1a		      lda	#AI_MarchToTargetB
      2  00c8		       85 8f		      sta	aiPhase
    190  00ca
    191  00ca		       60		      rts
    192  00cb
    193  00cb
    194  00cb							;---------------------------------------------------------------------------------------------------
    195  00cb
      0  00cb					      DEF	aiFinalFlash
      1  00cb				   BANK_aiFinalFlash SET	_CURRENT_BANK
      2  00cb
      3  00cb				   aiFinalFlash
    197  00cb					      SUBROUTINE
    198  00cb
    199  00cb		       a5 83		      lda	drawDelay
    200  00cd		       f0 03		      beq	.deCount
    201  00cf		       c6 83		      dec	drawDelay
    202  00d1		       60		      rts
    203  00d2
    204  00d2		       a5 85	   .deCount   lda	drawCount
    205  00d4		       f0 0e		      beq	flashDone2
    206  00d6		       c6 85		      dec	drawCount
    207  00d8
    208  00d8		       a9 0a		      lda	#10
    209  00da		       85 83		      sta	drawDelay	; "getting ready to move" flash
    210  00dc
    211  00dc		       a5 9f		      lda	fromSquare
    212  00de		       85 80		      sta	drawPieceNumber
    213  00e0		       20 d0 fd 	      jsr	SAFE_CopySinglePiece
    214  00e3		       60		      rts
    215  00e4
    216  00e4		       e6 82	   flashDone2 inc	drawPhase
      0  00e6					      PHASE	AI_SpecialMoveFixup
      1  00e6		       a9 1d		      lda	#AI_SpecialMoveFixup
      2  00e8		       85 8f		      sta	aiPhase
    218  00ea		       60		      rts
    219  00eb
    220  00eb
    221  00eb							;---------------------------------------------------------------------------------------------------
    222  00eb
      0  00eb					      DEF	CastleFixup
      1  00eb				   BANK_CastleFixup SET	_CURRENT_BANK
      2  00eb
      3  00eb				   CastleFixup
    224  00eb					      SUBROUTINE
    225  00eb
    226  00eb		       20 7f f9 	      jsr	debug
    227  00ee
    228  00ee
    229  00ee							; fixup any castling issues
    230  00ee							; at this point the king has finished his two-square march
    231  00ee							; based on the finish square, we determine which rook we're interacting with
    232  00ee							; and generate a 'move' for the rook to position on the other side of the king
    233  00ee
    234  00ee
    235  00ee		       a5 a0		      lda	fromPiece
    236  00f0		       29 10		      and	#FLAG_CASTLE
    237  00f2		       f0 31		      beq	.noCast	; NOT involved in castle!
    238  00f4
    239  00f4		       a2 04		      ldx	#4
    240  00f6		       a5 a1		      lda	toSquare
    241  00f8		       ca	   .findCast  dex
    242  00f9		       30 2a		      bmi	.noCast
    243  00fb		       dd 2c f1 	      cmp	KSquare,x
    244  00fe		       d0 f8		      bne	.findCast
    245  0100
    246  0100
    247  0100		       bd 34 f1 	      lda	RSquareEnd,x
    248  0103		       85 87		      sta	toX12
    249  0105		       bd 38 f1 	      lda	RSquareStart64,x
    250  0108		       85 9f		      sta	fromSquare
    251  010a		       bd 3c f1 	      lda	RSquareEnd64,x
    252  010d		       85 a1		      sta	toSquare
    253  010f
    254  010f		       bc 30 f1 	      ldy	RSquareStart,x
    255  0112		       84 86		      sty	fromX12
    256  0114
    257  0114		       a5 a0		      lda	fromPiece
    258  0116		       29 80		      and	#128
    259  0118		       09 05		      ora	#ROOK	; preserve colour
    260  011a		       85 a0		      sta	fromPiece
    261  011c
    262  011c		       a9 07		      lda	#CSL
    263  011e		       85 82		      sta	drawPhase
    264  0120
      0  0120					      PHASE	AI_FB3
      1  0120		       a9 15		      lda	#AI_FB3
      2  0122		       85 8f		      sta	aiPhase
    266  0124
    267  0124		       60		      rts
    268  0125
    269  0125				   .noCast
    270  0125
    271  0125		       a5 9e		      lda	sideToMove
    272  0127		       49 80		      eor	#128
    273  0129		       85 9e		      sta	sideToMove	; swap
    274  012b
    275  012b							;bmi .skip			  ; not human's turn?
    276  012b
    277  012b							;PHASE AI_Halt ;tmp SartMoveGen
    278  012b
    279  012b		       60	   .skip      rts
    280  012c
    281  012c
    282  012c		       02 06 3a 3e KSquare    .byte.b	2,6,58,62
    283  0130		       16 1d 5c 63 RSquareStart .byte.b	22,29,92,99
    284  0134		       19 1b 5f 61 RSquareEnd .byte.b	25,27,95,97
    285  0138		       00 07 38 3f RSquareStart64 .byte.b	0,7,56,63
    286  013c		       03 05 3b 3d RSquareEnd64 .byte.b	3,5,59,61
    287  0140
    288  0140
    289  0140							;---------------------------------------------------------------------------------------------------
    290  0140
      0  0140					      DEF	SetupBanks
      1  0140				   BANK_SetupBanks SET	_CURRENT_BANK
      2  0140
      3  0140				   SetupBanks
    292  0140					      SUBROUTINE
    293  0140
    294  0140							; SAFE
    295  0140
    296  0140		       a0 07		      ldy	#7
    297  0142		       a2 01	   .copyRowBanks ldx	#BANK_ROM_SHADOW_OF_CHESS_BITMAP
    298  0144		       20 9c fd 	      jsr	SAFE_CopyShadowROMtoRAM
    299  0147		       88		      dey
    300  0148		       10 f8		      bpl	.copyRowBanks
    301  014a
    302  014a							; copy the BOARD/MOVES bank
    303  014a
    304  014a		       a0 08		      ldy	#RAMBANK_MOVES_RAM
    305  014c		       a2 0b		      ldx	#MOVES
    306  014e		       20 9c fd 	      jsr	SAFE_CopyShadowROMtoRAM	; this auto-initialises Board too
    307  0151
    308  0151							; copy the PLY banks
    309  0151
    310  0151		       a9 06		      lda	#MAX_PLY
    311  0153		       85 a7		      sta	__plyBank
    312  0155		       a0 09		      ldy	#RAMBANK_PLY
    313  0157		       84 9c		      sty	currentPly
    314  0159		       a2 0c	   .copyPlyBanks ldx	#BANK_PLY
    315  015b		       20 9c fd 	      jsr	SAFE_CopyShadowROMtoRAM
    316  015e		       c8		      iny
    317  015f		       c6 a7		      dec	__plyBank
    318  0161		       d0 f6		      bne	.copyPlyBanks
    319  0163
    320  0163		       60		      rts
    321  0164
    322  0164
    323  0164							;---------------------------------------------------------------------------------------------------
    324  0164
      0  0164					      CHECK_BANK_SIZE	"GENERIC_BANK_1 -- full 2K"
      1  0164		       01 64	   .TEMP      =	* - BANK_START
 GENERIC_BANK_1 -- full 2K (2K) SIZE =  $164 , FREE= $69c
      2  0164					      ECHO	"GENERIC_BANK_1 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  0164				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  0164				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  0164				  -	      ERR
      6  0164					      endif
------- FILE ./chess.asm
------- FILE BANK_ROM_SHADOW_SCREEN.asm LEVEL 2 PASS 2
      0  0164					      include	"BANK_ROM_SHADOW_SCREEN.asm"
      1  0164
      0  0164					      NEWBANK	BANK_ROM_SHADOW_OF_CHESS_BITMAP
      1  0aec ????				      SEG	BANK_ROM_SHADOW_OF_CHESS_BITMAP
      2  0800					      ORG	ORIGIN
      3  0800					      RORG	$F000
      4  0800				   BANK_START SET	*
      5  0800				   BANK_ROM_SHADOW_OF_CHESS_BITMAP SET	ORIGIN / 2048
      6  0800				   ORIGIN     SET	ORIGIN + 2048
      7  0800				   _CURRENT_BANK SET	BANK_ROM_SHADOW_OF_CHESS_BITMAP
      3  0800
      4  0800							; Template bank for a SINGLE ROW of the chessboard display.
      5  0800							; There are 8x of these.
      6  0800							; The bank contains the definition of the bitmap, and also the code to draw the bitmap
      7  0800							; The bank is copied from ROM into RAM at startup.
      8  0800							; The draw switches between consecutive row banks, with the last returning
      9  0800							; we effectively have 1K
     10  0800							;---------------------------------------------------------------------------------------------------
     11  0800
     12  0800		       00 a6	   COLOUR_LINE_1 =	$a6
     13  0800		       00 4a	   COLOUR_LINE_2 =	$4a
     14  0800		       00 2a	   COLOUR_LINE_3 =	$2a
     15  0800		       00 00	   BACKGCOL   =	$00
     16  0800
     17  0800							; good 94/46/28/0
     18  0800							; good 94/44/26/0
     19  0800
     20  0800
     21  0800		       00 90	   ROW_BITMAP_SIZE =	6 * 24	; PF0/PF1/PF2/(PF0)/(PF1)/(PF2) x 8 ICC pixels
     22  0800
      0  0800					      OPTIONAL_PAGEBREAK	ChessBitmap, ROW_BITMAP_SIZE
     10  0800					      LIST	ON
     24  0800
     25  0800				   ChessBitmap
     26  0800		       00 00 00 00*ChessBitmap0 ds	24
     27  0818		       00 00 00 00*ChessBitmap1 ds	24
     28  0830		       00 00 00 00*ChessBitmap2 ds	24
     29  0848		       00 00 00 00*ChessBitmap3 ds	24
     30  0860		       00 00 00 00*ChessBitmap4 ds	24
     31  0878		       00 00 00 00*ChessBitmap5 ds	24
     32  0890
     33  0890
     34  0890				   BlankSprite
     35  0890		       00 00 00 00*	      ds	8,0
     36  0898
     37  0898				   SpriteBuffer
     38  0898					      REPEAT	24
     39  0898		       f8		      .byte.b	%11111000	;%00011111
     38  0898					      REPEND
     39  0899		       f8		      .byte.b	%11111000	;%00011111
     38  0899					      REPEND
     39  089a		       f8		      .byte.b	%11111000	;%00011111
     38  089a					      REPEND
     39  089b		       f8		      .byte.b	%11111000	;%00011111
     38  089b					      REPEND
     39  089c		       f8		      .byte.b	%11111000	;%00011111
     38  089c					      REPEND
     39  089d		       f8		      .byte.b	%11111000	;%00011111
     38  089d					      REPEND
     39  089e		       f8		      .byte.b	%11111000	;%00011111
     38  089e					      REPEND
     39  089f		       f8		      .byte.b	%11111000	;%00011111
     38  089f					      REPEND
     39  08a0		       f8		      .byte.b	%11111000	;%00011111
     38  08a0					      REPEND
     39  08a1		       f8		      .byte.b	%11111000	;%00011111
     38  08a1					      REPEND
     39  08a2		       f8		      .byte.b	%11111000	;%00011111
     38  08a2					      REPEND
     39  08a3		       f8		      .byte.b	%11111000	;%00011111
     38  08a3					      REPEND
     39  08a4		       f8		      .byte.b	%11111000	;%00011111
     38  08a4					      REPEND
     39  08a5		       f8		      .byte.b	%11111000	;%00011111
     38  08a5					      REPEND
     39  08a6		       f8		      .byte.b	%11111000	;%00011111
     38  08a6					      REPEND
     39  08a7		       f8		      .byte.b	%11111000	;%00011111
     38  08a7					      REPEND
     39  08a8		       f8		      .byte.b	%11111000	;%00011111
     38  08a8					      REPEND
     39  08a9		       f8		      .byte.b	%11111000	;%00011111
     38  08a9					      REPEND
     39  08aa		       f8		      .byte.b	%11111000	;%00011111
     38  08aa					      REPEND
     39  08ab		       f8		      .byte.b	%11111000	;%00011111
     38  08ab					      REPEND
     39  08ac		       f8		      .byte.b	%11111000	;%00011111
     38  08ac					      REPEND
     39  08ad		       f8		      .byte.b	%11111000	;%00011111
     38  08ad					      REPEND
     39  08ae		       f8		      .byte.b	%11111000	;%00011111
     38  08ae					      REPEND
     39  08af		       f8		      .byte.b	%11111000	;%00011111
     40  08b0					      REPEND
     41  08b0
     42  08b0				   SpriteBuffer2
     43  08b0					      REPEAT	24
     44  08b0		       f8		      .byte.b	%11111000	;%00011111
     43  08b0					      REPEND
     44  08b1		       f8		      .byte.b	%11111000	;%00011111
     43  08b1					      REPEND
     44  08b2		       f8		      .byte.b	%11111000	;%00011111
     43  08b2					      REPEND
     44  08b3		       f8		      .byte.b	%11111000	;%00011111
     43  08b3					      REPEND
     44  08b4		       f8		      .byte.b	%11111000	;%00011111
     43  08b4					      REPEND
     44  08b5		       f8		      .byte.b	%11111000	;%00011111
     43  08b5					      REPEND
     44  08b6		       f8		      .byte.b	%11111000	;%00011111
     43  08b6					      REPEND
     44  08b7		       f8		      .byte.b	%11111000	;%00011111
     43  08b7					      REPEND
     44  08b8		       f8		      .byte.b	%11111000	;%00011111
     43  08b8					      REPEND
     44  08b9		       f8		      .byte.b	%11111000	;%00011111
     43  08b9					      REPEND
     44  08ba		       f8		      .byte.b	%11111000	;%00011111
     43  08ba					      REPEND
     44  08bb		       f8		      .byte.b	%11111000	;%00011111
     43  08bb					      REPEND
     44  08bc		       f8		      .byte.b	%11111000	;%00011111
     43  08bc					      REPEND
     44  08bd		       f8		      .byte.b	%11111000	;%00011111
     43  08bd					      REPEND
     44  08be		       f8		      .byte.b	%11111000	;%00011111
     43  08be					      REPEND
     44  08bf		       f8		      .byte.b	%11111000	;%00011111
     43  08bf					      REPEND
     44  08c0		       f8		      .byte.b	%11111000	;%00011111
     43  08c0					      REPEND
     44  08c1		       f8		      .byte.b	%11111000	;%00011111
     43  08c1					      REPEND
     44  08c2		       f8		      .byte.b	%11111000	;%00011111
     43  08c2					      REPEND
     44  08c3		       f8		      .byte.b	%11111000	;%00011111
     43  08c3					      REPEND
     44  08c4		       f8		      .byte.b	%11111000	;%00011111
     43  08c4					      REPEND
     44  08c5		       f8		      .byte.b	%11111000	;%00011111
     43  08c5					      REPEND
     44  08c6		       f8		      .byte.b	%11111000	;%00011111
     43  08c6					      REPEND
     44  08c7		       f8		      .byte.b	%11111000	;%00011111
     45  08c8					      REPEND
     46  08c8				  -	      if	0
     47  08c8				  -	      .byte	%00011111
     48  08c8				  -	      .byte	%00011111
     49  08c8				  -	      .byte	%00011111
     50  08c8				  -	      .byte	%00011111
     51  08c8				  -	      .byte	%00011111
     52  08c8				  -	      .byte	%00011111
     53  08c8				  -	      .byte	%00011111
     54  08c8				  -	      .byte	%00011111
     55  08c8				  -
     56  08c8				  -	      .byte	%00011111
     57  08c8				  -	      .byte	%00011111
     58  08c8				  -	      .byte	%00011111
     59  08c8				  -	      .byte	%00011111
     60  08c8				  -	      .byte	%00011111
     61  08c8				  -	      .byte	%00011111
     62  08c8				  -	      .byte	%00011111
     63  08c8				  -	      .byte	%00011111
     64  08c8				  -
     65  08c8				  -	      .byte	%00011111
     66  08c8				  -	      .byte	%00011111
     67  08c8				  -	      .byte	%00011111
     68  08c8				  -	      .byte	%00011111
     69  08c8				  -	      .byte	%00011111
     70  08c8				  -	      .byte	%00011111
     71  08c8				  -	      .byte	%00011111
     72  08c8				  -	      .byte	%00011111
     73  08c8					      endif
     74  08c8
     75  08c8
     76  08c8							;---------------------------------------------------------------------------------------------------
     77  08c8					      if	1
      0  08c8					      DEF	ClearRowBitmap
      1  08c8				   BANK_ClearRowBitmap SET	_CURRENT_BANK
      2  08c8
      3  08c8				   ClearRowBitmap
     79  08c8
     80  08c8		       a9 00		      lda	#0
     81  08ca		       a0 90		      ldy	#ROW_BITMAP_SIZE
     82  08cc		       99 ff f3    .clearRow  sta	ChessBitmap+RAM_WRITE-1,y
     83  08cf		       88		      dey
     84  08d0		       d0 fa		      bne	.clearRow
     85  08d2		       60		      rts
     86  08d3					      endif
     87  08d3
     88  08d3							;---------------------------------------------------------------------------------------------------
     89  08d3
      0  08d3					      DEF	CopyPieceToRowBitmap
      1  08d3				   BANK_CopyPieceToRowBitmap SET	_CURRENT_BANK
      2  08d3
      3  08d3				   CopyPieceToRowBitmap
     91  08d3
     92  08d3		       a0 11		      ldy	#17
     93  08d5		       b0 30		      bcs	.rightSide
     94  08d7
     95  08d7				   .copyPiece
     96  08d7		       b9 a7 00 	      lda	__pieceShapeBuffer,y
     97  08da		       f0 06		      beq	.blank1
     98  08dc		       59 00 f0 	      eor	ChessBitmap,y
     99  08df		       99 00 f4 	      sta	ChessBitmap+RAM_WRITE,y
    100  08e2
    101  08e2		       b9 b9 00    .blank1    lda	__pieceShapeBuffer+18,y
    102  08e5		       f0 06		      beq	.blank2
    103  08e7		       59 12 f0 	      eor	ChessBitmap+18,y
    104  08ea		       99 12 f4 	      sta	ChessBitmap+RAM_WRITE+18,y
    105  08ed
    106  08ed		       b9 cb 00    .blank2    lda	__pieceShapeBuffer+36,y
    107  08f0		       f0 06		      beq	.blank3
    108  08f2		       59 24 f0 	      eor	ChessBitmap+36,y
    109  08f5		       99 24 f4 	      sta	ChessBitmap+RAM_WRITE+36,y
    110  08f8
    111  08f8		       b9 dd 00    .blank3    lda	__pieceShapeBuffer+54,y
    112  08fb		       f0 06		      beq	.blank4
    113  08fd		       59 36 f0 	      eor	ChessBitmap+54,y
    114  0900		       99 36 f4 	      sta	ChessBitmap+RAM_WRITE+54,y
    115  0903
    116  0903		       88	   .blank4    dey
    117  0904		       10 d1		      bpl	.copyPiece
    118  0906
    119  0906		       60		      rts
    120  0907
    121  0907				   .rightSide
    122  0907
    123  0907					      SUBROUTINE
    124  0907
    125  0907				   .copyPieceR
    126  0907
    127  0907		       b9 a7 00 	      lda	__pieceShapeBuffer,y
    128  090a		       f0 06		      beq	.blank1
    129  090c		       59 48 f0 	      eor	ChessBitmap+72,y
    130  090f		       99 48 f4 	      sta	ChessBitmap+RAM_WRITE+72,y
    131  0912
    132  0912		       b9 b9 00    .blank1    lda	__pieceShapeBuffer+18,y
    133  0915		       f0 06		      beq	.blank2
    134  0917		       59 5a f0 	      eor	ChessBitmap+72+18,y
    135  091a		       99 5a f4 	      sta	ChessBitmap+RAM_WRITE+72+18,y
    136  091d
    137  091d		       b9 cb 00    .blank2    lda	__pieceShapeBuffer+36,y
    138  0920		       f0 06		      beq	.blank3
    139  0922		       59 6c f0 	      eor	ChessBitmap+72+36,y
    140  0925		       99 6c f4 	      sta	ChessBitmap+RAM_WRITE+72+36,y
    141  0928
    142  0928		       b9 dd 00    .blank3    lda	__pieceShapeBuffer+54,y
    143  092b		       f0 06		      beq	.blank4
    144  092d		       59 7e f0 	      eor	ChessBitmap+72+54,y
    145  0930		       99 7e f4 	      sta	ChessBitmap+RAM_WRITE+72+54,y
    146  0933
    147  0933				   .blank4
    148  0933		       88		      dey
    149  0934		       10 d1		      bpl	.copyPieceR
    150  0936
    151  0936		       60		      rts
    152  0937
    153  0937							;---------------------------------------------------------------------------------------------------
    154  0937
    155  0a00		       00 00 00 00*	      ALIGN	256
    156  0a00
    157  0a00							; x = row # (and bank#)
    158  0a00
    159  0a00				   .endline
    160  0a00
    161  0a00							;@59
    162  0a00
    163  0a00							; The following 'inx' is replaced in the LAST row bank with a 'RTS', thus ending the draw loop
    164  0a00							; Note that the other 7 row banks are unmodified (keeping the 'inx')
    165  0a00				   SELFMOD_RTS_ON_LAST_ROW
    166  0a00		       e8		      inx		; 2
    167  0a01
    168  0a01		       86 3e		      stx	SET_BANK_RAM	; 3 @64     BANK switch to next row
    169  0a03
      0  0a03					      DEF	DrawRow
      1  0a03				   BANK_DrawRow SET	_CURRENT_BANK
      2  0a03
      3  0a03				   DrawRow
    171  0a03
    172  0a03							;@64
    173  0a03		       a0 07		      ldy	#7	; 2
    174  0a05		       10 3b		      bpl	.dl2	; 3   (must be 69 here)
    175  0a07
    176  0a07							;@58...
    177  0a07
    178  0a07				   .l3
    179  0a07
    180  0a07		       b9 a8 f0    SMSPRITE16_0 lda	SpriteBuffer+16,y	; 4
    181  0a0a		       85 5b		      sta	GRP0	; 3
    182  0a0c		       b9 c0 f0    SMSPRITE16_1 lda	SpriteBuffer2+16,y	; 4
    183  0a0f		       85 5c		      sta	GRP1	; 3
    184  0a11
    185  0a11							;@-4
    186  0a11
    187  0a11		       a9 a6		      lda	#COLOUR_LINE_1	;#$94			  ; 2
    188  0a13		       85 48		      sta	COLUPF	; 3 @1
    189  0a15
    190  0a15		       b9 10 f0 	      lda	ChessBitmap0+16,y	; 4
    191  0a18		       85 4d		      sta	PF0	; 3
    192  0a1a		       b9 28 f0 	      lda	ChessBitmap1+16,y	; 4
    193  0a1d		       85 4e		      sta	PF1	; 3
    194  0a1f		       b9 40 f0 	      lda	ChessBitmap2+16,y	; 4
    195  0a22		       85 4f		      sta	PF2	; 3 @22
    196  0a24
      0  0a24					      SLEEP	6	; 6 @28
      1  0a24				   .CYCLES    SET	6
      2  0a24
      3  0a24				  -	      IF	.CYCLES < 2
      4  0a24				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0a24				  -	      ERR
      6  0a24					      ENDIF
      7  0a24
      8  0a24				  -	      IF	.CYCLES & 1
      9  0a24				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  0a24				  -	      nop	0
     11  0a24				  -	      ELSE
     12  0a24				  -	      bit	VSYNC
     13  0a24				  -	      ENDIF
     14  0a24				  -.CYCLES    SET	.CYCLES - 3
     15  0a24					      ENDIF
     16  0a24
     17  0a24					      REPEAT	.CYCLES / 2
     18  0a24		       ea		      nop
     17  0a24					      REPEND
     18  0a25		       ea		      nop
     17  0a25					      REPEND
     18  0a26		       ea		      nop
     19  0a27					      REPEND
    198  0a27
    199  0a27		       b9 58 f0 	      lda	ChessBitmap3+16,y	; 4
    200  0a2a		       85 4d		      sta	PF0	; 3
    201  0a2c		       b9 70 f0 	      lda	ChessBitmap4+16,y	; 4
    202  0a2f		       85 4e		      sta	PF1	; 3
    203  0a31		       b9 88 f0 	      lda	ChessBitmap5+16,y	; 4
    204  0a34		       8d 4f 00 	      sta.w	PF2	; 4 @50
    205  0a37
      0  0a37					      SLEEP	4	; 4
      1  0a37				   .CYCLES    SET	4
      2  0a37
      3  0a37				  -	      IF	.CYCLES < 2
      4  0a37				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0a37				  -	      ERR
      6  0a37					      ENDIF
      7  0a37
      8  0a37				  -	      IF	.CYCLES & 1
      9  0a37				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  0a37				  -	      nop	0
     11  0a37				  -	      ELSE
     12  0a37				  -	      bit	VSYNC
     13  0a37				  -	      ENDIF
     14  0a37				  -.CYCLES    SET	.CYCLES - 3
     15  0a37					      ENDIF
     16  0a37
     17  0a37					      REPEAT	.CYCLES / 2
     18  0a37		       ea		      nop
     17  0a37					      REPEND
     18  0a38		       ea		      nop
     19  0a39					      REPEND
    207  0a39
    208  0a39		       88		      dey		; 2
    209  0a3a		       30 c4		      bmi	.endline	; 2 (3)
    210  0a3c
    211  0a3c							;@57
    212  0a3c				   .drawLine
    213  0a3c
      0  0a3c					      SLEEP	11
      1  0a3c				   .CYCLES    SET	11
      2  0a3c
      3  0a3c				  -	      IF	.CYCLES < 2
      4  0a3c				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0a3c				  -	      ERR
      6  0a3c					      ENDIF
      7  0a3c
      8  0a3c					      IF	.CYCLES & 1
      9  0a3c					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0a3c		       04 00		      nop	0
     11  0a3e				  -	      ELSE
     12  0a3e				  -	      bit	VSYNC
     13  0a3e					      ENDIF
     14  0a3e				   .CYCLES    SET	.CYCLES - 3
     15  0a3e					      ENDIF
     16  0a3e
     17  0a3e					      REPEAT	.CYCLES / 2
     18  0a3e		       ea		      nop
     17  0a3e					      REPEND
     18  0a3f		       ea		      nop
     17  0a3f					      REPEND
     18  0a40		       ea		      nop
     17  0a40					      REPEND
     18  0a41		       ea		      nop
     19  0a42					      REPEND
    215  0a42
    216  0a42				   .dl2
    217  0a42		       b9 98 f0    SMSPRITE0_0 lda	SpriteBuffer,y	; 4
    218  0a45		       85 5b		      sta	GRP0	; 3
    219  0a47		       b9 b0 f0    SMSPRITE0_1 lda	SpriteBuffer2,y	; 4
    220  0a4a		       85 5c		      sta	GRP1	; 3
    221  0a4c
    222  0a4c							;@7
    223  0a4c
    224  0a4c		       a9 4a		      lda	#COLOUR_LINE_2	;#$4A			  ; 2
    225  0a4e		       85 48		      sta	COLUPF	; 3 @12
    226  0a50
    227  0a50		       b9 00 f0 	      lda	ChessBitmap0,y	; 4
    228  0a53		       85 4d		      sta	PF0	; 3
    229  0a55		       b9 18 f0 	      lda	ChessBitmap1,y	; 4
    230  0a58		       85 4e		      sta	PF1	; 3
    231  0a5a		       b9 30 f0 	      lda	ChessBitmap2,y	; 4
    232  0a5d		       85 4f		      sta	PF2	; 3 @33
    233  0a5f
      0  0a5f					      SLEEP	3	; 3 @36
      1  0a5f				   .CYCLES    SET	3
      2  0a5f
      3  0a5f				  -	      IF	.CYCLES < 2
      4  0a5f				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0a5f				  -	      ERR
      6  0a5f					      ENDIF
      7  0a5f
      8  0a5f					      IF	.CYCLES & 1
      9  0a5f					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0a5f		       04 00		      nop	0
     11  0a61				  -	      ELSE
     12  0a61				  -	      bit	VSYNC
     13  0a61					      ENDIF
     14  0a61				   .CYCLES    SET	.CYCLES - 3
     15  0a61					      ENDIF
     16  0a61
     17  0a61				  -	      REPEAT	.CYCLES / 2
     18  0a61				  -	      nop
     19  0a61					      REPEND
    235  0a61
    236  0a61		       b9 48 f0 	      lda	ChessBitmap3,y	; 4
    237  0a64		       85 4d		      sta	PF0	; 3
    238  0a66		       b9 60 f0 	      lda	ChessBitmap4,y	; 4
    239  0a69		       85 4e		      sta	PF1	; 3
    240  0a6b		       b9 78 f0 	      lda	ChessBitmap5,y	; 4
    241  0a6e		       85 4f		      sta	PF2	; 3 @57
    242  0a70
      0  0a70					      SLEEP	5
      1  0a70				   .CYCLES    SET	5
      2  0a70
      3  0a70				  -	      IF	.CYCLES < 2
      4  0a70				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0a70				  -	      ERR
      6  0a70					      ENDIF
      7  0a70
      8  0a70					      IF	.CYCLES & 1
      9  0a70					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0a70		       04 00		      nop	0
     11  0a72				  -	      ELSE
     12  0a72				  -	      bit	VSYNC
     13  0a72					      ENDIF
     14  0a72				   .CYCLES    SET	.CYCLES - 3
     15  0a72					      ENDIF
     16  0a72
     17  0a72					      REPEAT	.CYCLES / 2
     18  0a72		       ea		      nop
     19  0a73					      REPEND
    244  0a73
    245  0a73		       b9 a0 f0    SMSPRITE8_0 lda	SpriteBuffer+8,y	; 4
    246  0a76		       85 5b		      sta	GRP0	; 3
    247  0a78		       b9 b8 f0    SMSPRITE8_1 lda	SpriteBuffer2+8,y	; 4
    248  0a7b		       85 5c		      sta	GRP1	; 3
    249  0a7d
    250  0a7d							;@0
    251  0a7d		       a9 2a		      lda	#COLOUR_LINE_3	;#$28			  ; 2
    252  0a7f		       85 48		      sta	COLUPF	; 3 @5
    253  0a81
    254  0a81		       b9 08 f0 	      lda	ChessBitmap0+8,y	; 4
    255  0a84		       85 4d		      sta	PF0	; 3
    256  0a86		       b9 20 f0 	      lda	ChessBitmap1+8,y	; 4
    257  0a89		       85 4e		      sta	PF1	; 3
    258  0a8b		       b9 38 f0 	      lda	ChessBitmap2+8,y	; 4
    259  0a8e		       85 4f		      sta	PF2	; 3 @26
    260  0a90
      0  0a90					      SLEEP	8	; 6 @34
      1  0a90				   .CYCLES    SET	8
      2  0a90
      3  0a90				  -	      IF	.CYCLES < 2
      4  0a90				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0a90				  -	      ERR
      6  0a90					      ENDIF
      7  0a90
      8  0a90				  -	      IF	.CYCLES & 1
      9  0a90				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  0a90				  -	      nop	0
     11  0a90				  -	      ELSE
     12  0a90				  -	      bit	VSYNC
     13  0a90				  -	      ENDIF
     14  0a90				  -.CYCLES    SET	.CYCLES - 3
     15  0a90					      ENDIF
     16  0a90
     17  0a90					      REPEAT	.CYCLES / 2
     18  0a90		       ea		      nop
     17  0a90					      REPEND
     18  0a91		       ea		      nop
     17  0a91					      REPEND
     18  0a92		       ea		      nop
     17  0a92					      REPEND
     18  0a93		       ea		      nop
     19  0a94					      REPEND
    262  0a94
    263  0a94		       b9 50 f0 	      lda	ChessBitmap3+8,y	; 4
    264  0a97		       85 4d		      sta	PF0	; 3
    265  0a99		       b9 68 f0 	      lda	ChessBitmap4+8,y	; 4
    266  0a9c		       85 4e		      sta	PF1	; 3
    267  0a9e		       b9 80 f0 	      lda	ChessBitmap5+8,y	; 4
    268  0aa1		       85 4f		      sta	PF2	; 3 @55
    269  0aa3
    270  0aa3		       4c 07 f2 	      jmp	.l3	; 3 @58
    271  0aa6
    272  0aa6
    273  0aa6							;.LineColour
    274  0aa6							; The ICC triplet colour definitions for a single row of the chessboard
    275  0aa6							;    REPEAT 8
    276  0aa6							;	  .byte $4A, $28, $94
    277  0aa6							;    REPEND
    278  0aa6
    279  0aa6
      0  0aa6					      DEF	WriteBlank
      1  0aa6				   BANK_WriteBlank SET	_CURRENT_BANK
      2  0aa6
      3  0aa6				   WriteBlank
    281  0aa6
    282  0aa6		       a9 90		      lda	#<BlankSprite
    283  0aa8		       8d 43 f6 	      sta	SMSPRITE0_0+1+RAM_WRITE
    284  0aab		       8d 74 f6 	      sta	SMSPRITE8_0+1+RAM_WRITE
    285  0aae		       8d 08 f6 	      sta	SMSPRITE16_0+1+RAM_WRITE
    286  0ab1		       8d 48 f6 	      sta	SMSPRITE0_1+1+RAM_WRITE
    287  0ab4		       8d 79 f6 	      sta	SMSPRITE8_1+1+RAM_WRITE
    288  0ab7		       8d 0d f6 	      sta	SMSPRITE16_1+1+RAM_WRITE
    289  0aba
    290  0aba		       a9 f0		      lda	#>BlankSprite
    291  0abc		       8d 44 f6 	      sta	SMSPRITE0_0+2+RAM_WRITE
    292  0abf		       8d 75 f6 	      sta	SMSPRITE8_0+2+RAM_WRITE
    293  0ac2		       8d 09 f6 	      sta	SMSPRITE16_0+2+RAM_WRITE
    294  0ac5		       8d 49 f6 	      sta	SMSPRITE0_1+2+RAM_WRITE
    295  0ac8		       8d 7a f6 	      sta	SMSPRITE8_1+2+RAM_WRITE
    296  0acb		       8d 0e f6 	      sta	SMSPRITE16_1+2+RAM_WRITE
    297  0ace
    298  0ace		       60		      rts
    299  0acf
    300  0acf
      0  0acf					      DEF	WriteCursor
      1  0acf				   BANK_WriteCursor SET	_CURRENT_BANK
      2  0acf
      3  0acf				   WriteCursor
    302  0acf
    303  0acf		       a6 88		      ldx	highlight_row
    304  0ad1		       30 18		      bmi	.noCursor
    305  0ad3
    306  0ad3		       86 3e		      stx	SET_BANK_RAM
    307  0ad5		       a9 98		      lda	#<SpriteBuffer
    308  0ad7		       8d 43 f6 	      sta	SMSPRITE0_0+1+RAM_WRITE
    309  0ada		       8d 74 f6 	      sta	SMSPRITE8_0+1+RAM_WRITE
    310  0add		       8d 08 f6 	      sta	SMSPRITE16_0+1+RAM_WRITE
    311  0ae0		       a9 f0		      lda	#>SpriteBuffer
    312  0ae2		       8d 44 f6 	      sta	SMSPRITE0_0+2+RAM_WRITE
    313  0ae5		       8d 75 f6 	      sta	SMSPRITE8_0+2+RAM_WRITE
    314  0ae8		       8d 09 f6 	      sta	SMSPRITE16_0+2+RAM_WRITE
    315  0aeb
    316  0aeb				  -	      if	0
    317  0aeb				  -	      ldx	highlight_row+1
    318  0aeb				  -	      stx	SET_BANK_RAM
    319  0aeb				  -	      lda	#<SpriteBuffer
    320  0aeb				  -	      sta	SMSPRITE0_1+1+RAM_WRITE
    321  0aeb				  -	      sta	SMSPRITE8_1+1+RAM_WRITE
    322  0aeb				  -	      sta	SMSPRITE16_1+1+RAM_WRITE
    323  0aeb				  -	      lda	#>SpriteBuffer
    324  0aeb				  -	      sta	SMSPRITE0_1+2+RAM_WRITE
    325  0aeb				  -	      sta	SMSPRITE8_1+2+RAM_WRITE
    326  0aeb				  -	      sta	SMSPRITE16_1+2+RAM_WRITE
    327  0aeb					      endif
    328  0aeb
    329  0aeb				   .noCursor
    330  0aeb		       60		      rts
    331  0aec
      0  0aec					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_SCREEN"
      1  0aec
      2  0aec
      3  0aec		       02 ec	   .TEMP      =	* - BANK_START
 ROM_SHADOW_SCREEN (1K) SIZE =  $2ec , FREE= $114
      4  0aec					      ECHO	"ROM_SHADOW_SCREEN", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  0aec				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  0aec				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  0aec				  -	      ERR
      8  0aec					      endif
    333  0aec							;VALIDATE_RAM_SIZE
------- FILE ./chess.asm
------- FILE BANK_CHESS_INCLUDES.asm LEVEL 2 PASS 2
      0  0aec					      include	"BANK_CHESS_INCLUDES.asm"
      1  0aec							; Chess
      2  0aec							; Atari 2600 Chess display system
      3  0aec							; Copyright (c) 2019-2020 Andrew Davie
      4  0aec							; andrew@taswegian.com
      5  0aec
      6  0aec
      7  0aec							; Each piece is defined as 3 PF bytes (horizontal) x 24 scanlines (vertical)
      8  0aec							; The pieces are converted by ConvertChessPieces.py (in tools), which takes
      9  0aec							; a single gif of the format..
     10  0aec							; a row of white pieces on black squares
     11  0aec							; a row of white pieces on white squares
     12  0aec							; a row of black pieces on black squares
     13  0aec							; a row of black pieces on white squares
     14  0aec
     15  0aec							; each row has the pieces ordered thus:
     16  0aec							; a blank, then pawn, knight, bishop, rook, queen, king
     17  0aec							; each piece is 5 pixels wide x 8 pixels deep
     18  0aec							; each pixel is from an 8-colour palette.
     19  0aec							; Given a pixel colour 0-7 (represented in binary 000 - 111) then if the bits
     20  0aec							; for the colour are abc (i.e., colour #3 = binary 011 = bits 0bc)
     21  0aec							; then bit "a" becomes the first interleaved chronocolour pixel (line 1)
     22  0aec							; bit "b" becomes the second ICC pixel line (2)
     23  0aec							; bit "c" becomes the third ICC pixel line (3)
     24  0aec							; Thus, a 5 pxel x 8 pixel shape becomes 24 lines deep
     25  0aec							; The tool produces 4 variants of the piece; shifted into the 4 squares
     26  0aec							; in the PF - thus, at pixel 0, pixel 5, pixel 10, pixel 15.
     27  0aec							; These 4 shifted positions are stored consecutively in the shape definition
     28  0aec
     29  0aec							; Example...
     30  0aec							;DEF WHITE_BISHOP_on_BLACK_SQUARE_0
     31  0aec							;.byte $00,$40,$40,$40,$00,$00,$e0,$e0,$e0,$d0,$d0,$d0,$b0,$b0,$b0,$f0,$f0,$f0,$e0,$60,$e0,$f0,$f0,$f0 ;PF0
     32  0aec							;.byte $00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$80,$80,$00,$80,$80,$00,$80,$00,$00,$00,$00,$80,$00 ;PF1
     33  0aec							;.byte $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00 ;PF2
     34  0aec
     35  0aec							; The above defines the three 24-byte vertical strips for the 3 PF bytes that
     36  0aec							; the piece (could) overlay. In this case, on square 0 (leftmost), it doesn't
     37  0aec							; actually have any data in PF1 or PF2.
     38  0aec
     39  0aec
     40  0aec
------- FILE piece_graphics.asm LEVEL 3 PASS 2
      0  0aec					      include	"piece_graphics.asm"
      1  0aec							; Import the graphics definitions generated by ConvertChessPieces.py
      0  0aec					      NEWBANK	PIECES_0
      1  17d8 ????				      SEG	PIECES_0
      2  1000					      ORG	ORIGIN
      3  1000					      RORG	$F000
      4  1000				   BANK_START SET	*
      5  1000				   PIECES_0   SET	ORIGIN / 2048
      6  1000				   ORIGIN     SET	ORIGIN + 2048
      7  1000				   _CURRENT_BANK SET	PIECES_0
      3  1000
------- FILE gfx/WHITE_BLANK_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  1000					      include	"gfx/WHITE_BLANK_on_WHITE_SQUARE_0.asm"
      0  1000					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_WHITE_SQUARE_0", 72
     10  1000					      LIST	ON
      0  1000					      DEF	WHITE_BLANK_on_WHITE_SQUARE_0
      1  1000				   BANK_WHITE_BLANK_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1000
      3  1000				   WHITE_BLANK_on_WHITE_SQUARE_0
      3  1000		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$f0,$f0,$f0,$f0,$f0,$f0,$f0,$f0	;PF0
      4  1018		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$80,$80,$80,$80,$80,$80,$80	;PF1
      5  1030		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  1048					      include	"gfx/WHITE_BLANK_on_WHITE_SQUARE_1.asm"
      0  1048					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_WHITE_SQUARE_1", 72
     10  1048					      LIST	ON
      0  1048					      DEF	WHITE_BLANK_on_WHITE_SQUARE_1
      1  1048				   BANK_WHITE_BLANK_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1048
      3  1048				   WHITE_BLANK_on_WHITE_SQUARE_1
      3  1048		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1060		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7c,$7c,$7c,$7c,$7c,$7c,$7c,$7c	;PF1
      5  1078		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  1090					      include	"gfx/WHITE_BLANK_on_WHITE_SQUARE_2.asm"
      0  1090					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_WHITE_SQUARE_2", 72
     10  1090					      LIST	ON
      0  1090					      DEF	WHITE_BLANK_on_WHITE_SQUARE_2
      1  1090				   BANK_WHITE_BLANK_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1090
      3  1090				   WHITE_BLANK_on_WHITE_SQUARE_2
      3  1090		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  10a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$03,$03,$03,$03,$03,$03,$03	;PF1
      5  10c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$07,$07,$07,$07,$07,$07,$07	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  10d8					      include	"gfx/WHITE_BLANK_on_WHITE_SQUARE_3.asm"
      0  10d8					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_WHITE_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  WHITE_BLANK_on_WHITE_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f100
     10  1100					      LIST	ON
      0  1100					      DEF	WHITE_BLANK_on_WHITE_SQUARE_3
      1  1100				   BANK_WHITE_BLANK_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1100
      3  1100				   WHITE_BLANK_on_WHITE_SQUARE_3
      3  1100		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1118		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1130		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$f8,$f8,$f8,$f8,$f8,$f8,$f8,$f8	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  1148					      include	"gfx/WHITE_PAWN_on_WHITE_SQUARE_0.asm"
      0  1148					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_WHITE_SQUARE_0", 72
     10  1148					      LIST	ON
      0  1148					      DEF	WHITE_PAWN_on_WHITE_SQUARE_0
      1  1148				   BANK_WHITE_PAWN_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1148
      3  1148				   WHITE_PAWN_on_WHITE_SQUARE_0
      3  1148		       e0 e0 40 40*	      .byte.b	$e0,$e0,$40,$40,$a0,$40,$40,$00,$00,$e0,$40,$40,$e0,$40,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1160		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1178		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  1190					      include	"gfx/WHITE_PAWN_on_WHITE_SQUARE_1.asm"
      0  1190					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_WHITE_SQUARE_1", 72
     10  1190					      LIST	ON
      0  1190					      DEF	WHITE_PAWN_on_WHITE_SQUARE_1
      1  1190				   BANK_WHITE_PAWN_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1190
      3  1190				   WHITE_PAWN_on_WHITE_SQUARE_1
      3  1190		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  11a8		       38 38 10 10*	      .byte.b	$38,$38,$10,$10,$28,$10,$10,$00,$00,$38,$10,$10,$38,$10,$10,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  11c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  11d8					      include	"gfx/WHITE_PAWN_on_WHITE_SQUARE_2.asm"
      0  11d8					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_WHITE_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  WHITE_PAWN_on_WHITE_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f200
     10  1200					      LIST	ON
      0  1200					      DEF	WHITE_PAWN_on_WHITE_SQUARE_2
      1  1200				   BANK_WHITE_PAWN_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1200
      3  1200				   WHITE_PAWN_on_WHITE_SQUARE_2
      3  1200		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1218		       01 01 00 00*	      .byte.b	$01,$01,$00,$00,$01,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1230		       03 03 01 01*	      .byte.b	$03,$03,$01,$01,$02,$01,$01,$00,$00,$03,$01,$01,$03,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  1248					      include	"gfx/WHITE_PAWN_on_WHITE_SQUARE_3.asm"
      0  1248					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_WHITE_SQUARE_3", 72
     10  1248					      LIST	ON
      0  1248					      DEF	WHITE_PAWN_on_WHITE_SQUARE_3
      1  1248				   BANK_WHITE_PAWN_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1248
      3  1248				   WHITE_PAWN_on_WHITE_SQUARE_3
      3  1248		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1260		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1278		       70 70 20 20*	      .byte.b	$70,$70,$20,$20,$50,$20,$20,$00,$00,$70,$20,$20,$70,$20,$20,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  1290					      include	"gfx/WHITE_KNIGHT_on_WHITE_SQUARE_0.asm"
      0  1290					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_WHITE_SQUARE_0", 72
     10  1290					      LIST	ON
      0  1290					      DEF	WHITE_KNIGHT_on_WHITE_SQUARE_0
      1  1290				   BANK_WHITE_KNIGHT_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1290
      3  1290				   WHITE_KNIGHT_on_WHITE_SQUARE_0
      3  1290		       f0 f0 e0 f0*	      .byte.b	$f0,$f0,$e0,$f0,$f0,$a0,$40,$00,$f0,$70,$e0,$c0,$f0,$b0,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  12a8		       80 00 80 80*	      .byte.b	$80,$00,$80,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  12c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  12d8					      include	"gfx/WHITE_KNIGHT_on_WHITE_SQUARE_1.asm"
      0  12d8					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_WHITE_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  WHITE_KNIGHT_on_WHITE_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f300
     10  1300					      LIST	ON
      0  1300					      DEF	WHITE_KNIGHT_on_WHITE_SQUARE_1
      1  1300				   BANK_WHITE_KNIGHT_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1300
      3  1300				   WHITE_KNIGHT_on_WHITE_SQUARE_1
      3  1300		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1318		       7c 78 3c 7c*	      .byte.b	$7c,$78,$3c,$7c,$7c,$2c,$14,$00,$7c,$70,$38,$18,$78,$68,$14,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1330		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  1348					      include	"gfx/WHITE_KNIGHT_on_WHITE_SQUARE_2.asm"
      0  1348					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_WHITE_SQUARE_2", 72
     10  1348					      LIST	ON
      0  1348					      DEF	WHITE_KNIGHT_on_WHITE_SQUARE_2
      1  1348				   BANK_WHITE_KNIGHT_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1348
      3  1348				   WHITE_KNIGHT_on_WHITE_SQUARE_2
      3  1348		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1360		       03 03 01 03*	      .byte.b	$03,$03,$01,$03,$03,$01,$00,$00,$03,$03,$01,$00,$03,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1378		       07 03 07 07*	      .byte.b	$07,$03,$07,$07,$07,$06,$05,$00,$07,$01,$03,$03,$03,$02,$05,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  1390					      include	"gfx/WHITE_KNIGHT_on_WHITE_SQUARE_3.asm"
      0  1390					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_WHITE_SQUARE_3", 72
     10  1390					      LIST	ON
      0  1390					      DEF	WHITE_KNIGHT_on_WHITE_SQUARE_3
      1  1390				   BANK_WHITE_KNIGHT_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1390
      3  1390				   WHITE_KNIGHT_on_WHITE_SQUARE_3
      3  1390		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  13a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  13c0		       f8 78 f0 f8*	      .byte.b	$f8,$78,$f0,$f8,$f8,$d0,$a0,$00,$f8,$38,$70,$60,$78,$58,$a0,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  13d8					      include	"gfx/WHITE_BISHOP_on_WHITE_SQUARE_0.asm"
      0  13d8					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_WHITE_SQUARE_0", 72
 PAGE BREAK INSERTED FOR  WHITE_BISHOP_on_WHITE_SQUARE_0
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f400
     10  1400					      LIST	ON
      0  1400					      DEF	WHITE_BISHOP_on_WHITE_SQUARE_0
      1  1400				   BANK_WHITE_BISHOP_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1400
      3  1400				   WHITE_BISHOP_on_WHITE_SQUARE_0
      3  1400		       f0 e0 f0 b0*	      .byte.b	$f0,$e0,$f0,$b0,$d0,$e0,$40,$40,$f0,$60,$f0,$b0,$d0,$e0,$00,$40,$00,$00,$00,$40,$20,$00,$00,$00	;PF0
      4  1418		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1430		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  1448					      include	"gfx/WHITE_BISHOP_on_WHITE_SQUARE_1.asm"
      0  1448					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_WHITE_SQUARE_1", 72
     10  1448					      LIST	ON
      0  1448					      DEF	WHITE_BISHOP_on_WHITE_SQUARE_1
      1  1448				   BANK_WHITE_BISHOP_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1448
      3  1448				   WHITE_BISHOP_on_WHITE_SQUARE_1
      3  1448		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1460		       78 38 7c 6c*	      .byte.b	$78,$38,$7c,$6c,$5c,$38,$10,$10,$7c,$30,$78,$68,$58,$38,$00,$10,$00,$00,$00,$10,$20,$00,$00,$00	;PF1
      5  1478		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  1490					      include	"gfx/WHITE_BISHOP_on_WHITE_SQUARE_2.asm"
      0  1490					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_WHITE_SQUARE_2", 72
     10  1490					      LIST	ON
      0  1490					      DEF	WHITE_BISHOP_on_WHITE_SQUARE_2
      1  1490				   BANK_WHITE_BISHOP_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1490
      3  1490				   WHITE_BISHOP_on_WHITE_SQUARE_2
      3  1490		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  14a8		       03 01 03 03*	      .byte.b	$03,$01,$03,$03,$02,$01,$00,$00,$03,$01,$03,$03,$02,$01,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00	;PF1
      5  14c0		       03 03 07 06*	      .byte.b	$03,$03,$07,$06,$07,$03,$01,$01,$07,$01,$03,$02,$03,$03,$00,$01,$00,$00,$00,$01,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  14d8					      include	"gfx/WHITE_BISHOP_on_WHITE_SQUARE_3.asm"
      0  14d8					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_WHITE_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  WHITE_BISHOP_on_WHITE_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f500
     10  1500					      LIST	ON
      0  1500					      DEF	WHITE_BISHOP_on_WHITE_SQUARE_3
      1  1500				   BANK_WHITE_BISHOP_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1500
      3  1500				   WHITE_BISHOP_on_WHITE_SQUARE_3
      3  1500		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1518		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1530		       78 70 f8 d8*	      .byte.b	$78,$70,$f8,$d8,$e8,$70,$20,$20,$f8,$30,$78,$58,$68,$70,$00,$20,$00,$00,$00,$20,$10,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  1548					      include	"gfx/WHITE_ROOK_on_WHITE_SQUARE_0.asm"
      0  1548					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_WHITE_SQUARE_0", 72
     10  1548					      LIST	ON
      0  1548					      DEF	WHITE_ROOK_on_WHITE_SQUARE_0
      1  1548				   BANK_WHITE_ROOK_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1548
      3  1548				   WHITE_ROOK_on_WHITE_SQUARE_0
      3  1548		       f0 e0 e0 e0*	      .byte.b	$f0,$e0,$e0,$e0,$f0,$50,$50,$00,$f0,$60,$60,$60,$f0,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1560		       00 00 00 80*	      .byte.b	$00,$00,$00,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1578		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  1590					      include	"gfx/WHITE_ROOK_on_WHITE_SQUARE_1.asm"
      0  1590					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_WHITE_SQUARE_1", 72
     10  1590					      LIST	ON
      0  1590					      DEF	WHITE_ROOK_on_WHITE_SQUARE_1
      1  1590				   BANK_WHITE_ROOK_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1590
      3  1590				   WHITE_ROOK_on_WHITE_SQUARE_1
      3  1590		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  15a8		       78 38 38 3c*	      .byte.b	$78,$38,$38,$3c,$7c,$54,$54,$00,$7c,$30,$30,$30,$78,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  15c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  15d8					      include	"gfx/WHITE_ROOK_on_WHITE_SQUARE_2.asm"
      0  15d8					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_WHITE_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  WHITE_ROOK_on_WHITE_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f600
     10  1600					      LIST	ON
      0  1600					      DEF	WHITE_ROOK_on_WHITE_SQUARE_2
      1  1600				   BANK_WHITE_ROOK_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1600
      3  1600				   WHITE_ROOK_on_WHITE_SQUARE_2
      3  1600		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1618		       03 01 01 01*	      .byte.b	$03,$01,$01,$01,$03,$02,$02,$00,$03,$01,$01,$01,$03,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1630		       03 03 03 07*	      .byte.b	$03,$03,$03,$07,$07,$05,$05,$00,$07,$01,$01,$01,$03,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  1648					      include	"gfx/WHITE_ROOK_on_WHITE_SQUARE_3.asm"
      0  1648					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_WHITE_SQUARE_3", 72
     10  1648					      LIST	ON
      0  1648					      DEF	WHITE_ROOK_on_WHITE_SQUARE_3
      1  1648				   BANK_WHITE_ROOK_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1648
      3  1648				   WHITE_ROOK_on_WHITE_SQUARE_3
      3  1648		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1660		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1678		       78 70 70 f0*	      .byte.b	$78,$70,$70,$f0,$f8,$a8,$a8,$00,$f8,$30,$30,$30,$78,$28,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  1690					      include	"gfx/WHITE_QUEEN_on_WHITE_SQUARE_0.asm"
      0  1690					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_WHITE_SQUARE_0", 72
     10  1690					      LIST	ON
      0  1690					      DEF	WHITE_QUEEN_on_WHITE_SQUARE_0
      1  1690				   BANK_WHITE_QUEEN_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1690
      3  1690				   WHITE_QUEEN_on_WHITE_SQUARE_0
      3  1690		       e0 e0 f0 f0*	      .byte.b	$e0,$e0,$f0,$f0,$50,$00,$50,$00,$e0,$40,$f0,$f0,$50,$00,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  16a8		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  16c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  16d8					      include	"gfx/WHITE_QUEEN_on_WHITE_SQUARE_1.asm"
      0  16d8					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_WHITE_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  WHITE_QUEEN_on_WHITE_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f700
     10  1700					      LIST	ON
      0  1700					      DEF	WHITE_QUEEN_on_WHITE_SQUARE_1
      1  1700				   BANK_WHITE_QUEEN_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1700
      3  1700				   WHITE_QUEEN_on_WHITE_SQUARE_1
      3  1700		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1718		       38 38 7c 7c*	      .byte.b	$38,$38,$7c,$7c,$54,$00,$54,$00,$38,$10,$78,$78,$50,$00,$54,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1730		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  1748					      include	"gfx/WHITE_QUEEN_on_WHITE_SQUARE_2.asm"
      0  1748					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_WHITE_SQUARE_2", 72
     10  1748					      LIST	ON
      0  1748					      DEF	WHITE_QUEEN_on_WHITE_SQUARE_2
      1  1748				   BANK_WHITE_QUEEN_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1748
      3  1748				   WHITE_QUEEN_on_WHITE_SQUARE_2
      3  1748		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1760		       01 01 03 03*	      .byte.b	$01,$01,$03,$03,$02,$00,$02,$00,$01,$00,$03,$03,$02,$00,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1778		       03 03 07 07*	      .byte.b	$03,$03,$07,$07,$05,$00,$05,$00,$03,$01,$03,$03,$01,$00,$05,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  1790					      include	"gfx/WHITE_QUEEN_on_WHITE_SQUARE_3.asm"
      0  1790					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_WHITE_SQUARE_3", 72
     10  1790					      LIST	ON
      0  1790					      DEF	WHITE_QUEEN_on_WHITE_SQUARE_3
      1  1790				   BANK_WHITE_QUEEN_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1790
      3  1790				   WHITE_QUEEN_on_WHITE_SQUARE_3
      3  1790		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  17a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  17c0		       70 70 f8 f8*	      .byte.b	$70,$70,$f8,$f8,$a8,$00,$a8,$00,$70,$20,$78,$78,$28,$00,$a8,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
      0  17d8					      CHECK_BANK_SIZE	"PIECE_0 (2K)"
      1  17d8		       07 d8	   .TEMP      =	* - BANK_START
 PIECE_0 (2K) (2K) SIZE =  $7d8 , FREE= $28
      2  17d8					      ECHO	"PIECE_0 (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  17d8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  17d8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  17d8				  -	      ERR
      6  17d8					      endif
      0  17d8					      NEWBANK	PIECES_1
      1  1fd8 ????				      SEG	PIECES_1
      2  1800					      ORG	ORIGIN
      3  1800					      RORG	$F000
      4  1800				   BANK_START SET	*
      5  1800				   PIECES_1   SET	ORIGIN / 2048
      6  1800				   ORIGIN     SET	ORIGIN + 2048
      7  1800				   _CURRENT_BANK SET	PIECES_1
------- FILE gfx/WHITE_KING_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  1800					      include	"gfx/WHITE_KING_on_WHITE_SQUARE_0.asm"
      0  1800					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_WHITE_SQUARE_0", 72
     10  1800					      LIST	ON
      0  1800					      DEF	WHITE_KING_on_WHITE_SQUARE_0
      1  1800				   BANK_WHITE_KING_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  1800
      3  1800				   WHITE_KING_on_WHITE_SQUARE_0
      3  1800		       e0 f0 50 50*	      .byte.b	$e0,$f0,$50,$50,$f0,$40,$e0,$00,$e0,$60,$50,$50,$50,$40,$e0,$40,$00,$00,$00,$a0,$a0,$40,$00,$00	;PF0
      4  1818		       00 80 80 80*	      .byte.b	$00,$80,$80,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1830		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  1848					      include	"gfx/WHITE_KING_on_WHITE_SQUARE_1.asm"
      0  1848					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_WHITE_SQUARE_1", 72
     10  1848					      LIST	ON
      0  1848					      DEF	WHITE_KING_on_WHITE_SQUARE_1
      1  1848				   BANK_WHITE_KING_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  1848
      3  1848				   WHITE_KING_on_WHITE_SQUARE_1
      3  1848		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1860		       38 7c 54 54*	      .byte.b	$38,$7c,$54,$54,$7c,$10,$38,$00,$38,$30,$50,$50,$50,$10,$38,$10,$00,$00,$00,$28,$28,$10,$00,$00	;PF1
      5  1878		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  1890					      include	"gfx/WHITE_KING_on_WHITE_SQUARE_2.asm"
      0  1890					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_WHITE_SQUARE_2", 72
     10  1890					      LIST	ON
      0  1890					      DEF	WHITE_KING_on_WHITE_SQUARE_2
      1  1890				   BANK_WHITE_KING_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  1890
      3  1890				   WHITE_KING_on_WHITE_SQUARE_2
      3  1890		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  18a8		       01 03 02 02*	      .byte.b	$01,$03,$02,$02,$03,$00,$01,$00,$01,$01,$02,$02,$02,$00,$01,$00,$00,$00,$00,$01,$01,$00,$00,$00	;PF1
      5  18c0		       03 07 05 05*	      .byte.b	$03,$07,$05,$05,$07,$01,$03,$00,$03,$01,$01,$01,$01,$01,$03,$01,$00,$00,$00,$02,$02,$01,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  18d8					      include	"gfx/WHITE_KING_on_WHITE_SQUARE_3.asm"
      0  18d8					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_WHITE_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  WHITE_KING_on_WHITE_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f100
     10  1900					      LIST	ON
      0  1900					      DEF	WHITE_KING_on_WHITE_SQUARE_3
      1  1900				   BANK_WHITE_KING_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  1900
      3  1900				   WHITE_KING_on_WHITE_SQUARE_3
      3  1900		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1918		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1930		       70 f8 a8 a8*	      .byte.b	$70,$f8,$a8,$a8,$f8,$20,$70,$00,$70,$30,$28,$28,$28,$20,$70,$20,$00,$00,$00,$50,$50,$20,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  1948					      include	"gfx/WHITE_BLANK_on_BLACK_SQUARE_0.asm"
      0  1948					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_BLACK_SQUARE_0", 72
     10  1948					      LIST	ON
      0  1948					      DEF	WHITE_BLANK_on_BLACK_SQUARE_0
      1  1948				   BANK_WHITE_BLANK_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  1948
      3  1948				   WHITE_BLANK_on_BLACK_SQUARE_0
      3  1948		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1960		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1978		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  1990					      include	"gfx/WHITE_BLANK_on_BLACK_SQUARE_1.asm"
      0  1990					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_BLACK_SQUARE_1", 72
     10  1990					      LIST	ON
      0  1990					      DEF	WHITE_BLANK_on_BLACK_SQUARE_1
      1  1990				   BANK_WHITE_BLANK_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  1990
      3  1990				   WHITE_BLANK_on_BLACK_SQUARE_1
      3  1990		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  19a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  19c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  19d8					      include	"gfx/WHITE_BLANK_on_BLACK_SQUARE_2.asm"
      0  19d8					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_BLACK_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  WHITE_BLANK_on_BLACK_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f200
     10  1a00					      LIST	ON
      0  1a00					      DEF	WHITE_BLANK_on_BLACK_SQUARE_2
      1  1a00				   BANK_WHITE_BLANK_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  1a00
      3  1a00				   WHITE_BLANK_on_BLACK_SQUARE_2
      3  1a00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1a18		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1a30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BLANK_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  1a48					      include	"gfx/WHITE_BLANK_on_BLACK_SQUARE_3.asm"
      0  1a48					      OPTIONAL_PAGEBREAK	"WHITE_BLANK_on_BLACK_SQUARE_3", 72
     10  1a48					      LIST	ON
      0  1a48					      DEF	WHITE_BLANK_on_BLACK_SQUARE_3
      1  1a48				   BANK_WHITE_BLANK_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  1a48
      3  1a48				   WHITE_BLANK_on_BLACK_SQUARE_3
      3  1a48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1a60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1a78		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  1a90					      include	"gfx/WHITE_PAWN_on_BLACK_SQUARE_0.asm"
      0  1a90					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_BLACK_SQUARE_0", 72
     10  1a90					      LIST	ON
      0  1a90					      DEF	WHITE_PAWN_on_BLACK_SQUARE_0
      1  1a90				   BANK_WHITE_PAWN_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  1a90
      3  1a90				   WHITE_PAWN_on_BLACK_SQUARE_0
      3  1a90		       e0 e0 40 40*	      .byte.b	$e0,$e0,$40,$40,$a0,$40,$40,$00,$00,$e0,$40,$40,$e0,$40,$40,$00,$00,$e0,$40,$40,$e0,$40,$40,$00	;PF0
      4  1aa8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1ac0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  1ad8					      include	"gfx/WHITE_PAWN_on_BLACK_SQUARE_1.asm"
      0  1ad8					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_BLACK_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  WHITE_PAWN_on_BLACK_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f300
     10  1b00					      LIST	ON
      0  1b00					      DEF	WHITE_PAWN_on_BLACK_SQUARE_1
      1  1b00				   BANK_WHITE_PAWN_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  1b00
      3  1b00				   WHITE_PAWN_on_BLACK_SQUARE_1
      3  1b00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1b18		       38 38 10 10*	      .byte.b	$38,$38,$10,$10,$28,$10,$10,$00,$00,$38,$10,$10,$38,$10,$10,$00,$00,$38,$10,$10,$38,$10,$10,$00	;PF1
      5  1b30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  1b48					      include	"gfx/WHITE_PAWN_on_BLACK_SQUARE_2.asm"
      0  1b48					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_BLACK_SQUARE_2", 72
     10  1b48					      LIST	ON
      0  1b48					      DEF	WHITE_PAWN_on_BLACK_SQUARE_2
      1  1b48				   BANK_WHITE_PAWN_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  1b48
      3  1b48				   WHITE_PAWN_on_BLACK_SQUARE_2
      3  1b48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1b60		       01 01 00 00*	      .byte.b	$01,$01,$00,$00,$01,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00	;PF1
      5  1b78		       03 03 01 01*	      .byte.b	$03,$03,$01,$01,$02,$01,$01,$00,$00,$03,$01,$01,$03,$01,$01,$00,$00,$03,$01,$01,$03,$01,$01,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_PAWN_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  1b90					      include	"gfx/WHITE_PAWN_on_BLACK_SQUARE_3.asm"
      0  1b90					      OPTIONAL_PAGEBREAK	"WHITE_PAWN_on_BLACK_SQUARE_3", 72
     10  1b90					      LIST	ON
      0  1b90					      DEF	WHITE_PAWN_on_BLACK_SQUARE_3
      1  1b90				   BANK_WHITE_PAWN_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  1b90
      3  1b90				   WHITE_PAWN_on_BLACK_SQUARE_3
      3  1b90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1ba8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1bc0		       70 70 20 20*	      .byte.b	$70,$70,$20,$20,$50,$20,$20,$00,$00,$70,$20,$20,$70,$20,$20,$00,$00,$70,$20,$20,$70,$20,$20,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  1bd8					      include	"gfx/WHITE_KNIGHT_on_BLACK_SQUARE_0.asm"
      0  1bd8					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_BLACK_SQUARE_0", 72
 PAGE BREAK INSERTED FOR  WHITE_KNIGHT_on_BLACK_SQUARE_0
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f400
     10  1c00					      LIST	ON
      0  1c00					      DEF	WHITE_KNIGHT_on_BLACK_SQUARE_0
      1  1c00				   BANK_WHITE_KNIGHT_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  1c00
      3  1c00				   WHITE_KNIGHT_on_BLACK_SQUARE_0
      3  1c00		       f0 f0 e0 f0*	      .byte.b	$f0,$f0,$e0,$f0,$f0,$a0,$40,$00,$f0,$70,$e0,$c0,$f0,$b0,$40,$00,$f0,$f0,$e0,$e0,$f0,$f0,$40,$00	;PF0
      4  1c18		       80 00 80 80*	      .byte.b	$80,$00,$80,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$80,$00,$80,$00,$00,$80,$80,$80,$80,$00	;PF1
      5  1c30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  1c48					      include	"gfx/WHITE_KNIGHT_on_BLACK_SQUARE_1.asm"
      0  1c48					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_BLACK_SQUARE_1", 72
     10  1c48					      LIST	ON
      0  1c48					      DEF	WHITE_KNIGHT_on_BLACK_SQUARE_1
      1  1c48				   BANK_WHITE_KNIGHT_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  1c48
      3  1c48				   WHITE_KNIGHT_on_BLACK_SQUARE_1
      3  1c48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1c60		       7c 78 3c 7c*	      .byte.b	$7c,$78,$3c,$7c,$7c,$2c,$14,$00,$7c,$70,$38,$18,$78,$68,$14,$00,$7c,$78,$38,$3c,$7c,$7c,$14,$00	;PF1
      5  1c78		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  1c90					      include	"gfx/WHITE_KNIGHT_on_BLACK_SQUARE_2.asm"
      0  1c90					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_BLACK_SQUARE_2", 72
     10  1c90					      LIST	ON
      0  1c90					      DEF	WHITE_KNIGHT_on_BLACK_SQUARE_2
      1  1c90				   BANK_WHITE_KNIGHT_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  1c90
      3  1c90				   WHITE_KNIGHT_on_BLACK_SQUARE_2
      3  1c90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1ca8		       03 03 01 03*	      .byte.b	$03,$03,$01,$03,$03,$01,$00,$00,$03,$03,$01,$00,$03,$03,$00,$00,$03,$03,$01,$01,$03,$03,$00,$00	;PF1
      5  1cc0		       07 03 07 07*	      .byte.b	$07,$03,$07,$07,$07,$06,$05,$00,$07,$01,$03,$03,$03,$02,$05,$00,$07,$03,$03,$07,$07,$07,$05,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KNIGHT_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  1cd8					      include	"gfx/WHITE_KNIGHT_on_BLACK_SQUARE_3.asm"
      0  1cd8					      OPTIONAL_PAGEBREAK	"WHITE_KNIGHT_on_BLACK_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  WHITE_KNIGHT_on_BLACK_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f500
     10  1d00					      LIST	ON
      0  1d00					      DEF	WHITE_KNIGHT_on_BLACK_SQUARE_3
      1  1d00				   BANK_WHITE_KNIGHT_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  1d00
      3  1d00				   WHITE_KNIGHT_on_BLACK_SQUARE_3
      3  1d00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1d18		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1d30		       f8 78 f0 f8*	      .byte.b	$f8,$78,$f0,$f8,$f8,$d0,$a0,$00,$f8,$38,$70,$60,$78,$58,$a0,$00,$f8,$78,$70,$f0,$f8,$f8,$a0,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  1d48					      include	"gfx/WHITE_BISHOP_on_BLACK_SQUARE_0.asm"
      0  1d48					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_BLACK_SQUARE_0", 72
     10  1d48					      LIST	ON
      0  1d48					      DEF	WHITE_BISHOP_on_BLACK_SQUARE_0
      1  1d48				   BANK_WHITE_BISHOP_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  1d48
      3  1d48				   WHITE_BISHOP_on_BLACK_SQUARE_0
      3  1d48		       f0 e0 f0 b0*	      .byte.b	$f0,$e0,$f0,$b0,$d0,$e0,$40,$40,$f0,$60,$f0,$b0,$d0,$e0,$00,$40,$f0,$e0,$f0,$b0,$d0,$e0,$40,$40	;PF0
      4  1d60		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$80,$80,$00,$00,$00	;PF1
      5  1d78		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  1d90					      include	"gfx/WHITE_BISHOP_on_BLACK_SQUARE_1.asm"
      0  1d90					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_BLACK_SQUARE_1", 72
     10  1d90					      LIST	ON
      0  1d90					      DEF	WHITE_BISHOP_on_BLACK_SQUARE_1
      1  1d90				   BANK_WHITE_BISHOP_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  1d90
      3  1d90				   WHITE_BISHOP_on_BLACK_SQUARE_1
      3  1d90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1da8		       78 38 7c 6c*	      .byte.b	$78,$38,$7c,$6c,$5c,$38,$10,$10,$7c,$30,$78,$68,$58,$38,$00,$10,$7c,$38,$78,$6c,$5c,$38,$10,$10	;PF1
      5  1dc0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  1dd8					      include	"gfx/WHITE_BISHOP_on_BLACK_SQUARE_2.asm"
      0  1dd8					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_BLACK_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  WHITE_BISHOP_on_BLACK_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f600
     10  1e00					      LIST	ON
      0  1e00					      DEF	WHITE_BISHOP_on_BLACK_SQUARE_2
      1  1e00				   BANK_WHITE_BISHOP_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  1e00
      3  1e00				   WHITE_BISHOP_on_BLACK_SQUARE_2
      3  1e00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1e18		       03 01 03 03*	      .byte.b	$03,$01,$03,$03,$02,$01,$00,$00,$03,$01,$03,$03,$02,$01,$00,$00,$03,$01,$03,$03,$02,$01,$00,$00	;PF1
      5  1e30		       03 03 07 06*	      .byte.b	$03,$03,$07,$06,$07,$03,$01,$01,$07,$01,$03,$02,$03,$03,$00,$01,$07,$03,$03,$06,$07,$03,$01,$01	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_BISHOP_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  1e48					      include	"gfx/WHITE_BISHOP_on_BLACK_SQUARE_3.asm"
      0  1e48					      OPTIONAL_PAGEBREAK	"WHITE_BISHOP_on_BLACK_SQUARE_3", 72
     10  1e48					      LIST	ON
      0  1e48					      DEF	WHITE_BISHOP_on_BLACK_SQUARE_3
      1  1e48				   BANK_WHITE_BISHOP_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  1e48
      3  1e48				   WHITE_BISHOP_on_BLACK_SQUARE_3
      3  1e48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1e60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1e78		       78 70 f8 d8*	      .byte.b	$78,$70,$f8,$d8,$e8,$70,$20,$20,$f8,$30,$78,$58,$68,$70,$00,$20,$f8,$70,$78,$d8,$e8,$70,$20,$20	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  1e90					      include	"gfx/WHITE_ROOK_on_BLACK_SQUARE_0.asm"
      0  1e90					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_BLACK_SQUARE_0", 72
     10  1e90					      LIST	ON
      0  1e90					      DEF	WHITE_ROOK_on_BLACK_SQUARE_0
      1  1e90				   BANK_WHITE_ROOK_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  1e90
      3  1e90				   WHITE_ROOK_on_BLACK_SQUARE_0
      3  1e90		       f0 e0 e0 e0*	      .byte.b	$f0,$e0,$e0,$e0,$f0,$50,$50,$00,$f0,$60,$60,$60,$f0,$50,$00,$00,$f0,$e0,$e0,$e0,$f0,$f0,$50,$00	;PF0
      4  1ea8		       00 00 00 80*	      .byte.b	$00,$00,$00,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$80,$80,$80,$00	;PF1
      5  1ec0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  1ed8					      include	"gfx/WHITE_ROOK_on_BLACK_SQUARE_1.asm"
      0  1ed8					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_BLACK_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  WHITE_ROOK_on_BLACK_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f700
     10  1f00					      LIST	ON
      0  1f00					      DEF	WHITE_ROOK_on_BLACK_SQUARE_1
      1  1f00				   BANK_WHITE_ROOK_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  1f00
      3  1f00				   WHITE_ROOK_on_BLACK_SQUARE_1
      3  1f00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1f18		       78 38 38 3c*	      .byte.b	$78,$38,$38,$3c,$7c,$54,$54,$00,$7c,$30,$30,$30,$78,$50,$00,$00,$7c,$38,$38,$38,$7c,$7c,$54,$00	;PF1
      5  1f30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  1f48					      include	"gfx/WHITE_ROOK_on_BLACK_SQUARE_2.asm"
      0  1f48					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_BLACK_SQUARE_2", 72
     10  1f48					      LIST	ON
      0  1f48					      DEF	WHITE_ROOK_on_BLACK_SQUARE_2
      1  1f48				   BANK_WHITE_ROOK_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  1f48
      3  1f48				   WHITE_ROOK_on_BLACK_SQUARE_2
      3  1f48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1f60		       03 01 01 01*	      .byte.b	$03,$01,$01,$01,$03,$02,$02,$00,$03,$01,$01,$01,$03,$02,$00,$00,$03,$01,$01,$01,$03,$03,$02,$00	;PF1
      5  1f78		       03 03 03 07*	      .byte.b	$03,$03,$03,$07,$07,$05,$05,$00,$07,$01,$01,$01,$03,$01,$00,$00,$07,$03,$03,$03,$07,$07,$05,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_ROOK_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  1f90					      include	"gfx/WHITE_ROOK_on_BLACK_SQUARE_3.asm"
      0  1f90					      OPTIONAL_PAGEBREAK	"WHITE_ROOK_on_BLACK_SQUARE_3", 72
     10  1f90					      LIST	ON
      0  1f90					      DEF	WHITE_ROOK_on_BLACK_SQUARE_3
      1  1f90				   BANK_WHITE_ROOK_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  1f90
      3  1f90				   WHITE_ROOK_on_BLACK_SQUARE_3
      3  1f90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  1fa8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  1fc0		       78 70 70 f0*	      .byte.b	$78,$70,$70,$f0,$f8,$a8,$a8,$00,$f8,$30,$30,$30,$78,$28,$00,$00,$f8,$70,$70,$70,$f8,$f8,$a8,$00	;PF2
------- FILE piece_graphics.asm
      0  1fd8					      CHECK_BANK_SIZE	"PIECE_1 (2K)"
      1  1fd8		       07 d8	   .TEMP      =	* - BANK_START
 PIECE_1 (2K) (2K) SIZE =  $7d8 , FREE= $28
      2  1fd8					      ECHO	"PIECE_1 (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  1fd8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  1fd8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  1fd8				  -	      ERR
      6  1fd8					      endif
      0  1fd8					      NEWBANK	PIECES_2
      1  27d8 ????				      SEG	PIECES_2
      2  2000					      ORG	ORIGIN
      3  2000					      RORG	$F000
      4  2000				   BANK_START SET	*
      5  2000				   PIECES_2   SET	ORIGIN / 2048
      6  2000				   ORIGIN     SET	ORIGIN + 2048
      7  2000				   _CURRENT_BANK SET	PIECES_2
------- FILE gfx/WHITE_QUEEN_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  2000					      include	"gfx/WHITE_QUEEN_on_BLACK_SQUARE_0.asm"
      0  2000					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_BLACK_SQUARE_0", 72
     10  2000					      LIST	ON
      0  2000					      DEF	WHITE_QUEEN_on_BLACK_SQUARE_0
      1  2000				   BANK_WHITE_QUEEN_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  2000
      3  2000				   WHITE_QUEEN_on_BLACK_SQUARE_0
      3  2000		       e0 e0 f0 f0*	      .byte.b	$e0,$e0,$f0,$f0,$50,$00,$50,$00,$e0,$40,$f0,$f0,$50,$00,$50,$00,$e0,$e0,$f0,$f0,$50,$00,$50,$00	;PF0
      4  2018		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$80,$80,$80,$00,$80,$00	;PF1
      5  2030		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  2048					      include	"gfx/WHITE_QUEEN_on_BLACK_SQUARE_1.asm"
      0  2048					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_BLACK_SQUARE_1", 72
     10  2048					      LIST	ON
      0  2048					      DEF	WHITE_QUEEN_on_BLACK_SQUARE_1
      1  2048				   BANK_WHITE_QUEEN_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  2048
      3  2048				   WHITE_QUEEN_on_BLACK_SQUARE_1
      3  2048		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2060		       38 38 7c 7c*	      .byte.b	$38,$38,$7c,$7c,$54,$00,$54,$00,$38,$10,$78,$78,$50,$00,$54,$00,$38,$38,$7c,$7c,$54,$00,$54,$00	;PF1
      5  2078		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  2090					      include	"gfx/WHITE_QUEEN_on_BLACK_SQUARE_2.asm"
      0  2090					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_BLACK_SQUARE_2", 72
     10  2090					      LIST	ON
      0  2090					      DEF	WHITE_QUEEN_on_BLACK_SQUARE_2
      1  2090				   BANK_WHITE_QUEEN_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  2090
      3  2090				   WHITE_QUEEN_on_BLACK_SQUARE_2
      3  2090		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  20a8		       01 01 03 03*	      .byte.b	$01,$01,$03,$03,$02,$00,$02,$00,$01,$00,$03,$03,$02,$00,$02,$00,$01,$01,$03,$03,$02,$00,$02,$00	;PF1
      5  20c0		       03 03 07 07*	      .byte.b	$03,$03,$07,$07,$05,$00,$05,$00,$03,$01,$03,$03,$01,$00,$05,$00,$03,$03,$07,$07,$05,$00,$05,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_QUEEN_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  20d8					      include	"gfx/WHITE_QUEEN_on_BLACK_SQUARE_3.asm"
      0  20d8					      OPTIONAL_PAGEBREAK	"WHITE_QUEEN_on_BLACK_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  WHITE_QUEEN_on_BLACK_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f100
     10  2100					      LIST	ON
      0  2100					      DEF	WHITE_QUEEN_on_BLACK_SQUARE_3
      1  2100				   BANK_WHITE_QUEEN_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  2100
      3  2100				   WHITE_QUEEN_on_BLACK_SQUARE_3
      3  2100		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2118		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2130		       70 70 f8 f8*	      .byte.b	$70,$70,$f8,$f8,$a8,$00,$a8,$00,$70,$20,$78,$78,$28,$00,$a8,$00,$70,$70,$f8,$f8,$a8,$00,$a8,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  2148					      include	"gfx/WHITE_KING_on_BLACK_SQUARE_0.asm"
      0  2148					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_BLACK_SQUARE_0", 72
     10  2148					      LIST	ON
      0  2148					      DEF	WHITE_KING_on_BLACK_SQUARE_0
      1  2148				   BANK_WHITE_KING_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  2148
      3  2148				   WHITE_KING_on_BLACK_SQUARE_0
      3  2148		       e0 f0 50 50*	      .byte.b	$e0,$f0,$50,$50,$f0,$40,$e0,$00,$e0,$60,$50,$50,$50,$40,$e0,$40,$e0,$e0,$f0,$50,$50,$b0,$e0,$40	;PF0
      4  2160		       00 80 80 80*	      .byte.b	$00,$80,$80,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$80,$80,$80,$00,$00	;PF1
      5  2178		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  2190					      include	"gfx/WHITE_KING_on_BLACK_SQUARE_1.asm"
      0  2190					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_BLACK_SQUARE_1", 72
     10  2190					      LIST	ON
      0  2190					      DEF	WHITE_KING_on_BLACK_SQUARE_1
      1  2190				   BANK_WHITE_KING_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  2190
      3  2190				   WHITE_KING_on_BLACK_SQUARE_1
      3  2190		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  21a8		       38 7c 54 54*	      .byte.b	$38,$7c,$54,$54,$7c,$10,$38,$00,$38,$30,$50,$50,$50,$10,$38,$10,$38,$38,$7c,$54,$54,$6c,$38,$10	;PF1
      5  21c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  21d8					      include	"gfx/WHITE_KING_on_BLACK_SQUARE_2.asm"
      0  21d8					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_BLACK_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  WHITE_KING_on_BLACK_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f200
     10  2200					      LIST	ON
      0  2200					      DEF	WHITE_KING_on_BLACK_SQUARE_2
      1  2200				   BANK_WHITE_KING_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  2200
      3  2200				   WHITE_KING_on_BLACK_SQUARE_2
      3  2200		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2218		       01 03 02 02*	      .byte.b	$01,$03,$02,$02,$03,$00,$01,$00,$01,$01,$02,$02,$02,$00,$01,$00,$01,$01,$03,$02,$02,$03,$01,$00	;PF1
      5  2230		       03 07 05 05*	      .byte.b	$03,$07,$05,$05,$07,$01,$03,$00,$03,$01,$01,$01,$01,$01,$03,$01,$03,$03,$07,$05,$05,$06,$03,$01	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_KING_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  2248					      include	"gfx/WHITE_KING_on_BLACK_SQUARE_3.asm"
      0  2248					      OPTIONAL_PAGEBREAK	"WHITE_KING_on_BLACK_SQUARE_3", 72
     10  2248					      LIST	ON
      0  2248					      DEF	WHITE_KING_on_BLACK_SQUARE_3
      1  2248				   BANK_WHITE_KING_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  2248
      3  2248				   WHITE_KING_on_BLACK_SQUARE_3
      3  2248		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2260		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2278		       70 f8 a8 a8*	      .byte.b	$70,$f8,$a8,$a8,$f8,$20,$70,$00,$70,$30,$28,$28,$28,$20,$70,$20,$70,$70,$f8,$a8,$a8,$d8,$70,$20	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  2290					      include	"gfx/BLACK_BLANK_on_WHITE_SQUARE_0.asm"
      0  2290					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_WHITE_SQUARE_0", 72
     10  2290					      LIST	ON
      0  2290					      DEF	BLACK_BLANK_on_WHITE_SQUARE_0
      1  2290				   BANK_BLACK_BLANK_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2290
      3  2290				   BLACK_BLANK_on_WHITE_SQUARE_0
      3  2290		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$f0,$f0,$f0,$f0,$f0,$f0,$f0,$f0	;PF0
      4  22a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$80,$80,$80,$80,$80,$80,$80	;PF1
      5  22c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  22d8					      include	"gfx/BLACK_BLANK_on_WHITE_SQUARE_1.asm"
      0  22d8					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_WHITE_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  BLACK_BLANK_on_WHITE_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f300
     10  2300					      LIST	ON
      0  2300					      DEF	BLACK_BLANK_on_WHITE_SQUARE_1
      1  2300				   BANK_BLACK_BLANK_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2300
      3  2300				   BLACK_BLANK_on_WHITE_SQUARE_1
      3  2300		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2318		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7c,$7c,$7c,$7c,$7c,$7c,$7c,$7c	;PF1
      5  2330		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  2348					      include	"gfx/BLACK_BLANK_on_WHITE_SQUARE_2.asm"
      0  2348					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_WHITE_SQUARE_2", 72
     10  2348					      LIST	ON
      0  2348					      DEF	BLACK_BLANK_on_WHITE_SQUARE_2
      1  2348				   BANK_BLACK_BLANK_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2348
      3  2348				   BLACK_BLANK_on_WHITE_SQUARE_2
      3  2348		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2360		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$03,$03,$03,$03,$03,$03,$03	;PF1
      5  2378		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$07,$07,$07,$07,$07,$07,$07	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  2390					      include	"gfx/BLACK_BLANK_on_WHITE_SQUARE_3.asm"
      0  2390					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_WHITE_SQUARE_3", 72
     10  2390					      LIST	ON
      0  2390					      DEF	BLACK_BLANK_on_WHITE_SQUARE_3
      1  2390				   BANK_BLACK_BLANK_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2390
      3  2390				   BLACK_BLANK_on_WHITE_SQUARE_3
      3  2390		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  23a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  23c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$f8,$f8,$f8,$f8,$f8,$f8,$f8,$f8	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  23d8					      include	"gfx/BLACK_PAWN_on_WHITE_SQUARE_0.asm"
      0  23d8					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_WHITE_SQUARE_0", 72
 PAGE BREAK INSERTED FOR  BLACK_PAWN_on_WHITE_SQUARE_0
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f400
     10  2400					      LIST	ON
      0  2400					      DEF	BLACK_PAWN_on_WHITE_SQUARE_0
      1  2400				   BANK_BLACK_PAWN_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2400
      3  2400				   BLACK_PAWN_on_WHITE_SQUARE_0
      3  2400		       e0 e0 40 40*	      .byte.b	$e0,$e0,$40,$40,$a0,$40,$40,$00,$00,$e0,$40,$40,$e0,$40,$40,$00,$00,$e0,$40,$40,$e0,$40,$40,$00	;PF0
      4  2418		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2430		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  2448					      include	"gfx/BLACK_PAWN_on_WHITE_SQUARE_1.asm"
      0  2448					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_WHITE_SQUARE_1", 72
     10  2448					      LIST	ON
      0  2448					      DEF	BLACK_PAWN_on_WHITE_SQUARE_1
      1  2448				   BANK_BLACK_PAWN_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2448
      3  2448				   BLACK_PAWN_on_WHITE_SQUARE_1
      3  2448		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2460		       38 38 10 10*	      .byte.b	$38,$38,$10,$10,$28,$10,$10,$00,$00,$38,$10,$10,$38,$10,$10,$00,$00,$38,$10,$10,$38,$10,$10,$00	;PF1
      5  2478		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  2490					      include	"gfx/BLACK_PAWN_on_WHITE_SQUARE_2.asm"
      0  2490					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_WHITE_SQUARE_2", 72
     10  2490					      LIST	ON
      0  2490					      DEF	BLACK_PAWN_on_WHITE_SQUARE_2
      1  2490				   BANK_BLACK_PAWN_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2490
      3  2490				   BLACK_PAWN_on_WHITE_SQUARE_2
      3  2490		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  24a8		       01 01 00 00*	      .byte.b	$01,$01,$00,$00,$01,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00	;PF1
      5  24c0		       03 03 01 01*	      .byte.b	$03,$03,$01,$01,$02,$01,$01,$00,$00,$03,$01,$01,$03,$01,$01,$00,$00,$03,$01,$01,$03,$01,$01,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  24d8					      include	"gfx/BLACK_PAWN_on_WHITE_SQUARE_3.asm"
      0  24d8					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_WHITE_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  BLACK_PAWN_on_WHITE_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f500
     10  2500					      LIST	ON
      0  2500					      DEF	BLACK_PAWN_on_WHITE_SQUARE_3
      1  2500				   BANK_BLACK_PAWN_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2500
      3  2500				   BLACK_PAWN_on_WHITE_SQUARE_3
      3  2500		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2518		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2530		       70 70 20 20*	      .byte.b	$70,$70,$20,$20,$50,$20,$20,$00,$00,$70,$20,$20,$70,$20,$20,$00,$00,$70,$20,$20,$70,$20,$20,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  2548					      include	"gfx/BLACK_KNIGHT_on_WHITE_SQUARE_0.asm"
      0  2548					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_WHITE_SQUARE_0", 72
     10  2548					      LIST	ON
      0  2548					      DEF	BLACK_KNIGHT_on_WHITE_SQUARE_0
      1  2548				   BANK_BLACK_KNIGHT_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2548
      3  2548				   BLACK_KNIGHT_on_WHITE_SQUARE_0
      3  2548		       f0 f0 e0 f0*	      .byte.b	$f0,$f0,$e0,$f0,$f0,$a0,$40,$00,$f0,$f0,$e0,$c0,$f0,$b0,$40,$00,$f0,$f0,$e0,$c0,$f0,$b0,$40,$00	;PF0
      4  2560		       80 00 80 80*	      .byte.b	$80,$00,$80,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$80,$00,$80,$00,$00,$80,$80,$80,$80,$00	;PF1
      5  2578		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  2590					      include	"gfx/BLACK_KNIGHT_on_WHITE_SQUARE_1.asm"
      0  2590					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_WHITE_SQUARE_1", 72
     10  2590					      LIST	ON
      0  2590					      DEF	BLACK_KNIGHT_on_WHITE_SQUARE_1
      1  2590				   BANK_BLACK_KNIGHT_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2590
      3  2590				   BLACK_KNIGHT_on_WHITE_SQUARE_1
      3  2590		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  25a8		       7c 78 3c 7c*	      .byte.b	$7c,$78,$3c,$7c,$7c,$2c,$14,$00,$7c,$78,$38,$18,$78,$68,$14,$00,$7c,$78,$38,$1c,$7c,$6c,$14,$00	;PF1
      5  25c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  25d8					      include	"gfx/BLACK_KNIGHT_on_WHITE_SQUARE_2.asm"
      0  25d8					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_WHITE_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  BLACK_KNIGHT_on_WHITE_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f600
     10  2600					      LIST	ON
      0  2600					      DEF	BLACK_KNIGHT_on_WHITE_SQUARE_2
      1  2600				   BANK_BLACK_KNIGHT_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2600
      3  2600				   BLACK_KNIGHT_on_WHITE_SQUARE_2
      3  2600		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2618		       03 03 01 03*	      .byte.b	$03,$03,$01,$03,$03,$01,$00,$00,$03,$03,$01,$00,$03,$03,$00,$00,$03,$03,$01,$00,$03,$03,$00,$00	;PF1
      5  2630		       07 03 07 07*	      .byte.b	$07,$03,$07,$07,$07,$06,$05,$00,$07,$03,$03,$03,$03,$02,$05,$00,$07,$03,$03,$07,$07,$06,$05,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  2648					      include	"gfx/BLACK_KNIGHT_on_WHITE_SQUARE_3.asm"
      0  2648					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_WHITE_SQUARE_3", 72
     10  2648					      LIST	ON
      0  2648					      DEF	BLACK_KNIGHT_on_WHITE_SQUARE_3
      1  2648				   BANK_BLACK_KNIGHT_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2648
      3  2648				   BLACK_KNIGHT_on_WHITE_SQUARE_3
      3  2648		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2660		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2678		       f8 78 f0 f8*	      .byte.b	$f8,$78,$f0,$f8,$f8,$d0,$a0,$00,$f8,$78,$70,$60,$78,$58,$a0,$00,$f8,$78,$70,$e0,$f8,$d8,$a0,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  2690					      include	"gfx/BLACK_BISHOP_on_WHITE_SQUARE_0.asm"
      0  2690					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_WHITE_SQUARE_0", 72
     10  2690					      LIST	ON
      0  2690					      DEF	BLACK_BISHOP_on_WHITE_SQUARE_0
      1  2690				   BANK_BLACK_BISHOP_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2690
      3  2690				   BLACK_BISHOP_on_WHITE_SQUARE_0
      3  2690		       f0 e0 f0 b0*	      .byte.b	$f0,$e0,$f0,$b0,$d0,$e0,$40,$40,$f0,$60,$f0,$b0,$d0,$e0,$00,$40,$f0,$e0,$f0,$f0,$f0,$e0,$00,$40	;PF0
      4  26a8		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$80,$80,$00,$00,$00	;PF1
      5  26c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  26d8					      include	"gfx/BLACK_BISHOP_on_WHITE_SQUARE_1.asm"
      0  26d8					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_WHITE_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  BLACK_BISHOP_on_WHITE_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f700
     10  2700					      LIST	ON
      0  2700					      DEF	BLACK_BISHOP_on_WHITE_SQUARE_1
      1  2700				   BANK_BLACK_BISHOP_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2700
      3  2700				   BLACK_BISHOP_on_WHITE_SQUARE_1
      3  2700		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2718		       78 38 7c 6c*	      .byte.b	$78,$38,$7c,$6c,$5c,$38,$10,$10,$7c,$30,$78,$68,$58,$38,$00,$10,$7c,$38,$78,$7c,$7c,$38,$00,$10	;PF1
      5  2730		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  2748					      include	"gfx/BLACK_BISHOP_on_WHITE_SQUARE_2.asm"
      0  2748					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_WHITE_SQUARE_2", 72
     10  2748					      LIST	ON
      0  2748					      DEF	BLACK_BISHOP_on_WHITE_SQUARE_2
      1  2748				   BANK_BLACK_BISHOP_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2748
      3  2748				   BLACK_BISHOP_on_WHITE_SQUARE_2
      3  2748		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2760		       03 01 03 03*	      .byte.b	$03,$01,$03,$03,$02,$01,$00,$00,$03,$01,$03,$03,$02,$01,$00,$00,$03,$01,$03,$03,$03,$01,$00,$00	;PF1
      5  2778		       03 03 07 06*	      .byte.b	$03,$03,$07,$06,$07,$03,$01,$01,$07,$01,$03,$02,$03,$03,$00,$01,$07,$03,$03,$07,$07,$03,$00,$01	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  2790					      include	"gfx/BLACK_BISHOP_on_WHITE_SQUARE_3.asm"
      0  2790					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_WHITE_SQUARE_3", 72
     10  2790					      LIST	ON
      0  2790					      DEF	BLACK_BISHOP_on_WHITE_SQUARE_3
      1  2790				   BANK_BLACK_BISHOP_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2790
      3  2790				   BLACK_BISHOP_on_WHITE_SQUARE_3
      3  2790		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  27a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  27c0		       78 70 f8 d8*	      .byte.b	$78,$70,$f8,$d8,$e8,$70,$20,$20,$f8,$30,$78,$58,$68,$70,$00,$20,$f8,$70,$78,$f8,$f8,$70,$00,$20	;PF2
------- FILE piece_graphics.asm
      0  27d8					      CHECK_BANK_SIZE	"PIECE_2 (2K)"
      1  27d8		       07 d8	   .TEMP      =	* - BANK_START
 PIECE_2 (2K) (2K) SIZE =  $7d8 , FREE= $28
      2  27d8					      ECHO	"PIECE_2 (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  27d8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  27d8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  27d8				  -	      ERR
      6  27d8					      endif
      0  27d8					      NEWBANK	PIECES_3
      1  2fd8 ????				      SEG	PIECES_3
      2  2800					      ORG	ORIGIN
      3  2800					      RORG	$F000
      4  2800				   BANK_START SET	*
      5  2800				   PIECES_3   SET	ORIGIN / 2048
      6  2800				   ORIGIN     SET	ORIGIN + 2048
      7  2800				   _CURRENT_BANK SET	PIECES_3
------- FILE gfx/BLACK_ROOK_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  2800					      include	"gfx/BLACK_ROOK_on_WHITE_SQUARE_0.asm"
      0  2800					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_WHITE_SQUARE_0", 72
     10  2800					      LIST	ON
      0  2800					      DEF	BLACK_ROOK_on_WHITE_SQUARE_0
      1  2800				   BANK_BLACK_ROOK_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2800
      3  2800				   BLACK_ROOK_on_WHITE_SQUARE_0
      3  2800		       f0 e0 e0 e0*	      .byte.b	$f0,$e0,$e0,$e0,$f0,$50,$50,$00,$f0,$60,$60,$60,$f0,$50,$00,$00,$f0,$e0,$e0,$e0,$f0,$50,$50,$00	;PF0
      4  2818		       00 00 00 80*	      .byte.b	$00,$00,$00,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$80,$80,$80,$00	;PF1
      5  2830		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  2848					      include	"gfx/BLACK_ROOK_on_WHITE_SQUARE_1.asm"
      0  2848					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_WHITE_SQUARE_1", 72
     10  2848					      LIST	ON
      0  2848					      DEF	BLACK_ROOK_on_WHITE_SQUARE_1
      1  2848				   BANK_BLACK_ROOK_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2848
      3  2848				   BLACK_ROOK_on_WHITE_SQUARE_1
      3  2848		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2860		       78 38 38 3c*	      .byte.b	$78,$38,$38,$3c,$7c,$54,$54,$00,$7c,$30,$30,$30,$78,$50,$00,$00,$7c,$38,$38,$38,$7c,$54,$54,$00	;PF1
      5  2878		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  2890					      include	"gfx/BLACK_ROOK_on_WHITE_SQUARE_2.asm"
      0  2890					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_WHITE_SQUARE_2", 72
     10  2890					      LIST	ON
      0  2890					      DEF	BLACK_ROOK_on_WHITE_SQUARE_2
      1  2890				   BANK_BLACK_ROOK_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2890
      3  2890				   BLACK_ROOK_on_WHITE_SQUARE_2
      3  2890		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  28a8		       03 01 01 01*	      .byte.b	$03,$01,$01,$01,$03,$02,$02,$00,$03,$01,$01,$01,$03,$02,$00,$00,$03,$01,$01,$01,$03,$02,$02,$00	;PF1
      5  28c0		       03 03 03 07*	      .byte.b	$03,$03,$03,$07,$07,$05,$05,$00,$07,$01,$01,$01,$03,$01,$00,$00,$07,$03,$03,$03,$07,$05,$05,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  28d8					      include	"gfx/BLACK_ROOK_on_WHITE_SQUARE_3.asm"
      0  28d8					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_WHITE_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  BLACK_ROOK_on_WHITE_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f100
     10  2900					      LIST	ON
      0  2900					      DEF	BLACK_ROOK_on_WHITE_SQUARE_3
      1  2900				   BANK_BLACK_ROOK_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2900
      3  2900				   BLACK_ROOK_on_WHITE_SQUARE_3
      3  2900		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2918		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2930		       78 70 70 f0*	      .byte.b	$78,$70,$70,$f0,$f8,$a8,$a8,$00,$f8,$30,$30,$30,$78,$28,$00,$00,$f8,$70,$70,$70,$f8,$a8,$a8,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  2948					      include	"gfx/BLACK_QUEEN_on_WHITE_SQUARE_0.asm"
      0  2948					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_WHITE_SQUARE_0", 72
     10  2948					      LIST	ON
      0  2948					      DEF	BLACK_QUEEN_on_WHITE_SQUARE_0
      1  2948				   BANK_BLACK_QUEEN_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2948
      3  2948				   BLACK_QUEEN_on_WHITE_SQUARE_0
      3  2948		       e0 e0 f0 f0*	      .byte.b	$e0,$e0,$f0,$f0,$50,$00,$50,$00,$e0,$40,$f0,$f0,$50,$00,$50,$00,$e0,$e0,$f0,$f0,$50,$00,$50,$00	;PF0
      4  2960		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$00,$80,$80,$00,$80,$00	;PF1
      5  2978		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  2990					      include	"gfx/BLACK_QUEEN_on_WHITE_SQUARE_1.asm"
      0  2990					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_WHITE_SQUARE_1", 72
     10  2990					      LIST	ON
      0  2990					      DEF	BLACK_QUEEN_on_WHITE_SQUARE_1
      1  2990				   BANK_BLACK_QUEEN_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2990
      3  2990				   BLACK_QUEEN_on_WHITE_SQUARE_1
      3  2990		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  29a8		       38 38 7c 7c*	      .byte.b	$38,$38,$7c,$7c,$54,$00,$54,$00,$38,$10,$78,$78,$50,$00,$54,$00,$38,$38,$78,$7c,$54,$00,$54,$00	;PF1
      5  29c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  29d8					      include	"gfx/BLACK_QUEEN_on_WHITE_SQUARE_2.asm"
      0  29d8					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_WHITE_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  BLACK_QUEEN_on_WHITE_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f200
     10  2a00					      LIST	ON
      0  2a00					      DEF	BLACK_QUEEN_on_WHITE_SQUARE_2
      1  2a00				   BANK_BLACK_QUEEN_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2a00
      3  2a00				   BLACK_QUEEN_on_WHITE_SQUARE_2
      3  2a00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2a18		       01 01 03 03*	      .byte.b	$01,$01,$03,$03,$02,$00,$02,$00,$01,$00,$03,$03,$02,$00,$02,$00,$01,$01,$03,$03,$02,$00,$02,$00	;PF1
      5  2a30		       03 03 07 07*	      .byte.b	$03,$03,$07,$07,$05,$00,$05,$00,$03,$01,$03,$03,$01,$00,$05,$00,$03,$03,$03,$07,$05,$00,$05,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  2a48					      include	"gfx/BLACK_QUEEN_on_WHITE_SQUARE_3.asm"
      0  2a48					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_WHITE_SQUARE_3", 72
     10  2a48					      LIST	ON
      0  2a48					      DEF	BLACK_QUEEN_on_WHITE_SQUARE_3
      1  2a48				   BANK_BLACK_QUEEN_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2a48
      3  2a48				   BLACK_QUEEN_on_WHITE_SQUARE_3
      3  2a48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2a60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2a78		       70 70 f8 f8*	      .byte.b	$70,$70,$f8,$f8,$a8,$00,$a8,$00,$70,$20,$78,$78,$28,$00,$a8,$00,$70,$70,$78,$f8,$a8,$00,$a8,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  2a90					      include	"gfx/BLACK_KING_on_WHITE_SQUARE_0.asm"
      0  2a90					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_WHITE_SQUARE_0", 72
     10  2a90					      LIST	ON
      0  2a90					      DEF	BLACK_KING_on_WHITE_SQUARE_0
      1  2a90				   BANK_BLACK_KING_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  2a90
      3  2a90				   BLACK_KING_on_WHITE_SQUARE_0
      3  2a90		       e0 f0 50 50*	      .byte.b	$e0,$f0,$50,$50,$f0,$40,$e0,$40,$e0,$60,$50,$50,$50,$40,$e0,$40,$e0,$e0,$50,$f0,$f0,$40,$e0,$40	;PF0
      4  2aa8		       00 80 80 80*	      .byte.b	$00,$80,$80,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$80,$80,$00,$00,$00	;PF1
      5  2ac0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  2ad8					      include	"gfx/BLACK_KING_on_WHITE_SQUARE_1.asm"
      0  2ad8					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_WHITE_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  BLACK_KING_on_WHITE_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f300
     10  2b00					      LIST	ON
      0  2b00					      DEF	BLACK_KING_on_WHITE_SQUARE_1
      1  2b00				   BANK_BLACK_KING_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  2b00
      3  2b00				   BLACK_KING_on_WHITE_SQUARE_1
      3  2b00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2b18		       38 7c 54 54*	      .byte.b	$38,$7c,$54,$54,$7c,$10,$38,$10,$38,$30,$50,$50,$50,$10,$38,$10,$38,$38,$54,$7c,$7c,$10,$38,$10	;PF1
      5  2b30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  2b48					      include	"gfx/BLACK_KING_on_WHITE_SQUARE_2.asm"
      0  2b48					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_WHITE_SQUARE_2", 72
     10  2b48					      LIST	ON
      0  2b48					      DEF	BLACK_KING_on_WHITE_SQUARE_2
      1  2b48				   BANK_BLACK_KING_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  2b48
      3  2b48				   BLACK_KING_on_WHITE_SQUARE_2
      3  2b48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2b60		       01 03 02 02*	      .byte.b	$01,$03,$02,$02,$03,$00,$01,$00,$01,$01,$02,$02,$02,$00,$01,$00,$01,$01,$02,$03,$03,$00,$01,$00	;PF1
      5  2b78		       03 07 05 05*	      .byte.b	$03,$07,$05,$05,$07,$01,$03,$01,$03,$01,$01,$01,$01,$01,$03,$01,$03,$03,$05,$07,$07,$01,$03,$01	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  2b90					      include	"gfx/BLACK_KING_on_WHITE_SQUARE_3.asm"
      0  2b90					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_WHITE_SQUARE_3", 72
     10  2b90					      LIST	ON
      0  2b90					      DEF	BLACK_KING_on_WHITE_SQUARE_3
      1  2b90				   BANK_BLACK_KING_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  2b90
      3  2b90				   BLACK_KING_on_WHITE_SQUARE_3
      3  2b90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2ba8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2bc0		       70 f8 a8 a8*	      .byte.b	$70,$f8,$a8,$a8,$f8,$20,$70,$20,$70,$30,$28,$28,$28,$20,$70,$20,$70,$70,$a8,$f8,$f8,$20,$70,$20	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  2bd8					      include	"gfx/BLACK_BLANK_on_BLACK_SQUARE_0.asm"
      0  2bd8					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_BLACK_SQUARE_0", 72
 PAGE BREAK INSERTED FOR  BLACK_BLANK_on_BLACK_SQUARE_0
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f400
     10  2c00					      LIST	ON
      0  2c00					      DEF	BLACK_BLANK_on_BLACK_SQUARE_0
      1  2c00				   BANK_BLACK_BLANK_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  2c00
      3  2c00				   BLACK_BLANK_on_BLACK_SQUARE_0
      3  2c00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2c18		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2c30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  2c48					      include	"gfx/BLACK_BLANK_on_BLACK_SQUARE_1.asm"
      0  2c48					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_BLACK_SQUARE_1", 72
     10  2c48					      LIST	ON
      0  2c48					      DEF	BLACK_BLANK_on_BLACK_SQUARE_1
      1  2c48				   BANK_BLACK_BLANK_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  2c48
      3  2c48				   BLACK_BLANK_on_BLACK_SQUARE_1
      3  2c48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2c60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2c78		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  2c90					      include	"gfx/BLACK_BLANK_on_BLACK_SQUARE_2.asm"
      0  2c90					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_BLACK_SQUARE_2", 72
     10  2c90					      LIST	ON
      0  2c90					      DEF	BLACK_BLANK_on_BLACK_SQUARE_2
      1  2c90				   BANK_BLACK_BLANK_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  2c90
      3  2c90				   BLACK_BLANK_on_BLACK_SQUARE_2
      3  2c90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2ca8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2cc0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BLANK_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  2cd8					      include	"gfx/BLACK_BLANK_on_BLACK_SQUARE_3.asm"
      0  2cd8					      OPTIONAL_PAGEBREAK	"BLACK_BLANK_on_BLACK_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  BLACK_BLANK_on_BLACK_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f500
     10  2d00					      LIST	ON
      0  2d00					      DEF	BLACK_BLANK_on_BLACK_SQUARE_3
      1  2d00				   BANK_BLACK_BLANK_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  2d00
      3  2d00				   BLACK_BLANK_on_BLACK_SQUARE_3
      3  2d00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2d18		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2d30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  2d48					      include	"gfx/BLACK_PAWN_on_BLACK_SQUARE_0.asm"
      0  2d48					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_BLACK_SQUARE_0", 72
     10  2d48					      LIST	ON
      0  2d48					      DEF	BLACK_PAWN_on_BLACK_SQUARE_0
      1  2d48				   BANK_BLACK_PAWN_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  2d48
      3  2d48				   BLACK_PAWN_on_BLACK_SQUARE_0
      3  2d48		       e0 e0 40 40*	      .byte.b	$e0,$e0,$40,$40,$a0,$40,$40,$00,$00,$e0,$40,$40,$e0,$40,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2d60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2d78		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  2d90					      include	"gfx/BLACK_PAWN_on_BLACK_SQUARE_1.asm"
      0  2d90					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_BLACK_SQUARE_1", 72
     10  2d90					      LIST	ON
      0  2d90					      DEF	BLACK_PAWN_on_BLACK_SQUARE_1
      1  2d90				   BANK_BLACK_PAWN_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  2d90
      3  2d90				   BLACK_PAWN_on_BLACK_SQUARE_1
      3  2d90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2da8		       38 38 10 10*	      .byte.b	$38,$38,$10,$10,$28,$10,$10,$00,$00,$38,$10,$10,$38,$10,$10,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2dc0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  2dd8					      include	"gfx/BLACK_PAWN_on_BLACK_SQUARE_2.asm"
      0  2dd8					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_BLACK_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  BLACK_PAWN_on_BLACK_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f600
     10  2e00					      LIST	ON
      0  2e00					      DEF	BLACK_PAWN_on_BLACK_SQUARE_2
      1  2e00				   BANK_BLACK_PAWN_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  2e00
      3  2e00				   BLACK_PAWN_on_BLACK_SQUARE_2
      3  2e00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2e18		       01 01 00 00*	      .byte.b	$01,$01,$00,$00,$01,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2e30		       03 03 01 01*	      .byte.b	$03,$03,$01,$01,$02,$01,$01,$00,$00,$03,$01,$01,$03,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_PAWN_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  2e48					      include	"gfx/BLACK_PAWN_on_BLACK_SQUARE_3.asm"
      0  2e48					      OPTIONAL_PAGEBREAK	"BLACK_PAWN_on_BLACK_SQUARE_3", 72
     10  2e48					      LIST	ON
      0  2e48					      DEF	BLACK_PAWN_on_BLACK_SQUARE_3
      1  2e48				   BANK_BLACK_PAWN_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  2e48
      3  2e48				   BLACK_PAWN_on_BLACK_SQUARE_3
      3  2e48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2e60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2e78		       70 70 20 20*	      .byte.b	$70,$70,$20,$20,$50,$20,$20,$00,$00,$70,$20,$20,$70,$20,$20,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  2e90					      include	"gfx/BLACK_KNIGHT_on_BLACK_SQUARE_0.asm"
      0  2e90					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_BLACK_SQUARE_0", 72
     10  2e90					      LIST	ON
      0  2e90					      DEF	BLACK_KNIGHT_on_BLACK_SQUARE_0
      1  2e90				   BANK_BLACK_KNIGHT_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  2e90
      3  2e90				   BLACK_KNIGHT_on_BLACK_SQUARE_0
      3  2e90		       f0 f0 e0 f0*	      .byte.b	$f0,$f0,$e0,$f0,$f0,$a0,$40,$00,$f0,$f0,$e0,$c0,$f0,$b0,$40,$00,$00,$00,$00,$20,$00,$40,$00,$00	;PF0
      4  2ea8		       80 00 80 80*	      .byte.b	$80,$00,$80,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2ec0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  2ed8					      include	"gfx/BLACK_KNIGHT_on_BLACK_SQUARE_1.asm"
      0  2ed8					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_BLACK_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  BLACK_KNIGHT_on_BLACK_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f700
     10  2f00					      LIST	ON
      0  2f00					      DEF	BLACK_KNIGHT_on_BLACK_SQUARE_1
      1  2f00				   BANK_BLACK_KNIGHT_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  2f00
      3  2f00				   BLACK_KNIGHT_on_BLACK_SQUARE_1
      3  2f00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2f18		       7c 78 3c 7c*	      .byte.b	$7c,$78,$3c,$7c,$7c,$2c,$14,$00,$7c,$78,$38,$18,$78,$68,$14,$00,$00,$00,$00,$20,$00,$10,$00,$00	;PF1
      5  2f30		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  2f48					      include	"gfx/BLACK_KNIGHT_on_BLACK_SQUARE_2.asm"
      0  2f48					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_BLACK_SQUARE_2", 72
     10  2f48					      LIST	ON
      0  2f48					      DEF	BLACK_KNIGHT_on_BLACK_SQUARE_2
      1  2f48				   BANK_BLACK_KNIGHT_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  2f48
      3  2f48				   BLACK_KNIGHT_on_BLACK_SQUARE_2
      3  2f48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2f60		       03 03 01 03*	      .byte.b	$03,$03,$01,$03,$03,$01,$00,$00,$03,$03,$01,$00,$03,$03,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00	;PF1
      5  2f78		       07 03 07 07*	      .byte.b	$07,$03,$07,$07,$07,$06,$05,$00,$07,$03,$03,$03,$03,$02,$05,$00,$00,$00,$00,$00,$00,$01,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KNIGHT_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  2f90					      include	"gfx/BLACK_KNIGHT_on_BLACK_SQUARE_3.asm"
      0  2f90					      OPTIONAL_PAGEBREAK	"BLACK_KNIGHT_on_BLACK_SQUARE_3", 72
     10  2f90					      LIST	ON
      0  2f90					      DEF	BLACK_KNIGHT_on_BLACK_SQUARE_3
      1  2f90				   BANK_BLACK_KNIGHT_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  2f90
      3  2f90				   BLACK_KNIGHT_on_BLACK_SQUARE_3
      3  2f90		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  2fa8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  2fc0		       f8 78 f0 f8*	      .byte.b	$f8,$78,$f0,$f8,$f8,$d0,$a0,$00,$f8,$78,$70,$60,$78,$58,$a0,$00,$00,$00,$00,$10,$00,$20,$00,$00	;PF2
------- FILE piece_graphics.asm
      0  2fd8					      CHECK_BANK_SIZE	"PIECES_3 (2K)"
      1  2fd8		       07 d8	   .TEMP      =	* - BANK_START
 PIECES_3 (2K) (2K) SIZE =  $7d8 , FREE= $28
      2  2fd8					      ECHO	"PIECES_3 (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  2fd8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  2fd8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  2fd8				  -	      ERR
      6  2fd8					      endif
      0  2fd8					      NEWBANK	PIECES_4
      1  37d8 ????				      SEG	PIECES_4
      2  3000					      ORG	ORIGIN
      3  3000					      RORG	$F000
      4  3000				   BANK_START SET	*
      5  3000				   PIECES_4   SET	ORIGIN / 2048
      6  3000				   ORIGIN     SET	ORIGIN + 2048
      7  3000				   _CURRENT_BANK SET	PIECES_4
------- FILE gfx/BLACK_BISHOP_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  3000					      include	"gfx/BLACK_BISHOP_on_BLACK_SQUARE_0.asm"
      0  3000					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_BLACK_SQUARE_0", 72
     10  3000					      LIST	ON
      0  3000					      DEF	BLACK_BISHOP_on_BLACK_SQUARE_0
      1  3000				   BANK_BLACK_BISHOP_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  3000
      3  3000				   BLACK_BISHOP_on_BLACK_SQUARE_0
      3  3000		       f0 e0 f0 b0*	      .byte.b	$f0,$e0,$f0,$b0,$d0,$e0,$40,$40,$f0,$60,$f0,$b0,$d0,$e0,$00,$40,$00,$00,$00,$00,$00,$00,$40,$00	;PF0
      4  3018		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3030		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  3048					      include	"gfx/BLACK_BISHOP_on_BLACK_SQUARE_1.asm"
      0  3048					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_BLACK_SQUARE_1", 72
     10  3048					      LIST	ON
      0  3048					      DEF	BLACK_BISHOP_on_BLACK_SQUARE_1
      1  3048				   BANK_BLACK_BISHOP_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  3048
      3  3048				   BLACK_BISHOP_on_BLACK_SQUARE_1
      3  3048		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3060		       78 38 7c 6c*	      .byte.b	$78,$38,$7c,$6c,$5c,$38,$10,$10,$7c,$30,$78,$68,$58,$38,$00,$10,$00,$00,$00,$00,$00,$00,$10,$00	;PF1
      5  3078		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  3090					      include	"gfx/BLACK_BISHOP_on_BLACK_SQUARE_2.asm"
      0  3090					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_BLACK_SQUARE_2", 72
     10  3090					      LIST	ON
      0  3090					      DEF	BLACK_BISHOP_on_BLACK_SQUARE_2
      1  3090				   BANK_BLACK_BISHOP_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  3090
      3  3090				   BLACK_BISHOP_on_BLACK_SQUARE_2
      3  3090		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  30a8		       03 01 03 03*	      .byte.b	$03,$01,$03,$03,$02,$01,$00,$00,$03,$01,$03,$03,$02,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  30c0		       03 03 07 06*	      .byte.b	$03,$03,$07,$06,$07,$03,$01,$01,$07,$01,$03,$02,$03,$03,$00,$01,$00,$00,$00,$00,$00,$00,$01,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_BISHOP_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  30d8					      include	"gfx/BLACK_BISHOP_on_BLACK_SQUARE_3.asm"
      0  30d8					      OPTIONAL_PAGEBREAK	"BLACK_BISHOP_on_BLACK_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  BLACK_BISHOP_on_BLACK_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f100
     10  3100					      LIST	ON
      0  3100					      DEF	BLACK_BISHOP_on_BLACK_SQUARE_3
      1  3100				   BANK_BLACK_BISHOP_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  3100
      3  3100				   BLACK_BISHOP_on_BLACK_SQUARE_3
      3  3100		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3118		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3130		       78 70 f8 d8*	      .byte.b	$78,$70,$f8,$d8,$e8,$70,$20,$20,$f8,$30,$78,$58,$68,$70,$00,$20,$00,$00,$00,$00,$00,$00,$20,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  3148					      include	"gfx/BLACK_ROOK_on_BLACK_SQUARE_0.asm"
      0  3148					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_BLACK_SQUARE_0", 72
     10  3148					      LIST	ON
      0  3148					      DEF	BLACK_ROOK_on_BLACK_SQUARE_0
      1  3148				   BANK_BLACK_ROOK_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  3148
      3  3148				   BLACK_ROOK_on_BLACK_SQUARE_0
      3  3148		       f0 e0 e0 e0*	      .byte.b	$f0,$e0,$e0,$e0,$f0,$50,$50,$00,$f0,$60,$60,$60,$f0,$50,$00,$00,$00,$00,$00,$00,$00,$a0,$00,$00	;PF0
      4  3160		       00 00 00 80*	      .byte.b	$00,$00,$00,$80,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3178		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  3190					      include	"gfx/BLACK_ROOK_on_BLACK_SQUARE_1.asm"
      0  3190					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_BLACK_SQUARE_1", 72
     10  3190					      LIST	ON
      0  3190					      DEF	BLACK_ROOK_on_BLACK_SQUARE_1
      1  3190				   BANK_BLACK_ROOK_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  3190
      3  3190				   BLACK_ROOK_on_BLACK_SQUARE_1
      3  3190		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  31a8		       78 38 38 3c*	      .byte.b	$78,$38,$38,$3c,$7c,$54,$54,$00,$7c,$30,$30,$30,$78,$50,$00,$00,$00,$00,$00,$00,$00,$28,$00,$00	;PF1
      5  31c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  31d8					      include	"gfx/BLACK_ROOK_on_BLACK_SQUARE_2.asm"
      0  31d8					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_BLACK_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  BLACK_ROOK_on_BLACK_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f200
     10  3200					      LIST	ON
      0  3200					      DEF	BLACK_ROOK_on_BLACK_SQUARE_2
      1  3200				   BANK_BLACK_ROOK_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  3200
      3  3200				   BLACK_ROOK_on_BLACK_SQUARE_2
      3  3200		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3218		       03 01 01 01*	      .byte.b	$03,$01,$01,$01,$03,$02,$02,$00,$03,$01,$01,$01,$03,$02,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00	;PF1
      5  3230		       03 03 03 07*	      .byte.b	$03,$03,$03,$07,$07,$05,$05,$00,$07,$01,$01,$01,$03,$01,$00,$00,$00,$00,$00,$00,$00,$02,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_ROOK_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  3248					      include	"gfx/BLACK_ROOK_on_BLACK_SQUARE_3.asm"
      0  3248					      OPTIONAL_PAGEBREAK	"BLACK_ROOK_on_BLACK_SQUARE_3", 72
     10  3248					      LIST	ON
      0  3248					      DEF	BLACK_ROOK_on_BLACK_SQUARE_3
      1  3248				   BANK_BLACK_ROOK_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  3248
      3  3248				   BLACK_ROOK_on_BLACK_SQUARE_3
      3  3248		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3260		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3278		       78 70 70 f0*	      .byte.b	$78,$70,$70,$f0,$f8,$a8,$a8,$00,$f8,$30,$30,$30,$78,$28,$00,$00,$00,$00,$00,$00,$00,$50,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  3290					      include	"gfx/BLACK_QUEEN_on_BLACK_SQUARE_0.asm"
      0  3290					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_BLACK_SQUARE_0", 72
     10  3290					      LIST	ON
      0  3290					      DEF	BLACK_QUEEN_on_BLACK_SQUARE_0
      1  3290				   BANK_BLACK_QUEEN_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  3290
      3  3290				   BLACK_QUEEN_on_BLACK_SQUARE_0
      3  3290		       e0 e0 f0 f0*	      .byte.b	$e0,$e0,$f0,$f0,$50,$00,$50,$00,$e0,$40,$f0,$f0,$50,$00,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  32a8		       00 00 80 80*	      .byte.b	$00,$00,$80,$80,$80,$00,$80,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  32c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  32d8					      include	"gfx/BLACK_QUEEN_on_BLACK_SQUARE_1.asm"
      0  32d8					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_BLACK_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  BLACK_QUEEN_on_BLACK_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f300
     10  3300					      LIST	ON
      0  3300					      DEF	BLACK_QUEEN_on_BLACK_SQUARE_1
      1  3300				   BANK_BLACK_QUEEN_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  3300
      3  3300				   BLACK_QUEEN_on_BLACK_SQUARE_1
      3  3300		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3318		       38 38 7c 7c*	      .byte.b	$38,$38,$7c,$7c,$54,$00,$54,$00,$38,$10,$78,$78,$50,$00,$54,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3330		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  3348					      include	"gfx/BLACK_QUEEN_on_BLACK_SQUARE_2.asm"
      0  3348					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_BLACK_SQUARE_2", 72
     10  3348					      LIST	ON
      0  3348					      DEF	BLACK_QUEEN_on_BLACK_SQUARE_2
      1  3348				   BANK_BLACK_QUEEN_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  3348
      3  3348				   BLACK_QUEEN_on_BLACK_SQUARE_2
      3  3348		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3360		       01 01 03 03*	      .byte.b	$01,$01,$03,$03,$02,$00,$02,$00,$01,$00,$03,$03,$02,$00,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3378		       03 03 07 07*	      .byte.b	$03,$03,$07,$07,$05,$00,$05,$00,$03,$01,$03,$03,$01,$00,$05,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_QUEEN_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  3390					      include	"gfx/BLACK_QUEEN_on_BLACK_SQUARE_3.asm"
      0  3390					      OPTIONAL_PAGEBREAK	"BLACK_QUEEN_on_BLACK_SQUARE_3", 72
     10  3390					      LIST	ON
      0  3390					      DEF	BLACK_QUEEN_on_BLACK_SQUARE_3
      1  3390				   BANK_BLACK_QUEEN_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  3390
      3  3390				   BLACK_QUEEN_on_BLACK_SQUARE_3
      3  3390		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  33a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  33c0		       70 70 f8 f8*	      .byte.b	$70,$70,$f8,$f8,$a8,$00,$a8,$00,$70,$20,$78,$78,$28,$00,$a8,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  33d8					      include	"gfx/BLACK_KING_on_BLACK_SQUARE_0.asm"
      0  33d8					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_BLACK_SQUARE_0", 72
 PAGE BREAK INSERTED FOR  BLACK_KING_on_BLACK_SQUARE_0
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f400
     10  3400					      LIST	ON
      0  3400					      DEF	BLACK_KING_on_BLACK_SQUARE_0
      1  3400				   BANK_BLACK_KING_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  3400
      3  3400				   BLACK_KING_on_BLACK_SQUARE_0
      3  3400		       e0 f0 50 50*	      .byte.b	$e0,$f0,$50,$50,$f0,$40,$e0,$40,$e0,$60,$50,$50,$50,$40,$e0,$40,$00,$00,$a0,$00,$00,$b0,$00,$00	;PF0
      4  3418		       00 80 80 80*	      .byte.b	$00,$80,$80,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00	;PF1
      5  3430		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  3448					      include	"gfx/BLACK_KING_on_BLACK_SQUARE_1.asm"
      0  3448					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_BLACK_SQUARE_1", 72
     10  3448					      LIST	ON
      0  3448					      DEF	BLACK_KING_on_BLACK_SQUARE_1
      1  3448				   BANK_BLACK_KING_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  3448
      3  3448				   BLACK_KING_on_BLACK_SQUARE_1
      3  3448		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3460		       38 7c 54 54*	      .byte.b	$38,$7c,$54,$54,$7c,$10,$38,$10,$38,$30,$50,$50,$50,$10,$38,$10,$00,$00,$28,$00,$00,$6c,$00,$00	;PF1
      5  3478		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  3490					      include	"gfx/BLACK_KING_on_BLACK_SQUARE_2.asm"
      0  3490					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_BLACK_SQUARE_2", 72
     10  3490					      LIST	ON
      0  3490					      DEF	BLACK_KING_on_BLACK_SQUARE_2
      1  3490				   BANK_BLACK_KING_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  3490
      3  3490				   BLACK_KING_on_BLACK_SQUARE_2
      3  3490		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  34a8		       01 03 02 02*	      .byte.b	$01,$03,$02,$02,$03,$00,$01,$00,$01,$01,$02,$02,$02,$00,$01,$00,$00,$00,$01,$00,$00,$03,$00,$00	;PF1
      5  34c0		       03 07 05 05*	      .byte.b	$03,$07,$05,$05,$07,$01,$03,$01,$03,$01,$01,$01,$01,$01,$03,$01,$00,$00,$02,$00,$00,$06,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_KING_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  34d8					      include	"gfx/BLACK_KING_on_BLACK_SQUARE_3.asm"
      0  34d8					      OPTIONAL_PAGEBREAK	"BLACK_KING_on_BLACK_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  BLACK_KING_on_BLACK_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f500
     10  3500					      LIST	ON
      0  3500					      DEF	BLACK_KING_on_BLACK_SQUARE_3
      1  3500				   BANK_BLACK_KING_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  3500
      3  3500				   BLACK_KING_on_BLACK_SQUARE_3
      3  3500		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3518		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3530		       70 f8 a8 a8*	      .byte.b	$70,$f8,$a8,$a8,$f8,$20,$70,$20,$70,$30,$28,$28,$28,$20,$70,$20,$00,$00,$50,$00,$00,$d8,$00,$00	;PF2
------- FILE piece_graphics.asm
    124  3548
------- FILE gfx/WHITE_MARKER_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  3548					      include	"gfx/WHITE_MARKER_on_BLACK_SQUARE_0.asm"
      0  3548					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_BLACK_SQUARE_0", 72
     10  3548					      LIST	ON
      0  3548					      DEF	WHITE_MARKER_on_BLACK_SQUARE_0
      1  3548				   BANK_WHITE_MARKER_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  3548
      3  3548				   WHITE_MARKER_on_BLACK_SQUARE_0
      3  3548		       00 00 00 40*	      .byte.b	$00,$00,$00,$40,$40,$00,$00,$00,$00,$00,$00,$40,$40,$00,$00,$00,$00,$00,$00,$40,$40,$00,$00,$00	;PF0
      4  3560		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3578		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  3590					      include	"gfx/WHITE_MARKER_on_BLACK_SQUARE_1.asm"
      0  3590					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_BLACK_SQUARE_1", 72
     10  3590					      LIST	ON
      0  3590					      DEF	WHITE_MARKER_on_BLACK_SQUARE_1
      1  3590				   BANK_WHITE_MARKER_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  3590
      3  3590				   WHITE_MARKER_on_BLACK_SQUARE_1
      3  3590		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  35a8		       00 00 00 10*	      .byte.b	$00,$00,$00,$10,$10,$00,$00,$00,$00,$00,$00,$10,$10,$00,$00,$00,$00,$00,$00,$10,$10,$00,$00,$00	;PF1
      5  35c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  35d8					      include	"gfx/WHITE_MARKER_on_BLACK_SQUARE_2.asm"
      0  35d8					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_BLACK_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  WHITE_MARKER_on_BLACK_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f600
     10  3600					      LIST	ON
      0  3600					      DEF	WHITE_MARKER_on_BLACK_SQUARE_2
      1  3600				   BANK_WHITE_MARKER_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  3600
      3  3600				   WHITE_MARKER_on_BLACK_SQUARE_2
      3  3600		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3618		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3630		       00 00 00 01*	      .byte.b	$00,$00,$00,$01,$01,$00,$00,$00,$00,$00,$00,$01,$01,$00,$00,$00,$00,$00,$00,$01,$01,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  3648					      include	"gfx/WHITE_MARKER_on_BLACK_SQUARE_3.asm"
      0  3648					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_BLACK_SQUARE_3", 72
     10  3648					      LIST	ON
      0  3648					      DEF	WHITE_MARKER_on_BLACK_SQUARE_3
      1  3648				   BANK_WHITE_MARKER_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  3648
      3  3648				   WHITE_MARKER_on_BLACK_SQUARE_3
      3  3648		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3660		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3678		       00 00 00 20*	      .byte.b	$00,$00,$00,$20,$20,$00,$00,$00,$00,$00,$00,$20,$20,$00,$00,$00,$00,$00,$00,$20,$20,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  3690					      include	"gfx/WHITE_MARKER_on_WHITE_SQUARE_0.asm"
      0  3690					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_WHITE_SQUARE_0", 72
     10  3690					      LIST	ON
      0  3690					      DEF	WHITE_MARKER_on_WHITE_SQUARE_0
      1  3690				   BANK_WHITE_MARKER_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  3690
      3  3690				   WHITE_MARKER_on_WHITE_SQUARE_0
      3  3690		       00 00 40 40*	      .byte.b	$00,$00,$40,$40,$40,$00,$00,$00,$00,$00,$40,$40,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  36a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  36c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  36d8					      include	"gfx/WHITE_MARKER_on_WHITE_SQUARE_1.asm"
      0  36d8					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_WHITE_SQUARE_1", 72
 PAGE BREAK INSERTED FOR  WHITE_MARKER_on_WHITE_SQUARE_1
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f700
     10  3700					      LIST	ON
      0  3700					      DEF	WHITE_MARKER_on_WHITE_SQUARE_1
      1  3700				   BANK_WHITE_MARKER_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  3700
      3  3700				   WHITE_MARKER_on_WHITE_SQUARE_1
      3  3700		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3718		       00 00 10 10*	      .byte.b	$00,$00,$10,$10,$10,$00,$00,$00,$00,$00,$10,$10,$10,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3730		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  3748					      include	"gfx/WHITE_MARKER_on_WHITE_SQUARE_2.asm"
      0  3748					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_WHITE_SQUARE_2", 72
     10  3748					      LIST	ON
      0  3748					      DEF	WHITE_MARKER_on_WHITE_SQUARE_2
      1  3748				   BANK_WHITE_MARKER_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  3748
      3  3748				   WHITE_MARKER_on_WHITE_SQUARE_2
      3  3748		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3760		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3778		       00 00 01 01*	      .byte.b	$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/WHITE_MARKER_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  3790					      include	"gfx/WHITE_MARKER_on_WHITE_SQUARE_3.asm"
      0  3790					      OPTIONAL_PAGEBREAK	"WHITE_MARKER_on_WHITE_SQUARE_3", 72
     10  3790					      LIST	ON
      0  3790					      DEF	WHITE_MARKER_on_WHITE_SQUARE_3
      1  3790				   BANK_WHITE_MARKER_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  3790
      3  3790				   WHITE_MARKER_on_WHITE_SQUARE_3
      3  3790		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  37a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  37c0		       00 00 20 20*	      .byte.b	$00,$00,$20,$20,$20,$00,$00,$00,$00,$00,$20,$20,$20,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
      0  37d8					      CHECK_BANK_SIZE	"PIECES_4 (2K)"
      1  37d8		       07 d8	   .TEMP      =	* - BANK_START
 PIECES_4 (2K) (2K) SIZE =  $7d8 , FREE= $28
      2  37d8					      ECHO	"PIECES_4 (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  37d8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  37d8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  37d8				  -	      ERR
      6  37d8					      endif
    134  37d8
      0  37d8					      NEWBANK	PIECES_5
      1  3a90 ????				      SEG	PIECES_5
      2  3800					      ORG	ORIGIN
      3  3800					      RORG	$F000
      4  3800				   BANK_START SET	*
      5  3800				   PIECES_5   SET	ORIGIN / 2048
      6  3800				   ORIGIN     SET	ORIGIN + 2048
      7  3800				   _CURRENT_BANK SET	PIECES_5
------- FILE gfx/BLACK_MARKER_on_BLACK_SQUARE_0.asm LEVEL 4 PASS 2
      0  3800					      include	"gfx/BLACK_MARKER_on_BLACK_SQUARE_0.asm"
      0  3800					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_BLACK_SQUARE_0", 72
     10  3800					      LIST	ON
      0  3800					      DEF	BLACK_MARKER_on_BLACK_SQUARE_0
      1  3800				   BANK_BLACK_MARKER_on_BLACK_SQUARE_0 SET	_CURRENT_BANK
      2  3800
      3  3800				   BLACK_MARKER_on_BLACK_SQUARE_0
      3  3800		       00 00 40 40*	      .byte.b	$00,$00,$40,$40,$40,$00,$00,$00,$00,$00,$40,$40,$40,$00,$00,$00,$00,$00,$40,$40,$40,$00,$00,$00	;PF0
      4  3818		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3830		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_BLACK_SQUARE_1.asm LEVEL 4 PASS 2
      0  3848					      include	"gfx/BLACK_MARKER_on_BLACK_SQUARE_1.asm"
      0  3848					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_BLACK_SQUARE_1", 72
     10  3848					      LIST	ON
      0  3848					      DEF	BLACK_MARKER_on_BLACK_SQUARE_1
      1  3848				   BANK_BLACK_MARKER_on_BLACK_SQUARE_1 SET	_CURRENT_BANK
      2  3848
      3  3848				   BLACK_MARKER_on_BLACK_SQUARE_1
      3  3848		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3860		       00 00 10 10*	      .byte.b	$00,$00,$10,$10,$10,$00,$00,$00,$00,$00,$10,$10,$10,$00,$00,$00,$00,$00,$10,$10,$10,$00,$00,$00	;PF1
      5  3878		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_BLACK_SQUARE_2.asm LEVEL 4 PASS 2
      0  3890					      include	"gfx/BLACK_MARKER_on_BLACK_SQUARE_2.asm"
      0  3890					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_BLACK_SQUARE_2", 72
     10  3890					      LIST	ON
      0  3890					      DEF	BLACK_MARKER_on_BLACK_SQUARE_2
      1  3890				   BANK_BLACK_MARKER_on_BLACK_SQUARE_2 SET	_CURRENT_BANK
      2  3890
      3  3890				   BLACK_MARKER_on_BLACK_SQUARE_2
      3  3890		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  38a8		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  38c0		       00 00 01 01*	      .byte.b	$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_BLACK_SQUARE_3.asm LEVEL 4 PASS 2
      0  38d8					      include	"gfx/BLACK_MARKER_on_BLACK_SQUARE_3.asm"
      0  38d8					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_BLACK_SQUARE_3", 72
 PAGE BREAK INSERTED FOR  BLACK_MARKER_on_BLACK_SQUARE_3
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f100
     10  3900					      LIST	ON
      0  3900					      DEF	BLACK_MARKER_on_BLACK_SQUARE_3
      1  3900				   BANK_BLACK_MARKER_on_BLACK_SQUARE_3 SET	_CURRENT_BANK
      2  3900
      3  3900				   BLACK_MARKER_on_BLACK_SQUARE_3
      3  3900		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3918		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3930		       00 00 20 20*	      .byte.b	$00,$00,$20,$20,$20,$00,$00,$00,$00,$00,$20,$20,$20,$00,$00,$00,$00,$00,$20,$20,$20,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_WHITE_SQUARE_0.asm LEVEL 4 PASS 2
      0  3948					      include	"gfx/BLACK_MARKER_on_WHITE_SQUARE_0.asm"
      0  3948					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_WHITE_SQUARE_0", 72
     10  3948					      LIST	ON
      0  3948					      DEF	BLACK_MARKER_on_WHITE_SQUARE_0
      1  3948				   BANK_BLACK_MARKER_on_WHITE_SQUARE_0 SET	_CURRENT_BANK
      2  3948
      3  3948				   BLACK_MARKER_on_WHITE_SQUARE_0
      3  3948		       00 00 40 40*	      .byte.b	$00,$00,$40,$40,$40,$00,$00,$00,$00,$00,$40,$40,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3960		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3978		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_WHITE_SQUARE_1.asm LEVEL 4 PASS 2
      0  3990					      include	"gfx/BLACK_MARKER_on_WHITE_SQUARE_1.asm"
      0  3990					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_WHITE_SQUARE_1", 72
     10  3990					      LIST	ON
      0  3990					      DEF	BLACK_MARKER_on_WHITE_SQUARE_1
      1  3990				   BANK_BLACK_MARKER_on_WHITE_SQUARE_1 SET	_CURRENT_BANK
      2  3990
      3  3990				   BLACK_MARKER_on_WHITE_SQUARE_1
      3  3990		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  39a8		       00 00 10 10*	      .byte.b	$00,$00,$10,$10,$10,$00,$00,$00,$00,$00,$10,$10,$10,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  39c0		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_WHITE_SQUARE_2.asm LEVEL 4 PASS 2
      0  39d8					      include	"gfx/BLACK_MARKER_on_WHITE_SQUARE_2.asm"
      0  39d8					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_WHITE_SQUARE_2", 72
 PAGE BREAK INSERTED FOR  BLACK_MARKER_on_WHITE_SQUARE_2
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f200
     10  3a00					      LIST	ON
      0  3a00					      DEF	BLACK_MARKER_on_WHITE_SQUARE_2
      1  3a00				   BANK_BLACK_MARKER_on_WHITE_SQUARE_2 SET	_CURRENT_BANK
      2  3a00
      3  3a00				   BLACK_MARKER_on_WHITE_SQUARE_2
      3  3a00		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3a18		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3a30		       00 00 01 01*	      .byte.b	$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
------- FILE gfx/BLACK_MARKER_on_WHITE_SQUARE_3.asm LEVEL 4 PASS 2
      0  3a48					      include	"gfx/BLACK_MARKER_on_WHITE_SQUARE_3.asm"
      0  3a48					      OPTIONAL_PAGEBREAK	"BLACK_MARKER_on_WHITE_SQUARE_3", 72
     10  3a48					      LIST	ON
      0  3a48					      DEF	BLACK_MARKER_on_WHITE_SQUARE_3
      1  3a48				   BANK_BLACK_MARKER_on_WHITE_SQUARE_3 SET	_CURRENT_BANK
      2  3a48
      3  3a48				   BLACK_MARKER_on_WHITE_SQUARE_3
      3  3a48		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF0
      4  3a60		       00 00 00 00*	      .byte.b	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF1
      5  3a78		       00 00 20 20*	      .byte.b	$00,$00,$20,$20,$20,$00,$00,$00,$00,$00,$20,$20,$20,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	;PF2
------- FILE piece_graphics.asm
    144  3a90
    145  3a90				  -	      if	0
    146  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_WHITE_SQUARE_0.asm"
    147  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_WHITE_SQUARE_1.asm"
    148  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_WHITE_SQUARE_2.asm"
    149  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_WHITE_SQUARE_3.asm"
    150  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_WHITE_SQUARE_0.asm"
    151  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_WHITE_SQUARE_1.asm"
    152  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_WHITE_SQUARE_2.asm"
    153  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_WHITE_SQUARE_3.asm"
    154  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_WHITE_SQUARE_0.asm"
    155  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_WHITE_SQUARE_1.asm"
    156  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_WHITE_SQUARE_2.asm"
    157  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_WHITE_SQUARE_3.asm"
    158  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_WHITE_SQUARE_0.asm"
    159  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_WHITE_SQUARE_1.asm"
    160  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_WHITE_SQUARE_2.asm"
    161  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_WHITE_SQUARE_3.asm"
    162  3a90					      endif
      0  3a90					      CHECK_BANK_SIZE	"PIECES_5 (2K)"
      1  3a90		       02 90	   .TEMP      =	* - BANK_START
 PIECES_5 (2K) (2K) SIZE =  $290 , FREE= $570
      2  3a90					      ECHO	"PIECES_5 (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  3a90				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  3a90				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  3a90				  -	      ERR
      6  3a90					      endif
    164  3a90
    165  3a90				  -	      if	0
    166  3a90				  -	      NEWBANK	PIECES_6
    167  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_WHITE_SQUARE_0.asm"
    168  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_WHITE_SQUARE_1.asm"
    169  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_WHITE_SQUARE_2.asm"
    170  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_WHITE_SQUARE_3.asm"
    171  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_WHITE_SQUARE_0.asm"
    172  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_WHITE_SQUARE_1.asm"
    173  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_WHITE_SQUARE_2.asm"
    174  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_WHITE_SQUARE_3.asm"
    175  3a90				  -
    176  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_WHITE_SQUARE_0.asm"
    177  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_WHITE_SQUARE_1.asm"
    178  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_WHITE_SQUARE_2.asm"
    179  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_WHITE_SQUARE_3.asm"
    180  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_BLACK_SQUARE_0.asm"
    181  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_BLACK_SQUARE_1.asm"
    182  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_BLACK_SQUARE_2.asm"
    183  3a90				  -	      include	"gfx/WHITE_MARKED_BLANK_on_BLACK_SQUARE_3.asm"
    184  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_BLACK_SQUARE_0.asm"
    185  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_BLACK_SQUARE_1.asm"
    186  3a90				  -
    187  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_BLACK_SQUARE_2.asm"
    188  3a90				  -	      include	"gfx/WHITE_MARKED_PAWN_on_BLACK_SQUARE_3.asm"
    189  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_BLACK_SQUARE_0.asm"
    190  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_BLACK_SQUARE_1.asm"
    191  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_BLACK_SQUARE_2.asm"
    192  3a90				  -	      include	"gfx/WHITE_MARKED_KNIGHT_on_BLACK_SQUARE_3.asm"
    193  3a90				  -	      CHECK_BANK_SIZE	"PIECES_6 (2K)"
    194  3a90				  -
    195  3a90				  -
    196  3a90				  -	      NEWBANK	PIECES_7
    197  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_BLACK_SQUARE_0.asm"
    198  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_BLACK_SQUARE_1.asm"
    199  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_BLACK_SQUARE_2.asm"
    200  3a90				  -	      include	"gfx/WHITE_MARKED_BISHOP_on_BLACK_SQUARE_3.asm"
    201  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_BLACK_SQUARE_0.asm"
    202  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_BLACK_SQUARE_1.asm"
    203  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_BLACK_SQUARE_2.asm"
    204  3a90				  -	      include	"gfx/WHITE_MARKED_ROOK_on_BLACK_SQUARE_3.asm"
    205  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_BLACK_SQUARE_0.asm"
    206  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_BLACK_SQUARE_1.asm"
    207  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_BLACK_SQUARE_2.asm"
    208  3a90				  -	      include	"gfx/WHITE_MARKED_QUEEN_on_BLACK_SQUARE_3.asm"
    209  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_BLACK_SQUARE_0.asm"
    210  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_BLACK_SQUARE_1.asm"
    211  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_BLACK_SQUARE_2.asm"
    212  3a90				  -	      include	"gfx/WHITE_MARKED_KING_on_BLACK_SQUARE_3.asm"
    213  3a90				  -	      include	"gfx/BLACK_MARKED_BLANK_on_WHITE_SQUARE_0.asm"
    214  3a90				  -	      include	"gfx/BLACK_MARKED_BLANK_on_WHITE_SQUARE_1.asm"
    215  3a90				  -	      include	"gfx/BLACK_MARKED_BLANK_on_WHITE_SQUARE_2.asm"
    216  3a90				  -	      include	"gfx/BLACK_MARKED_BLANK_on_WHITE_SQUARE_3.asm"
    217  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_WHITE_SQUARE_0.asm"
    218  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_WHITE_SQUARE_1.asm"
    219  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_WHITE_SQUARE_2.asm"
    220  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_WHITE_SQUARE_3.asm"
    221  3a90				  -	      CHECK_BANK_SIZE	"PIECES_7 (2K)"
    222  3a90				  -
    223  3a90				  -
    224  3a90				  -	      NEWBANK	PIECES_8
    225  3a90				  -
    226  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_WHITE_SQUARE_0.asm"
    227  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_WHITE_SQUARE_1.asm"
    228  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_WHITE_SQUARE_2.asm"
    229  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_WHITE_SQUARE_3.asm"
    230  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_WHITE_SQUARE_0.asm"
    231  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_WHITE_SQUARE_1.asm"
    232  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_WHITE_SQUARE_2.asm"
    233  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_WHITE_SQUARE_3.asm"
    234  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_WHITE_SQUARE_0.asm"
    235  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_WHITE_SQUARE_1.asm"
    236  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_WHITE_SQUARE_2.asm"
    237  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_WHITE_SQUARE_3.asm"
    238  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_WHITE_SQUARE_0.asm"
    239  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_WHITE_SQUARE_1.asm"
    240  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_WHITE_SQUARE_2.asm"
    241  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_WHITE_SQUARE_3.asm"
    242  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_WHITE_SQUARE_0.asm"
    243  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_WHITE_SQUARE_1.asm"
    244  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_WHITE_SQUARE_2.asm"
    245  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_WHITE_SQUARE_3.asm"
    246  3a90				  -
    247  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_BLACK_SQUARE_0.asm"
    248  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_BLACK_SQUARE_1.asm"
    249  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_BLACK_SQUARE_2.asm"
    250  3a90				  -	      include	"gfx/BLACK_MARKED_PAWN_on_BLACK_SQUARE_3.asm"
    251  3a90				  -	      CHECK_BANK_SIZE	"PIECES_8 (2K)"
    252  3a90				  -
    253  3a90					      endif
    254  3a90
    255  3a90							;    NEWBANK PIECES_9
    256  3a90
    257  3a90							; include "gfx/BLACK_MARKED_BLANK_on_BLACK_SQUARE_0.asm"
    258  3a90							; include "gfx/BLACK_MARKED_BLANK_on_BLACK_SQUARE_1.asm"
    259  3a90							; include "gfx/BLACK_MARKED_BLANK_on_BLACK_SQUARE_2.asm"
    260  3a90							; include "gfx/BLACK_MARKED_BLANK_on_BLACK_SQUARE_3.asm"
    261  3a90							; include "gfx/BLACK_MARKED_KNIGHT_on_BLACK_SQUARE_0.asm"
    262  3a90
    263  3a90				  -	      if	0
    264  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_BLACK_SQUARE_1.asm"
    265  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_BLACK_SQUARE_2.asm"
    266  3a90				  -	      include	"gfx/BLACK_MARKED_KNIGHT_on_BLACK_SQUARE_3.asm"
    267  3a90					      endif
    268  3a90
    269  3a90							;    CHECK_BANK_SIZE "PIECES_9 (2K)"
    270  3a90
    271  3a90				  -	      if	0
    272  3a90				  -
    273  3a90				  -
    274  3a90				  -
    275  3a90				  -
    276  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_BLACK_SQUARE_0.asm"
    277  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_BLACK_SQUARE_1.asm"
    278  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_BLACK_SQUARE_2.asm"
    279  3a90				  -	      include	"gfx/BLACK_MARKED_BISHOP_on_BLACK_SQUARE_3.asm"
    280  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_BLACK_SQUARE_0.asm"
    281  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_BLACK_SQUARE_1.asm"
    282  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_BLACK_SQUARE_2.asm"
    283  3a90				  -	      include	"gfx/BLACK_MARKED_ROOK_on_BLACK_SQUARE_3.asm"
    284  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_BLACK_SQUARE_0.asm"
    285  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_BLACK_SQUARE_1.asm"
    286  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_BLACK_SQUARE_2.asm"
    287  3a90				  -	      include	"gfx/BLACK_MARKED_QUEEN_on_BLACK_SQUARE_3.asm"
    288  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_BLACK_SQUARE_0.asm"
    289  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_BLACK_SQUARE_1.asm"
    290  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_BLACK_SQUARE_2.asm"
    291  3a90				  -	      include	"gfx/BLACK_MARKED_KING_on_BLACK_SQUARE_3.asm"
    292  3a90				  -
    293  3a90				  -
    294  3a90					      endif
------- FILE BANK_CHESS_INCLUDES.asm
     42  3a90
      0  3a90					      NEWBANK	PIECE_VECTORS
      1  4180 ????				      SEG	PIECE_VECTORS
      2  4000					      ORG	ORIGIN
      3  4000					      RORG	$F000
      4  4000				   BANK_START SET	*
      5  4000				   PIECE_VECTORS SET	ORIGIN / 2048
      6  4000				   ORIGIN     SET	ORIGIN + 2048
      7  4000				   _CURRENT_BANK SET	PIECE_VECTORS
------- FILE piece_vectors.asm LEVEL 3 PASS 2
      0  4000					      include	"piece_vectors.asm"
      1  4000							; Created by ConvertChessPieces.py
      0  4000					      DEF	PIECE_VECTOR_LO
      1  4000				   BANK_PIECE_VECTOR_LO SET	_CURRENT_BANK
      2  4000
      3  4000				   PIECE_VECTOR_LO
      3  4000		       00		      .byte.b	<WHITE_BLANK_on_WHITE_SQUARE_0
      4  4001		       48		      .byte.b	<WHITE_BLANK_on_WHITE_SQUARE_1
      5  4002		       90		      .byte.b	<WHITE_BLANK_on_WHITE_SQUARE_2
      6  4003		       00		      .byte.b	<WHITE_BLANK_on_WHITE_SQUARE_3
      7  4004		       48		      .byte.b	<WHITE_PAWN_on_WHITE_SQUARE_0
      8  4005		       90		      .byte.b	<WHITE_PAWN_on_WHITE_SQUARE_1
      9  4006		       00		      .byte.b	<WHITE_PAWN_on_WHITE_SQUARE_2
     10  4007		       48		      .byte.b	<WHITE_PAWN_on_WHITE_SQUARE_3
     11  4008		       90		      .byte.b	<WHITE_KNIGHT_on_WHITE_SQUARE_0
     12  4009		       00		      .byte.b	<WHITE_KNIGHT_on_WHITE_SQUARE_1
     13  400a		       48		      .byte.b	<WHITE_KNIGHT_on_WHITE_SQUARE_2
     14  400b		       90		      .byte.b	<WHITE_KNIGHT_on_WHITE_SQUARE_3
     15  400c		       00		      .byte.b	<WHITE_BISHOP_on_WHITE_SQUARE_0
     16  400d		       48		      .byte.b	<WHITE_BISHOP_on_WHITE_SQUARE_1
     17  400e		       90		      .byte.b	<WHITE_BISHOP_on_WHITE_SQUARE_2
     18  400f		       00		      .byte.b	<WHITE_BISHOP_on_WHITE_SQUARE_3
     19  4010		       48		      .byte.b	<WHITE_ROOK_on_WHITE_SQUARE_0
     20  4011		       90		      .byte.b	<WHITE_ROOK_on_WHITE_SQUARE_1
     21  4012		       00		      .byte.b	<WHITE_ROOK_on_WHITE_SQUARE_2
     22  4013		       48		      .byte.b	<WHITE_ROOK_on_WHITE_SQUARE_3
     23  4014		       90		      .byte.b	<WHITE_QUEEN_on_WHITE_SQUARE_0
     24  4015		       00		      .byte.b	<WHITE_QUEEN_on_WHITE_SQUARE_1
     25  4016		       48		      .byte.b	<WHITE_QUEEN_on_WHITE_SQUARE_2
     26  4017		       90		      .byte.b	<WHITE_QUEEN_on_WHITE_SQUARE_3
     27  4018		       00		      .byte.b	<WHITE_KING_on_WHITE_SQUARE_0
     28  4019		       48		      .byte.b	<WHITE_KING_on_WHITE_SQUARE_1
     29  401a		       90		      .byte.b	<WHITE_KING_on_WHITE_SQUARE_2
     30  401b		       00		      .byte.b	<WHITE_KING_on_WHITE_SQUARE_3
     31  401c		       90		      .byte.b	<WHITE_MARKER_on_WHITE_SQUARE_0
     32  401d		       00		      .byte.b	<WHITE_MARKER_on_WHITE_SQUARE_1
     33  401e		       48		      .byte.b	<WHITE_MARKER_on_WHITE_SQUARE_2
     34  401f		       90		      .byte.b	<WHITE_MARKER_on_WHITE_SQUARE_3
     35  4020		       48		      .byte.b	<WHITE_BLANK_on_BLACK_SQUARE_0
     36  4021		       90		      .byte.b	<WHITE_BLANK_on_BLACK_SQUARE_1
     37  4022		       00		      .byte.b	<WHITE_BLANK_on_BLACK_SQUARE_2
     38  4023		       48		      .byte.b	<WHITE_BLANK_on_BLACK_SQUARE_3
     39  4024		       90		      .byte.b	<WHITE_PAWN_on_BLACK_SQUARE_0
     40  4025		       00		      .byte.b	<WHITE_PAWN_on_BLACK_SQUARE_1
     41  4026		       48		      .byte.b	<WHITE_PAWN_on_BLACK_SQUARE_2
     42  4027		       90		      .byte.b	<WHITE_PAWN_on_BLACK_SQUARE_3
     43  4028		       00		      .byte.b	<WHITE_KNIGHT_on_BLACK_SQUARE_0
     44  4029		       48		      .byte.b	<WHITE_KNIGHT_on_BLACK_SQUARE_1
     45  402a		       90		      .byte.b	<WHITE_KNIGHT_on_BLACK_SQUARE_2
     46  402b		       00		      .byte.b	<WHITE_KNIGHT_on_BLACK_SQUARE_3
     47  402c		       48		      .byte.b	<WHITE_BISHOP_on_BLACK_SQUARE_0
     48  402d		       90		      .byte.b	<WHITE_BISHOP_on_BLACK_SQUARE_1
     49  402e		       00		      .byte.b	<WHITE_BISHOP_on_BLACK_SQUARE_2
     50  402f		       48		      .byte.b	<WHITE_BISHOP_on_BLACK_SQUARE_3
     51  4030		       90		      .byte.b	<WHITE_ROOK_on_BLACK_SQUARE_0
     52  4031		       00		      .byte.b	<WHITE_ROOK_on_BLACK_SQUARE_1
     53  4032		       48		      .byte.b	<WHITE_ROOK_on_BLACK_SQUARE_2
     54  4033		       90		      .byte.b	<WHITE_ROOK_on_BLACK_SQUARE_3
     55  4034		       00		      .byte.b	<WHITE_QUEEN_on_BLACK_SQUARE_0
     56  4035		       48		      .byte.b	<WHITE_QUEEN_on_BLACK_SQUARE_1
     57  4036		       90		      .byte.b	<WHITE_QUEEN_on_BLACK_SQUARE_2
     58  4037		       00		      .byte.b	<WHITE_QUEEN_on_BLACK_SQUARE_3
     59  4038		       48		      .byte.b	<WHITE_KING_on_BLACK_SQUARE_0
     60  4039		       90		      .byte.b	<WHITE_KING_on_BLACK_SQUARE_1
     61  403a		       00		      .byte.b	<WHITE_KING_on_BLACK_SQUARE_2
     62  403b		       48		      .byte.b	<WHITE_KING_on_BLACK_SQUARE_3
     63  403c		       48		      .byte.b	<WHITE_MARKER_on_BLACK_SQUARE_0
     64  403d		       90		      .byte.b	<WHITE_MARKER_on_BLACK_SQUARE_1
     65  403e		       00		      .byte.b	<WHITE_MARKER_on_BLACK_SQUARE_2
     66  403f		       48		      .byte.b	<WHITE_MARKER_on_BLACK_SQUARE_3
     67  4040		       90		      .byte.b	<BLACK_BLANK_on_WHITE_SQUARE_0
     68  4041		       00		      .byte.b	<BLACK_BLANK_on_WHITE_SQUARE_1
     69  4042		       48		      .byte.b	<BLACK_BLANK_on_WHITE_SQUARE_2
     70  4043		       90		      .byte.b	<BLACK_BLANK_on_WHITE_SQUARE_3
     71  4044		       00		      .byte.b	<BLACK_PAWN_on_WHITE_SQUARE_0
     72  4045		       48		      .byte.b	<BLACK_PAWN_on_WHITE_SQUARE_1
     73  4046		       90		      .byte.b	<BLACK_PAWN_on_WHITE_SQUARE_2
     74  4047		       00		      .byte.b	<BLACK_PAWN_on_WHITE_SQUARE_3
     75  4048		       48		      .byte.b	<BLACK_KNIGHT_on_WHITE_SQUARE_0
     76  4049		       90		      .byte.b	<BLACK_KNIGHT_on_WHITE_SQUARE_1
     77  404a		       00		      .byte.b	<BLACK_KNIGHT_on_WHITE_SQUARE_2
     78  404b		       48		      .byte.b	<BLACK_KNIGHT_on_WHITE_SQUARE_3
     79  404c		       90		      .byte.b	<BLACK_BISHOP_on_WHITE_SQUARE_0
     80  404d		       00		      .byte.b	<BLACK_BISHOP_on_WHITE_SQUARE_1
     81  404e		       48		      .byte.b	<BLACK_BISHOP_on_WHITE_SQUARE_2
     82  404f		       90		      .byte.b	<BLACK_BISHOP_on_WHITE_SQUARE_3
     83  4050		       00		      .byte.b	<BLACK_ROOK_on_WHITE_SQUARE_0
     84  4051		       48		      .byte.b	<BLACK_ROOK_on_WHITE_SQUARE_1
     85  4052		       90		      .byte.b	<BLACK_ROOK_on_WHITE_SQUARE_2
     86  4053		       00		      .byte.b	<BLACK_ROOK_on_WHITE_SQUARE_3
     87  4054		       48		      .byte.b	<BLACK_QUEEN_on_WHITE_SQUARE_0
     88  4055		       90		      .byte.b	<BLACK_QUEEN_on_WHITE_SQUARE_1
     89  4056		       00		      .byte.b	<BLACK_QUEEN_on_WHITE_SQUARE_2
     90  4057		       48		      .byte.b	<BLACK_QUEEN_on_WHITE_SQUARE_3
     91  4058		       90		      .byte.b	<BLACK_KING_on_WHITE_SQUARE_0
     92  4059		       00		      .byte.b	<BLACK_KING_on_WHITE_SQUARE_1
     93  405a		       48		      .byte.b	<BLACK_KING_on_WHITE_SQUARE_2
     94  405b		       90		      .byte.b	<BLACK_KING_on_WHITE_SQUARE_3
     95  405c		       48		      .byte.b	<BLACK_MARKER_on_WHITE_SQUARE_0
     96  405d		       90		      .byte.b	<BLACK_MARKER_on_WHITE_SQUARE_1
     97  405e		       00		      .byte.b	<BLACK_MARKER_on_WHITE_SQUARE_2
     98  405f		       48		      .byte.b	<BLACK_MARKER_on_WHITE_SQUARE_3
     99  4060		       00		      .byte.b	<BLACK_BLANK_on_BLACK_SQUARE_0
    100  4061		       48		      .byte.b	<BLACK_BLANK_on_BLACK_SQUARE_1
    101  4062		       90		      .byte.b	<BLACK_BLANK_on_BLACK_SQUARE_2
    102  4063		       00		      .byte.b	<BLACK_BLANK_on_BLACK_SQUARE_3
    103  4064		       48		      .byte.b	<BLACK_PAWN_on_BLACK_SQUARE_0
    104  4065		       90		      .byte.b	<BLACK_PAWN_on_BLACK_SQUARE_1
    105  4066		       00		      .byte.b	<BLACK_PAWN_on_BLACK_SQUARE_2
    106  4067		       48		      .byte.b	<BLACK_PAWN_on_BLACK_SQUARE_3
    107  4068		       90		      .byte.b	<BLACK_KNIGHT_on_BLACK_SQUARE_0
    108  4069		       00		      .byte.b	<BLACK_KNIGHT_on_BLACK_SQUARE_1
    109  406a		       48		      .byte.b	<BLACK_KNIGHT_on_BLACK_SQUARE_2
    110  406b		       90		      .byte.b	<BLACK_KNIGHT_on_BLACK_SQUARE_3
    111  406c		       00		      .byte.b	<BLACK_BISHOP_on_BLACK_SQUARE_0
    112  406d		       48		      .byte.b	<BLACK_BISHOP_on_BLACK_SQUARE_1
    113  406e		       90		      .byte.b	<BLACK_BISHOP_on_BLACK_SQUARE_2
    114  406f		       00		      .byte.b	<BLACK_BISHOP_on_BLACK_SQUARE_3
    115  4070		       48		      .byte.b	<BLACK_ROOK_on_BLACK_SQUARE_0
    116  4071		       90		      .byte.b	<BLACK_ROOK_on_BLACK_SQUARE_1
    117  4072		       00		      .byte.b	<BLACK_ROOK_on_BLACK_SQUARE_2
    118  4073		       48		      .byte.b	<BLACK_ROOK_on_BLACK_SQUARE_3
    119  4074		       90		      .byte.b	<BLACK_QUEEN_on_BLACK_SQUARE_0
    120  4075		       00		      .byte.b	<BLACK_QUEEN_on_BLACK_SQUARE_1
    121  4076		       48		      .byte.b	<BLACK_QUEEN_on_BLACK_SQUARE_2
    122  4077		       90		      .byte.b	<BLACK_QUEEN_on_BLACK_SQUARE_3
    123  4078		       00		      .byte.b	<BLACK_KING_on_BLACK_SQUARE_0
    124  4079		       48		      .byte.b	<BLACK_KING_on_BLACK_SQUARE_1
    125  407a		       90		      .byte.b	<BLACK_KING_on_BLACK_SQUARE_2
    126  407b		       00		      .byte.b	<BLACK_KING_on_BLACK_SQUARE_3
    127  407c		       00		      .byte.b	<BLACK_MARKER_on_BLACK_SQUARE_0
    128  407d		       48		      .byte.b	<BLACK_MARKER_on_BLACK_SQUARE_1
    129  407e		       90		      .byte.b	<BLACK_MARKER_on_BLACK_SQUARE_2
    130  407f		       00		      .byte.b	<BLACK_MARKER_on_BLACK_SQUARE_3
      0  4080					      DEF	PIECE_VECTOR_HI
      1  4080				   BANK_PIECE_VECTOR_HI SET	_CURRENT_BANK
      2  4080
      3  4080				   PIECE_VECTOR_HI
    132  4080		       f0		      .byte.b	>WHITE_BLANK_on_WHITE_SQUARE_0
    133  4081		       f0		      .byte.b	>WHITE_BLANK_on_WHITE_SQUARE_1
    134  4082		       f0		      .byte.b	>WHITE_BLANK_on_WHITE_SQUARE_2
    135  4083		       f1		      .byte.b	>WHITE_BLANK_on_WHITE_SQUARE_3
    136  4084		       f1		      .byte.b	>WHITE_PAWN_on_WHITE_SQUARE_0
    137  4085		       f1		      .byte.b	>WHITE_PAWN_on_WHITE_SQUARE_1
    138  4086		       f2		      .byte.b	>WHITE_PAWN_on_WHITE_SQUARE_2
    139  4087		       f2		      .byte.b	>WHITE_PAWN_on_WHITE_SQUARE_3
    140  4088		       f2		      .byte.b	>WHITE_KNIGHT_on_WHITE_SQUARE_0
    141  4089		       f3		      .byte.b	>WHITE_KNIGHT_on_WHITE_SQUARE_1
    142  408a		       f3		      .byte.b	>WHITE_KNIGHT_on_WHITE_SQUARE_2
    143  408b		       f3		      .byte.b	>WHITE_KNIGHT_on_WHITE_SQUARE_3
    144  408c		       f4		      .byte.b	>WHITE_BISHOP_on_WHITE_SQUARE_0
    145  408d		       f4		      .byte.b	>WHITE_BISHOP_on_WHITE_SQUARE_1
    146  408e		       f4		      .byte.b	>WHITE_BISHOP_on_WHITE_SQUARE_2
    147  408f		       f5		      .byte.b	>WHITE_BISHOP_on_WHITE_SQUARE_3
    148  4090		       f5		      .byte.b	>WHITE_ROOK_on_WHITE_SQUARE_0
    149  4091		       f5		      .byte.b	>WHITE_ROOK_on_WHITE_SQUARE_1
    150  4092		       f6		      .byte.b	>WHITE_ROOK_on_WHITE_SQUARE_2
    151  4093		       f6		      .byte.b	>WHITE_ROOK_on_WHITE_SQUARE_3
    152  4094		       f6		      .byte.b	>WHITE_QUEEN_on_WHITE_SQUARE_0
    153  4095		       f7		      .byte.b	>WHITE_QUEEN_on_WHITE_SQUARE_1
    154  4096		       f7		      .byte.b	>WHITE_QUEEN_on_WHITE_SQUARE_2
    155  4097		       f7		      .byte.b	>WHITE_QUEEN_on_WHITE_SQUARE_3
    156  4098		       f0		      .byte.b	>WHITE_KING_on_WHITE_SQUARE_0
    157  4099		       f0		      .byte.b	>WHITE_KING_on_WHITE_SQUARE_1
    158  409a		       f0		      .byte.b	>WHITE_KING_on_WHITE_SQUARE_2
    159  409b		       f1		      .byte.b	>WHITE_KING_on_WHITE_SQUARE_3
    160  409c		       f6		      .byte.b	>WHITE_MARKER_on_WHITE_SQUARE_0
    161  409d		       f7		      .byte.b	>WHITE_MARKER_on_WHITE_SQUARE_1
    162  409e		       f7		      .byte.b	>WHITE_MARKER_on_WHITE_SQUARE_2
    163  409f		       f7		      .byte.b	>WHITE_MARKER_on_WHITE_SQUARE_3
    164  40a0		       f1		      .byte.b	>WHITE_BLANK_on_BLACK_SQUARE_0
    165  40a1		       f1		      .byte.b	>WHITE_BLANK_on_BLACK_SQUARE_1
    166  40a2		       f2		      .byte.b	>WHITE_BLANK_on_BLACK_SQUARE_2
    167  40a3		       f2		      .byte.b	>WHITE_BLANK_on_BLACK_SQUARE_3
    168  40a4		       f2		      .byte.b	>WHITE_PAWN_on_BLACK_SQUARE_0
    169  40a5		       f3		      .byte.b	>WHITE_PAWN_on_BLACK_SQUARE_1
    170  40a6		       f3		      .byte.b	>WHITE_PAWN_on_BLACK_SQUARE_2
    171  40a7		       f3		      .byte.b	>WHITE_PAWN_on_BLACK_SQUARE_3
    172  40a8		       f4		      .byte.b	>WHITE_KNIGHT_on_BLACK_SQUARE_0
    173  40a9		       f4		      .byte.b	>WHITE_KNIGHT_on_BLACK_SQUARE_1
    174  40aa		       f4		      .byte.b	>WHITE_KNIGHT_on_BLACK_SQUARE_2
    175  40ab		       f5		      .byte.b	>WHITE_KNIGHT_on_BLACK_SQUARE_3
    176  40ac		       f5		      .byte.b	>WHITE_BISHOP_on_BLACK_SQUARE_0
    177  40ad		       f5		      .byte.b	>WHITE_BISHOP_on_BLACK_SQUARE_1
    178  40ae		       f6		      .byte.b	>WHITE_BISHOP_on_BLACK_SQUARE_2
    179  40af		       f6		      .byte.b	>WHITE_BISHOP_on_BLACK_SQUARE_3
    180  40b0		       f6		      .byte.b	>WHITE_ROOK_on_BLACK_SQUARE_0
    181  40b1		       f7		      .byte.b	>WHITE_ROOK_on_BLACK_SQUARE_1
    182  40b2		       f7		      .byte.b	>WHITE_ROOK_on_BLACK_SQUARE_2
    183  40b3		       f7		      .byte.b	>WHITE_ROOK_on_BLACK_SQUARE_3
    184  40b4		       f0		      .byte.b	>WHITE_QUEEN_on_BLACK_SQUARE_0
    185  40b5		       f0		      .byte.b	>WHITE_QUEEN_on_BLACK_SQUARE_1
    186  40b6		       f0		      .byte.b	>WHITE_QUEEN_on_BLACK_SQUARE_2
    187  40b7		       f1		      .byte.b	>WHITE_QUEEN_on_BLACK_SQUARE_3
    188  40b8		       f1		      .byte.b	>WHITE_KING_on_BLACK_SQUARE_0
    189  40b9		       f1		      .byte.b	>WHITE_KING_on_BLACK_SQUARE_1
    190  40ba		       f2		      .byte.b	>WHITE_KING_on_BLACK_SQUARE_2
    191  40bb		       f2		      .byte.b	>WHITE_KING_on_BLACK_SQUARE_3
    192  40bc		       f5		      .byte.b	>WHITE_MARKER_on_BLACK_SQUARE_0
    193  40bd		       f5		      .byte.b	>WHITE_MARKER_on_BLACK_SQUARE_1
    194  40be		       f6		      .byte.b	>WHITE_MARKER_on_BLACK_SQUARE_2
    195  40bf		       f6		      .byte.b	>WHITE_MARKER_on_BLACK_SQUARE_3
    196  40c0		       f2		      .byte.b	>BLACK_BLANK_on_WHITE_SQUARE_0
    197  40c1		       f3		      .byte.b	>BLACK_BLANK_on_WHITE_SQUARE_1
    198  40c2		       f3		      .byte.b	>BLACK_BLANK_on_WHITE_SQUARE_2
    199  40c3		       f3		      .byte.b	>BLACK_BLANK_on_WHITE_SQUARE_3
    200  40c4		       f4		      .byte.b	>BLACK_PAWN_on_WHITE_SQUARE_0
    201  40c5		       f4		      .byte.b	>BLACK_PAWN_on_WHITE_SQUARE_1
    202  40c6		       f4		      .byte.b	>BLACK_PAWN_on_WHITE_SQUARE_2
    203  40c7		       f5		      .byte.b	>BLACK_PAWN_on_WHITE_SQUARE_3
    204  40c8		       f5		      .byte.b	>BLACK_KNIGHT_on_WHITE_SQUARE_0
    205  40c9		       f5		      .byte.b	>BLACK_KNIGHT_on_WHITE_SQUARE_1
    206  40ca		       f6		      .byte.b	>BLACK_KNIGHT_on_WHITE_SQUARE_2
    207  40cb		       f6		      .byte.b	>BLACK_KNIGHT_on_WHITE_SQUARE_3
    208  40cc		       f6		      .byte.b	>BLACK_BISHOP_on_WHITE_SQUARE_0
    209  40cd		       f7		      .byte.b	>BLACK_BISHOP_on_WHITE_SQUARE_1
    210  40ce		       f7		      .byte.b	>BLACK_BISHOP_on_WHITE_SQUARE_2
    211  40cf		       f7		      .byte.b	>BLACK_BISHOP_on_WHITE_SQUARE_3
    212  40d0		       f0		      .byte.b	>BLACK_ROOK_on_WHITE_SQUARE_0
    213  40d1		       f0		      .byte.b	>BLACK_ROOK_on_WHITE_SQUARE_1
    214  40d2		       f0		      .byte.b	>BLACK_ROOK_on_WHITE_SQUARE_2
    215  40d3		       f1		      .byte.b	>BLACK_ROOK_on_WHITE_SQUARE_3
    216  40d4		       f1		      .byte.b	>BLACK_QUEEN_on_WHITE_SQUARE_0
    217  40d5		       f1		      .byte.b	>BLACK_QUEEN_on_WHITE_SQUARE_1
    218  40d6		       f2		      .byte.b	>BLACK_QUEEN_on_WHITE_SQUARE_2
    219  40d7		       f2		      .byte.b	>BLACK_QUEEN_on_WHITE_SQUARE_3
    220  40d8		       f2		      .byte.b	>BLACK_KING_on_WHITE_SQUARE_0
    221  40d9		       f3		      .byte.b	>BLACK_KING_on_WHITE_SQUARE_1
    222  40da		       f3		      .byte.b	>BLACK_KING_on_WHITE_SQUARE_2
    223  40db		       f3		      .byte.b	>BLACK_KING_on_WHITE_SQUARE_3
    224  40dc		       f1		      .byte.b	>BLACK_MARKER_on_WHITE_SQUARE_0
    225  40dd		       f1		      .byte.b	>BLACK_MARKER_on_WHITE_SQUARE_1
    226  40de		       f2		      .byte.b	>BLACK_MARKER_on_WHITE_SQUARE_2
    227  40df		       f2		      .byte.b	>BLACK_MARKER_on_WHITE_SQUARE_3
    228  40e0		       f4		      .byte.b	>BLACK_BLANK_on_BLACK_SQUARE_0
    229  40e1		       f4		      .byte.b	>BLACK_BLANK_on_BLACK_SQUARE_1
    230  40e2		       f4		      .byte.b	>BLACK_BLANK_on_BLACK_SQUARE_2
    231  40e3		       f5		      .byte.b	>BLACK_BLANK_on_BLACK_SQUARE_3
    232  40e4		       f5		      .byte.b	>BLACK_PAWN_on_BLACK_SQUARE_0
    233  40e5		       f5		      .byte.b	>BLACK_PAWN_on_BLACK_SQUARE_1
    234  40e6		       f6		      .byte.b	>BLACK_PAWN_on_BLACK_SQUARE_2
    235  40e7		       f6		      .byte.b	>BLACK_PAWN_on_BLACK_SQUARE_3
    236  40e8		       f6		      .byte.b	>BLACK_KNIGHT_on_BLACK_SQUARE_0
    237  40e9		       f7		      .byte.b	>BLACK_KNIGHT_on_BLACK_SQUARE_1
    238  40ea		       f7		      .byte.b	>BLACK_KNIGHT_on_BLACK_SQUARE_2
    239  40eb		       f7		      .byte.b	>BLACK_KNIGHT_on_BLACK_SQUARE_3
    240  40ec		       f0		      .byte.b	>BLACK_BISHOP_on_BLACK_SQUARE_0
    241  40ed		       f0		      .byte.b	>BLACK_BISHOP_on_BLACK_SQUARE_1
    242  40ee		       f0		      .byte.b	>BLACK_BISHOP_on_BLACK_SQUARE_2
    243  40ef		       f1		      .byte.b	>BLACK_BISHOP_on_BLACK_SQUARE_3
    244  40f0		       f1		      .byte.b	>BLACK_ROOK_on_BLACK_SQUARE_0
    245  40f1		       f1		      .byte.b	>BLACK_ROOK_on_BLACK_SQUARE_1
    246  40f2		       f2		      .byte.b	>BLACK_ROOK_on_BLACK_SQUARE_2
    247  40f3		       f2		      .byte.b	>BLACK_ROOK_on_BLACK_SQUARE_3
    248  40f4		       f2		      .byte.b	>BLACK_QUEEN_on_BLACK_SQUARE_0
    249  40f5		       f3		      .byte.b	>BLACK_QUEEN_on_BLACK_SQUARE_1
    250  40f6		       f3		      .byte.b	>BLACK_QUEEN_on_BLACK_SQUARE_2
    251  40f7		       f3		      .byte.b	>BLACK_QUEEN_on_BLACK_SQUARE_3
    252  40f8		       f4		      .byte.b	>BLACK_KING_on_BLACK_SQUARE_0
    253  40f9		       f4		      .byte.b	>BLACK_KING_on_BLACK_SQUARE_1
    254  40fa		       f4		      .byte.b	>BLACK_KING_on_BLACK_SQUARE_2
    255  40fb		       f5		      .byte.b	>BLACK_KING_on_BLACK_SQUARE_3
    256  40fc		       f0		      .byte.b	>BLACK_MARKER_on_BLACK_SQUARE_0
    257  40fd		       f0		      .byte.b	>BLACK_MARKER_on_BLACK_SQUARE_1
    258  40fe		       f0		      .byte.b	>BLACK_MARKER_on_BLACK_SQUARE_2
    259  40ff		       f1		      .byte.b	>BLACK_MARKER_on_BLACK_SQUARE_3
      0  4100					      DEF	PIECE_VECTOR_BANK
      1  4100				   BANK_PIECE_VECTOR_BANK SET	_CURRENT_BANK
      2  4100
      3  4100				   PIECE_VECTOR_BANK
    261  4100		       02		      .byte.b	BANK_WHITE_BLANK_on_WHITE_SQUARE_0
    262  4101		       02		      .byte.b	BANK_WHITE_BLANK_on_WHITE_SQUARE_1
    263  4102		       02		      .byte.b	BANK_WHITE_BLANK_on_WHITE_SQUARE_2
    264  4103		       02		      .byte.b	BANK_WHITE_BLANK_on_WHITE_SQUARE_3
    265  4104		       02		      .byte.b	BANK_WHITE_PAWN_on_WHITE_SQUARE_0
    266  4105		       02		      .byte.b	BANK_WHITE_PAWN_on_WHITE_SQUARE_1
    267  4106		       02		      .byte.b	BANK_WHITE_PAWN_on_WHITE_SQUARE_2
    268  4107		       02		      .byte.b	BANK_WHITE_PAWN_on_WHITE_SQUARE_3
    269  4108		       02		      .byte.b	BANK_WHITE_KNIGHT_on_WHITE_SQUARE_0
    270  4109		       02		      .byte.b	BANK_WHITE_KNIGHT_on_WHITE_SQUARE_1
    271  410a		       02		      .byte.b	BANK_WHITE_KNIGHT_on_WHITE_SQUARE_2
    272  410b		       02		      .byte.b	BANK_WHITE_KNIGHT_on_WHITE_SQUARE_3
    273  410c		       02		      .byte.b	BANK_WHITE_BISHOP_on_WHITE_SQUARE_0
    274  410d		       02		      .byte.b	BANK_WHITE_BISHOP_on_WHITE_SQUARE_1
    275  410e		       02		      .byte.b	BANK_WHITE_BISHOP_on_WHITE_SQUARE_2
    276  410f		       02		      .byte.b	BANK_WHITE_BISHOP_on_WHITE_SQUARE_3
    277  4110		       02		      .byte.b	BANK_WHITE_ROOK_on_WHITE_SQUARE_0
    278  4111		       02		      .byte.b	BANK_WHITE_ROOK_on_WHITE_SQUARE_1
    279  4112		       02		      .byte.b	BANK_WHITE_ROOK_on_WHITE_SQUARE_2
    280  4113		       02		      .byte.b	BANK_WHITE_ROOK_on_WHITE_SQUARE_3
    281  4114		       02		      .byte.b	BANK_WHITE_QUEEN_on_WHITE_SQUARE_0
    282  4115		       02		      .byte.b	BANK_WHITE_QUEEN_on_WHITE_SQUARE_1
    283  4116		       02		      .byte.b	BANK_WHITE_QUEEN_on_WHITE_SQUARE_2
    284  4117		       02		      .byte.b	BANK_WHITE_QUEEN_on_WHITE_SQUARE_3
    285  4118		       03		      .byte.b	BANK_WHITE_KING_on_WHITE_SQUARE_0
    286  4119		       03		      .byte.b	BANK_WHITE_KING_on_WHITE_SQUARE_1
    287  411a		       03		      .byte.b	BANK_WHITE_KING_on_WHITE_SQUARE_2
    288  411b		       03		      .byte.b	BANK_WHITE_KING_on_WHITE_SQUARE_3
    289  411c		       06		      .byte.b	BANK_WHITE_MARKER_on_WHITE_SQUARE_0
    290  411d		       06		      .byte.b	BANK_WHITE_MARKER_on_WHITE_SQUARE_1
    291  411e		       06		      .byte.b	BANK_WHITE_MARKER_on_WHITE_SQUARE_2
    292  411f		       06		      .byte.b	BANK_WHITE_MARKER_on_WHITE_SQUARE_3
    293  4120		       03		      .byte.b	BANK_WHITE_BLANK_on_BLACK_SQUARE_0
    294  4121		       03		      .byte.b	BANK_WHITE_BLANK_on_BLACK_SQUARE_1
    295  4122		       03		      .byte.b	BANK_WHITE_BLANK_on_BLACK_SQUARE_2
    296  4123		       03		      .byte.b	BANK_WHITE_BLANK_on_BLACK_SQUARE_3
    297  4124		       03		      .byte.b	BANK_WHITE_PAWN_on_BLACK_SQUARE_0
    298  4125		       03		      .byte.b	BANK_WHITE_PAWN_on_BLACK_SQUARE_1
    299  4126		       03		      .byte.b	BANK_WHITE_PAWN_on_BLACK_SQUARE_2
    300  4127		       03		      .byte.b	BANK_WHITE_PAWN_on_BLACK_SQUARE_3
    301  4128		       03		      .byte.b	BANK_WHITE_KNIGHT_on_BLACK_SQUARE_0
    302  4129		       03		      .byte.b	BANK_WHITE_KNIGHT_on_BLACK_SQUARE_1
    303  412a		       03		      .byte.b	BANK_WHITE_KNIGHT_on_BLACK_SQUARE_2
    304  412b		       03		      .byte.b	BANK_WHITE_KNIGHT_on_BLACK_SQUARE_3
    305  412c		       03		      .byte.b	BANK_WHITE_BISHOP_on_BLACK_SQUARE_0
    306  412d		       03		      .byte.b	BANK_WHITE_BISHOP_on_BLACK_SQUARE_1
    307  412e		       03		      .byte.b	BANK_WHITE_BISHOP_on_BLACK_SQUARE_2
    308  412f		       03		      .byte.b	BANK_WHITE_BISHOP_on_BLACK_SQUARE_3
    309  4130		       03		      .byte.b	BANK_WHITE_ROOK_on_BLACK_SQUARE_0
    310  4131		       03		      .byte.b	BANK_WHITE_ROOK_on_BLACK_SQUARE_1
    311  4132		       03		      .byte.b	BANK_WHITE_ROOK_on_BLACK_SQUARE_2
    312  4133		       03		      .byte.b	BANK_WHITE_ROOK_on_BLACK_SQUARE_3
    313  4134		       04		      .byte.b	BANK_WHITE_QUEEN_on_BLACK_SQUARE_0
    314  4135		       04		      .byte.b	BANK_WHITE_QUEEN_on_BLACK_SQUARE_1
    315  4136		       04		      .byte.b	BANK_WHITE_QUEEN_on_BLACK_SQUARE_2
    316  4137		       04		      .byte.b	BANK_WHITE_QUEEN_on_BLACK_SQUARE_3
    317  4138		       04		      .byte.b	BANK_WHITE_KING_on_BLACK_SQUARE_0
    318  4139		       04		      .byte.b	BANK_WHITE_KING_on_BLACK_SQUARE_1
    319  413a		       04		      .byte.b	BANK_WHITE_KING_on_BLACK_SQUARE_2
    320  413b		       04		      .byte.b	BANK_WHITE_KING_on_BLACK_SQUARE_3
    321  413c		       06		      .byte.b	BANK_WHITE_MARKER_on_BLACK_SQUARE_0
    322  413d		       06		      .byte.b	BANK_WHITE_MARKER_on_BLACK_SQUARE_1
    323  413e		       06		      .byte.b	BANK_WHITE_MARKER_on_BLACK_SQUARE_2
    324  413f		       06		      .byte.b	BANK_WHITE_MARKER_on_BLACK_SQUARE_3
    325  4140		       04		      .byte.b	BANK_BLACK_BLANK_on_WHITE_SQUARE_0
    326  4141		       04		      .byte.b	BANK_BLACK_BLANK_on_WHITE_SQUARE_1
    327  4142		       04		      .byte.b	BANK_BLACK_BLANK_on_WHITE_SQUARE_2
    328  4143		       04		      .byte.b	BANK_BLACK_BLANK_on_WHITE_SQUARE_3
    329  4144		       04		      .byte.b	BANK_BLACK_PAWN_on_WHITE_SQUARE_0
    330  4145		       04		      .byte.b	BANK_BLACK_PAWN_on_WHITE_SQUARE_1
    331  4146		       04		      .byte.b	BANK_BLACK_PAWN_on_WHITE_SQUARE_2
    332  4147		       04		      .byte.b	BANK_BLACK_PAWN_on_WHITE_SQUARE_3
    333  4148		       04		      .byte.b	BANK_BLACK_KNIGHT_on_WHITE_SQUARE_0
    334  4149		       04		      .byte.b	BANK_BLACK_KNIGHT_on_WHITE_SQUARE_1
    335  414a		       04		      .byte.b	BANK_BLACK_KNIGHT_on_WHITE_SQUARE_2
    336  414b		       04		      .byte.b	BANK_BLACK_KNIGHT_on_WHITE_SQUARE_3
    337  414c		       04		      .byte.b	BANK_BLACK_BISHOP_on_WHITE_SQUARE_0
    338  414d		       04		      .byte.b	BANK_BLACK_BISHOP_on_WHITE_SQUARE_1
    339  414e		       04		      .byte.b	BANK_BLACK_BISHOP_on_WHITE_SQUARE_2
    340  414f		       04		      .byte.b	BANK_BLACK_BISHOP_on_WHITE_SQUARE_3
    341  4150		       05		      .byte.b	BANK_BLACK_ROOK_on_WHITE_SQUARE_0
    342  4151		       05		      .byte.b	BANK_BLACK_ROOK_on_WHITE_SQUARE_1
    343  4152		       05		      .byte.b	BANK_BLACK_ROOK_on_WHITE_SQUARE_2
    344  4153		       05		      .byte.b	BANK_BLACK_ROOK_on_WHITE_SQUARE_3
    345  4154		       05		      .byte.b	BANK_BLACK_QUEEN_on_WHITE_SQUARE_0
    346  4155		       05		      .byte.b	BANK_BLACK_QUEEN_on_WHITE_SQUARE_1
    347  4156		       05		      .byte.b	BANK_BLACK_QUEEN_on_WHITE_SQUARE_2
    348  4157		       05		      .byte.b	BANK_BLACK_QUEEN_on_WHITE_SQUARE_3
    349  4158		       05		      .byte.b	BANK_BLACK_KING_on_WHITE_SQUARE_0
    350  4159		       05		      .byte.b	BANK_BLACK_KING_on_WHITE_SQUARE_1
    351  415a		       05		      .byte.b	BANK_BLACK_KING_on_WHITE_SQUARE_2
    352  415b		       05		      .byte.b	BANK_BLACK_KING_on_WHITE_SQUARE_3
    353  415c		       07		      .byte.b	BANK_BLACK_MARKER_on_WHITE_SQUARE_0
    354  415d		       07		      .byte.b	BANK_BLACK_MARKER_on_WHITE_SQUARE_1
    355  415e		       07		      .byte.b	BANK_BLACK_MARKER_on_WHITE_SQUARE_2
    356  415f		       07		      .byte.b	BANK_BLACK_MARKER_on_WHITE_SQUARE_3
    357  4160		       05		      .byte.b	BANK_BLACK_BLANK_on_BLACK_SQUARE_0
    358  4161		       05		      .byte.b	BANK_BLACK_BLANK_on_BLACK_SQUARE_1
    359  4162		       05		      .byte.b	BANK_BLACK_BLANK_on_BLACK_SQUARE_2
    360  4163		       05		      .byte.b	BANK_BLACK_BLANK_on_BLACK_SQUARE_3
    361  4164		       05		      .byte.b	BANK_BLACK_PAWN_on_BLACK_SQUARE_0
    362  4165		       05		      .byte.b	BANK_BLACK_PAWN_on_BLACK_SQUARE_1
    363  4166		       05		      .byte.b	BANK_BLACK_PAWN_on_BLACK_SQUARE_2
    364  4167		       05		      .byte.b	BANK_BLACK_PAWN_on_BLACK_SQUARE_3
    365  4168		       05		      .byte.b	BANK_BLACK_KNIGHT_on_BLACK_SQUARE_0
    366  4169		       05		      .byte.b	BANK_BLACK_KNIGHT_on_BLACK_SQUARE_1
    367  416a		       05		      .byte.b	BANK_BLACK_KNIGHT_on_BLACK_SQUARE_2
    368  416b		       05		      .byte.b	BANK_BLACK_KNIGHT_on_BLACK_SQUARE_3
    369  416c		       06		      .byte.b	BANK_BLACK_BISHOP_on_BLACK_SQUARE_0
    370  416d		       06		      .byte.b	BANK_BLACK_BISHOP_on_BLACK_SQUARE_1
    371  416e		       06		      .byte.b	BANK_BLACK_BISHOP_on_BLACK_SQUARE_2
    372  416f		       06		      .byte.b	BANK_BLACK_BISHOP_on_BLACK_SQUARE_3
    373  4170		       06		      .byte.b	BANK_BLACK_ROOK_on_BLACK_SQUARE_0
    374  4171		       06		      .byte.b	BANK_BLACK_ROOK_on_BLACK_SQUARE_1
    375  4172		       06		      .byte.b	BANK_BLACK_ROOK_on_BLACK_SQUARE_2
    376  4173		       06		      .byte.b	BANK_BLACK_ROOK_on_BLACK_SQUARE_3
    377  4174		       06		      .byte.b	BANK_BLACK_QUEEN_on_BLACK_SQUARE_0
    378  4175		       06		      .byte.b	BANK_BLACK_QUEEN_on_BLACK_SQUARE_1
    379  4176		       06		      .byte.b	BANK_BLACK_QUEEN_on_BLACK_SQUARE_2
    380  4177		       06		      .byte.b	BANK_BLACK_QUEEN_on_BLACK_SQUARE_3
    381  4178		       06		      .byte.b	BANK_BLACK_KING_on_BLACK_SQUARE_0
    382  4179		       06		      .byte.b	BANK_BLACK_KING_on_BLACK_SQUARE_1
    383  417a		       06		      .byte.b	BANK_BLACK_KING_on_BLACK_SQUARE_2
    384  417b		       06		      .byte.b	BANK_BLACK_KING_on_BLACK_SQUARE_3
    385  417c		       07		      .byte.b	BANK_BLACK_MARKER_on_BLACK_SQUARE_0
    386  417d		       07		      .byte.b	BANK_BLACK_MARKER_on_BLACK_SQUARE_1
    387  417e		       07		      .byte.b	BANK_BLACK_MARKER_on_BLACK_SQUARE_2
    388  417f		       07		      .byte.b	BANK_BLACK_MARKER_on_BLACK_SQUARE_3
    389  4180
    390  4180							; piece index equates...
    391  4180		       00 00	   INDEX_WHITE_BLANK_on_WHITE_SQUARE_0 =	0
    392  4180		       00 01	   INDEX_WHITE_BLANK_on_WHITE_SQUARE_1 =	1
    393  4180		       00 02	   INDEX_WHITE_BLANK_on_WHITE_SQUARE_2 =	2
    394  4180		       00 03	   INDEX_WHITE_BLANK_on_WHITE_SQUARE_3 =	3
    395  4180		       00 04	   INDEX_WHITE_PAWN_on_WHITE_SQUARE_0 =	4
    396  4180		       00 05	   INDEX_WHITE_PAWN_on_WHITE_SQUARE_1 =	5
    397  4180		       00 06	   INDEX_WHITE_PAWN_on_WHITE_SQUARE_2 =	6
    398  4180		       00 07	   INDEX_WHITE_PAWN_on_WHITE_SQUARE_3 =	7
    399  4180		       00 08	   INDEX_WHITE_KNIGHT_on_WHITE_SQUARE_0 =	8
    400  4180		       00 09	   INDEX_WHITE_KNIGHT_on_WHITE_SQUARE_1 =	9
    401  4180		       00 0a	   INDEX_WHITE_KNIGHT_on_WHITE_SQUARE_2 =	10
    402  4180		       00 0b	   INDEX_WHITE_KNIGHT_on_WHITE_SQUARE_3 =	11
    403  4180		       00 0c	   INDEX_WHITE_BISHOP_on_WHITE_SQUARE_0 =	12
    404  4180		       00 0d	   INDEX_WHITE_BISHOP_on_WHITE_SQUARE_1 =	13
    405  4180		       00 0e	   INDEX_WHITE_BISHOP_on_WHITE_SQUARE_2 =	14
    406  4180		       00 0f	   INDEX_WHITE_BISHOP_on_WHITE_SQUARE_3 =	15
    407  4180		       00 10	   INDEX_WHITE_ROOK_on_WHITE_SQUARE_0 =	16
    408  4180		       00 11	   INDEX_WHITE_ROOK_on_WHITE_SQUARE_1 =	17
    409  4180		       00 12	   INDEX_WHITE_ROOK_on_WHITE_SQUARE_2 =	18
    410  4180		       00 13	   INDEX_WHITE_ROOK_on_WHITE_SQUARE_3 =	19
    411  4180		       00 14	   INDEX_WHITE_QUEEN_on_WHITE_SQUARE_0 =	20
    412  4180		       00 15	   INDEX_WHITE_QUEEN_on_WHITE_SQUARE_1 =	21
    413  4180		       00 16	   INDEX_WHITE_QUEEN_on_WHITE_SQUARE_2 =	22
    414  4180		       00 17	   INDEX_WHITE_QUEEN_on_WHITE_SQUARE_3 =	23
    415  4180		       00 18	   INDEX_WHITE_KING_on_WHITE_SQUARE_0 =	24
    416  4180		       00 19	   INDEX_WHITE_KING_on_WHITE_SQUARE_1 =	25
    417  4180		       00 1a	   INDEX_WHITE_KING_on_WHITE_SQUARE_2 =	26
    418  4180		       00 1b	   INDEX_WHITE_KING_on_WHITE_SQUARE_3 =	27
    419  4180		       00 1c	   INDEX_WHITE_MARKER_on_WHITE_SQUARE_0 =	28
    420  4180		       00 1d	   INDEX_WHITE_MARKER_on_WHITE_SQUARE_1 =	29
    421  4180		       00 1e	   INDEX_WHITE_MARKER_on_WHITE_SQUARE_2 =	30
    422  4180		       00 1f	   INDEX_WHITE_MARKER_on_WHITE_SQUARE_3 =	31
    423  4180		       00 20	   INDEX_WHITE_BLANK_on_BLACK_SQUARE_0 =	32
    424  4180		       00 21	   INDEX_WHITE_BLANK_on_BLACK_SQUARE_1 =	33
    425  4180		       00 22	   INDEX_WHITE_BLANK_on_BLACK_SQUARE_2 =	34
    426  4180		       00 23	   INDEX_WHITE_BLANK_on_BLACK_SQUARE_3 =	35
    427  4180		       00 24	   INDEX_WHITE_PAWN_on_BLACK_SQUARE_0 =	36
    428  4180		       00 25	   INDEX_WHITE_PAWN_on_BLACK_SQUARE_1 =	37
    429  4180		       00 26	   INDEX_WHITE_PAWN_on_BLACK_SQUARE_2 =	38
    430  4180		       00 27	   INDEX_WHITE_PAWN_on_BLACK_SQUARE_3 =	39
    431  4180		       00 28	   INDEX_WHITE_KNIGHT_on_BLACK_SQUARE_0 =	40
    432  4180		       00 29	   INDEX_WHITE_KNIGHT_on_BLACK_SQUARE_1 =	41
    433  4180		       00 2a	   INDEX_WHITE_KNIGHT_on_BLACK_SQUARE_2 =	42
    434  4180		       00 2b	   INDEX_WHITE_KNIGHT_on_BLACK_SQUARE_3 =	43
    435  4180		       00 2c	   INDEX_WHITE_BISHOP_on_BLACK_SQUARE_0 =	44
    436  4180		       00 2d	   INDEX_WHITE_BISHOP_on_BLACK_SQUARE_1 =	45
    437  4180		       00 2e	   INDEX_WHITE_BISHOP_on_BLACK_SQUARE_2 =	46
    438  4180		       00 2f	   INDEX_WHITE_BISHOP_on_BLACK_SQUARE_3 =	47
    439  4180		       00 30	   INDEX_WHITE_ROOK_on_BLACK_SQUARE_0 =	48
    440  4180		       00 31	   INDEX_WHITE_ROOK_on_BLACK_SQUARE_1 =	49
    441  4180		       00 32	   INDEX_WHITE_ROOK_on_BLACK_SQUARE_2 =	50
    442  4180		       00 33	   INDEX_WHITE_ROOK_on_BLACK_SQUARE_3 =	51
    443  4180		       00 34	   INDEX_WHITE_QUEEN_on_BLACK_SQUARE_0 =	52
    444  4180		       00 35	   INDEX_WHITE_QUEEN_on_BLACK_SQUARE_1 =	53
    445  4180		       00 36	   INDEX_WHITE_QUEEN_on_BLACK_SQUARE_2 =	54
    446  4180		       00 37	   INDEX_WHITE_QUEEN_on_BLACK_SQUARE_3 =	55
    447  4180		       00 38	   INDEX_WHITE_KING_on_BLACK_SQUARE_0 =	56
    448  4180		       00 39	   INDEX_WHITE_KING_on_BLACK_SQUARE_1 =	57
    449  4180		       00 3a	   INDEX_WHITE_KING_on_BLACK_SQUARE_2 =	58
    450  4180		       00 3b	   INDEX_WHITE_KING_on_BLACK_SQUARE_3 =	59
    451  4180		       00 3c	   INDEX_WHITE_MARKER_on_BLACK_SQUARE_0 =	60
    452  4180		       00 3d	   INDEX_WHITE_MARKER_on_BLACK_SQUARE_1 =	61
    453  4180		       00 3e	   INDEX_WHITE_MARKER_on_BLACK_SQUARE_2 =	62
    454  4180		       00 3f	   INDEX_WHITE_MARKER_on_BLACK_SQUARE_3 =	63
    455  4180		       00 40	   INDEX_BLACK_BLANK_on_WHITE_SQUARE_0 =	64
    456  4180		       00 41	   INDEX_BLACK_BLANK_on_WHITE_SQUARE_1 =	65
    457  4180		       00 42	   INDEX_BLACK_BLANK_on_WHITE_SQUARE_2 =	66
    458  4180		       00 43	   INDEX_BLACK_BLANK_on_WHITE_SQUARE_3 =	67
    459  4180		       00 44	   INDEX_BLACK_PAWN_on_WHITE_SQUARE_0 =	68
    460  4180		       00 45	   INDEX_BLACK_PAWN_on_WHITE_SQUARE_1 =	69
    461  4180		       00 46	   INDEX_BLACK_PAWN_on_WHITE_SQUARE_2 =	70
    462  4180		       00 47	   INDEX_BLACK_PAWN_on_WHITE_SQUARE_3 =	71
    463  4180		       00 48	   INDEX_BLACK_KNIGHT_on_WHITE_SQUARE_0 =	72
    464  4180		       00 49	   INDEX_BLACK_KNIGHT_on_WHITE_SQUARE_1 =	73
    465  4180		       00 4a	   INDEX_BLACK_KNIGHT_on_WHITE_SQUARE_2 =	74
    466  4180		       00 4b	   INDEX_BLACK_KNIGHT_on_WHITE_SQUARE_3 =	75
    467  4180		       00 4c	   INDEX_BLACK_BISHOP_on_WHITE_SQUARE_0 =	76
    468  4180		       00 4d	   INDEX_BLACK_BISHOP_on_WHITE_SQUARE_1 =	77
    469  4180		       00 4e	   INDEX_BLACK_BISHOP_on_WHITE_SQUARE_2 =	78
    470  4180		       00 4f	   INDEX_BLACK_BISHOP_on_WHITE_SQUARE_3 =	79
    471  4180		       00 50	   INDEX_BLACK_ROOK_on_WHITE_SQUARE_0 =	80
    472  4180		       00 51	   INDEX_BLACK_ROOK_on_WHITE_SQUARE_1 =	81
    473  4180		       00 52	   INDEX_BLACK_ROOK_on_WHITE_SQUARE_2 =	82
    474  4180		       00 53	   INDEX_BLACK_ROOK_on_WHITE_SQUARE_3 =	83
    475  4180		       00 54	   INDEX_BLACK_QUEEN_on_WHITE_SQUARE_0 =	84
    476  4180		       00 55	   INDEX_BLACK_QUEEN_on_WHITE_SQUARE_1 =	85
    477  4180		       00 56	   INDEX_BLACK_QUEEN_on_WHITE_SQUARE_2 =	86
    478  4180		       00 57	   INDEX_BLACK_QUEEN_on_WHITE_SQUARE_3 =	87
    479  4180		       00 58	   INDEX_BLACK_KING_on_WHITE_SQUARE_0 =	88
    480  4180		       00 59	   INDEX_BLACK_KING_on_WHITE_SQUARE_1 =	89
    481  4180		       00 5a	   INDEX_BLACK_KING_on_WHITE_SQUARE_2 =	90
    482  4180		       00 5b	   INDEX_BLACK_KING_on_WHITE_SQUARE_3 =	91
    483  4180		       00 5c	   INDEX_BLACK_MARKER_on_WHITE_SQUARE_0 =	92
    484  4180		       00 5d	   INDEX_BLACK_MARKER_on_WHITE_SQUARE_1 =	93
    485  4180		       00 5e	   INDEX_BLACK_MARKER_on_WHITE_SQUARE_2 =	94
    486  4180		       00 5f	   INDEX_BLACK_MARKER_on_WHITE_SQUARE_3 =	95
    487  4180		       00 60	   INDEX_BLACK_BLANK_on_BLACK_SQUARE_0 =	96
    488  4180		       00 61	   INDEX_BLACK_BLANK_on_BLACK_SQUARE_1 =	97
    489  4180		       00 62	   INDEX_BLACK_BLANK_on_BLACK_SQUARE_2 =	98
    490  4180		       00 63	   INDEX_BLACK_BLANK_on_BLACK_SQUARE_3 =	99
    491  4180		       00 64	   INDEX_BLACK_PAWN_on_BLACK_SQUARE_0 =	100
    492  4180		       00 65	   INDEX_BLACK_PAWN_on_BLACK_SQUARE_1 =	101
    493  4180		       00 66	   INDEX_BLACK_PAWN_on_BLACK_SQUARE_2 =	102
    494  4180		       00 67	   INDEX_BLACK_PAWN_on_BLACK_SQUARE_3 =	103
    495  4180		       00 68	   INDEX_BLACK_KNIGHT_on_BLACK_SQUARE_0 =	104
    496  4180		       00 69	   INDEX_BLACK_KNIGHT_on_BLACK_SQUARE_1 =	105
    497  4180		       00 6a	   INDEX_BLACK_KNIGHT_on_BLACK_SQUARE_2 =	106
    498  4180		       00 6b	   INDEX_BLACK_KNIGHT_on_BLACK_SQUARE_3 =	107
    499  4180		       00 6c	   INDEX_BLACK_BISHOP_on_BLACK_SQUARE_0 =	108
    500  4180		       00 6d	   INDEX_BLACK_BISHOP_on_BLACK_SQUARE_1 =	109
    501  4180		       00 6e	   INDEX_BLACK_BISHOP_on_BLACK_SQUARE_2 =	110
    502  4180		       00 6f	   INDEX_BLACK_BISHOP_on_BLACK_SQUARE_3 =	111
    503  4180		       00 70	   INDEX_BLACK_ROOK_on_BLACK_SQUARE_0 =	112
    504  4180		       00 71	   INDEX_BLACK_ROOK_on_BLACK_SQUARE_1 =	113
    505  4180		       00 72	   INDEX_BLACK_ROOK_on_BLACK_SQUARE_2 =	114
    506  4180		       00 73	   INDEX_BLACK_ROOK_on_BLACK_SQUARE_3 =	115
    507  4180		       00 74	   INDEX_BLACK_QUEEN_on_BLACK_SQUARE_0 =	116
    508  4180		       00 75	   INDEX_BLACK_QUEEN_on_BLACK_SQUARE_1 =	117
    509  4180		       00 76	   INDEX_BLACK_QUEEN_on_BLACK_SQUARE_2 =	118
    510  4180		       00 77	   INDEX_BLACK_QUEEN_on_BLACK_SQUARE_3 =	119
    511  4180		       00 78	   INDEX_BLACK_KING_on_BLACK_SQUARE_0 =	120
    512  4180		       00 79	   INDEX_BLACK_KING_on_BLACK_SQUARE_1 =	121
    513  4180		       00 7a	   INDEX_BLACK_KING_on_BLACK_SQUARE_2 =	122
    514  4180		       00 7b	   INDEX_BLACK_KING_on_BLACK_SQUARE_3 =	123
    515  4180		       00 7c	   INDEX_BLACK_MARKER_on_BLACK_SQUARE_0 =	124
    516  4180		       00 7d	   INDEX_BLACK_MARKER_on_BLACK_SQUARE_1 =	125
    517  4180		       00 7e	   INDEX_BLACK_MARKER_on_BLACK_SQUARE_2 =	126
    518  4180		       00 7f	   INDEX_BLACK_MARKER_on_BLACK_SQUARE_3 =	127
------- FILE BANK_CHESS_INCLUDES.asm
      0  4180					      CHECK_BANK_SIZE	"PIECE_VECTORS (2K)"
      1  4180		       01 80	   .TEMP      =	* - BANK_START
 PIECE_VECTORS (2K) (2K) SIZE =  $180 , FREE= $680
      2  4180					      ECHO	"PIECE_VECTORS (2K)", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  4180				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  4180				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  4180				  -	      ERR
      6  4180					      endif
------- FILE ./chess.asm
------- FILE BANK_StateMachine.asm LEVEL 2 PASS 2
      0  4180					      include	"BANK_StateMachine.asm"
      1  4180
      2  4180
      0  4180					      NEWBANK	STATEMACHINE
      1  4b17 ????				      SEG	STATEMACHINE
      2  4800					      ORG	ORIGIN
      3  4800					      RORG	$F000
      4  4800				   BANK_START SET	*
      5  4800				   STATEMACHINE SET	ORIGIN / 2048
      6  4800				   ORIGIN     SET	ORIGIN + 2048
      7  4800				   _CURRENT_BANK SET	STATEMACHINE
      4  4800
      5  4800							;    MAC PHASE ;#
      6  4800							;    lda #{1}
      7  4800							;    sta aiPhase
      8  4800							;    ENDM
      9  4800
     10  4800							; Banks holding data (ply 0 doubles as WHITE, and ply 1 as BLACK)
     11  4800
     12  4800		       00 09	   PLAYER     =	RAMBANK_PLY
     13  4800		       00 0a	   OPPONENT   =	PLAYER + 1
     14  4800
     15  4800							;---------------------------------------------------------------------------------------------------
     16  4800
     17  4800		       00 01	   STARTSELECTPIECE =	1
     18  4800
     19  4800		       00 00	   AI_BeginSelectMovePhase =	0
     20  4800		       00 01	   AI_SelectStartSquare =	1
     21  4800		       00 02	   AI_StartSquareSelected =	2
     22  4800		       00 03	   AI_DrawMoves =	3
     23  4800		       00 04	   AI_ShowMoveCaptures =	4
     24  4800		       00 05	   AI_SlowFlash =	5
     25  4800		       00 06	   AI_DrawTargetSquares =	6
     26  4800		       00 07	   AI_SelectDestinationSquare =	7
     27  4800		       00 08	   AI_Quiescent =	8
     28  4800		       00 09	   AI_Halt    =	9
     29  4800		       00 0a	   AI_ReselectDebounce =	10
     30  4800		       00 0b	   AI_StartMoveGen =	11
     31  4800		       00 0c	   AI_StepMoveGen =	12
     32  4800		       00 0d	   AI_LookForCheck =	13
     33  4800		       00 0e	   AI_StartClearBoard =	14
     34  4800		       00 0f	   AI_ClearEachRow =	15
     35  4800		       00 10	   AI_DrawEntireBoard =	16
     36  4800		       00 11	   AI_DEB2    =	17
     37  4800		       00 12	   AI_FlipBuffers =	18
     38  4800		       00 13	   AI_FB0     =	19
     39  4800		       00 14	   AI_FB2     =	20
     40  4800		       00 15	   AI_FB3     =	21
     41  4800		       00 16	   AI_EraseStartPiece =	22
     42  4800		       00 17	   AI_WriteStartPieceBlank =	23
     43  4800		       00 18	   AI_MarchToTargetA =	24
     44  4800		       00 19	   AI_MarchB  =	25
     45  4800		       00 1a	   AI_MarchToTargetB =	26
     46  4800		       00 1b	   AI_MarchB2 =	27
     47  4800		       00 1c	   AI_FinalFlash =	28
     48  4800		       00 1d	   AI_SpecialMoveFixup =	29
     49  4800
     50  4800
     51  4800
      0  4800					      DEF	AiVectorLO
      1  4800				   BANK_AiVectorLO SET	_CURRENT_BANK
      2  4800
      3  4800				   AiVectorLO
     53  4800
     54  4800		       96		      .byte.b	<aiBeginSelectMovePhase	; 0
     55  4801		       b1		      .byte.b	<aiSelectStartSquare	; 1
     56  4802		       20		      .byte.b	<aiStartSquareSelected	; 2
     57  4803		       42		      .byte.b	<aiDrawMoves	; 3
     58  4804		       9b		      .byte.b	<aiShowMoveCaptures	; 4
     59  4805		       b9		      .byte.b	<aiSlowFlash	; 5
     60  4806		       79		      .byte.b	<aiDrawTargetSquares	; 6
     61  4807		       1c		      .byte.b	<aiSelectDestinationSquare	; 7
     62  4808		       5f		      .byte.b	<aiQuiescent	; 8
     63  4809		       83		      .byte.b	<aiHalt	; 9
     64  480a		       56		      .byte.b	<aiReselectDebounce	; 10
     65  480b		       5a		      .byte.b	<aiStartMoveGen	; 11
     66  480c		       6c		      .byte.b	<aiStepMoveGen	; 12
     67  480d		       82		      .byte.b	<aiLookForCheck	; 13
     68  480e		       41		      .byte.b	<aiStartClearBoard	; 14
     69  480f		       50		      .byte.b	<aiClearEachRow	; 15
     70  4810		       cd		      .byte.b	<aiDrawEntireBoard	; 16
     71  4811		       a4		      .byte.b	<aiDEB2	; 17
     72  4812		       f8		      .byte.b	<aiFlipBuffers	; 18
     73  4813		       41		      .byte.b	<aiFB0	; 19
     74  4814		       60		      .byte.b	<aiFB2	; 20
     75  4815		       64		      .byte.b	<aiFB3	; 21
     76  4816		       6f		      .byte.b	<aiEraseStartPiece	; 22
     77  4817		       84		      .byte.b	<aiWriteStartPieceBlank	; 23
     78  4818		       80		      .byte.b	<aiMarchToTargetA	; 24
     79  4819		       b9		      .byte.b	<aiMarchB	; 25
     80  481a		       f3		      .byte.b	<aiMarchToTargetB	; 26
     81  481b		       17		      .byte.b	<aiMarchB2	; 27
     82  481c		       cb		      .byte.b	<aiFinalFlash	; 28
     83  481d		       4f		      .byte.b	<aiSpecialMoveFixup	; 29
     84  481e
     85  481e
      0  481e					      DEF	AiVectorHI
      1  481e				   BANK_AiVectorHI SET	_CURRENT_BANK
      2  481e
      3  481e				   AiVectorHI
     87  481e		       f0		      .byte.b	>aiBeginSelectMovePhase	; 0
     88  481f		       f0		      .byte.b	>aiSelectStartSquare	; 1
     89  4820		       f1		      .byte.b	>aiStartSquareSelected	; 2
     90  4821		       f1		      .byte.b	>aiDrawMoves	; 3
     91  4822		       f1		      .byte.b	>aiShowMoveCaptures	; 4
     92  4823		       f1		      .byte.b	>aiSlowFlash	; 5
     93  4824		       f1		      .byte.b	>aiDrawTargetSquares	; 6
     94  4825		       f2		      .byte.b	>aiSelectDestinationSquare	; 7
     95  4826		       f2		      .byte.b	>aiQuiescent	; 8
     96  4827		       f2		      .byte.b	>aiHalt	; 9
     97  4828		       f2		      .byte.b	>aiReselectDebounce	; 10
     98  4829		       f0		      .byte.b	>aiStartMoveGen	; 11
     99  482a		       f0		      .byte.b	>aiStepMoveGen	; 12
    100  482b		       f0		      .byte.b	>aiLookForCheck	; 13
    101  482c		       f0		      .byte.b	>aiStartClearBoard	; 14
    102  482d		       f0		      .byte.b	>aiClearEachRow	; 15
    103  482e		       f8		      .byte.b	>aiDrawEntireBoard	; 16
    104  482f		       f0		      .byte.b	>aiDEB2	; 17
    105  4830		       f8		      .byte.b	>aiFlipBuffers	; 18
    106  4831		       f9		      .byte.b	>aiFB0	; 19
    107  4832		       f9		      .byte.b	>aiFB2	; 20
    108  4833		       f0		      .byte.b	>aiFB3	; 21
    109  4834		       f0		      .byte.b	>aiEraseStartPiece	; 22
    110  4835		       f0		      .byte.b	>aiWriteStartPieceBlank	; 23
    111  4836		       f9		      .byte.b	>aiMarchToTargetA	; 24
    112  4837		       f0		      .byte.b	>aiMarchB	; 25
    113  4838		       f9		      .byte.b	>aiMarchToTargetB	; 26
    114  4839		       fa		      .byte.b	>aiMarchB2	; 27
    115  483a		       f0		      .byte.b	>aiFinalFlash	; 28
    116  483b		       fa		      .byte.b	>aiSpecialMoveFixup	; 29
    117  483c
      0  483c					      DEF	AiVectorBANK
      1  483c				   BANK_AiVectorBANK SET	_CURRENT_BANK
      2  483c
      3  483c				   AiVectorBANK
    119  483c		       09		      .byte.b	BANK_aiBeginSelectMovePhase	; 0
    120  483d		       09		      .byte.b	BANK_aiSelectStartSquare	; 1
    121  483e		       09		      .byte.b	BANK_aiStartSquareSelected	; 2
    122  483f		       09		      .byte.b	BANK_aiDrawMoves	; 3
    123  4840		       09		      .byte.b	BANK_aiShowMoveCaptures	; 4
    124  4841		       09		      .byte.b	BANK_aiSlowFlash	; 5
    125  4842		       09		      .byte.b	BANK_aiDrawTargetSquares	; 6
    126  4843		       09		      .byte.b	BANK_aiSelectDestinationSquare	; 7
    127  4844		       09		      .byte.b	BANK_aiQuiescent	; 8
    128  4845		       09		      .byte.b	BANK_aiHalt	; 9
    129  4846		       09		      .byte.b	BANK_aiReselectDebounce	; 10
    130  4847		       09		      .byte.b	BANK_aiStartMoveGen	; 11
    131  4848		       09		      .byte.b	BANK_aiStepMoveGen	; 12
    132  4849		       09		      .byte.b	BANK_aiLookForCheck	; 13
    133  484a		       00		      .byte.b	BANK_aiStartClearBoard	; 14
    134  484b		       00		      .byte.b	BANK_aiClearEachRow	; 15
    135  484c		       0f		      .byte.b	BANK_aiDrawEntireBoard	; 16
    136  484d		       00		      .byte.b	BANK_aiDEB2	; 17
    137  484e		       0f		      .byte.b	BANK_aiFlipBuffers	; 18
    138  484f		       0f		      .byte.b	BANK_aiFB0	; 19
    139  4850		       0f		      .byte.b	BANK_aiFB2	; 20
    140  4851		       00		      .byte.b	BANK_aiFB3	; 21
    141  4852		       00		      .byte.b	BANK_aiEraseStartPiece	; 22
    142  4853		       00		      .byte.b	BANK_aiWriteStartPieceBlank	; 23
    143  4854		       0f		      .byte.b	BANK_aiMarchToTargetA	; 24
    144  4855		       00		      .byte.b	BANK_aiMarchB	; 25
    145  4856		       0f		      .byte.b	BANK_aiMarchToTargetB	; 26
    146  4857		       0f		      .byte.b	BANK_aiMarchB2	; 27
    147  4858		       00		      .byte.b	BANK_aiFinalFlash	; 28
    148  4859		       0f		      .byte.b	BANK_aiSpecialMoveFixup	; 29
    149  485a
    150  485a							;---------------------------------------------------------------------------------------------------
    151  485a
      0  485a					      DEF	aiStartMoveGen
      1  485a				   BANK_aiStartMoveGen SET	_CURRENT_BANK
      2  485a
      3  485a				   aiStartMoveGen
    153  485a					      SUBROUTINE
    154  485a
    155  485a							; To assist with castling, generate the moves for the opponent, giving us effectively
    156  485a							; a list of squares that are being attacked. The castling can't happen if the king is
    157  485a							; in check or if the squares it would have to move over are in check
    158  485a
    159  485a							; we don't need to worry about this if K has moved, or relevant R has moved or if
    160  485a							; the squares between are occupied. We can tell THAT by examining the movelist to see
    161  485a							; if there are K-moves marked "FLAG_CASTLE" - and the relevant squares
    162  485a
    163  485a		       a9 0a		      lda	#OPPONENT
    164  485c		       85 9c		      sta	currentPly
    165  485e		       20 0b f9 	      jsr	SAFE_InitialiseMoveGeneration
    166  4861
    167  4861		       a5 9e		      lda	sideToMove
    168  4863		       49 80		      eor	#128
    169  4865		       85 9e		      sta	sideToMove	; for movegen to know
    170  4867
      0  4867					      PHASE	AI_StepMoveGen
      1  4867		       a9 0c		      lda	#AI_StepMoveGen
      2  4869		       85 8f		      sta	aiPhase
    172  486b		       60		      rts
    173  486c
    174  486c
    175  486c							;---------------------------------------------------------------------------------------------------
    176  486c
      0  486c					      DEF	aiStepMoveGen
      1  486c				   BANK_aiStepMoveGen SET	_CURRENT_BANK
      2  486c
      3  486c				   aiStepMoveGen
    178  486c					      SUBROUTINE
    179  486c
    180  486c							; Because we're (possibly) running with the screen on, processing time is very short and
    181  486c							; we generate the opponent moves piece by piece. Time isn't really an isssue here, so
    182  486c							; this happens over multiple frames.
    183  486c
    184  486c		       20 17 f9 	      jsr	SAFE_GenerateOneMove
    185  486f
    186  486f		       a5 9d		      lda	piecelistIndex
    187  4871		       29 0f		      and	#15
    188  4873		       c9 00		      cmp	#0
    189  4875		       d0 0a		      bne	.wait	; still generating
    190  4877
    191  4877		       a5 9e		      lda	sideToMove
    192  4879		       49 80		      eor	#128
    193  487b		       85 9e		      sta	sideToMove
    194  487d
    195  487d
      0  487d					      PHASE	AI_LookForCheck
      1  487d		       a9 0d		      lda	#AI_LookForCheck
      2  487f		       85 8f		      sta	aiPhase
    197  4881		       60	   .wait      rts
    198  4882
    199  4882
    200  4882							;---------------------------------------------------------------------------------------------------
    201  4882
      0  4882					      DEF	aiLookForCheck
      1  4882				   BANK_aiLookForCheck SET	_CURRENT_BANK
      2  4882
      3  4882				   aiLookForCheck
    203  4882					      SUBROUTINE
    204  4882
    205  4882							; now we've finished generating the opponent moves
    206  4882							; See if the square our king is on is an attacked square (that is, it appears as a TO
    207  4882							; square in the opponent's movelist)
    208  4882
    209  4882		       a9 09		      lda	#PLAYER
    210  4884		       85 9c		      sta	currentPly
    211  4886		       20 2e fd 	      jsr	SAFE_GetKingSquare	; king's current X12 square
    212  4889		       20 7d fe 	      jsr	SAFE_IsSquareUnderAttack
    213  488c		       90 03		      bcc	.exit
    214  488e
    215  488e							; king attack found!
    216  488e		       4c 8e f0    kk	      jmp	kk
    217  4891
    218  4891
      0  4891				   .exit      PHASE	AI_BeginSelectMovePhase
      1  4891		       a9 00		      lda	#AI_BeginSelectMovePhase
      2  4893		       85 8f		      sta	aiPhase
    220  4895		       60		      rts
    221  4896
    222  4896							;---------------------------------------------------------------------------------------------------
    223  4896
      0  4896					      DEF	aiBeginSelectMovePhase
      1  4896				   BANK_aiBeginSelectMovePhase SET	_CURRENT_BANK
      2  4896
      3  4896				   aiBeginSelectMovePhase
    225  4896					      SUBROUTINE
    226  4896
    227  4896		       a9 04		      lda	#4
    228  4898		       85 88		      sta	highlight_row
    229  489a		       85 89		      sta	highlight_row+1
    230  489c		       85 8a		      sta	highlight_col
    231  489e		       85 8b		      sta	highlight_col+1
    232  48a0
    233  48a0		       a9 00		      lda	#0
    234  48a2		       85 8c		      sta	mdelay	;?
    235  48a4		       85 96		      sta	aiFlashPhase	;?
    236  48a6
    237  48a6		       a9 ff		      lda	#-1
    238  48a8		       85 91		      sta	aiFromSquare
    239  48aa		       85 92		      sta	aiToSquare
    240  48ac
      0  48ac					      PHASE	AI_SelectStartSquare
      1  48ac		       a9 01		      lda	#AI_SelectStartSquare
      2  48ae		       85 8f		      sta	aiPhase
    242  48b0		       60		      rts
    243  48b1
    244  48b1							;---------------------------------------------------------------------------------------------------
    245  48b1
      0  48b1					      DEF	aiSelectStartSquare
      1  48b1				   BANK_aiSelectStartSquare SET	_CURRENT_BANK
      2  48b1
      3  48b1				   aiSelectStartSquare
    247  48b1					      SUBROUTINE
    248  48b1
    249  48b1		       20 de f1 	      jsr	moveCursor
    250  48b4		       20 4f fd 	      jsr	SAFE_IsValidMoveFromSquare
    251  48b7
    252  48b7		       c6 8d		      dec	ccur	; pulse colour for valid squares
    253  48b9		       20 e5 f0 	      jsr	setCursorColours
    254  48bc
    255  48bc		       c0 ff		      cpy	#-1
    256  48be		       f0 08		      beq	.noButton	; illegal square
    257  48c0
    258  48c0		       a5 4c		      lda	INPT4
    259  48c2		       30 04		      bmi	.noButton
      0  48c4					      PHASE	AI_StartSquareSelected
      1  48c4		       a9 02		      lda	#AI_StartSquareSelected
      2  48c6		       85 8f		      sta	aiPhase
    261  48c8				   .noButton
    262  48c8
    263  48c8		       60		      rts
    264  48c9
    265  48c9							;---------------------------------------------------------------------------------------------------
    266  48c9
      0  48c9					      DEF	setCursorPriority
      1  48c9				   BANK_setCursorPriority SET	_CURRENT_BANK
      2  48c9
      3  48c9				   setCursorPriority
    268  48c9					      SUBROUTINE
    269  48c9
    270  48c9		       98		      tya
    271  48ca		       48		      pha
    272  48cb
    273  48cb					      if	1
    274  48cb
    275  48cb		       a5 88		      lda	highlight_row
    276  48cd		       49 07		      eor	#7
    277  48cf		       0a		      asl
    278  48d0		       0a		      asl
    279  48d1		       0a		      asl
    280  48d2		       05 8a		      ora	highlight_col
    281  48d4		       aa		      tax
    282  48d5
    283  48d5		       20 be f8 	      jsr	SAFE_Get64toX12Board
    284  48d8		       a2 04		      ldx	#%100
    285  48da		       c9 00		      cmp	#0
    286  48dc		       d0 02		      bne	.under
    287  48de		       a2 00		      ldx	#0
    288  48e0		       86 4a	   .under     stx	CTRLPF	; UNDER
    289  48e2					      endif
    290  48e2
    291  48e2		       68		      pla
    292  48e3		       a8		      tay
    293  48e4		       60		      rts
    294  48e5
    295  48e5							;---------------------------------------------------------------------------------------------------
    296  48e5
      0  48e5					      DEF	setCursorColours
      1  48e5				   BANK_setCursorColours SET	_CURRENT_BANK
      2  48e5
      3  48e5				   setCursorColours
    298  48e5					      SUBROUTINE
    299  48e5
    300  48e5							; pass y=-1 if move is NOT in the movelist
    301  48e5							; preserve y
    302  48e5
    303  48e5		       a9 44		      lda	#$44
    304  48e7
    305  48e7		       c0 ff		      cpy	#-1
    306  48e9		       f0 09		      beq	.writeCursorCol	; NOT in the movelist
    307  48eb
    308  48eb		       a5 8d		      lda	ccur
    309  48ed		       4a		      lsr
    310  48ee		       4a		      lsr
    311  48ef		       29 03		      and	#3
    312  48f1		       18		      clc
    313  48f2		       69 c0		      adc	#$C0	;COLOUR_LINE_1
    314  48f4
    315  48f4		       85 46	   .writeCursorCol sta	COLUP0
    316  48f6		       60		      rts
    317  48f7
    318  48f7
      0  48f7					      OPTIONAL_PAGEBREAK	"Joystik Tables", 32
 PAGE BREAK INSERTED FOR  Joystik Tables
 REQUESTED SIZE =  $20
 WASTED SPACE =  $9
 PAGEBREAK LOCATION =  $f100
     10  4900					      LIST	ON
    320  4900
    321  4900							;			RLDU RLD  RL U RL   R DU R D  R  U R	 LDU  LD   L U	L     DU   D	 U
    322  4900							;			0000 0001 0010 0011 0100 0101 0110 0111 1000 1001 1010 1011 1100 1101 1110 1111
    323  4900		       00 00 00 00*JoyMoveX   .byte.b	0, 0, 0, 0, 0, 1, 1, 1, 0, -1, -1, -1, 0, 0, 0, 0
    324  4910		       00 00 00 00*JoyMoveY   .byte.b	0, 0, 0, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0
    325  4920
    326  4920							;---------------------------------------------------------------------------------------------------
    327  4920
      0  4920					      DEF	aiStartSquareSelected
      1  4920				   BANK_aiStartSquareSelected SET	_CURRENT_BANK
      2  4920
      3  4920				   aiStartSquareSelected
    329  4920					      SUBROUTINE
    330  4920
    331  4920							; Mark all the valid moves for the selected piece on the board
    332  4920							; and then start pulsing the piece
    333  4920							; AND start choosing for selection of TO square
    334  4920
    335  4920
    336  4920
    337  4920							; Iterate the movelist and for all from squares which = drawPieceNumber
    338  4920							; then draw a BLANK at that square
    339  4920							; do 1 by one, when none found then increment state
    340  4920
    341  4920		       a5 88		      lda	highlight_row
    342  4922		       49 07		      eor	#7
    343  4924		       0a		      asl
    344  4925		       0a		      asl
    345  4926		       0a		      asl
    346  4927		       05 8a		      ora	highlight_col
    347  4929		       85 80		      sta	drawPieceNumber
    348  492b
    349  492b		       a9 0a		      lda	#10
    350  492d		       85 90		      sta	aiFlashDelay
    351  492f		       a9 00		      lda	#0
    352  4931		       85 92		      sta	aiToSquare
    353  4933		       85 96		      sta	aiFlashPhase	; for debounce exit timing
    354  4935
    355  4935		       a9 ff		      lda	#-1
    356  4937		       85 95		      sta	aiMoveIndex
    357  4939
    358  4939		       a9 0f		      lda	#15
    359  493b		       85 8c		      sta	mdelay	; hold-down delay before moves are shown
    360  493d
      0  493d					      PHASE	AI_DrawMoves
      1  493d		       a9 03		      lda	#AI_DrawMoves
      2  493f		       85 8f		      sta	aiPhase
    362  4941		       60		      rts
    363  4942
    364  4942							;---------------------------------------------------------------------------------------------------
    365  4942
      0  4942					      DEF	aiDrawMoves
      1  4942				   BANK_aiDrawMoves SET	_CURRENT_BANK
      2  4942
      3  4942				   aiDrawMoves
    367  4942					      SUBROUTINE
    368  4942
    369  4942
    370  4942		       c6 8d		      dec	ccur
    371  4944		       20 e5 f0 	      jsr	setCursorColours
    372  4947
    373  4947		       c6 8c		      dec	mdelay
    374  4949		       d0 21		      bne	.exit
    375  494b		       a9 01		      lda	#1
    376  494d		       85 8c		      sta	mdelay	; once triggered, runs always
    377  494f
    378  494f
    379  494f		       a5 95		      lda	aiMoveIndex
    380  4951		       10 05		      bpl	.valid
    381  4953
    382  4953		       20 3e fe 	      jsr	SAFE_getMoveIndex
    383  4956		       85 95		      sta	aiMoveIndex
    384  4958
    385  4958		       20 4a fe    .valid     jsr	SAFE_showMoveOptions	; draw potential moves one at a time
    386  495b		       a5 95		      lda	aiMoveIndex
    387  495d		       10 19		      bpl	.unsure	; still drawing in this phase
    388  495f
    389  495f		       a9 08		      lda	#CAP_SPEED
    390  4961		       85 8c		      sta	mdelay
    391  4963
    392  4963		       a9 00		      lda	#0
    393  4965		       85 96		      sta	aiFlashPhase	; controls odd/even exit of flashing
    394  4967
      0  4967					      PHASE	AI_ShowMoveCaptures
      1  4967		       a9 04		      lda	#AI_ShowMoveCaptures
      2  4969		       85 8f		      sta	aiPhase
    396  496b		       60		      rts
    397  496c
    398  496c				   .exit
    399  496c
    400  496c							; Initial piece selection has happened, but the button hasn't been released yet
    401  496c							; AND we're still in the waiting phase to see if the button was held long enough for move show
    402  496c
    403  496c		       a5 4c		      lda	INPT4
    404  496e		       10 08		      bpl	.unsure	; button still pressed, so still unsure what to do
    405  4970
    406  4970							; Aha! Button released, so we know the selected piece and can start flashing it
    407  4970							; and allowing movement of the selector to a destination square...
    408  4970
    409  4970		       a9 18		      lda	#6*4
    410  4972		       85 8d		      sta	ccur	; bright green square for selection
    411  4974
      0  4974					      PHASE	AI_SelectDestinationSquare
      1  4974		       a9 07		      lda	#AI_SelectDestinationSquare
      2  4976		       85 8f		      sta	aiPhase
    413  4978
    414  4978		       60	   .unsure    rts
    415  4979
    416  4979							;---------------------------------------------------------------------------------------------------
    417  4979
      0  4979					      DEF	aiDrawTargetSquares
      1  4979				   BANK_aiDrawTargetSquares SET	_CURRENT_BANK
      2  4979
      3  4979				   aiDrawTargetSquares
    419  4979					      SUBROUTINE
    420  4979
    421  4979		       c6 8d		      dec	ccur
    422  497b		       20 e5 f0 	      jsr	setCursorColours
    423  497e
    424  497e		       c6 8c		      dec	mdelay
    425  4980		       d0 18		      bne	.exit
    426  4982		       a9 01		      lda	#1
    427  4984		       85 8c		      sta	mdelay	; once triggered, runs always
    428  4986
    429  4986		       a5 95		      lda	aiMoveIndex
    430  4988		       10 05		      bpl	.valid
    431  498a
    432  498a		       20 3e fe 	      jsr	SAFE_getMoveIndex
    433  498d		       85 95		      sta	aiMoveIndex
    434  498f
    435  498f		       20 4a fe    .valid     jsr	SAFE_showMoveOptions	; draw potential moves one at a time
    436  4992		       a5 95		      lda	aiMoveIndex
    437  4994		       10 04		      bpl	.exit	; still drawing in this phase
    438  4996
      0  4996					      PHASE	AI_SelectStartSquare
      1  4996		       a9 01		      lda	#AI_SelectStartSquare
      2  4998		       85 8f		      sta	aiPhase
    440  499a
    441  499a		       60	   .exit      rts
    442  499b
    443  499b							;---------------------------------------------------------------------------------------------------
    444  499b
    445  499b		       00 08	   CAP_SPEED  =	8
    446  499b
      0  499b					      DEF	aiShowMoveCaptures
      1  499b				   BANK_aiShowMoveCaptures SET	_CURRENT_BANK
      2  499b
      3  499b				   aiShowMoveCaptures
    448  499b					      SUBROUTINE
    449  499b
    450  499b							; draw/undraw ALL captured pieces
    451  499b							; we should do this an even number of times so that pieces don't disappEOR
    452  499b
    453  499b		       c6 8d		      dec	ccur
    454  499d		       20 e5 f0 	      jsr	setCursorColours
    455  49a0
    456  49a0		       c6 8c		      dec	mdelay	; flash speed UNVARYING despite draw happening
    457  49a2
    458  49a2		       a5 95		      lda	aiMoveIndex
    459  49a4		       10 05		      bpl	.valid	; guaranteed -1 on 1st call
    460  49a6		       20 3e fe 	      jsr	SAFE_getMoveIndex
    461  49a9		       85 95		      sta	aiMoveIndex
    462  49ab
    463  49ab				   .valid		;lda INTIM
    464  49ab							;cmp #22
    465  49ab							;bcc .exit		     ; try to prevent time overflows
    466  49ab
    467  49ab		       20 89 fe 	      jsr	SAFE_showMoveCaptures
    468  49ae		       a5 95		      lda	aiMoveIndex
    469  49b0		       10 06		      bpl	.exit
    470  49b2
    471  49b2		       e6 96		      inc	aiFlashPhase
    472  49b4
      0  49b4					      PHASE	AI_SlowFlash
      1  49b4		       a9 05		      lda	#AI_SlowFlash
      2  49b6		       85 8f		      sta	aiPhase
    474  49b8
    475  49b8		       60	   .exit      rts
    476  49b9
    477  49b9							;---------------------------------------------------------------------------------------------------
    478  49b9
      0  49b9					      DEF	aiSlowFlash
      1  49b9				   BANK_aiSlowFlash SET	_CURRENT_BANK
      2  49b9
      3  49b9				   aiSlowFlash
    480  49b9					      SUBROUTINE
    481  49b9
    482  49b9							; Joystick button is held down, so we're displaying the available moves
    483  49b9							; They have all been drawn, so now we "slow" flash any pieces that can be captures
    484  49b9
    485  49b9		       c6 8d		      dec	ccur
    486  49bb		       20 e5 f0 	      jsr	setCursorColours
    487  49be
    488  49be		       a5 96		      lda	aiFlashPhase
    489  49c0		       29 01		      and	#1
    490  49c2		       d0 04		      bne	.notEven	; only exit after even # EOR-draws
    491  49c4
    492  49c4		       a5 4c		      lda	INPT4
    493  49c6		       30 0d		      bmi	.butpress	; exit on button release
    494  49c8
    495  49c8				   .notEven
    496  49c8
    497  49c8							; Wait for delay to expire then back and flash 'em again
    498  49c8
    499  49c8		       c6 8c		      dec	mdelay
    500  49ca		       10 08		      bpl	.slowWait
    501  49cc
    502  49cc		       a9 08		      lda	#CAP_SPEED
    503  49ce		       85 8c		      sta	mdelay
    504  49d0
      0  49d0					      PHASE	AI_ShowMoveCaptures	; go back and rEORdraw all captures again
      1  49d0		       a9 04		      lda	#AI_ShowMoveCaptures
      2  49d2		       85 8f		      sta	aiPhase
    506  49d4
    507  49d4		       60	   .slowWait  rts
    508  49d5
    509  49d5
    510  49d5		       a9 01	   .butpress  lda	#1
    511  49d7		       85 8c		      sta	mdelay
    512  49d9
      0  49d9					      PHASE	AI_DrawTargetSquares
      1  49d9		       a9 06		      lda	#AI_DrawTargetSquares
      2  49db		       85 8f		      sta	aiPhase
    514  49dd		       60		      rts
    515  49de
    516  49de
    517  49de							;---------------------------------------------------------------------------------------------------
    518  49de
      0  49de					      DEF	moveCursor
      1  49de				   BANK_moveCursor SET	_CURRENT_BANK
      2  49de
      3  49de				   moveCursor
    520  49de					      SUBROUTINE
    521  49de
    522  49de							; Part (a) move cursor around the board waiting for joystick press
    523  49de
    524  49de		       c6 8c		      dec	mdelay
    525  49e0		       10 2b		      bpl	.delaym
    526  49e2
    527  49e2		       ad 80 02 	      lda	SWCHA
    528  49e5		       4a		      lsr
    529  49e6		       4a		      lsr
    530  49e7		       4a		      lsr
    531  49e8		       4a		      lsr
    532  49e9
    533  49e9		       c9 0f		      cmp	#15
    534  49eb		       f0 1d		      beq	.cursor
    535  49ed
    536  49ed		       a8		      tay
    537  49ee
    538  49ee		       18		      clc
    539  49ef		       a5 88		      lda	highlight_row
    540  49f1		       79 10 f1 	      adc	JoyMoveY,y
    541  49f4		       c9 08		      cmp	#$8
    542  49f6		       b0 02		      bcs	.abandon
    543  49f8		       85 88		      sta	highlight_row
    544  49fa				   .abandon
    545  49fa		       18		      clc
    546  49fb		       a5 8a		      lda	highlight_col
    547  49fd		       79 00 f1 	      adc	JoyMoveX,y
    548  4a00		       c9 08		      cmp	#$8
    549  4a02		       b0 02		      bcs	.abandon2
    550  4a04		       85 8a		      sta	highlight_col
    551  4a06				   .abandon2
    552  4a06
    553  4a06		       a9 05		      lda	#5
    554  4a08		       85 8c		      sta	mdelay
    555  4a0a
    556  4a0a		       20 c9 f0    .cursor    jsr	setCursorPriority
    557  4a0d
    558  4a0d
    559  4a0d		       60	   .delaym    rts
    560  4a0e
    561  4a0e
    562  4a0e							;---------------------------------------------------------------------------------------------------
    563  4a0e
      0  4a0e					      DEF	FlashPiece
      1  4a0e				   BANK_FlashPiece SET	_CURRENT_BANK
      2  4a0e
      3  4a0e				   FlashPiece
    565  4a0e					      SUBROUTINE
    566  4a0e
    567  4a0e							; Flash the selected piece
    568  4a0e
    569  4a0e		       c6 90		      dec	aiFlashDelay
    570  4a10		       d0 09		      bne	.noFlashAi
    571  4a12
    572  4a12		       e6 96		      inc	aiFlashPhase
    573  4a14
    574  4a14		       a9 0a		      lda	#10
    575  4a16		       85 90		      sta	aiFlashDelay
    576  4a18
    577  4a18		       20 d0 fd 	      jsr	SAFE_CopySinglePiece
    578  4a1b
    579  4a1b		       60	   .noFlashAi rts
    580  4a1c
    581  4a1c							;---------------------------------------------------------------------------------------------------
    582  4a1c
      0  4a1c					      DEF	aiSelectDestinationSquare
      1  4a1c				   BANK_aiSelectDestinationSquare SET	_CURRENT_BANK
      2  4a1c
      3  4a1c				   aiSelectDestinationSquare
    584  4a1c					      SUBROUTINE
    585  4a1c
    586  4a1c							; Piece is selected and now we're looking for a button press on a destination square
    587  4a1c							; we flash the piece on-and-off while we're doing that
    588  4a1c
    589  4a1c		       20 0e f2 	      jsr	FlashPiece
    590  4a1f		       20 de f1 	      jsr	moveCursor
    591  4a22		       20 76 fd 	      jsr	SAFE_IsValidMoveToSquare
    592  4a25		       20 e5 f0 	      jsr	setCursorColours
    593  4a28
    594  4a28							; y = valid square
    595  4a28
    596  4a28		       a5 4c		      lda	INPT4
    597  4a2a		       30 29		      bmi	.noButton
    598  4a2c
    599  4a2c		       a5 92		      lda	aiToSquare
    600  4a2e		       c5 91		      cmp	aiFromSquare	; is to==from?  that's a cancelllation
    601  4a30		       f0 0f		      beq	.cancel
    602  4a32
    603  4a32		       c0 ff		      cpy	#-1
    604  4a34		       f0 1f		      beq	.noButton	; not a valid square
    605  4a36
    606  4a36		       a5 96		      lda	aiFlashPhase
    607  4a38		       29 01		      and	#1
    608  4a3a		       f0 15		      beq	.done
    609  4a3c
    610  4a3c							; EOR-phase incorrect - force quick fix to allow next-frame button detect
    611  4a3c
    612  4a3c		       a9 01		      lda	#1
    613  4a3e		       85 90		      sta	aiFlashDelay
    614  4a40		       60		      rts
    615  4a41
    616  4a41				   .cancel
    617  4a41
    618  4a41		       a5 96		      lda	aiFlashPhase
    619  4a43		       29 01		      and	#1
    620  4a45		       f0 05		      beq	.doCancel
    621  4a47
    622  4a47							; EOR-phase incorrect - force quick fix to allow next-frame button detect
    623  4a47
    624  4a47		       a9 01		      lda	#1
    625  4a49		       85 90		      sta	aiFlashDelay
    626  4a4b		       60		      rts
    627  4a4c
    628  4a4c
      0  4a4c				   .doCancel  PHASE	AI_ReselectDebounce
      1  4a4c		       a9 0a		      lda	#AI_ReselectDebounce
      2  4a4e		       85 8f		      sta	aiPhase
    630  4a50		       60		      rts
    631  4a51
      0  4a51				   .done      PHASE	AI_Quiescent	; destination selected!
      1  4a51		       a9 08		      lda	#AI_Quiescent
      2  4a53		       85 8f		      sta	aiPhase
    633  4a55		       60	   .noButton  rts
    634  4a56
    635  4a56
    636  4a56							;---------------------------------------------------------------------------------------------------
    637  4a56
      0  4a56					      DEF	aiReselectDebounce
      1  4a56				   BANK_aiReselectDebounce SET	_CURRENT_BANK
      2  4a56
      3  4a56				   aiReselectDebounce
    639  4a56					      SUBROUTINE
    640  4a56
    641  4a56							; We've just cancelled the move. Wait for the button to be released
    642  4a56							; and then go back to selecting a piece to move
    643  4a56
    644  4a56		       a5 4c		      lda	INPT4
    645  4a58		       10 04		      bpl	.exit	; button still pressed, so wait
    646  4a5a
      0  4a5a					      PHASE	AI_SelectStartSquare
      1  4a5a		       a9 01		      lda	#AI_SelectStartSquare
      2  4a5c		       85 8f		      sta	aiPhase
    648  4a5e		       60	   .exit      rts
    649  4a5f
    650  4a5f							;---------------------------------------------------------------------------------------------------
    651  4a5f
      0  4a5f					      DEF	aiQuiescent
      1  4a5f				   BANK_aiQuiescent SET	_CURRENT_BANK
      2  4a5f
      3  4a5f				   aiQuiescent
    653  4a5f					      SUBROUTINE
    654  4a5f
    655  4a5f		       a9 ff		      lda	#-1
    656  4a61		       85 88		      sta	highlight_row	;??? piece move error when removed...???!
    657  4a63
    658  4a63		       a5 91		      lda	aiFromSquare
    659  4a65		       85 9f		      sta	fromSquare
    660  4a67		       a5 92		      lda	aiToSquare
    661  4a69		       85 a1		      sta	toSquare
    662  4a6b
    663  4a6b		       a5 93		      lda	aiFromSquareX12
    664  4a6d		       85 86		      sta	fromX12
    665  4a6f		       a5 94		      lda	aiToSquareX12
    666  4a71		       85 87		      sta	toX12
    667  4a73
    668  4a73		       20 6a fd 	      jsr	SAFE_GetPiece
    669  4a76
    670  4a76		       a5 a6		      lda	aiPiece
    671  4a78		       85 a0		      sta	fromPiece
    672  4a7a		       09 40		      ora	#FLAG_MOVED	; for K/R prevents usage in castling
    673  4a7c		       85 a2		      sta	toPiece
    674  4a7e
      0  4a7e					      PHASE	AI_FB3
      1  4a7e		       a9 15		      lda	#AI_FB3
      2  4a80		       85 8f		      sta	aiPhase
    676  4a82		       60		      rts
    677  4a83
    678  4a83							;---------------------------------------------------------------------------------------------------
    679  4a83
      0  4a83					      DEF	aiHalt
      1  4a83				   BANK_aiHalt SET	_CURRENT_BANK
      2  4a83
      3  4a83				   aiHalt
    681  4a83					      SUBROUTINE
    682  4a83
    683  4a83							; Effectively halt at this point until the other state machine resets the AI state machine
    684  4a83
    685  4a83		       60		      rts
    686  4a84
    687  4a84							;---------------------------------------------------------------------------------------------------
    688  4a84
    689  4a84							;    align 256
      0  4a84					      DEF	PositionSprites
      1  4a84				   BANK_PositionSprites SET	_CURRENT_BANK
      2  4a84
      3  4a84				   PositionSprites
    691  4a84					      SUBROUTINE
    692  4a84
    693  4a84		       a4 8a		      ldy	highlight_col
    694  4a86
    695  4a86		       85 42		      sta	WSYNC	; 00	  Sync to start of scanline.
    696  4a88
    697  4a88		       b9 0f f3 	      lda	colToPixel,y
    698  4a8b
    699  4a8b		       38		      sec		; 02	  Set the carry flag so no borrow will be applied during the division.
    700  4a8c		       e9 0f	   .divideby15 sbc	#15	; 04	  Waste the necessary amount of time dividing X-pos by 15!
    701  4a8e		       b0 fc		      bcs	.divideby15	; 06/07  11/16/21/26/31/36/41/46/51/56/61/66
    702  4a90
    703  4a90		       a8		      tay
    704  4a91		       b9 0f f2 	      lda	fineAdjustTable,y	; 13 -> Consume 5 cycles by guaranteeing we cross a page boundary
    705  4a94		       85 60		      sta	HMP0
    706  4a96		       85 50		      sta	RESP0	; 21/ 26/31/36/41/46/51/56/61/66/71 - Set the rough position.
    707  4a98
    708  4a98		       85 42		      sta	WSYNC
    709  4a9a		       85 6a		      sta	HMOVE
    710  4a9c
    711  4a9c		       60		      rts
    712  4a9d
    713  4a9d							; This table converts the "remainder" of the division by 15 (-1 to -15) to the correct
    714  4a9d							; fine adjustment value. This table is on a page boundary to guarantee the processor
    715  4a9d							; will cross a page boundary and waste a cycle in order to be at the precise position
    716  4a9d							; for a RESP0,x write
    717  4a9d
    718  4a9d
    719  4b00		       00 00 00 00*	      align	256
    720  4b00
    721  4b00				   fineAdjustBegin
    722  4b00
    723  4b00		       70		      DC.B	%01110000	; Left 7
    724  4b01		       60		      DC.B	%01100000	; Left 6
    725  4b02		       50		      DC.B	%01010000	; Left 5
    726  4b03		       40		      DC.B	%01000000	; Left 4
    727  4b04		       30		      DC.B	%00110000	; Left 3
    728  4b05		       20		      DC.B	%00100000	; Left 2
    729  4b06		       10		      DC.B	%00010000	; Left 1
    730  4b07		       00		      DC.B	%00000000	; No movement.
    731  4b08		       f0		      DC.B	%11110000	; Right 1
    732  4b09		       e0		      DC.B	%11100000	; Right 2
    733  4b0a		       d0		      DC.B	%11010000	; Right 3
    734  4b0b		       c0		      DC.B	%11000000	; Right 4
    735  4b0c		       b0		      DC.B	%10110000	; Right 5
    736  4b0d		       a0		      DC.B	%10100000	; Right 6
    737  4b0e		       90		      DC.B	%10010000	; Right 7
    738  4b0f
    739  4b0f		       f2 0f	   fineAdjustTable EQU	fineAdjustBegin - %11110001	; NOTE: %11110001 = -15
    740  4b0f
    741  4b0f
      0  4b0f					      OPTIONAL_PAGEBREAK	"colToPixel", 8
     10  4b0f					      LIST	ON
    743  4b0f		       00 14 28 3c*colToPixel .byte.b	0,20,40,60,80,100,120,140
    744  4b17
      0  4b17					      CHECK_BANK_SIZE	"BANK_StateMachine"
      1  4b17		       03 17	   .TEMP      =	* - BANK_START
 BANK_StateMachine (2K) SIZE =  $317 , FREE= $4e9
      2  4b17					      ECHO	"BANK_StateMachine", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  4b17				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  4b17				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  4b17				  -	      ERR
      6  4b17					      endif
    746  4b17
    747  4b17
    748  4b17							; EOF
------- FILE ./chess.asm
    364  4b17
------- FILE titleScreen.asm LEVEL 2 PASS 2
      0  4b17					      include	"titleScreen.asm"
      0  4b17					      NEWBANK	TITLESCREEN
      1  57c0 ????				      SEG	TITLESCREEN
      2  5000					      ORG	ORIGIN
      3  5000					      RORG	$F000
      4  5000				   BANK_START SET	*
      5  5000				   TITLESCREEN SET	ORIGIN / 2048
      6  5000				   ORIGIN     SET	ORIGIN + 2048
      7  5000				   _CURRENT_BANK SET	TITLESCREEN
      2  5000
      3  5000				   OverscanTime2
      4  5000		       1a 1a		      .byte.b	26, 26
      5  5002		       20 20		      .byte.b	32, 32
      6  5004
      7  5004				   colvec
      8  5004		       00 f1 d8 f1	      .word.w	colr_ntsc2, colr_pal
      9  5008
     10  5008
     11  5008		       32 32	   VBlankTime .byte.b	50,50
     12  500a
      0  500a					      DEF	TitleScreen
      1  500a				   BANK_TitleScreen SET	_CURRENT_BANK
      2  500a
      3  500a				   TitleScreen
     14  500a
     15  500a							; Start of new frame
     16  500a
     17  500a							; Start of vertical blank processing
     18  500a
     19  500a				   TitleSequence
     20  500a
     21  500a		       a9 00		      lda	#%00000000
     22  500c		       85 4a		      sta	CTRLPF
     23  500e		       85 49		      sta	COLUBK
     24  5010
     25  5010		       a2 00		      ldx	#0	;Platform
     26  5012		       a9 00		      lda	#<colr_ntsc2	;colvec,x
     27  5014		       85 a7		      sta	__colour_table
     28  5016		       a9 f1		      lda	#>colr_ntsc2	;colvec+1,x
     29  5018		       85 a8		      sta	__colour_table+1
     30  501a
     31  501a							;		  sta rndHi
     32  501a							;		  sta rnd
     33  501a
     34  501a
     35  501a				  -	      if	0
     36  501a				  -	      lda	#0
     37  501a				  -	      sta	digit
     38  501a				  -	      lda	#$10
     39  501a				  -	      sta	digit+1
     40  501a				  -	      lda	#$20
     41  501a				  -	      sta	digit+2
     42  501a					      endif
     43  501a
     44  501a
     45  501a
     46  501a
      0  501a					      RESYNC
      1  501a
      2  501a		       a9 02		      lda	#%10
      3  501c		       85 41		      sta	VBLANK
      4  501e
      5  501e		       a2 08		      ldx	#8
      6  5020				   .loopResync
      0  5020					      VERTICAL_SYNC
      1  5020		       a9 0e		      lda	#%1110
      2  5022		       85 42	   .VSLP1     sta	WSYNC
      3  5024		       85 40		      sta	VSYNC
      4  5026		       4a		      lsr
      5  5027		       d0 f9		      bne	.VSLP1
      8  5029
      9  5029		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  502b		       a5 a5		      lda	Platform
     11  502d		       49 02		      eor	#PAL_50
     12  502f		       d0 02		      bne	.ntsc
     13  5031		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  5033				   .ntsc
     15  5033				   .loopWait
     16  5033		       85 42		      sta	WSYNC
     17  5035		       85 42		      sta	WSYNC
     18  5037		       88		      dey
     19  5038		       d0 f9		      bne	.loopWait
     20  503a		       ca		      dex
     21  503b		       d0 e3		      bne	.loopResync
     48  503d
     49  503d				   RestartFrame0
     50  503d
     51  503d				  -	      if	0
     52  503d				  -	      ldx	#2
     53  503d				  -rollcols   clc
     54  503d				  -	      lda	digit+2
     55  503d				  -	      adc	#$10
     56  503d				  -	      sta	digit+2
     57  503d				  -	      bcc	finxc
     58  503d				  -	      dex
     59  503d				  -	      bpl	rollcols
     60  503d				  -finxc
     61  503d					      endif
     62  503d
      0  503d					      DEF	RestartFrame
      1  503d				   BANK_RestartFrame SET	_CURRENT_BANK
      2  503d
      3  503d				   RestartFrame
     64  503d		       a9 00		      LDA	#0
     65  503f		       a9 0e		      lda	#%1110	; VSYNC ON
     66  5041		       85 42	   .loopVSync2 sta	WSYNC
     67  5043		       85 40		      sta	VSYNC
     68  5045		       4a		      lsr
     69  5046		       d0 f9		      bne	.loopVSync2	; branch until VYSNC has been reset
     70  5048
     71  5048							;------------------------------------------------------------------
     72  5048
     73  5048		       a6 a5		      ldx	Platform
     74  504a		       bc 08 f0 	      ldy	VBlankTime,x
     75  504d		       8c 96 02 	      sty	TIM64T
     76  5050
     77  5050
     78  5050				  -	      if	0
     79  5050				  -	      lda	SWCHB
     80  5050				  -	      rol
     81  5050				  -	      rol
     82  5050				  -	      rol
     83  5050				  -	      and	#%11
     84  5050				  -	      eor	#PAL
     85  5050				  -	      cmp	Platform
     86  5050				  -	      beq	platOK
     87  5050				  -	      sta	Platform
     88  5050				  -	      jmp	TitleSequence
     89  5050				  -platOK
     90  5050					      endif
     91  5050
     92  5050		       e6 81	   k2	      inc	rnd
     93  5052		       f0 fc		      beq	k2
     94  5054
     95  5054
     96  5054		       85 42	   VerticalBlank sta	WSYNC
     97  5056		       ad 84 02 	      lda	INTIM
     98  5059		       d0 f9		      bne	VerticalBlank
     99  505b		       85 41		      sta	VBLANK
    100  505d
    101  505d							;sta COLUBK
    102  505d
    103  505d							;------------------------------------------------------------------
    104  505d
    105  505d							; Do X scanlines of color-changing (our picture)
    106  505d
    107  505d		       a0 d1		      ldy	#210-1	; this counts our scanline number
    108  505f		       a2 03	   SokoLogo   ldx	#3
    109  5061		       b1 a7	   triplet    lda	(__colour_table),y
    110  5063							;    eor digit-1,x
    111  5063		       85 42		      sta	WSYNC
    112  5065		       85 48		      sta	COLUPF	; 3
    113  5067
    114  5067		       b9 b0 f2 	      lda	COL_0,y	; 5
    115  506a		       85 4d		      sta	PF0	; 3   @11
    116  506c		       b9 88 f3 	      lda	COL_1,y	; 5
    117  506f		       85 4e		      sta	PF1	; 3   @19
    118  5071		       b9 60 f4 	      lda	COL_2,y	; 5
    119  5074		       85 4f		      sta	PF2	; 3   @27
    120  5076
    121  5076		       b9 38 f5 	      lda	COL_3,y	; 5
    122  5079		       85 4d		      sta	PF0	; 3   @35
      0  507b					      SLEEP	2	; @37
      1  507b				   .CYCLES    SET	2
      2  507b
      3  507b				  -	      IF	.CYCLES < 2
      4  507b				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  507b				  -	      ERR
      6  507b					      ENDIF
      7  507b
      8  507b				  -	      IF	.CYCLES & 1
      9  507b				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  507b				  -	      nop	0
     11  507b				  -	      ELSE
     12  507b				  -	      bit	VSYNC
     13  507b				  -	      ENDIF
     14  507b				  -.CYCLES    SET	.CYCLES - 3
     15  507b					      ENDIF
     16  507b
     17  507b					      REPEAT	.CYCLES / 2
     18  507b		       ea		      nop
     19  507c					      REPEND
    124  507c		       b9 10 f6 	      lda	COL_4,y	; 5
    125  507f		       85 4e		      sta	PF1	; 3   @45
      0  5081					      SLEEP	3	; @45
      1  5081				   .CYCLES    SET	3
      2  5081
      3  5081				  -	      IF	.CYCLES < 2
      4  5081				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  5081				  -	      ERR
      6  5081					      ENDIF
      7  5081
      8  5081					      IF	.CYCLES & 1
      9  5081					      IFNCONST	NO_ILLEGAL_OPCODES
     10  5081		       04 00		      nop	0
     11  5083				  -	      ELSE
     12  5083				  -	      bit	VSYNC
     13  5083					      ENDIF
     14  5083				   .CYCLES    SET	.CYCLES - 3
     15  5083					      ENDIF
     16  5083
     17  5083				  -	      REPEAT	.CYCLES / 2
     18  5083				  -	      nop
     19  5083					      REPEND
    127  5083		       b9 e8 f6 	      lda	COL_5,y	; 5
    128  5086		       85 4f		      sta	PF2	; 3
    129  5088
    130  5088		       88		      dey		; 2
    131  5089		       ca		      dex		; 2
    132  508a		       d0 d5		      bne	triplet	; 2(3)
    133  508c
    134  508c		       c0 ff		      cpy	#-1	; 2
    135  508e		       d0 cf		      bne	SokoLogo	; 2(3)
    136  5090
    137  5090							;lda #0
    138  5090							;sta PF0
    139  5090							;sta PF1
    140  5090							;sta PF2
    141  5090
    142  5090		       a6 a5		      ldx	Platform
    143  5092		       bd 00 f0 	      lda	OverscanTime2,x
    144  5095		       8d 96 02 	      sta	TIM64T
    145  5098
    146  5098				  -	      if	0
    147  5098				  -	      sta	WSYNC
    148  5098				  -	      sta	WSYNC
    149  5098				  -	      sta	WSYNC
    150  5098				  -	      sta	WSYNC
    151  5098				  -	      sta	WSYNC
    152  5098				  -	      SLEEP	8
    153  5098				  -	      jsr	SokoScreen
    154  5098				  -
    155  5098				  -	      lda	#0
    156  5098				  -	      sta	BoardScrollX
    157  5098				  -	      sta	BoardScrollY
    158  5098					      endif
    159  5098
    160  5098							;		ldy #63
    161  5098							;bot2		 sta WSYNC
    162  5098							;		dey
    163  5098							;		bpl bot2
    164  5098
    165  5098							;--------------------------------------------------------------------------
    166  5098
    167  5098		       a9 00		      lda	#0
    168  509a		       85 4d		      sta	PF0
    169  509c		       85 4e		      sta	PF1
    170  509e		       85 4f		      sta	PF2
    171  50a0
    172  50a0
      0  50a0					      NEXT_RANDOM
      1  50a0		       a5 81		      lda	rnd
      2  50a2		       4a		      lsr
      3  50a3		       90 02		      bcc	.skipEOR
      4  50a5		       49 fe		      eor	#RND_EOR_VAL
      5  50a7		       85 81	   .skipEOR   sta	rnd
    174  50a9
    175  50a9							; D1 VBLANK turns off beam
    176  50a9							; It needs to be turned on 37 scanlines later
    177  50a9
    178  50a9				   oscan
    179  50a9		       ad 84 02 	      lda	INTIM
    180  50ac		       d0 fb		      bne	oscan
    181  50ae
    182  50ae		       a9 42		      lda	#%01000010	; bit6 is not required
    183  50b0		       85 41		      sta	VBLANK	; end of screen - enter blanking
    184  50b2
    185  50b2				  -	      if	0
    186  50b2				  -	      inc	rnd
    187  50b2				  -	      bne	rdd
    188  50b2				  -	      inc	rndHi
    189  50b2				  -rdd
    190  50b2				  -
    191  50b2				  -	      dec	digitick
    192  50b2				  -	      bpl	ret2
    193  50b2				  -	      lda	#40
    194  50b2				  -	      sta	digitick
    195  50b2				  -
    196  50b2				  -	      jsr	Random
    197  50b2				  -	      and	#3
    198  50b2				  -	      beq	ret2
    199  50b2				  -	      tax
    200  50b2				  -	      jsr	Random
    201  50b2				  -	      and	#$F0
    202  50b2				  -	      sta	digit-1,x
    203  50b2				  -	      jmp	RestartFrame0
    204  50b2				  -
    205  50b2				  -ret2
    206  50b2					      endif
    207  50b2
    208  50b2
    209  50b2		       a5 4c		      lda	INPT4
    210  50b4		       10 03		      bpl	ret
    211  50b6
    212  50b6		       4c 3d f0 	      jmp	RestartFrame
    213  50b9
    214  50b9				   ret
    215  50b9		       60		      rts
    216  50ba
    217  50ba
    218  50ba
    219  50ba					      MAC	lumtable
    220  50ba							; {4} MIN LUM 1
    221  50ba							; {5} MIN LUM 2
    222  50ba							; {6} MIN LUM 3
    223  50ba
    224  50ba				   .LUM1      SET	{4}*256
    225  50ba				   .LUM2      SET	{5}*256
    226  50ba				   .LUM3      SET	{6}*256
    227  50ba
    228  50ba				   .STEP1     =	(256*({7}-{4}))/72
    229  50ba				   .STEP2     =	(256*({8}-{5}))/72
    230  50ba				   .STEP3     =	(256*({9}-{6}))/72
    231  50ba
    232  50ba					      REPEAT	72
    233  50ba					      .byte	{1}+(.LUM1/256)
    234  50ba					      .byte	{2}+(.LUM2/256)
    235  50ba					      .byte	{3}+(.LUM3/256)
    236  50ba
    237  50ba							;    ECHO {1}+(.LUM1/256)
    238  50ba							;    ECHO {2}+(.LUM1/256)
    239  50ba							;    ECHO {3}+(.LUM1/256)
    240  50ba
    241  50ba				   .LUM1      SET	.LUM1 + .STEP1
    242  50ba				   .LUM2      SET	.LUM2 + .STEP2
    243  50ba				   .LUM3      SET	.LUM3 + .STEP3
    244  50ba					      REPEND
    245  50ba					      ENDM		;{1}{2}{3} base colours
    246  50ba
    247  50ba							;colr_pal    LUMTABLE $B0,$30,$A0,0,8,4 ;2,4,6
    248  50ba							;    OPTIONAL_PAGEBREAK "colr_ntsc", 72*3
    249  50ba
    250  5100		       00 00 00 00*	      align	256
    251  5100							;    ECHO "NTSC LUMS"
    252  5100				   colr_ntsc2
      0  5100					      LUMTABLE	$40,$20,$90,$4,$6,$8,$4,$6,$8
      1  5100
      2  5100
      3  5100
      4  5100
      5  5100				   .LUM1      SET	$4*256
      6  5100				   .LUM2      SET	$6*256
      7  5100				   .LUM3      SET	$8*256
      8  5100
      9  5100		       00 00	   .STEP1     =	(256*($4-$4))/72
     10  5100		       00 00	   .STEP2     =	(256*($6-$6))/72
     11  5100		       00 00	   .STEP3     =	(256*($8-$8))/72
     12  5100
     13  5100					      REPEAT	72
     14  5100		       44		      .byte.b	$40+(.LUM1/256)
     15  5101		       26		      .byte.b	$20+(.LUM2/256)
     16  5102		       98		      .byte.b	$90+(.LUM3/256)
     17  5103
     18  5103
     19  5103
     20  5103
     21  5103
     22  5103				   .LUM1      SET	.LUM1 + .STEP1
     23  5103				   .LUM2      SET	.LUM2 + .STEP2
     24  5103				   .LUM3      SET	.LUM3 + .STEP3
     13  5103					      REPEND
     14  5103		       44		      .byte.b	$40+(.LUM1/256)
     15  5104		       26		      .byte.b	$20+(.LUM2/256)
     16  5105		       98		      .byte.b	$90+(.LUM3/256)
     17  5106
     18  5106
     19  5106
     20  5106
     21  5106
     22  5106				   .LUM1      SET	.LUM1 + .STEP1
     23  5106				   .LUM2      SET	.LUM2 + .STEP2
     24  5106				   .LUM3      SET	.LUM3 + .STEP3
     13  5106					      REPEND
     14  5106		       44		      .byte.b	$40+(.LUM1/256)
     15  5107		       26		      .byte.b	$20+(.LUM2/256)
     16  5108		       98		      .byte.b	$90+(.LUM3/256)
     17  5109
     18  5109
     19  5109
     20  5109
     21  5109
     22  5109				   .LUM1      SET	.LUM1 + .STEP1
     23  5109				   .LUM2      SET	.LUM2 + .STEP2
     24  5109				   .LUM3      SET	.LUM3 + .STEP3
     13  5109					      REPEND
     14  5109		       44		      .byte.b	$40+(.LUM1/256)
     15  510a		       26		      .byte.b	$20+(.LUM2/256)
     16  510b		       98		      .byte.b	$90+(.LUM3/256)
     17  510c
     18  510c
     19  510c
     20  510c
     21  510c
     22  510c				   .LUM1      SET	.LUM1 + .STEP1
     23  510c				   .LUM2      SET	.LUM2 + .STEP2
     24  510c				   .LUM3      SET	.LUM3 + .STEP3
     13  510c					      REPEND
     14  510c		       44		      .byte.b	$40+(.LUM1/256)
     15  510d		       26		      .byte.b	$20+(.LUM2/256)
     16  510e		       98		      .byte.b	$90+(.LUM3/256)
     17  510f
     18  510f
     19  510f
     20  510f
     21  510f
     22  510f				   .LUM1      SET	.LUM1 + .STEP1
     23  510f				   .LUM2      SET	.LUM2 + .STEP2
     24  510f				   .LUM3      SET	.LUM3 + .STEP3
     13  510f					      REPEND
     14  510f		       44		      .byte.b	$40+(.LUM1/256)
     15  5110		       26		      .byte.b	$20+(.LUM2/256)
     16  5111		       98		      .byte.b	$90+(.LUM3/256)
     17  5112
     18  5112
     19  5112
     20  5112
     21  5112
     22  5112				   .LUM1      SET	.LUM1 + .STEP1
     23  5112				   .LUM2      SET	.LUM2 + .STEP2
     24  5112				   .LUM3      SET	.LUM3 + .STEP3
     13  5112					      REPEND
     14  5112		       44		      .byte.b	$40+(.LUM1/256)
     15  5113		       26		      .byte.b	$20+(.LUM2/256)
     16  5114		       98		      .byte.b	$90+(.LUM3/256)
     17  5115
     18  5115
     19  5115
     20  5115
     21  5115
     22  5115				   .LUM1      SET	.LUM1 + .STEP1
     23  5115				   .LUM2      SET	.LUM2 + .STEP2
     24  5115				   .LUM3      SET	.LUM3 + .STEP3
     13  5115					      REPEND
     14  5115		       44		      .byte.b	$40+(.LUM1/256)
     15  5116		       26		      .byte.b	$20+(.LUM2/256)
     16  5117		       98		      .byte.b	$90+(.LUM3/256)
     17  5118
     18  5118
     19  5118
     20  5118
     21  5118
     22  5118				   .LUM1      SET	.LUM1 + .STEP1
     23  5118				   .LUM2      SET	.LUM2 + .STEP2
     24  5118				   .LUM3      SET	.LUM3 + .STEP3
     13  5118					      REPEND
     14  5118		       44		      .byte.b	$40+(.LUM1/256)
     15  5119		       26		      .byte.b	$20+(.LUM2/256)
     16  511a		       98		      .byte.b	$90+(.LUM3/256)
     17  511b
     18  511b
     19  511b
     20  511b
     21  511b
     22  511b				   .LUM1      SET	.LUM1 + .STEP1
     23  511b				   .LUM2      SET	.LUM2 + .STEP2
     24  511b				   .LUM3      SET	.LUM3 + .STEP3
     13  511b					      REPEND
     14  511b		       44		      .byte.b	$40+(.LUM1/256)
     15  511c		       26		      .byte.b	$20+(.LUM2/256)
     16  511d		       98		      .byte.b	$90+(.LUM3/256)
     17  511e
     18  511e
     19  511e
     20  511e
     21  511e
     22  511e				   .LUM1      SET	.LUM1 + .STEP1
     23  511e				   .LUM2      SET	.LUM2 + .STEP2
     24  511e				   .LUM3      SET	.LUM3 + .STEP3
     13  511e					      REPEND
     14  511e		       44		      .byte.b	$40+(.LUM1/256)
     15  511f		       26		      .byte.b	$20+(.LUM2/256)
     16  5120		       98		      .byte.b	$90+(.LUM3/256)
     17  5121
     18  5121
     19  5121
     20  5121
     21  5121
     22  5121				   .LUM1      SET	.LUM1 + .STEP1
     23  5121				   .LUM2      SET	.LUM2 + .STEP2
     24  5121				   .LUM3      SET	.LUM3 + .STEP3
     13  5121					      REPEND
     14  5121		       44		      .byte.b	$40+(.LUM1/256)
     15  5122		       26		      .byte.b	$20+(.LUM2/256)
     16  5123		       98		      .byte.b	$90+(.LUM3/256)
     17  5124
     18  5124
     19  5124
     20  5124
     21  5124
     22  5124				   .LUM1      SET	.LUM1 + .STEP1
     23  5124				   .LUM2      SET	.LUM2 + .STEP2
     24  5124				   .LUM3      SET	.LUM3 + .STEP3
     13  5124					      REPEND
     14  5124		       44		      .byte.b	$40+(.LUM1/256)
     15  5125		       26		      .byte.b	$20+(.LUM2/256)
     16  5126		       98		      .byte.b	$90+(.LUM3/256)
     17  5127
     18  5127
     19  5127
     20  5127
     21  5127
     22  5127				   .LUM1      SET	.LUM1 + .STEP1
     23  5127				   .LUM2      SET	.LUM2 + .STEP2
     24  5127				   .LUM3      SET	.LUM3 + .STEP3
     13  5127					      REPEND
     14  5127		       44		      .byte.b	$40+(.LUM1/256)
     15  5128		       26		      .byte.b	$20+(.LUM2/256)
     16  5129		       98		      .byte.b	$90+(.LUM3/256)
     17  512a
     18  512a
     19  512a
     20  512a
     21  512a
     22  512a				   .LUM1      SET	.LUM1 + .STEP1
     23  512a				   .LUM2      SET	.LUM2 + .STEP2
     24  512a				   .LUM3      SET	.LUM3 + .STEP3
     13  512a					      REPEND
     14  512a		       44		      .byte.b	$40+(.LUM1/256)
     15  512b		       26		      .byte.b	$20+(.LUM2/256)
     16  512c		       98		      .byte.b	$90+(.LUM3/256)
     17  512d
     18  512d
     19  512d
     20  512d
     21  512d
     22  512d				   .LUM1      SET	.LUM1 + .STEP1
     23  512d				   .LUM2      SET	.LUM2 + .STEP2
     24  512d				   .LUM3      SET	.LUM3 + .STEP3
     13  512d					      REPEND
     14  512d		       44		      .byte.b	$40+(.LUM1/256)
     15  512e		       26		      .byte.b	$20+(.LUM2/256)
     16  512f		       98		      .byte.b	$90+(.LUM3/256)
     17  5130
     18  5130
     19  5130
     20  5130
     21  5130
     22  5130				   .LUM1      SET	.LUM1 + .STEP1
     23  5130				   .LUM2      SET	.LUM2 + .STEP2
     24  5130				   .LUM3      SET	.LUM3 + .STEP3
     13  5130					      REPEND
     14  5130		       44		      .byte.b	$40+(.LUM1/256)
     15  5131		       26		      .byte.b	$20+(.LUM2/256)
     16  5132		       98		      .byte.b	$90+(.LUM3/256)
     17  5133
     18  5133
     19  5133
     20  5133
     21  5133
     22  5133				   .LUM1      SET	.LUM1 + .STEP1
     23  5133				   .LUM2      SET	.LUM2 + .STEP2
     24  5133				   .LUM3      SET	.LUM3 + .STEP3
     13  5133					      REPEND
     14  5133		       44		      .byte.b	$40+(.LUM1/256)
     15  5134		       26		      .byte.b	$20+(.LUM2/256)
     16  5135		       98		      .byte.b	$90+(.LUM3/256)
     17  5136
     18  5136
     19  5136
     20  5136
     21  5136
     22  5136				   .LUM1      SET	.LUM1 + .STEP1
     23  5136				   .LUM2      SET	.LUM2 + .STEP2
     24  5136				   .LUM3      SET	.LUM3 + .STEP3
     13  5136					      REPEND
     14  5136		       44		      .byte.b	$40+(.LUM1/256)
     15  5137		       26		      .byte.b	$20+(.LUM2/256)
     16  5138		       98		      .byte.b	$90+(.LUM3/256)
     17  5139
     18  5139
     19  5139
     20  5139
     21  5139
     22  5139				   .LUM1      SET	.LUM1 + .STEP1
     23  5139				   .LUM2      SET	.LUM2 + .STEP2
     24  5139				   .LUM3      SET	.LUM3 + .STEP3
     13  5139					      REPEND
     14  5139		       44		      .byte.b	$40+(.LUM1/256)
     15  513a		       26		      .byte.b	$20+(.LUM2/256)
     16  513b		       98		      .byte.b	$90+(.LUM3/256)
     17  513c
     18  513c
     19  513c
     20  513c
     21  513c
     22  513c				   .LUM1      SET	.LUM1 + .STEP1
     23  513c				   .LUM2      SET	.LUM2 + .STEP2
     24  513c				   .LUM3      SET	.LUM3 + .STEP3
     13  513c					      REPEND
     14  513c		       44		      .byte.b	$40+(.LUM1/256)
     15  513d		       26		      .byte.b	$20+(.LUM2/256)
     16  513e		       98		      .byte.b	$90+(.LUM3/256)
     17  513f
     18  513f
     19  513f
     20  513f
     21  513f
     22  513f				   .LUM1      SET	.LUM1 + .STEP1
     23  513f				   .LUM2      SET	.LUM2 + .STEP2
     24  513f				   .LUM3      SET	.LUM3 + .STEP3
     13  513f					      REPEND
     14  513f		       44		      .byte.b	$40+(.LUM1/256)
     15  5140		       26		      .byte.b	$20+(.LUM2/256)
     16  5141		       98		      .byte.b	$90+(.LUM3/256)
     17  5142
     18  5142
     19  5142
     20  5142
     21  5142
     22  5142				   .LUM1      SET	.LUM1 + .STEP1
     23  5142				   .LUM2      SET	.LUM2 + .STEP2
     24  5142				   .LUM3      SET	.LUM3 + .STEP3
     13  5142					      REPEND
     14  5142		       44		      .byte.b	$40+(.LUM1/256)
     15  5143		       26		      .byte.b	$20+(.LUM2/256)
     16  5144		       98		      .byte.b	$90+(.LUM3/256)
     17  5145
     18  5145
     19  5145
     20  5145
     21  5145
     22  5145				   .LUM1      SET	.LUM1 + .STEP1
     23  5145				   .LUM2      SET	.LUM2 + .STEP2
     24  5145				   .LUM3      SET	.LUM3 + .STEP3
     13  5145					      REPEND
     14  5145		       44		      .byte.b	$40+(.LUM1/256)
     15  5146		       26		      .byte.b	$20+(.LUM2/256)
     16  5147		       98		      .byte.b	$90+(.LUM3/256)
     17  5148
     18  5148
     19  5148
     20  5148
     21  5148
     22  5148				   .LUM1      SET	.LUM1 + .STEP1
     23  5148				   .LUM2      SET	.LUM2 + .STEP2
     24  5148				   .LUM3      SET	.LUM3 + .STEP3
     13  5148					      REPEND
     14  5148		       44		      .byte.b	$40+(.LUM1/256)
     15  5149		       26		      .byte.b	$20+(.LUM2/256)
     16  514a		       98		      .byte.b	$90+(.LUM3/256)
     17  514b
     18  514b
     19  514b
     20  514b
     21  514b
     22  514b				   .LUM1      SET	.LUM1 + .STEP1
     23  514b				   .LUM2      SET	.LUM2 + .STEP2
     24  514b				   .LUM3      SET	.LUM3 + .STEP3
     13  514b					      REPEND
     14  514b		       44		      .byte.b	$40+(.LUM1/256)
     15  514c		       26		      .byte.b	$20+(.LUM2/256)
     16  514d		       98		      .byte.b	$90+(.LUM3/256)
     17  514e
     18  514e
     19  514e
     20  514e
     21  514e
     22  514e				   .LUM1      SET	.LUM1 + .STEP1
     23  514e				   .LUM2      SET	.LUM2 + .STEP2
     24  514e				   .LUM3      SET	.LUM3 + .STEP3
     13  514e					      REPEND
     14  514e		       44		      .byte.b	$40+(.LUM1/256)
     15  514f		       26		      .byte.b	$20+(.LUM2/256)
     16  5150		       98		      .byte.b	$90+(.LUM3/256)
     17  5151
     18  5151
     19  5151
     20  5151
     21  5151
     22  5151				   .LUM1      SET	.LUM1 + .STEP1
     23  5151				   .LUM2      SET	.LUM2 + .STEP2
     24  5151				   .LUM3      SET	.LUM3 + .STEP3
     13  5151					      REPEND
     14  5151		       44		      .byte.b	$40+(.LUM1/256)
     15  5152		       26		      .byte.b	$20+(.LUM2/256)
     16  5153		       98		      .byte.b	$90+(.LUM3/256)
     17  5154
     18  5154
     19  5154
     20  5154
     21  5154
     22  5154				   .LUM1      SET	.LUM1 + .STEP1
     23  5154				   .LUM2      SET	.LUM2 + .STEP2
     24  5154				   .LUM3      SET	.LUM3 + .STEP3
     13  5154					      REPEND
     14  5154		       44		      .byte.b	$40+(.LUM1/256)
     15  5155		       26		      .byte.b	$20+(.LUM2/256)
     16  5156		       98		      .byte.b	$90+(.LUM3/256)
     17  5157
     18  5157
     19  5157
     20  5157
     21  5157
     22  5157				   .LUM1      SET	.LUM1 + .STEP1
     23  5157				   .LUM2      SET	.LUM2 + .STEP2
     24  5157				   .LUM3      SET	.LUM3 + .STEP3
     13  5157					      REPEND
     14  5157		       44		      .byte.b	$40+(.LUM1/256)
     15  5158		       26		      .byte.b	$20+(.LUM2/256)
     16  5159		       98		      .byte.b	$90+(.LUM3/256)
     17  515a
     18  515a
     19  515a
     20  515a
     21  515a
     22  515a				   .LUM1      SET	.LUM1 + .STEP1
     23  515a				   .LUM2      SET	.LUM2 + .STEP2
     24  515a				   .LUM3      SET	.LUM3 + .STEP3
     13  515a					      REPEND
     14  515a		       44		      .byte.b	$40+(.LUM1/256)
     15  515b		       26		      .byte.b	$20+(.LUM2/256)
     16  515c		       98		      .byte.b	$90+(.LUM3/256)
     17  515d
     18  515d
     19  515d
     20  515d
     21  515d
     22  515d				   .LUM1      SET	.LUM1 + .STEP1
     23  515d				   .LUM2      SET	.LUM2 + .STEP2
     24  515d				   .LUM3      SET	.LUM3 + .STEP3
     13  515d					      REPEND
     14  515d		       44		      .byte.b	$40+(.LUM1/256)
     15  515e		       26		      .byte.b	$20+(.LUM2/256)
     16  515f		       98		      .byte.b	$90+(.LUM3/256)
     17  5160
     18  5160
     19  5160
     20  5160
     21  5160
     22  5160				   .LUM1      SET	.LUM1 + .STEP1
     23  5160				   .LUM2      SET	.LUM2 + .STEP2
     24  5160				   .LUM3      SET	.LUM3 + .STEP3
     13  5160					      REPEND
     14  5160		       44		      .byte.b	$40+(.LUM1/256)
     15  5161		       26		      .byte.b	$20+(.LUM2/256)
     16  5162		       98		      .byte.b	$90+(.LUM3/256)
     17  5163
     18  5163
     19  5163
     20  5163
     21  5163
     22  5163				   .LUM1      SET	.LUM1 + .STEP1
     23  5163				   .LUM2      SET	.LUM2 + .STEP2
     24  5163				   .LUM3      SET	.LUM3 + .STEP3
     13  5163					      REPEND
     14  5163		       44		      .byte.b	$40+(.LUM1/256)
     15  5164		       26		      .byte.b	$20+(.LUM2/256)
     16  5165		       98		      .byte.b	$90+(.LUM3/256)
     17  5166
     18  5166
     19  5166
     20  5166
     21  5166
     22  5166				   .LUM1      SET	.LUM1 + .STEP1
     23  5166				   .LUM2      SET	.LUM2 + .STEP2
     24  5166				   .LUM3      SET	.LUM3 + .STEP3
     13  5166					      REPEND
     14  5166		       44		      .byte.b	$40+(.LUM1/256)
     15  5167		       26		      .byte.b	$20+(.LUM2/256)
     16  5168		       98		      .byte.b	$90+(.LUM3/256)
     17  5169
     18  5169
     19  5169
     20  5169
     21  5169
     22  5169				   .LUM1      SET	.LUM1 + .STEP1
     23  5169				   .LUM2      SET	.LUM2 + .STEP2
     24  5169				   .LUM3      SET	.LUM3 + .STEP3
     13  5169					      REPEND
     14  5169		       44		      .byte.b	$40+(.LUM1/256)
     15  516a		       26		      .byte.b	$20+(.LUM2/256)
     16  516b		       98		      .byte.b	$90+(.LUM3/256)
     17  516c
     18  516c
     19  516c
     20  516c
     21  516c
     22  516c				   .LUM1      SET	.LUM1 + .STEP1
     23  516c				   .LUM2      SET	.LUM2 + .STEP2
     24  516c				   .LUM3      SET	.LUM3 + .STEP3
     13  516c					      REPEND
     14  516c		       44		      .byte.b	$40+(.LUM1/256)
     15  516d		       26		      .byte.b	$20+(.LUM2/256)
     16  516e		       98		      .byte.b	$90+(.LUM3/256)
     17  516f
     18  516f
     19  516f
     20  516f
     21  516f
     22  516f				   .LUM1      SET	.LUM1 + .STEP1
     23  516f				   .LUM2      SET	.LUM2 + .STEP2
     24  516f				   .LUM3      SET	.LUM3 + .STEP3
     13  516f					      REPEND
     14  516f		       44		      .byte.b	$40+(.LUM1/256)
     15  5170		       26		      .byte.b	$20+(.LUM2/256)
     16  5171		       98		      .byte.b	$90+(.LUM3/256)
     17  5172
     18  5172
     19  5172
     20  5172
     21  5172
     22  5172				   .LUM1      SET	.LUM1 + .STEP1
     23  5172				   .LUM2      SET	.LUM2 + .STEP2
     24  5172				   .LUM3      SET	.LUM3 + .STEP3
     13  5172					      REPEND
     14  5172		       44		      .byte.b	$40+(.LUM1/256)
     15  5173		       26		      .byte.b	$20+(.LUM2/256)
     16  5174		       98		      .byte.b	$90+(.LUM3/256)
     17  5175
     18  5175
     19  5175
     20  5175
     21  5175
     22  5175				   .LUM1      SET	.LUM1 + .STEP1
     23  5175				   .LUM2      SET	.LUM2 + .STEP2
     24  5175				   .LUM3      SET	.LUM3 + .STEP3
     13  5175					      REPEND
     14  5175		       44		      .byte.b	$40+(.LUM1/256)
     15  5176		       26		      .byte.b	$20+(.LUM2/256)
     16  5177		       98		      .byte.b	$90+(.LUM3/256)
     17  5178
     18  5178
     19  5178
     20  5178
     21  5178
     22  5178				   .LUM1      SET	.LUM1 + .STEP1
     23  5178				   .LUM2      SET	.LUM2 + .STEP2
     24  5178				   .LUM3      SET	.LUM3 + .STEP3
     13  5178					      REPEND
     14  5178		       44		      .byte.b	$40+(.LUM1/256)
     15  5179		       26		      .byte.b	$20+(.LUM2/256)
     16  517a		       98		      .byte.b	$90+(.LUM3/256)
     17  517b
     18  517b
     19  517b
     20  517b
     21  517b
     22  517b				   .LUM1      SET	.LUM1 + .STEP1
     23  517b				   .LUM2      SET	.LUM2 + .STEP2
     24  517b				   .LUM3      SET	.LUM3 + .STEP3
     13  517b					      REPEND
     14  517b		       44		      .byte.b	$40+(.LUM1/256)
     15  517c		       26		      .byte.b	$20+(.LUM2/256)
     16  517d		       98		      .byte.b	$90+(.LUM3/256)
     17  517e
     18  517e
     19  517e
     20  517e
     21  517e
     22  517e				   .LUM1      SET	.LUM1 + .STEP1
     23  517e				   .LUM2      SET	.LUM2 + .STEP2
     24  517e				   .LUM3      SET	.LUM3 + .STEP3
     13  517e					      REPEND
     14  517e		       44		      .byte.b	$40+(.LUM1/256)
     15  517f		       26		      .byte.b	$20+(.LUM2/256)
     16  5180		       98		      .byte.b	$90+(.LUM3/256)
     17  5181
     18  5181
     19  5181
     20  5181
     21  5181
     22  5181				   .LUM1      SET	.LUM1 + .STEP1
     23  5181				   .LUM2      SET	.LUM2 + .STEP2
     24  5181				   .LUM3      SET	.LUM3 + .STEP3
     13  5181					      REPEND
     14  5181		       44		      .byte.b	$40+(.LUM1/256)
     15  5182		       26		      .byte.b	$20+(.LUM2/256)
     16  5183		       98		      .byte.b	$90+(.LUM3/256)
     17  5184
     18  5184
     19  5184
     20  5184
     21  5184
     22  5184				   .LUM1      SET	.LUM1 + .STEP1
     23  5184				   .LUM2      SET	.LUM2 + .STEP2
     24  5184				   .LUM3      SET	.LUM3 + .STEP3
     13  5184					      REPEND
     14  5184		       44		      .byte.b	$40+(.LUM1/256)
     15  5185		       26		      .byte.b	$20+(.LUM2/256)
     16  5186		       98		      .byte.b	$90+(.LUM3/256)
     17  5187
     18  5187
     19  5187
     20  5187
     21  5187
     22  5187				   .LUM1      SET	.LUM1 + .STEP1
     23  5187				   .LUM2      SET	.LUM2 + .STEP2
     24  5187				   .LUM3      SET	.LUM3 + .STEP3
     13  5187					      REPEND
     14  5187		       44		      .byte.b	$40+(.LUM1/256)
     15  5188		       26		      .byte.b	$20+(.LUM2/256)
     16  5189		       98		      .byte.b	$90+(.LUM3/256)
     17  518a
     18  518a
     19  518a
     20  518a
     21  518a
     22  518a				   .LUM1      SET	.LUM1 + .STEP1
     23  518a				   .LUM2      SET	.LUM2 + .STEP2
     24  518a				   .LUM3      SET	.LUM3 + .STEP3
     13  518a					      REPEND
     14  518a		       44		      .byte.b	$40+(.LUM1/256)
     15  518b		       26		      .byte.b	$20+(.LUM2/256)
     16  518c		       98		      .byte.b	$90+(.LUM3/256)
     17  518d
     18  518d
     19  518d
     20  518d
     21  518d
     22  518d				   .LUM1      SET	.LUM1 + .STEP1
     23  518d				   .LUM2      SET	.LUM2 + .STEP2
     24  518d				   .LUM3      SET	.LUM3 + .STEP3
     13  518d					      REPEND
     14  518d		       44		      .byte.b	$40+(.LUM1/256)
     15  518e		       26		      .byte.b	$20+(.LUM2/256)
     16  518f		       98		      .byte.b	$90+(.LUM3/256)
     17  5190
     18  5190
     19  5190
     20  5190
     21  5190
     22  5190				   .LUM1      SET	.LUM1 + .STEP1
     23  5190				   .LUM2      SET	.LUM2 + .STEP2
     24  5190				   .LUM3      SET	.LUM3 + .STEP3
     13  5190					      REPEND
     14  5190		       44		      .byte.b	$40+(.LUM1/256)
     15  5191		       26		      .byte.b	$20+(.LUM2/256)
     16  5192		       98		      .byte.b	$90+(.LUM3/256)
     17  5193
     18  5193
     19  5193
     20  5193
     21  5193
     22  5193				   .LUM1      SET	.LUM1 + .STEP1
     23  5193				   .LUM2      SET	.LUM2 + .STEP2
     24  5193				   .LUM3      SET	.LUM3 + .STEP3
     13  5193					      REPEND
     14  5193		       44		      .byte.b	$40+(.LUM1/256)
     15  5194		       26		      .byte.b	$20+(.LUM2/256)
     16  5195		       98		      .byte.b	$90+(.LUM3/256)
     17  5196
     18  5196
     19  5196
     20  5196
     21  5196
     22  5196				   .LUM1      SET	.LUM1 + .STEP1
     23  5196				   .LUM2      SET	.LUM2 + .STEP2
     24  5196				   .LUM3      SET	.LUM3 + .STEP3
     13  5196					      REPEND
     14  5196		       44		      .byte.b	$40+(.LUM1/256)
     15  5197		       26		      .byte.b	$20+(.LUM2/256)
     16  5198		       98		      .byte.b	$90+(.LUM3/256)
     17  5199
     18  5199
     19  5199
     20  5199
     21  5199
     22  5199				   .LUM1      SET	.LUM1 + .STEP1
     23  5199				   .LUM2      SET	.LUM2 + .STEP2
     24  5199				   .LUM3      SET	.LUM3 + .STEP3
     13  5199					      REPEND
     14  5199		       44		      .byte.b	$40+(.LUM1/256)
     15  519a		       26		      .byte.b	$20+(.LUM2/256)
     16  519b		       98		      .byte.b	$90+(.LUM3/256)
     17  519c
     18  519c
     19  519c
     20  519c
     21  519c
     22  519c				   .LUM1      SET	.LUM1 + .STEP1
     23  519c				   .LUM2      SET	.LUM2 + .STEP2
     24  519c				   .LUM3      SET	.LUM3 + .STEP3
     13  519c					      REPEND
     14  519c		       44		      .byte.b	$40+(.LUM1/256)
     15  519d		       26		      .byte.b	$20+(.LUM2/256)
     16  519e		       98		      .byte.b	$90+(.LUM3/256)
     17  519f
     18  519f
     19  519f
     20  519f
     21  519f
     22  519f				   .LUM1      SET	.LUM1 + .STEP1
     23  519f				   .LUM2      SET	.LUM2 + .STEP2
     24  519f				   .LUM3      SET	.LUM3 + .STEP3
     13  519f					      REPEND
     14  519f		       44		      .byte.b	$40+(.LUM1/256)
     15  51a0		       26		      .byte.b	$20+(.LUM2/256)
     16  51a1		       98		      .byte.b	$90+(.LUM3/256)
     17  51a2
     18  51a2
     19  51a2
     20  51a2
     21  51a2
     22  51a2				   .LUM1      SET	.LUM1 + .STEP1
     23  51a2				   .LUM2      SET	.LUM2 + .STEP2
     24  51a2				   .LUM3      SET	.LUM3 + .STEP3
     13  51a2					      REPEND
     14  51a2		       44		      .byte.b	$40+(.LUM1/256)
     15  51a3		       26		      .byte.b	$20+(.LUM2/256)
     16  51a4		       98		      .byte.b	$90+(.LUM3/256)
     17  51a5
     18  51a5
     19  51a5
     20  51a5
     21  51a5
     22  51a5				   .LUM1      SET	.LUM1 + .STEP1
     23  51a5				   .LUM2      SET	.LUM2 + .STEP2
     24  51a5				   .LUM3      SET	.LUM3 + .STEP3
     13  51a5					      REPEND
     14  51a5		       44		      .byte.b	$40+(.LUM1/256)
     15  51a6		       26		      .byte.b	$20+(.LUM2/256)
     16  51a7		       98		      .byte.b	$90+(.LUM3/256)
     17  51a8
     18  51a8
     19  51a8
     20  51a8
     21  51a8
     22  51a8				   .LUM1      SET	.LUM1 + .STEP1
     23  51a8				   .LUM2      SET	.LUM2 + .STEP2
     24  51a8				   .LUM3      SET	.LUM3 + .STEP3
     13  51a8					      REPEND
     14  51a8		       44		      .byte.b	$40+(.LUM1/256)
     15  51a9		       26		      .byte.b	$20+(.LUM2/256)
     16  51aa		       98		      .byte.b	$90+(.LUM3/256)
     17  51ab
     18  51ab
     19  51ab
     20  51ab
     21  51ab
     22  51ab				   .LUM1      SET	.LUM1 + .STEP1
     23  51ab				   .LUM2      SET	.LUM2 + .STEP2
     24  51ab				   .LUM3      SET	.LUM3 + .STEP3
     13  51ab					      REPEND
     14  51ab		       44		      .byte.b	$40+(.LUM1/256)
     15  51ac		       26		      .byte.b	$20+(.LUM2/256)
     16  51ad		       98		      .byte.b	$90+(.LUM3/256)
     17  51ae
     18  51ae
     19  51ae
     20  51ae
     21  51ae
     22  51ae				   .LUM1      SET	.LUM1 + .STEP1
     23  51ae				   .LUM2      SET	.LUM2 + .STEP2
     24  51ae				   .LUM3      SET	.LUM3 + .STEP3
     13  51ae					      REPEND
     14  51ae		       44		      .byte.b	$40+(.LUM1/256)
     15  51af		       26		      .byte.b	$20+(.LUM2/256)
     16  51b0		       98		      .byte.b	$90+(.LUM3/256)
     17  51b1
     18  51b1
     19  51b1
     20  51b1
     21  51b1
     22  51b1				   .LUM1      SET	.LUM1 + .STEP1
     23  51b1				   .LUM2      SET	.LUM2 + .STEP2
     24  51b1				   .LUM3      SET	.LUM3 + .STEP3
     13  51b1					      REPEND
     14  51b1		       44		      .byte.b	$40+(.LUM1/256)
     15  51b2		       26		      .byte.b	$20+(.LUM2/256)
     16  51b3		       98		      .byte.b	$90+(.LUM3/256)
     17  51b4
     18  51b4
     19  51b4
     20  51b4
     21  51b4
     22  51b4				   .LUM1      SET	.LUM1 + .STEP1
     23  51b4				   .LUM2      SET	.LUM2 + .STEP2
     24  51b4				   .LUM3      SET	.LUM3 + .STEP3
     13  51b4					      REPEND
     14  51b4		       44		      .byte.b	$40+(.LUM1/256)
     15  51b5		       26		      .byte.b	$20+(.LUM2/256)
     16  51b6		       98		      .byte.b	$90+(.LUM3/256)
     17  51b7
     18  51b7
     19  51b7
     20  51b7
     21  51b7
     22  51b7				   .LUM1      SET	.LUM1 + .STEP1
     23  51b7				   .LUM2      SET	.LUM2 + .STEP2
     24  51b7				   .LUM3      SET	.LUM3 + .STEP3
     13  51b7					      REPEND
     14  51b7		       44		      .byte.b	$40+(.LUM1/256)
     15  51b8		       26		      .byte.b	$20+(.LUM2/256)
     16  51b9		       98		      .byte.b	$90+(.LUM3/256)
     17  51ba
     18  51ba
     19  51ba
     20  51ba
     21  51ba
     22  51ba				   .LUM1      SET	.LUM1 + .STEP1
     23  51ba				   .LUM2      SET	.LUM2 + .STEP2
     24  51ba				   .LUM3      SET	.LUM3 + .STEP3
     13  51ba					      REPEND
     14  51ba		       44		      .byte.b	$40+(.LUM1/256)
     15  51bb		       26		      .byte.b	$20+(.LUM2/256)
     16  51bc		       98		      .byte.b	$90+(.LUM3/256)
     17  51bd
     18  51bd
     19  51bd
     20  51bd
     21  51bd
     22  51bd				   .LUM1      SET	.LUM1 + .STEP1
     23  51bd				   .LUM2      SET	.LUM2 + .STEP2
     24  51bd				   .LUM3      SET	.LUM3 + .STEP3
     13  51bd					      REPEND
     14  51bd		       44		      .byte.b	$40+(.LUM1/256)
     15  51be		       26		      .byte.b	$20+(.LUM2/256)
     16  51bf		       98		      .byte.b	$90+(.LUM3/256)
     17  51c0
     18  51c0
     19  51c0
     20  51c0
     21  51c0
     22  51c0				   .LUM1      SET	.LUM1 + .STEP1
     23  51c0				   .LUM2      SET	.LUM2 + .STEP2
     24  51c0				   .LUM3      SET	.LUM3 + .STEP3
     13  51c0					      REPEND
     14  51c0		       44		      .byte.b	$40+(.LUM1/256)
     15  51c1		       26		      .byte.b	$20+(.LUM2/256)
     16  51c2		       98		      .byte.b	$90+(.LUM3/256)
     17  51c3
     18  51c3
     19  51c3
     20  51c3
     21  51c3
     22  51c3				   .LUM1      SET	.LUM1 + .STEP1
     23  51c3				   .LUM2      SET	.LUM2 + .STEP2
     24  51c3				   .LUM3      SET	.LUM3 + .STEP3
     13  51c3					      REPEND
     14  51c3		       44		      .byte.b	$40+(.LUM1/256)
     15  51c4		       26		      .byte.b	$20+(.LUM2/256)
     16  51c5		       98		      .byte.b	$90+(.LUM3/256)
     17  51c6
     18  51c6
     19  51c6
     20  51c6
     21  51c6
     22  51c6				   .LUM1      SET	.LUM1 + .STEP1
     23  51c6				   .LUM2      SET	.LUM2 + .STEP2
     24  51c6				   .LUM3      SET	.LUM3 + .STEP3
     13  51c6					      REPEND
     14  51c6		       44		      .byte.b	$40+(.LUM1/256)
     15  51c7		       26		      .byte.b	$20+(.LUM2/256)
     16  51c8		       98		      .byte.b	$90+(.LUM3/256)
     17  51c9
     18  51c9
     19  51c9
     20  51c9
     21  51c9
     22  51c9				   .LUM1      SET	.LUM1 + .STEP1
     23  51c9				   .LUM2      SET	.LUM2 + .STEP2
     24  51c9				   .LUM3      SET	.LUM3 + .STEP3
     13  51c9					      REPEND
     14  51c9		       44		      .byte.b	$40+(.LUM1/256)
     15  51ca		       26		      .byte.b	$20+(.LUM2/256)
     16  51cb		       98		      .byte.b	$90+(.LUM3/256)
     17  51cc
     18  51cc
     19  51cc
     20  51cc
     21  51cc
     22  51cc				   .LUM1      SET	.LUM1 + .STEP1
     23  51cc				   .LUM2      SET	.LUM2 + .STEP2
     24  51cc				   .LUM3      SET	.LUM3 + .STEP3
     13  51cc					      REPEND
     14  51cc		       44		      .byte.b	$40+(.LUM1/256)
     15  51cd		       26		      .byte.b	$20+(.LUM2/256)
     16  51ce		       98		      .byte.b	$90+(.LUM3/256)
     17  51cf
     18  51cf
     19  51cf
     20  51cf
     21  51cf
     22  51cf				   .LUM1      SET	.LUM1 + .STEP1
     23  51cf				   .LUM2      SET	.LUM2 + .STEP2
     24  51cf				   .LUM3      SET	.LUM3 + .STEP3
     13  51cf					      REPEND
     14  51cf		       44		      .byte.b	$40+(.LUM1/256)
     15  51d0		       26		      .byte.b	$20+(.LUM2/256)
     16  51d1		       98		      .byte.b	$90+(.LUM3/256)
     17  51d2
     18  51d2
     19  51d2
     20  51d2
     21  51d2
     22  51d2				   .LUM1      SET	.LUM1 + .STEP1
     23  51d2				   .LUM2      SET	.LUM2 + .STEP2
     24  51d2				   .LUM3      SET	.LUM3 + .STEP3
     13  51d2					      REPEND
     14  51d2		       44		      .byte.b	$40+(.LUM1/256)
     15  51d3		       26		      .byte.b	$20+(.LUM2/256)
     16  51d4		       98		      .byte.b	$90+(.LUM3/256)
     17  51d5
     18  51d5
     19  51d5
     20  51d5
     21  51d5
     22  51d5				   .LUM1      SET	.LUM1 + .STEP1
     23  51d5				   .LUM2      SET	.LUM2 + .STEP2
     24  51d5				   .LUM3      SET	.LUM3 + .STEP3
     13  51d5					      REPEND
     14  51d5		       44		      .byte.b	$40+(.LUM1/256)
     15  51d6		       26		      .byte.b	$20+(.LUM2/256)
     16  51d7		       98		      .byte.b	$90+(.LUM3/256)
     17  51d8
     18  51d8
     19  51d8
     20  51d8
     21  51d8
     22  51d8				   .LUM1      SET	.LUM1 + .STEP1
     23  51d8				   .LUM2      SET	.LUM2 + .STEP2
     24  51d8				   .LUM3      SET	.LUM3 + .STEP3
     25  51d8					      REPEND
    254  51d8							;colr_ntsc   LUMTABLE $70,$40,$a0,$A,$2,$E,$8,$E,$8
    255  51d8
    256  51d8							;    ECHO "PAL LUMS"
    257  51d8							;    OPTIONAL_PAGEBREAK "colr_pal", 72*3
      0  51d8				   colr_pal   LUMTABLE	$60, $80, $10, $6,$4,$8,$6,$4,$8
      1  51d8
      2  51d8
      3  51d8
      4  51d8
      5  51d8				   .LUM1      SET	$6*256
      6  51d8				   .LUM2      SET	$4*256
      7  51d8				   .LUM3      SET	$8*256
      8  51d8
      9  51d8		       00 00	   .STEP1     =	(256*($6-$6))/72
     10  51d8		       00 00	   .STEP2     =	(256*($4-$4))/72
     11  51d8		       00 00	   .STEP3     =	(256*($8-$8))/72
     12  51d8
     13  51d8					      REPEAT	72
     14  51d8		       66		      .byte.b	$60+(.LUM1/256)
     15  51d9		       84		      .byte.b	$80+(.LUM2/256)
     16  51da		       18		      .byte.b	$10+(.LUM3/256)
     17  51db
     18  51db
     19  51db
     20  51db
     21  51db
     22  51db				   .LUM1      SET	.LUM1 + .STEP1
     23  51db				   .LUM2      SET	.LUM2 + .STEP2
     24  51db				   .LUM3      SET	.LUM3 + .STEP3
     13  51db					      REPEND
     14  51db		       66		      .byte.b	$60+(.LUM1/256)
     15  51dc		       84		      .byte.b	$80+(.LUM2/256)
     16  51dd		       18		      .byte.b	$10+(.LUM3/256)
     17  51de
     18  51de
     19  51de
     20  51de
     21  51de
     22  51de				   .LUM1      SET	.LUM1 + .STEP1
     23  51de				   .LUM2      SET	.LUM2 + .STEP2
     24  51de				   .LUM3      SET	.LUM3 + .STEP3
     13  51de					      REPEND
     14  51de		       66		      .byte.b	$60+(.LUM1/256)
     15  51df		       84		      .byte.b	$80+(.LUM2/256)
     16  51e0		       18		      .byte.b	$10+(.LUM3/256)
     17  51e1
     18  51e1
     19  51e1
     20  51e1
     21  51e1
     22  51e1				   .LUM1      SET	.LUM1 + .STEP1
     23  51e1				   .LUM2      SET	.LUM2 + .STEP2
     24  51e1				   .LUM3      SET	.LUM3 + .STEP3
     13  51e1					      REPEND
     14  51e1		       66		      .byte.b	$60+(.LUM1/256)
     15  51e2		       84		      .byte.b	$80+(.LUM2/256)
     16  51e3		       18		      .byte.b	$10+(.LUM3/256)
     17  51e4
     18  51e4
     19  51e4
     20  51e4
     21  51e4
     22  51e4				   .LUM1      SET	.LUM1 + .STEP1
     23  51e4				   .LUM2      SET	.LUM2 + .STEP2
     24  51e4				   .LUM3      SET	.LUM3 + .STEP3
     13  51e4					      REPEND
     14  51e4		       66		      .byte.b	$60+(.LUM1/256)
     15  51e5		       84		      .byte.b	$80+(.LUM2/256)
     16  51e6		       18		      .byte.b	$10+(.LUM3/256)
     17  51e7
     18  51e7
     19  51e7
     20  51e7
     21  51e7
     22  51e7				   .LUM1      SET	.LUM1 + .STEP1
     23  51e7				   .LUM2      SET	.LUM2 + .STEP2
     24  51e7				   .LUM3      SET	.LUM3 + .STEP3
     13  51e7					      REPEND
     14  51e7		       66		      .byte.b	$60+(.LUM1/256)
     15  51e8		       84		      .byte.b	$80+(.LUM2/256)
     16  51e9		       18		      .byte.b	$10+(.LUM3/256)
     17  51ea
     18  51ea
     19  51ea
     20  51ea
     21  51ea
     22  51ea				   .LUM1      SET	.LUM1 + .STEP1
     23  51ea				   .LUM2      SET	.LUM2 + .STEP2
     24  51ea				   .LUM3      SET	.LUM3 + .STEP3
     13  51ea					      REPEND
     14  51ea		       66		      .byte.b	$60+(.LUM1/256)
     15  51eb		       84		      .byte.b	$80+(.LUM2/256)
     16  51ec		       18		      .byte.b	$10+(.LUM3/256)
     17  51ed
     18  51ed
     19  51ed
     20  51ed
     21  51ed
     22  51ed				   .LUM1      SET	.LUM1 + .STEP1
     23  51ed				   .LUM2      SET	.LUM2 + .STEP2
     24  51ed				   .LUM3      SET	.LUM3 + .STEP3
     13  51ed					      REPEND
     14  51ed		       66		      .byte.b	$60+(.LUM1/256)
     15  51ee		       84		      .byte.b	$80+(.LUM2/256)
     16  51ef		       18		      .byte.b	$10+(.LUM3/256)
     17  51f0
     18  51f0
     19  51f0
     20  51f0
     21  51f0
     22  51f0				   .LUM1      SET	.LUM1 + .STEP1
     23  51f0				   .LUM2      SET	.LUM2 + .STEP2
     24  51f0				   .LUM3      SET	.LUM3 + .STEP3
     13  51f0					      REPEND
     14  51f0		       66		      .byte.b	$60+(.LUM1/256)
     15  51f1		       84		      .byte.b	$80+(.LUM2/256)
     16  51f2		       18		      .byte.b	$10+(.LUM3/256)
     17  51f3
     18  51f3
     19  51f3
     20  51f3
     21  51f3
     22  51f3				   .LUM1      SET	.LUM1 + .STEP1
     23  51f3				   .LUM2      SET	.LUM2 + .STEP2
     24  51f3				   .LUM3      SET	.LUM3 + .STEP3
     13  51f3					      REPEND
     14  51f3		       66		      .byte.b	$60+(.LUM1/256)
     15  51f4		       84		      .byte.b	$80+(.LUM2/256)
     16  51f5		       18		      .byte.b	$10+(.LUM3/256)
     17  51f6
     18  51f6
     19  51f6
     20  51f6
     21  51f6
     22  51f6				   .LUM1      SET	.LUM1 + .STEP1
     23  51f6				   .LUM2      SET	.LUM2 + .STEP2
     24  51f6				   .LUM3      SET	.LUM3 + .STEP3
     13  51f6					      REPEND
     14  51f6		       66		      .byte.b	$60+(.LUM1/256)
     15  51f7		       84		      .byte.b	$80+(.LUM2/256)
     16  51f8		       18		      .byte.b	$10+(.LUM3/256)
     17  51f9
     18  51f9
     19  51f9
     20  51f9
     21  51f9
     22  51f9				   .LUM1      SET	.LUM1 + .STEP1
     23  51f9				   .LUM2      SET	.LUM2 + .STEP2
     24  51f9				   .LUM3      SET	.LUM3 + .STEP3
     13  51f9					      REPEND
     14  51f9		       66		      .byte.b	$60+(.LUM1/256)
     15  51fa		       84		      .byte.b	$80+(.LUM2/256)
     16  51fb		       18		      .byte.b	$10+(.LUM3/256)
     17  51fc
     18  51fc
     19  51fc
     20  51fc
     21  51fc
     22  51fc				   .LUM1      SET	.LUM1 + .STEP1
     23  51fc				   .LUM2      SET	.LUM2 + .STEP2
     24  51fc				   .LUM3      SET	.LUM3 + .STEP3
     13  51fc					      REPEND
     14  51fc		       66		      .byte.b	$60+(.LUM1/256)
     15  51fd		       84		      .byte.b	$80+(.LUM2/256)
     16  51fe		       18		      .byte.b	$10+(.LUM3/256)
     17  51ff
     18  51ff
     19  51ff
     20  51ff
     21  51ff
     22  51ff				   .LUM1      SET	.LUM1 + .STEP1
     23  51ff				   .LUM2      SET	.LUM2 + .STEP2
     24  51ff				   .LUM3      SET	.LUM3 + .STEP3
     13  51ff					      REPEND
     14  51ff		       66		      .byte.b	$60+(.LUM1/256)
     15  5200		       84		      .byte.b	$80+(.LUM2/256)
     16  5201		       18		      .byte.b	$10+(.LUM3/256)
     17  5202
     18  5202
     19  5202
     20  5202
     21  5202
     22  5202				   .LUM1      SET	.LUM1 + .STEP1
     23  5202				   .LUM2      SET	.LUM2 + .STEP2
     24  5202				   .LUM3      SET	.LUM3 + .STEP3
     13  5202					      REPEND
     14  5202		       66		      .byte.b	$60+(.LUM1/256)
     15  5203		       84		      .byte.b	$80+(.LUM2/256)
     16  5204		       18		      .byte.b	$10+(.LUM3/256)
     17  5205
     18  5205
     19  5205
     20  5205
     21  5205
     22  5205				   .LUM1      SET	.LUM1 + .STEP1
     23  5205				   .LUM2      SET	.LUM2 + .STEP2
     24  5205				   .LUM3      SET	.LUM3 + .STEP3
     13  5205					      REPEND
     14  5205		       66		      .byte.b	$60+(.LUM1/256)
     15  5206		       84		      .byte.b	$80+(.LUM2/256)
     16  5207		       18		      .byte.b	$10+(.LUM3/256)
     17  5208
     18  5208
     19  5208
     20  5208
     21  5208
     22  5208				   .LUM1      SET	.LUM1 + .STEP1
     23  5208				   .LUM2      SET	.LUM2 + .STEP2
     24  5208				   .LUM3      SET	.LUM3 + .STEP3
     13  5208					      REPEND
     14  5208		       66		      .byte.b	$60+(.LUM1/256)
     15  5209		       84		      .byte.b	$80+(.LUM2/256)
     16  520a		       18		      .byte.b	$10+(.LUM3/256)
     17  520b
     18  520b
     19  520b
     20  520b
     21  520b
     22  520b				   .LUM1      SET	.LUM1 + .STEP1
     23  520b				   .LUM2      SET	.LUM2 + .STEP2
     24  520b				   .LUM3      SET	.LUM3 + .STEP3
     13  520b					      REPEND
     14  520b		       66		      .byte.b	$60+(.LUM1/256)
     15  520c		       84		      .byte.b	$80+(.LUM2/256)
     16  520d		       18		      .byte.b	$10+(.LUM3/256)
     17  520e
     18  520e
     19  520e
     20  520e
     21  520e
     22  520e				   .LUM1      SET	.LUM1 + .STEP1
     23  520e				   .LUM2      SET	.LUM2 + .STEP2
     24  520e				   .LUM3      SET	.LUM3 + .STEP3
     13  520e					      REPEND
     14  520e		       66		      .byte.b	$60+(.LUM1/256)
     15  520f		       84		      .byte.b	$80+(.LUM2/256)
     16  5210		       18		      .byte.b	$10+(.LUM3/256)
     17  5211
     18  5211
     19  5211
     20  5211
     21  5211
     22  5211				   .LUM1      SET	.LUM1 + .STEP1
     23  5211				   .LUM2      SET	.LUM2 + .STEP2
     24  5211				   .LUM3      SET	.LUM3 + .STEP3
     13  5211					      REPEND
     14  5211		       66		      .byte.b	$60+(.LUM1/256)
     15  5212		       84		      .byte.b	$80+(.LUM2/256)
     16  5213		       18		      .byte.b	$10+(.LUM3/256)
     17  5214
     18  5214
     19  5214
     20  5214
     21  5214
     22  5214				   .LUM1      SET	.LUM1 + .STEP1
     23  5214				   .LUM2      SET	.LUM2 + .STEP2
     24  5214				   .LUM3      SET	.LUM3 + .STEP3
     13  5214					      REPEND
     14  5214		       66		      .byte.b	$60+(.LUM1/256)
     15  5215		       84		      .byte.b	$80+(.LUM2/256)
     16  5216		       18		      .byte.b	$10+(.LUM3/256)
     17  5217
     18  5217
     19  5217
     20  5217
     21  5217
     22  5217				   .LUM1      SET	.LUM1 + .STEP1
     23  5217				   .LUM2      SET	.LUM2 + .STEP2
     24  5217				   .LUM3      SET	.LUM3 + .STEP3
     13  5217					      REPEND
     14  5217		       66		      .byte.b	$60+(.LUM1/256)
     15  5218		       84		      .byte.b	$80+(.LUM2/256)
     16  5219		       18		      .byte.b	$10+(.LUM3/256)
     17  521a
     18  521a
     19  521a
     20  521a
     21  521a
     22  521a				   .LUM1      SET	.LUM1 + .STEP1
     23  521a				   .LUM2      SET	.LUM2 + .STEP2
     24  521a				   .LUM3      SET	.LUM3 + .STEP3
     13  521a					      REPEND
     14  521a		       66		      .byte.b	$60+(.LUM1/256)
     15  521b		       84		      .byte.b	$80+(.LUM2/256)
     16  521c		       18		      .byte.b	$10+(.LUM3/256)
     17  521d
     18  521d
     19  521d
     20  521d
     21  521d
     22  521d				   .LUM1      SET	.LUM1 + .STEP1
     23  521d				   .LUM2      SET	.LUM2 + .STEP2
     24  521d				   .LUM3      SET	.LUM3 + .STEP3
     13  521d					      REPEND
     14  521d		       66		      .byte.b	$60+(.LUM1/256)
     15  521e		       84		      .byte.b	$80+(.LUM2/256)
     16  521f		       18		      .byte.b	$10+(.LUM3/256)
     17  5220
     18  5220
     19  5220
     20  5220
     21  5220
     22  5220				   .LUM1      SET	.LUM1 + .STEP1
     23  5220				   .LUM2      SET	.LUM2 + .STEP2
     24  5220				   .LUM3      SET	.LUM3 + .STEP3
     13  5220					      REPEND
     14  5220		       66		      .byte.b	$60+(.LUM1/256)
     15  5221		       84		      .byte.b	$80+(.LUM2/256)
     16  5222		       18		      .byte.b	$10+(.LUM3/256)
     17  5223
     18  5223
     19  5223
     20  5223
     21  5223
     22  5223				   .LUM1      SET	.LUM1 + .STEP1
     23  5223				   .LUM2      SET	.LUM2 + .STEP2
     24  5223				   .LUM3      SET	.LUM3 + .STEP3
     13  5223					      REPEND
     14  5223		       66		      .byte.b	$60+(.LUM1/256)
     15  5224		       84		      .byte.b	$80+(.LUM2/256)
     16  5225		       18		      .byte.b	$10+(.LUM3/256)
     17  5226
     18  5226
     19  5226
     20  5226
     21  5226
     22  5226				   .LUM1      SET	.LUM1 + .STEP1
     23  5226				   .LUM2      SET	.LUM2 + .STEP2
     24  5226				   .LUM3      SET	.LUM3 + .STEP3
     13  5226					      REPEND
     14  5226		       66		      .byte.b	$60+(.LUM1/256)
     15  5227		       84		      .byte.b	$80+(.LUM2/256)
     16  5228		       18		      .byte.b	$10+(.LUM3/256)
     17  5229
     18  5229
     19  5229
     20  5229
     21  5229
     22  5229				   .LUM1      SET	.LUM1 + .STEP1
     23  5229				   .LUM2      SET	.LUM2 + .STEP2
     24  5229				   .LUM3      SET	.LUM3 + .STEP3
     13  5229					      REPEND
     14  5229		       66		      .byte.b	$60+(.LUM1/256)
     15  522a		       84		      .byte.b	$80+(.LUM2/256)
     16  522b		       18		      .byte.b	$10+(.LUM3/256)
     17  522c
     18  522c
     19  522c
     20  522c
     21  522c
     22  522c				   .LUM1      SET	.LUM1 + .STEP1
     23  522c				   .LUM2      SET	.LUM2 + .STEP2
     24  522c				   .LUM3      SET	.LUM3 + .STEP3
     13  522c					      REPEND
     14  522c		       66		      .byte.b	$60+(.LUM1/256)
     15  522d		       84		      .byte.b	$80+(.LUM2/256)
     16  522e		       18		      .byte.b	$10+(.LUM3/256)
     17  522f
     18  522f
     19  522f
     20  522f
     21  522f
     22  522f				   .LUM1      SET	.LUM1 + .STEP1
     23  522f				   .LUM2      SET	.LUM2 + .STEP2
     24  522f				   .LUM3      SET	.LUM3 + .STEP3
     13  522f					      REPEND
     14  522f		       66		      .byte.b	$60+(.LUM1/256)
     15  5230		       84		      .byte.b	$80+(.LUM2/256)
     16  5231		       18		      .byte.b	$10+(.LUM3/256)
     17  5232
     18  5232
     19  5232
     20  5232
     21  5232
     22  5232				   .LUM1      SET	.LUM1 + .STEP1
     23  5232				   .LUM2      SET	.LUM2 + .STEP2
     24  5232				   .LUM3      SET	.LUM3 + .STEP3
     13  5232					      REPEND
     14  5232		       66		      .byte.b	$60+(.LUM1/256)
     15  5233		       84		      .byte.b	$80+(.LUM2/256)
     16  5234		       18		      .byte.b	$10+(.LUM3/256)
     17  5235
     18  5235
     19  5235
     20  5235
     21  5235
     22  5235				   .LUM1      SET	.LUM1 + .STEP1
     23  5235				   .LUM2      SET	.LUM2 + .STEP2
     24  5235				   .LUM3      SET	.LUM3 + .STEP3
     13  5235					      REPEND
     14  5235		       66		      .byte.b	$60+(.LUM1/256)
     15  5236		       84		      .byte.b	$80+(.LUM2/256)
     16  5237		       18		      .byte.b	$10+(.LUM3/256)
     17  5238
     18  5238
     19  5238
     20  5238
     21  5238
     22  5238				   .LUM1      SET	.LUM1 + .STEP1
     23  5238				   .LUM2      SET	.LUM2 + .STEP2
     24  5238				   .LUM3      SET	.LUM3 + .STEP3
     13  5238					      REPEND
     14  5238		       66		      .byte.b	$60+(.LUM1/256)
     15  5239		       84		      .byte.b	$80+(.LUM2/256)
     16  523a		       18		      .byte.b	$10+(.LUM3/256)
     17  523b
     18  523b
     19  523b
     20  523b
     21  523b
     22  523b				   .LUM1      SET	.LUM1 + .STEP1
     23  523b				   .LUM2      SET	.LUM2 + .STEP2
     24  523b				   .LUM3      SET	.LUM3 + .STEP3
     13  523b					      REPEND
     14  523b		       66		      .byte.b	$60+(.LUM1/256)
     15  523c		       84		      .byte.b	$80+(.LUM2/256)
     16  523d		       18		      .byte.b	$10+(.LUM3/256)
     17  523e
     18  523e
     19  523e
     20  523e
     21  523e
     22  523e				   .LUM1      SET	.LUM1 + .STEP1
     23  523e				   .LUM2      SET	.LUM2 + .STEP2
     24  523e				   .LUM3      SET	.LUM3 + .STEP3
     13  523e					      REPEND
     14  523e		       66		      .byte.b	$60+(.LUM1/256)
     15  523f		       84		      .byte.b	$80+(.LUM2/256)
     16  5240		       18		      .byte.b	$10+(.LUM3/256)
     17  5241
     18  5241
     19  5241
     20  5241
     21  5241
     22  5241				   .LUM1      SET	.LUM1 + .STEP1
     23  5241				   .LUM2      SET	.LUM2 + .STEP2
     24  5241				   .LUM3      SET	.LUM3 + .STEP3
     13  5241					      REPEND
     14  5241		       66		      .byte.b	$60+(.LUM1/256)
     15  5242		       84		      .byte.b	$80+(.LUM2/256)
     16  5243		       18		      .byte.b	$10+(.LUM3/256)
     17  5244
     18  5244
     19  5244
     20  5244
     21  5244
     22  5244				   .LUM1      SET	.LUM1 + .STEP1
     23  5244				   .LUM2      SET	.LUM2 + .STEP2
     24  5244				   .LUM3      SET	.LUM3 + .STEP3
     13  5244					      REPEND
     14  5244		       66		      .byte.b	$60+(.LUM1/256)
     15  5245		       84		      .byte.b	$80+(.LUM2/256)
     16  5246		       18		      .byte.b	$10+(.LUM3/256)
     17  5247
     18  5247
     19  5247
     20  5247
     21  5247
     22  5247				   .LUM1      SET	.LUM1 + .STEP1
     23  5247				   .LUM2      SET	.LUM2 + .STEP2
     24  5247				   .LUM3      SET	.LUM3 + .STEP3
     13  5247					      REPEND
     14  5247		       66		      .byte.b	$60+(.LUM1/256)
     15  5248		       84		      .byte.b	$80+(.LUM2/256)
     16  5249		       18		      .byte.b	$10+(.LUM3/256)
     17  524a
     18  524a
     19  524a
     20  524a
     21  524a
     22  524a				   .LUM1      SET	.LUM1 + .STEP1
     23  524a				   .LUM2      SET	.LUM2 + .STEP2
     24  524a				   .LUM3      SET	.LUM3 + .STEP3
     13  524a					      REPEND
     14  524a		       66		      .byte.b	$60+(.LUM1/256)
     15  524b		       84		      .byte.b	$80+(.LUM2/256)
     16  524c		       18		      .byte.b	$10+(.LUM3/256)
     17  524d
     18  524d
     19  524d
     20  524d
     21  524d
     22  524d				   .LUM1      SET	.LUM1 + .STEP1
     23  524d				   .LUM2      SET	.LUM2 + .STEP2
     24  524d				   .LUM3      SET	.LUM3 + .STEP3
     13  524d					      REPEND
     14  524d		       66		      .byte.b	$60+(.LUM1/256)
     15  524e		       84		      .byte.b	$80+(.LUM2/256)
     16  524f		       18		      .byte.b	$10+(.LUM3/256)
     17  5250
     18  5250
     19  5250
     20  5250
     21  5250
     22  5250				   .LUM1      SET	.LUM1 + .STEP1
     23  5250				   .LUM2      SET	.LUM2 + .STEP2
     24  5250				   .LUM3      SET	.LUM3 + .STEP3
     13  5250					      REPEND
     14  5250		       66		      .byte.b	$60+(.LUM1/256)
     15  5251		       84		      .byte.b	$80+(.LUM2/256)
     16  5252		       18		      .byte.b	$10+(.LUM3/256)
     17  5253
     18  5253
     19  5253
     20  5253
     21  5253
     22  5253				   .LUM1      SET	.LUM1 + .STEP1
     23  5253				   .LUM2      SET	.LUM2 + .STEP2
     24  5253				   .LUM3      SET	.LUM3 + .STEP3
     13  5253					      REPEND
     14  5253		       66		      .byte.b	$60+(.LUM1/256)
     15  5254		       84		      .byte.b	$80+(.LUM2/256)
     16  5255		       18		      .byte.b	$10+(.LUM3/256)
     17  5256
     18  5256
     19  5256
     20  5256
     21  5256
     22  5256				   .LUM1      SET	.LUM1 + .STEP1
     23  5256				   .LUM2      SET	.LUM2 + .STEP2
     24  5256				   .LUM3      SET	.LUM3 + .STEP3
     13  5256					      REPEND
     14  5256		       66		      .byte.b	$60+(.LUM1/256)
     15  5257		       84		      .byte.b	$80+(.LUM2/256)
     16  5258		       18		      .byte.b	$10+(.LUM3/256)
     17  5259
     18  5259
     19  5259
     20  5259
     21  5259
     22  5259				   .LUM1      SET	.LUM1 + .STEP1
     23  5259				   .LUM2      SET	.LUM2 + .STEP2
     24  5259				   .LUM3      SET	.LUM3 + .STEP3
     13  5259					      REPEND
     14  5259		       66		      .byte.b	$60+(.LUM1/256)
     15  525a		       84		      .byte.b	$80+(.LUM2/256)
     16  525b		       18		      .byte.b	$10+(.LUM3/256)
     17  525c
     18  525c
     19  525c
     20  525c
     21  525c
     22  525c				   .LUM1      SET	.LUM1 + .STEP1
     23  525c				   .LUM2      SET	.LUM2 + .STEP2
     24  525c				   .LUM3      SET	.LUM3 + .STEP3
     13  525c					      REPEND
     14  525c		       66		      .byte.b	$60+(.LUM1/256)
     15  525d		       84		      .byte.b	$80+(.LUM2/256)
     16  525e		       18		      .byte.b	$10+(.LUM3/256)
     17  525f
     18  525f
     19  525f
     20  525f
     21  525f
     22  525f				   .LUM1      SET	.LUM1 + .STEP1
     23  525f				   .LUM2      SET	.LUM2 + .STEP2
     24  525f				   .LUM3      SET	.LUM3 + .STEP3
     13  525f					      REPEND
     14  525f		       66		      .byte.b	$60+(.LUM1/256)
     15  5260		       84		      .byte.b	$80+(.LUM2/256)
     16  5261		       18		      .byte.b	$10+(.LUM3/256)
     17  5262
     18  5262
     19  5262
     20  5262
     21  5262
     22  5262				   .LUM1      SET	.LUM1 + .STEP1
     23  5262				   .LUM2      SET	.LUM2 + .STEP2
     24  5262				   .LUM3      SET	.LUM3 + .STEP3
     13  5262					      REPEND
     14  5262		       66		      .byte.b	$60+(.LUM1/256)
     15  5263		       84		      .byte.b	$80+(.LUM2/256)
     16  5264		       18		      .byte.b	$10+(.LUM3/256)
     17  5265
     18  5265
     19  5265
     20  5265
     21  5265
     22  5265				   .LUM1      SET	.LUM1 + .STEP1
     23  5265				   .LUM2      SET	.LUM2 + .STEP2
     24  5265				   .LUM3      SET	.LUM3 + .STEP3
     13  5265					      REPEND
     14  5265		       66		      .byte.b	$60+(.LUM1/256)
     15  5266		       84		      .byte.b	$80+(.LUM2/256)
     16  5267		       18		      .byte.b	$10+(.LUM3/256)
     17  5268
     18  5268
     19  5268
     20  5268
     21  5268
     22  5268				   .LUM1      SET	.LUM1 + .STEP1
     23  5268				   .LUM2      SET	.LUM2 + .STEP2
     24  5268				   .LUM3      SET	.LUM3 + .STEP3
     13  5268					      REPEND
     14  5268		       66		      .byte.b	$60+(.LUM1/256)
     15  5269		       84		      .byte.b	$80+(.LUM2/256)
     16  526a		       18		      .byte.b	$10+(.LUM3/256)
     17  526b
     18  526b
     19  526b
     20  526b
     21  526b
     22  526b				   .LUM1      SET	.LUM1 + .STEP1
     23  526b				   .LUM2      SET	.LUM2 + .STEP2
     24  526b				   .LUM3      SET	.LUM3 + .STEP3
     13  526b					      REPEND
     14  526b		       66		      .byte.b	$60+(.LUM1/256)
     15  526c		       84		      .byte.b	$80+(.LUM2/256)
     16  526d		       18		      .byte.b	$10+(.LUM3/256)
     17  526e
     18  526e
     19  526e
     20  526e
     21  526e
     22  526e				   .LUM1      SET	.LUM1 + .STEP1
     23  526e				   .LUM2      SET	.LUM2 + .STEP2
     24  526e				   .LUM3      SET	.LUM3 + .STEP3
     13  526e					      REPEND
     14  526e		       66		      .byte.b	$60+(.LUM1/256)
     15  526f		       84		      .byte.b	$80+(.LUM2/256)
     16  5270		       18		      .byte.b	$10+(.LUM3/256)
     17  5271
     18  5271
     19  5271
     20  5271
     21  5271
     22  5271				   .LUM1      SET	.LUM1 + .STEP1
     23  5271				   .LUM2      SET	.LUM2 + .STEP2
     24  5271				   .LUM3      SET	.LUM3 + .STEP3
     13  5271					      REPEND
     14  5271		       66		      .byte.b	$60+(.LUM1/256)
     15  5272		       84		      .byte.b	$80+(.LUM2/256)
     16  5273		       18		      .byte.b	$10+(.LUM3/256)
     17  5274
     18  5274
     19  5274
     20  5274
     21  5274
     22  5274				   .LUM1      SET	.LUM1 + .STEP1
     23  5274				   .LUM2      SET	.LUM2 + .STEP2
     24  5274				   .LUM3      SET	.LUM3 + .STEP3
     13  5274					      REPEND
     14  5274		       66		      .byte.b	$60+(.LUM1/256)
     15  5275		       84		      .byte.b	$80+(.LUM2/256)
     16  5276		       18		      .byte.b	$10+(.LUM3/256)
     17  5277
     18  5277
     19  5277
     20  5277
     21  5277
     22  5277				   .LUM1      SET	.LUM1 + .STEP1
     23  5277				   .LUM2      SET	.LUM2 + .STEP2
     24  5277				   .LUM3      SET	.LUM3 + .STEP3
     13  5277					      REPEND
     14  5277		       66		      .byte.b	$60+(.LUM1/256)
     15  5278		       84		      .byte.b	$80+(.LUM2/256)
     16  5279		       18		      .byte.b	$10+(.LUM3/256)
     17  527a
     18  527a
     19  527a
     20  527a
     21  527a
     22  527a				   .LUM1      SET	.LUM1 + .STEP1
     23  527a				   .LUM2      SET	.LUM2 + .STEP2
     24  527a				   .LUM3      SET	.LUM3 + .STEP3
     13  527a					      REPEND
     14  527a		       66		      .byte.b	$60+(.LUM1/256)
     15  527b		       84		      .byte.b	$80+(.LUM2/256)
     16  527c		       18		      .byte.b	$10+(.LUM3/256)
     17  527d
     18  527d
     19  527d
     20  527d
     21  527d
     22  527d				   .LUM1      SET	.LUM1 + .STEP1
     23  527d				   .LUM2      SET	.LUM2 + .STEP2
     24  527d				   .LUM3      SET	.LUM3 + .STEP3
     13  527d					      REPEND
     14  527d		       66		      .byte.b	$60+(.LUM1/256)
     15  527e		       84		      .byte.b	$80+(.LUM2/256)
     16  527f		       18		      .byte.b	$10+(.LUM3/256)
     17  5280
     18  5280
     19  5280
     20  5280
     21  5280
     22  5280				   .LUM1      SET	.LUM1 + .STEP1
     23  5280				   .LUM2      SET	.LUM2 + .STEP2
     24  5280				   .LUM3      SET	.LUM3 + .STEP3
     13  5280					      REPEND
     14  5280		       66		      .byte.b	$60+(.LUM1/256)
     15  5281		       84		      .byte.b	$80+(.LUM2/256)
     16  5282		       18		      .byte.b	$10+(.LUM3/256)
     17  5283
     18  5283
     19  5283
     20  5283
     21  5283
     22  5283				   .LUM1      SET	.LUM1 + .STEP1
     23  5283				   .LUM2      SET	.LUM2 + .STEP2
     24  5283				   .LUM3      SET	.LUM3 + .STEP3
     13  5283					      REPEND
     14  5283		       66		      .byte.b	$60+(.LUM1/256)
     15  5284		       84		      .byte.b	$80+(.LUM2/256)
     16  5285		       18		      .byte.b	$10+(.LUM3/256)
     17  5286
     18  5286
     19  5286
     20  5286
     21  5286
     22  5286				   .LUM1      SET	.LUM1 + .STEP1
     23  5286				   .LUM2      SET	.LUM2 + .STEP2
     24  5286				   .LUM3      SET	.LUM3 + .STEP3
     13  5286					      REPEND
     14  5286		       66		      .byte.b	$60+(.LUM1/256)
     15  5287		       84		      .byte.b	$80+(.LUM2/256)
     16  5288		       18		      .byte.b	$10+(.LUM3/256)
     17  5289
     18  5289
     19  5289
     20  5289
     21  5289
     22  5289				   .LUM1      SET	.LUM1 + .STEP1
     23  5289				   .LUM2      SET	.LUM2 + .STEP2
     24  5289				   .LUM3      SET	.LUM3 + .STEP3
     13  5289					      REPEND
     14  5289		       66		      .byte.b	$60+(.LUM1/256)
     15  528a		       84		      .byte.b	$80+(.LUM2/256)
     16  528b		       18		      .byte.b	$10+(.LUM3/256)
     17  528c
     18  528c
     19  528c
     20  528c
     21  528c
     22  528c				   .LUM1      SET	.LUM1 + .STEP1
     23  528c				   .LUM2      SET	.LUM2 + .STEP2
     24  528c				   .LUM3      SET	.LUM3 + .STEP3
     13  528c					      REPEND
     14  528c		       66		      .byte.b	$60+(.LUM1/256)
     15  528d		       84		      .byte.b	$80+(.LUM2/256)
     16  528e		       18		      .byte.b	$10+(.LUM3/256)
     17  528f
     18  528f
     19  528f
     20  528f
     21  528f
     22  528f				   .LUM1      SET	.LUM1 + .STEP1
     23  528f				   .LUM2      SET	.LUM2 + .STEP2
     24  528f				   .LUM3      SET	.LUM3 + .STEP3
     13  528f					      REPEND
     14  528f		       66		      .byte.b	$60+(.LUM1/256)
     15  5290		       84		      .byte.b	$80+(.LUM2/256)
     16  5291		       18		      .byte.b	$10+(.LUM3/256)
     17  5292
     18  5292
     19  5292
     20  5292
     21  5292
     22  5292				   .LUM1      SET	.LUM1 + .STEP1
     23  5292				   .LUM2      SET	.LUM2 + .STEP2
     24  5292				   .LUM3      SET	.LUM3 + .STEP3
     13  5292					      REPEND
     14  5292		       66		      .byte.b	$60+(.LUM1/256)
     15  5293		       84		      .byte.b	$80+(.LUM2/256)
     16  5294		       18		      .byte.b	$10+(.LUM3/256)
     17  5295
     18  5295
     19  5295
     20  5295
     21  5295
     22  5295				   .LUM1      SET	.LUM1 + .STEP1
     23  5295				   .LUM2      SET	.LUM2 + .STEP2
     24  5295				   .LUM3      SET	.LUM3 + .STEP3
     13  5295					      REPEND
     14  5295		       66		      .byte.b	$60+(.LUM1/256)
     15  5296		       84		      .byte.b	$80+(.LUM2/256)
     16  5297		       18		      .byte.b	$10+(.LUM3/256)
     17  5298
     18  5298
     19  5298
     20  5298
     21  5298
     22  5298				   .LUM1      SET	.LUM1 + .STEP1
     23  5298				   .LUM2      SET	.LUM2 + .STEP2
     24  5298				   .LUM3      SET	.LUM3 + .STEP3
     13  5298					      REPEND
     14  5298		       66		      .byte.b	$60+(.LUM1/256)
     15  5299		       84		      .byte.b	$80+(.LUM2/256)
     16  529a		       18		      .byte.b	$10+(.LUM3/256)
     17  529b
     18  529b
     19  529b
     20  529b
     21  529b
     22  529b				   .LUM1      SET	.LUM1 + .STEP1
     23  529b				   .LUM2      SET	.LUM2 + .STEP2
     24  529b				   .LUM3      SET	.LUM3 + .STEP3
     13  529b					      REPEND
     14  529b		       66		      .byte.b	$60+(.LUM1/256)
     15  529c		       84		      .byte.b	$80+(.LUM2/256)
     16  529d		       18		      .byte.b	$10+(.LUM3/256)
     17  529e
     18  529e
     19  529e
     20  529e
     21  529e
     22  529e				   .LUM1      SET	.LUM1 + .STEP1
     23  529e				   .LUM2      SET	.LUM2 + .STEP2
     24  529e				   .LUM3      SET	.LUM3 + .STEP3
     13  529e					      REPEND
     14  529e		       66		      .byte.b	$60+(.LUM1/256)
     15  529f		       84		      .byte.b	$80+(.LUM2/256)
     16  52a0		       18		      .byte.b	$10+(.LUM3/256)
     17  52a1
     18  52a1
     19  52a1
     20  52a1
     21  52a1
     22  52a1				   .LUM1      SET	.LUM1 + .STEP1
     23  52a1				   .LUM2      SET	.LUM2 + .STEP2
     24  52a1				   .LUM3      SET	.LUM3 + .STEP3
     13  52a1					      REPEND
     14  52a1		       66		      .byte.b	$60+(.LUM1/256)
     15  52a2		       84		      .byte.b	$80+(.LUM2/256)
     16  52a3		       18		      .byte.b	$10+(.LUM3/256)
     17  52a4
     18  52a4
     19  52a4
     20  52a4
     21  52a4
     22  52a4				   .LUM1      SET	.LUM1 + .STEP1
     23  52a4				   .LUM2      SET	.LUM2 + .STEP2
     24  52a4				   .LUM3      SET	.LUM3 + .STEP3
     13  52a4					      REPEND
     14  52a4		       66		      .byte.b	$60+(.LUM1/256)
     15  52a5		       84		      .byte.b	$80+(.LUM2/256)
     16  52a6		       18		      .byte.b	$10+(.LUM3/256)
     17  52a7
     18  52a7
     19  52a7
     20  52a7
     21  52a7
     22  52a7				   .LUM1      SET	.LUM1 + .STEP1
     23  52a7				   .LUM2      SET	.LUM2 + .STEP2
     24  52a7				   .LUM3      SET	.LUM3 + .STEP3
     13  52a7					      REPEND
     14  52a7		       66		      .byte.b	$60+(.LUM1/256)
     15  52a8		       84		      .byte.b	$80+(.LUM2/256)
     16  52a9		       18		      .byte.b	$10+(.LUM3/256)
     17  52aa
     18  52aa
     19  52aa
     20  52aa
     21  52aa
     22  52aa				   .LUM1      SET	.LUM1 + .STEP1
     23  52aa				   .LUM2      SET	.LUM2 + .STEP2
     24  52aa				   .LUM3      SET	.LUM3 + .STEP3
     13  52aa					      REPEND
     14  52aa		       66		      .byte.b	$60+(.LUM1/256)
     15  52ab		       84		      .byte.b	$80+(.LUM2/256)
     16  52ac		       18		      .byte.b	$10+(.LUM3/256)
     17  52ad
     18  52ad
     19  52ad
     20  52ad
     21  52ad
     22  52ad				   .LUM1      SET	.LUM1 + .STEP1
     23  52ad				   .LUM2      SET	.LUM2 + .STEP2
     24  52ad				   .LUM3      SET	.LUM3 + .STEP3
     13  52ad					      REPEND
     14  52ad		       66		      .byte.b	$60+(.LUM1/256)
     15  52ae		       84		      .byte.b	$80+(.LUM2/256)
     16  52af		       18		      .byte.b	$10+(.LUM3/256)
     17  52b0
     18  52b0
     19  52b0
     20  52b0
     21  52b0
     22  52b0				   .LUM1      SET	.LUM1 + .STEP1
     23  52b0				   .LUM2      SET	.LUM2 + .STEP2
     24  52b0				   .LUM3      SET	.LUM3 + .STEP3
     25  52b0					      REPEND
    259  52b0							;colr_pal	  LUMTABLE $90, $20, $60, $6,$A,$a,$C,$6,$8
    260  52b0
------- FILE titleData.asm LEVEL 3 PASS 2
      0  52b0					      include	"titleData.asm"
      1  52b0				   COL_0
      2  52b0		       00		      .byte.b	0	;R (71)
      3  52b1		       00		      .byte.b	0	;G
      4  52b2		       00		      .byte.b	0	;B
      5  52b3		       40		      .byte.b	64	;R (70)
      6  52b4		       40		      .byte.b	64	;G
      7  52b5		       00		      .byte.b	0	;B
      8  52b6		       00		      .byte.b	0	;R (69)
      9  52b7		       00		      .byte.b	0	;G
     10  52b8		       00		      .byte.b	0	;B
     11  52b9		       00		      .byte.b	0	;R (68)
     12  52ba		       80		      .byte.b	128	;G
     13  52bb		       00		      .byte.b	0	;B
     14  52bc		       00		      .byte.b	0	;R (67)
     15  52bd		       20		      .byte.b	32	;G
     16  52be		       00		      .byte.b	0	;B
     17  52bf		       80		      .byte.b	128	;R (66)
     18  52c0		       80		      .byte.b	128	;G
     19  52c1		       00		      .byte.b	0	;B
     20  52c2		       c0		      .byte.b	192	;R (65)
     21  52c3		       c0		      .byte.b	192	;G
     22  52c4		       00		      .byte.b	0	;B
     23  52c5		       40		      .byte.b	64	;R (64)
     24  52c6		       c0		      .byte.b	192	;G
     25  52c7		       00		      .byte.b	0	;B
     26  52c8		       00		      .byte.b	0	;R (63)
     27  52c9		       a0		      .byte.b	160	;G
     28  52ca		       00		      .byte.b	0	;B
     29  52cb		       10		      .byte.b	16	;R (62)
     30  52cc		       70		      .byte.b	112	;G
     31  52cd		       00		      .byte.b	0	;B
     32  52ce		       00		      .byte.b	0	;R (61)
     33  52cf		       80		      .byte.b	128	;G
     34  52d0		       40		      .byte.b	64	;B
     35  52d1		       00		      .byte.b	0	;R (60)
     36  52d2		       c0		      .byte.b	192	;G
     37  52d3		       00		      .byte.b	0	;B
     38  52d4		       00		      .byte.b	0	;R (59)
     39  52d5		       c0		      .byte.b	192	;G
     40  52d6		       00		      .byte.b	0	;B
     41  52d7		       00		      .byte.b	0	;R (58)
     42  52d8		       40		      .byte.b	64	;G
     43  52d9		       00		      .byte.b	0	;B
     44  52da		       00		      .byte.b	0	;R (57)
     45  52db		       c0		      .byte.b	192	;G
     46  52dc		       00		      .byte.b	0	;B
     47  52dd		       00		      .byte.b	0	;R (56)
     48  52de		       60		      .byte.b	96	;G
     49  52df		       00		      .byte.b	0	;B
     50  52e0		       00		      .byte.b	0	;R (55)
     51  52e1		       80		      .byte.b	128	;G
     52  52e2		       00		      .byte.b	0	;B
     53  52e3		       00		      .byte.b	0	;R (54)
     54  52e4		       40		      .byte.b	64	;G
     55  52e5		       00		      .byte.b	0	;B
     56  52e6		       00		      .byte.b	0	;R (53)
     57  52e7		       80		      .byte.b	128	;G
     58  52e8		       00		      .byte.b	0	;B
     59  52e9		       00		      .byte.b	0	;R (52)
     60  52ea		       80		      .byte.b	128	;G
     61  52eb		       00		      .byte.b	0	;B
     62  52ec		       00		      .byte.b	0	;R (51)
     63  52ed		       10		      .byte.b	16	;G
     64  52ee		       00		      .byte.b	0	;B
     65  52ef		       00		      .byte.b	0	;R (50)
     66  52f0		       00		      .byte.b	0	;G
     67  52f1		       00		      .byte.b	0	;B
     68  52f2		       00		      .byte.b	0	;R (49)
     69  52f3		       00		      .byte.b	0	;G
     70  52f4		       00		      .byte.b	0	;B
     71  52f5		       00		      .byte.b	0	;R (48)
     72  52f6		       00		      .byte.b	0	;G
     73  52f7		       00		      .byte.b	0	;B
     74  52f8		       00		      .byte.b	0	;R (47)
     75  52f9		       00		      .byte.b	0	;G
     76  52fa		       00		      .byte.b	0	;B
     77  52fb		       00		      .byte.b	0	;R (46)
     78  52fc		       40		      .byte.b	64	;G
     79  52fd		       00		      .byte.b	0	;B
     80  52fe		       00		      .byte.b	0	;R (45)
     81  52ff		       00		      .byte.b	0	;G
     82  5300		       00		      .byte.b	0	;B
     83  5301		       00		      .byte.b	0	;R (44)
     84  5302		       00		      .byte.b	0	;G
     85  5303		       00		      .byte.b	0	;B
     86  5304		       00		      .byte.b	0	;R (43)
     87  5305		       00		      .byte.b	0	;G
     88  5306		       00		      .byte.b	0	;B
     89  5307		       00		      .byte.b	0	;R (42)
     90  5308		       40		      .byte.b	64	;G
     91  5309		       00		      .byte.b	0	;B
     92  530a		       00		      .byte.b	0	;R (41)
     93  530b		       00		      .byte.b	0	;G
     94  530c		       00		      .byte.b	0	;B
     95  530d		       00		      .byte.b	0	;R (40)
     96  530e		       00		      .byte.b	0	;G
     97  530f		       00		      .byte.b	0	;B
     98  5310		       00		      .byte.b	0	;R (39)
     99  5311		       20		      .byte.b	32	;G
    100  5312		       00		      .byte.b	0	;B
    101  5313		       00		      .byte.b	0	;R (38)
    102  5314		       00		      .byte.b	0	;G
    103  5315		       00		      .byte.b	0	;B
    104  5316		       00		      .byte.b	0	;R (37)
    105  5317		       10		      .byte.b	16	;G
    106  5318		       00		      .byte.b	0	;B
    107  5319		       00		      .byte.b	0	;R (36)
    108  531a		       00		      .byte.b	0	;G
    109  531b		       00		      .byte.b	0	;B
    110  531c		       00		      .byte.b	0	;R (35)
    111  531d		       40		      .byte.b	64	;G
    112  531e		       00		      .byte.b	0	;B
    113  531f		       00		      .byte.b	0	;R (34)
    114  5320		       20		      .byte.b	32	;G
    115  5321		       00		      .byte.b	0	;B
    116  5322		       00		      .byte.b	0	;R (33)
    117  5323		       00		      .byte.b	0	;G
    118  5324		       00		      .byte.b	0	;B
    119  5325		       00		      .byte.b	0	;R (32)
    120  5326		       00		      .byte.b	0	;G
    121  5327		       00		      .byte.b	0	;B
    122  5328		       00		      .byte.b	0	;R (31)
    123  5329		       20		      .byte.b	32	;G
    124  532a		       00		      .byte.b	0	;B
    125  532b		       00		      .byte.b	0	;R (30)
    126  532c		       00		      .byte.b	0	;G
    127  532d		       00		      .byte.b	0	;B
    128  532e		       00		      .byte.b	0	;R (29)
    129  532f		       80		      .byte.b	128	;G
    130  5330		       00		      .byte.b	0	;B
    131  5331		       00		      .byte.b	0	;R (28)
    132  5332		       00		      .byte.b	0	;G
    133  5333		       00		      .byte.b	0	;B
    134  5334		       00		      .byte.b	0	;R (27)
    135  5335		       20		      .byte.b	32	;G
    136  5336		       00		      .byte.b	0	;B
    137  5337		       00		      .byte.b	0	;R (26)
    138  5338		       00		      .byte.b	0	;G
    139  5339		       00		      .byte.b	0	;B
    140  533a		       00		      .byte.b	0	;R (25)
    141  533b		       00		      .byte.b	0	;G
    142  533c		       00		      .byte.b	0	;B
    143  533d		       00		      .byte.b	0	;R (24)
    144  533e		       20		      .byte.b	32	;G
    145  533f		       00		      .byte.b	0	;B
    146  5340		       00		      .byte.b	0	;R (23)
    147  5341		       00		      .byte.b	0	;G
    148  5342		       00		      .byte.b	0	;B
    149  5343		       00		      .byte.b	0	;R (22)
    150  5344		       00		      .byte.b	0	;G
    151  5345		       00		      .byte.b	0	;B
    152  5346		       00		      .byte.b	0	;R (21)
    153  5347		       20		      .byte.b	32	;G
    154  5348		       00		      .byte.b	0	;B
    155  5349		       00		      .byte.b	0	;R (20)
    156  534a		       00		      .byte.b	0	;G
    157  534b		       00		      .byte.b	0	;B
    158  534c		       00		      .byte.b	0	;R (19)
    159  534d		       00		      .byte.b	0	;G
    160  534e		       00		      .byte.b	0	;B
    161  534f		       00		      .byte.b	0	;R (18)
    162  5350		       00		      .byte.b	0	;G
    163  5351		       00		      .byte.b	0	;B
    164  5352		       00		      .byte.b	0	;R (17)
    165  5353		       80		      .byte.b	128	;G
    166  5354		       00		      .byte.b	0	;B
    167  5355		       00		      .byte.b	0	;R (16)
    168  5356		       00		      .byte.b	0	;G
    169  5357		       00		      .byte.b	0	;B
    170  5358		       00		      .byte.b	0	;R (15)
    171  5359		       10		      .byte.b	16	;G
    172  535a		       00		      .byte.b	0	;B
    173  535b		       00		      .byte.b	0	;R (14)
    174  535c		       00		      .byte.b	0	;G
    175  535d		       00		      .byte.b	0	;B
    176  535e		       00		      .byte.b	0	;R (13)
    177  535f		       00		      .byte.b	0	;G
    178  5360		       00		      .byte.b	0	;B
    179  5361		       00		      .byte.b	0	;R (12)
    180  5362		       80		      .byte.b	128	;G
    181  5363		       00		      .byte.b	0	;B
    182  5364		       00		      .byte.b	0	;R (11)
    183  5365		       00		      .byte.b	0	;G
    184  5366		       00		      .byte.b	0	;B
    185  5367		       00		      .byte.b	0	;R (10)
    186  5368		       00		      .byte.b	0	;G
    187  5369		       00		      .byte.b	0	;B
    188  536a		       00		      .byte.b	0	;R (9)
    189  536b		       80		      .byte.b	128	;G
    190  536c		       00		      .byte.b	0	;B
    191  536d		       00		      .byte.b	0	;R (8)
    192  536e		       00		      .byte.b	0	;G
    193  536f		       00		      .byte.b	0	;B
    194  5370		       00		      .byte.b	0	;R (7)
    195  5371		       20		      .byte.b	32	;G
    196  5372		       00		      .byte.b	0	;B
    197  5373		       00		      .byte.b	0	;R (6)
    198  5374		       00		      .byte.b	0	;G
    199  5375		       00		      .byte.b	0	;B
    200  5376		       00		      .byte.b	0	;R (5)
    201  5377		       10		      .byte.b	16	;G
    202  5378		       00		      .byte.b	0	;B
    203  5379		       00		      .byte.b	0	;R (4)
    204  537a		       00		      .byte.b	0	;G
    205  537b		       00		      .byte.b	0	;B
    206  537c		       00		      .byte.b	0	;R (3)
    207  537d		       00		      .byte.b	0	;G
    208  537e		       00		      .byte.b	0	;B
    209  537f		       00		      .byte.b	0	;R (2)
    210  5380		       40		      .byte.b	64	;G
    211  5381		       00		      .byte.b	0	;B
    212  5382		       00		      .byte.b	0	;R (1)
    213  5383		       00		      .byte.b	0	;G
    214  5384		       00		      .byte.b	0	;B
    215  5385		       00		      .byte.b	0	;R (0)
    216  5386		       00		      .byte.b	0	;G
    217  5387		       00		      .byte.b	0	;B
    218  5388				   COL_1
    219  5388		       80		      .byte.b	128	;R (71)
    220  5389		       80		      .byte.b	128	;G
    221  538a		       00		      .byte.b	0	;B
    222  538b		       10		      .byte.b	16	;R (70)
    223  538c		       14		      .byte.b	20	;G
    224  538d		       00		      .byte.b	0	;B
    225  538e		       00		      .byte.b	0	;R (69)
    226  538f		       41		      .byte.b	65	;G
    227  5390		       00		      .byte.b	0	;B
    228  5391		       00		      .byte.b	0	;R (68)
    229  5392		       08		      .byte.b	8	;G
    230  5393		       00		      .byte.b	0	;B
    231  5394		       20		      .byte.b	32	;R (67)
    232  5395		       20		      .byte.b	32	;G
    233  5396		       00		      .byte.b	0	;B
    234  5397		       63		      .byte.b	99	;R (66)
    235  5398		       6b		      .byte.b	107	;G
    236  5399		       00		      .byte.b	0	;B
    237  539a		       ff		      .byte.b	255	;R (65)
    238  539b		       f5		      .byte.b	245	;G
    239  539c		       00		      .byte.b	0	;B
    240  539d		       80		      .byte.b	128	;R (64)
    241  539e		       fb		      .byte.b	251	;G
    242  539f		       04		      .byte.b	4	;B
    243  53a0		       00		      .byte.b	0	;R (63)
    244  53a1		       b7		      .byte.b	183	;G
    245  53a2		       00		      .byte.b	0	;B
    246  53a3		       00		      .byte.b	0	;R (62)
    247  53a4		       b5		      .byte.b	181	;G
    248  53a5		       00		      .byte.b	0	;B
    249  53a6		       00		      .byte.b	0	;R (61)
    250  53a7		       ef		      .byte.b	239	;G
    251  53a8		       10		      .byte.b	16	;B
    252  53a9		       00		      .byte.b	0	;R (60)
    253  53aa		       bd		      .byte.b	189	;G
    254  53ab		       42		      .byte.b	66	;B
    255  53ac		       00		      .byte.b	0	;R (59)
    256  53ad		       77		      .byte.b	119	;G
    257  53ae		       00		      .byte.b	0	;B
    258  53af		       00		      .byte.b	0	;R (58)
    259  53b0		       ee		      .byte.b	238	;G
    260  53b1		       00		      .byte.b	0	;B
    261  53b2		       00		      .byte.b	0	;R (57)
    262  53b3		       9b		      .byte.b	155	;G
    263  53b4		       00		      .byte.b	0	;B
    264  53b5		       00		      .byte.b	0	;R (56)
    265  53b6		       f2		      .byte.b	242	;G
    266  53b7		       00		      .byte.b	0	;B
    267  53b8		       00		      .byte.b	0	;R (55)
    268  53b9		       40		      .byte.b	64	;G
    269  53ba		       00		      .byte.b	0	;B
    270  53bb		       00		      .byte.b	0	;R (54)
    271  53bc		       df		      .byte.b	223	;G
    272  53bd		       00		      .byte.b	0	;B
    273  53be		       10		      .byte.b	16	;R (53)
    274  53bf		       69		      .byte.b	105	;G
    275  53c0		       10		      .byte.b	16	;B
    276  53c1		       00		      .byte.b	0	;R (52)
    277  53c2		       4b		      .byte.b	75	;G
    278  53c3		       00		      .byte.b	0	;B
    279  53c4		       00		      .byte.b	0	;R (51)
    280  53c5		       b0		      .byte.b	176	;G
    281  53c6		       00		      .byte.b	0	;B
    282  53c7		       00		      .byte.b	0	;R (50)
    283  53c8		       a7		      .byte.b	167	;G
    284  53c9		       00		      .byte.b	0	;B
    285  53ca		       00		      .byte.b	0	;R (49)
    286  53cb		       7d		      .byte.b	125	;G
    287  53cc		       02		      .byte.b	2	;B
    288  53cd		       00		      .byte.b	0	;R (48)
    289  53ce		       db		      .byte.b	219	;G
    290  53cf		       20		      .byte.b	32	;B
    291  53d0		       00		      .byte.b	0	;R (47)
    292  53d1		       6d		      .byte.b	109	;G
    293  53d2		       00		      .byte.b	0	;B
    294  53d3		       00		      .byte.b	0	;R (46)
    295  53d4		       ea		      .byte.b	234	;G
    296  53d5		       00		      .byte.b	0	;B
    297  53d6		       00		      .byte.b	0	;R (45)
    298  53d7		       13		      .byte.b	19	;G
    299  53d8		       00		      .byte.b	0	;B
    300  53d9		       00		      .byte.b	0	;R (44)
    301  53da		       7e		      .byte.b	126	;G
    302  53db		       01		      .byte.b	1	;B
    303  53dc		       22		      .byte.b	34	;R (43)
    304  53dd		       77		      .byte.b	119	;G
    305  53de		       08		      .byte.b	8	;B
    306  53df		       04		      .byte.b	4	;R (42)
    307  53e0		       5f		      .byte.b	95	;G
    308  53e1		       00		      .byte.b	0	;B
    309  53e2		       00		      .byte.b	0	;R (41)
    310  53e3		       6f		      .byte.b	111	;G
    311  53e4		       00		      .byte.b	0	;B
    312  53e5		       00		      .byte.b	0	;R (40)
    313  53e6		       b5		      .byte.b	181	;G
    314  53e7		       00		      .byte.b	0	;B
    315  53e8		       00		      .byte.b	0	;R (39)
    316  53e9		       5b		      .byte.b	91	;G
    317  53ea		       00		      .byte.b	0	;B
    318  53eb		       00		      .byte.b	0	;R (38)
    319  53ec		       57		      .byte.b	87	;G
    320  53ed		       00		      .byte.b	0	;B
    321  53ee		       20		      .byte.b	32	;R (37)
    322  53ef		       4d		      .byte.b	77	;G
    323  53f0		       22		      .byte.b	34	;B
    324  53f1		       00		      .byte.b	0	;R (36)
    325  53f2		       55		      .byte.b	85	;G
    326  53f3		       00		      .byte.b	0	;B
    327  53f4		       01		      .byte.b	1	;R (35)
    328  53f5		       56		      .byte.b	86	;G
    329  53f6		       00		      .byte.b	0	;B
    330  53f7		       02		      .byte.b	2	;R (34)
    331  53f8		       57		      .byte.b	87	;G
    332  53f9		       00		      .byte.b	0	;B
    333  53fa		       00		      .byte.b	0	;R (33)
    334  53fb		       2a		      .byte.b	42	;G
    335  53fc		       01		      .byte.b	1	;B
    336  53fd		       01		      .byte.b	1	;R (32)
    337  53fe		       ab		      .byte.b	171	;G
    338  53ff		       00		      .byte.b	0	;B
    339  5400		       22		      .byte.b	34	;R (31)
    340  5401		       17		      .byte.b	23	;G
    341  5402		       20		      .byte.b	32	;B
    342  5403		       00		      .byte.b	0	;R (30)
    343  5404		       55		      .byte.b	85	;G
    344  5405		       02		      .byte.b	2	;B
    345  5406		       22		      .byte.b	34	;R (29)
    346  5407		       17		      .byte.b	23	;G
    347  5408		       20		      .byte.b	32	;B
    348  5409		       00		      .byte.b	0	;R (28)
    349  540a		       2b		      .byte.b	43	;G
    350  540b		       00		      .byte.b	0	;B
    351  540c		       00		      .byte.b	0	;R (27)
    352  540d		       95		      .byte.b	149	;G
    353  540e		       02		      .byte.b	2	;B
    354  540f		       00		      .byte.b	0	;R (26)
    355  5410		       17		      .byte.b	23	;G
    356  5411		       00		      .byte.b	0	;B
    357  5412		       00		      .byte.b	0	;R (25)
    358  5413		       2d		      .byte.b	45	;G
    359  5414		       00		      .byte.b	0	;B
    360  5415		       00		      .byte.b	0	;R (24)
    361  5416		       b4		      .byte.b	180	;G
    362  5417		       00		      .byte.b	0	;B
    363  5418		       00		      .byte.b	0	;R (23)
    364  5419		       0a		      .byte.b	10	;G
    365  541a		       00		      .byte.b	0	;B
    366  541b		       10		      .byte.b	16	;R (22)
    367  541c		       3c		      .byte.b	60	;G
    368  541d		       00		      .byte.b	0	;B
    369  541e		       10		      .byte.b	16	;R (21)
    370  541f		       98		      .byte.b	152	;G
    371  5420		       00		      .byte.b	0	;B
    372  5421		       10		      .byte.b	16	;R (20)
    373  5422		       1a		      .byte.b	26	;G
    374  5423		       00		      .byte.b	0	;B
    375  5424		       00		      .byte.b	0	;R (19)
    376  5425		       14		      .byte.b	20	;G
    377  5426		       00		      .byte.b	0	;B
    378  5427		       00		      .byte.b	0	;R (18)
    379  5428		       5a		      .byte.b	90	;G
    380  5429		       00		      .byte.b	0	;B
    381  542a		       00		      .byte.b	0	;R (17)
    382  542b		       09		      .byte.b	9	;G
    383  542c		       00		      .byte.b	0	;B
    384  542d		       08		      .byte.b	8	;R (16)
    385  542e		       1d		      .byte.b	29	;G
    386  542f		       00		      .byte.b	0	;B
    387  5430		       00		      .byte.b	0	;R (15)
    388  5431		       1a		      .byte.b	26	;G
    389  5432		       00		      .byte.b	0	;B
    390  5433		       20		      .byte.b	32	;R (14)
    391  5434		       ba		      .byte.b	186	;G
    392  5435		       00		      .byte.b	0	;B
    393  5436		       00		      .byte.b	0	;R (13)
    394  5437		       12		      .byte.b	18	;G
    395  5438		       00		      .byte.b	0	;B
    396  5439		       00		      .byte.b	0	;R (12)
    397  543a		       1a		      .byte.b	26	;G
    398  543b		       00		      .byte.b	0	;B
    399  543c		       00		      .byte.b	0	;R (11)
    400  543d		       2d		      .byte.b	45	;G
    401  543e		       10		      .byte.b	16	;B
    402  543f		       10		      .byte.b	16	;R (10)
    403  5440		       3b		      .byte.b	59	;G
    404  5441		       00		      .byte.b	0	;B
    405  5442		       24		      .byte.b	36	;R (9)
    406  5443		       39		      .byte.b	57	;G
    407  5444		       04		      .byte.b	4	;B
    408  5445		       20		      .byte.b	32	;R (8)
    409  5446		       35		      .byte.b	53	;G
    410  5447		       00		      .byte.b	0	;B
    411  5448		       00		      .byte.b	0	;R (7)
    412  5449		       3d		      .byte.b	61	;G
    413  544a		       00		      .byte.b	0	;B
    414  544b		       00		      .byte.b	0	;R (6)
    415  544c		       32		      .byte.b	50	;G
    416  544d		       00		      .byte.b	0	;B
    417  544e		       00		      .byte.b	0	;R (5)
    418  544f		       98		      .byte.b	152	;G
    419  5450		       00		      .byte.b	0	;B
    420  5451		       00		      .byte.b	0	;R (4)
    421  5452		       12		      .byte.b	18	;G
    422  5453		       00		      .byte.b	0	;B
    423  5454		       00		      .byte.b	0	;R (3)
    424  5455		       20		      .byte.b	32	;G
    425  5456		       00		      .byte.b	0	;B
    426  5457		       01		      .byte.b	1	;R (2)
    427  5458		       49		      .byte.b	73	;G
    428  5459		       00		      .byte.b	0	;B
    429  545a		       20		      .byte.b	32	;R (1)
    430  545b		       20		      .byte.b	32	;G
    431  545c		       00		      .byte.b	0	;B
    432  545d		       00		      .byte.b	0	;R (0)
    433  545e		       00		      .byte.b	0	;G
    434  545f		       00		      .byte.b	0	;B
    435  5460				   COL_2
    436  5460		       14		      .byte.b	20	;R (71)
    437  5461		       14		      .byte.b	20	;G
    438  5462		       00		      .byte.b	0	;B
    439  5463		       40		      .byte.b	64	;R (70)
    440  5464		       42		      .byte.b	66	;G
    441  5465		       00		      .byte.b	0	;B
    442  5466		       a8		      .byte.b	168	;R (69)
    443  5467		       a8		      .byte.b	168	;G
    444  5468		       00		      .byte.b	0	;B
    445  5469		       fd		      .byte.b	253	;R (68)
    446  546a		       1d		      .byte.b	29	;G
    447  546b		       00		      .byte.b	0	;B
    448  546c		       f0		      .byte.b	240	;R (67)
    449  546d		       44		      .byte.b	68	;G
    450  546e		       08		      .byte.b	8	;B
    451  546f		       ff		      .byte.b	255	;R (66)
    452  5470		       2f		      .byte.b	47	;G
    453  5471		       00		      .byte.b	0	;B
    454  5472		       ff		      .byte.b	255	;R (65)
    455  5473		       0e		      .byte.b	14	;G
    456  5474		       00		      .byte.b	0	;B
    457  5475		       f8		      .byte.b	248	;R (64)
    458  5476		       0f		      .byte.b	15	;G
    459  5477		       00		      .byte.b	0	;B
    460  5478		       f8		      .byte.b	248	;R (63)
    461  5479		       2e		      .byte.b	46	;G
    462  547a		       00		      .byte.b	0	;B
    463  547b		       f8		      .byte.b	248	;R (62)
    464  547c		       1e		      .byte.b	30	;G
    465  547d		       01		      .byte.b	1	;B
    466  547e		       74		      .byte.b	116	;R (61)
    467  547f		       23		      .byte.b	35	;G
    468  5480		       88		      .byte.b	136	;B
    469  5481		       fc		      .byte.b	252	;R (60)
    470  5482		       0f		      .byte.b	15	;G
    471  5483		       00		      .byte.b	0	;B
    472  5484		       f8		      .byte.b	248	;R (59)
    473  5485		       06		      .byte.b	6	;G
    474  5486		       01		      .byte.b	1	;B
    475  5487		       f8		      .byte.b	248	;R (58)
    476  5488		       8f		      .byte.b	143	;G
    477  5489		       00		      .byte.b	0	;B
    478  548a		       e8		      .byte.b	232	;R (57)
    479  548b		       0e		      .byte.b	14	;G
    480  548c		       10		      .byte.b	16	;B
    481  548d		       e0		      .byte.b	224	;R (56)
    482  548e		       97		      .byte.b	151	;G
    483  548f		       00		      .byte.b	0	;B
    484  5490		       f0		      .byte.b	240	;R (55)
    485  5491		       3a		      .byte.b	58	;G
    486  5492		       00		      .byte.b	0	;B
    487  5493		       e0		      .byte.b	224	;R (54)
    488  5494		       bb		      .byte.b	187	;G
    489  5495		       04		      .byte.b	4	;B
    490  5496		       e0		      .byte.b	224	;R (53)
    491  5497		       3e		      .byte.b	62	;G
    492  5498		       00		      .byte.b	0	;B
    493  5499		       c0		      .byte.b	192	;R (52)
    494  549a		       2a		      .byte.b	42	;G
    495  549b		       00		      .byte.b	0	;B
    496  549c		       80		      .byte.b	128	;R (51)
    497  549d		       3f		      .byte.b	63	;G
    498  549e		       40		      .byte.b	64	;B
    499  549f		       f5		      .byte.b	245	;R (50)
    500  54a0		       3f		      .byte.b	63	;G
    501  54a1		       00		      .byte.b	0	;B
    502  54a2		       e8		      .byte.b	232	;R (49)
    503  54a3		       7f		      .byte.b	127	;G
    504  54a4		       00		      .byte.b	0	;B
    505  54a5		       e0		      .byte.b	224	;R (48)
    506  54a6		       7a		      .byte.b	122	;G
    507  54a7		       04		      .byte.b	4	;B
    508  54a8		       c0		      .byte.b	192	;R (47)
    509  54a9		       5f		      .byte.b	95	;G
    510  54aa		       00		      .byte.b	0	;B
    511  54ab		       90		      .byte.b	144	;R (46)
    512  54ac		       dd		      .byte.b	221	;G
    513  54ad		       02		      .byte.b	2	;B
    514  54ae		       84		      .byte.b	132	;R (45)
    515  54af		       9f		      .byte.b	159	;G
    516  54b0		       00		      .byte.b	0	;B
    517  54b1		       c4		      .byte.b	196	;R (44)
    518  54b2		       cf		      .byte.b	207	;G
    519  54b3		       00		      .byte.b	0	;B
    520  54b4		       c5		      .byte.b	197	;R (43)
    521  54b5		       1f		      .byte.b	31	;G
    522  54b6		       00		      .byte.b	0	;B
    523  54b7		       d4		      .byte.b	212	;R (42)
    524  54b8		       9f		      .byte.b	159	;G
    525  54b9		       20		      .byte.b	32	;B
    526  54ba		       c8		      .byte.b	200	;R (41)
    527  54bb		       1e		      .byte.b	30	;G
    528  54bc		       01		      .byte.b	1	;B
    529  54bd		       c8		      .byte.b	200	;R (40)
    530  54be		       5f		      .byte.b	95	;G
    531  54bf		       00		      .byte.b	0	;B
    532  54c0		       cd		      .byte.b	205	;R (39)
    533  54c1		       5e		      .byte.b	94	;G
    534  54c2		       00		      .byte.b	0	;B
    535  54c3		       c7		      .byte.b	199	;R (38)
    536  54c4		       5b		      .byte.b	91	;G
    537  54c5		       00		      .byte.b	0	;B
    538  54c6		       8b		      .byte.b	139	;R (37)
    539  54c7		       1c		      .byte.b	28	;G
    540  54c8		       00		      .byte.b	0	;B
    541  54c9		       81		      .byte.b	129	;R (36)
    542  54ca		       9a		      .byte.b	154	;G
    543  54cb		       04		      .byte.b	4	;B
    544  54cc		       8e		      .byte.b	142	;R (35)
    545  54cd		       9d		      .byte.b	157	;G
    546  54ce		       00		      .byte.b	0	;B
    547  54cf		       2b		      .byte.b	43	;R (34)
    548  54d0		       36		      .byte.b	54	;G
    549  54d1		       00		      .byte.b	0	;B
    550  54d2		       3a		      .byte.b	58	;R (33)
    551  54d3		       0d		      .byte.b	13	;G
    552  54d4		       00		      .byte.b	0	;B
    553  54d5		       3e		      .byte.b	62	;R (32)
    554  54d6		       85		      .byte.b	133	;G
    555  54d7		       40		      .byte.b	64	;B
    556  54d8		       fa		      .byte.b	250	;R (31)
    557  54d9		       17		      .byte.b	23	;G
    558  54da		       00		      .byte.b	0	;B
    559  54db		       ff		      .byte.b	255	;R (30)
    560  54dc		       03		      .byte.b	3	;G
    561  54dd		       00		      .byte.b	0	;B
    562  54de		       fc		      .byte.b	252	;R (29)
    563  54df		       93		      .byte.b	147	;G
    564  54e0		       00		      .byte.b	0	;B
    565  54e1		       f7		      .byte.b	247	;R (28)
    566  54e2		       81		      .byte.b	129	;G
    567  54e3		       08		      .byte.b	8	;B
    568  54e4		       ff		      .byte.b	255	;R (27)
    569  54e5		       03		      .byte.b	3	;G
    570  54e6		       00		      .byte.b	0	;B
    571  54e7		       fe		      .byte.b	254	;R (26)
    572  54e8		       2b		      .byte.b	43	;G
    573  54e9		       00		      .byte.b	0	;B
    574  54ea		       fe		      .byte.b	254	;R (25)
    575  54eb		       0a		      .byte.b	10	;G
    576  54ec		       00		      .byte.b	0	;B
    577  54ed		       fc		      .byte.b	252	;R (24)
    578  54ee		       4f		      .byte.b	79	;G
    579  54ef		       00		      .byte.b	0	;B
    580  54f0		       fc		      .byte.b	252	;R (23)
    581  54f1		       55		      .byte.b	85	;G
    582  54f2		       00		      .byte.b	0	;B
    583  54f3		       f8		      .byte.b	248	;R (22)
    584  54f4		       45		      .byte.b	69	;G
    585  54f5		       00		      .byte.b	0	;B
    586  54f6		       e8		      .byte.b	232	;R (21)
    587  54f7		       05		      .byte.b	5	;G
    588  54f8		       10		      .byte.b	16	;B
    589  54f9		       f8		      .byte.b	248	;R (20)
    590  54fa		       5b		      .byte.b	91	;G
    591  54fb		       00		      .byte.b	0	;B
    592  54fc		       f8		      .byte.b	248	;R (19)
    593  54fd		       1d		      .byte.b	29	;G
    594  54fe		       00		      .byte.b	0	;B
    595  54ff		       f0		      .byte.b	240	;R (18)
    596  5500		       55		      .byte.b	85	;G
    597  5501		       00		      .byte.b	0	;B
    598  5502		       f0		      .byte.b	240	;R (17)
    599  5503		       16		      .byte.b	22	;G
    600  5504		       00		      .byte.b	0	;B
    601  5505		       f0		      .byte.b	240	;R (16)
    602  5506		       b2		      .byte.b	178	;G
    603  5507		       00		      .byte.b	0	;B
    604  5508		       e0		      .byte.b	224	;R (15)
    605  5509		       0e		      .byte.b	14	;G
    606  550a		       10		      .byte.b	16	;B
    607  550b		       f0		      .byte.b	240	;R (14)
    608  550c		       93		      .byte.b	147	;G
    609  550d		       00		      .byte.b	0	;B
    610  550e		       e0		      .byte.b	224	;R (13)
    611  550f		       25		      .byte.b	37	;G
    612  5510		       00		      .byte.b	0	;B
    613  5511		       c0		      .byte.b	192	;R (12)
    614  5512		       e5		      .byte.b	229	;G
    615  5513		       00		      .byte.b	0	;B
    616  5514		       80		      .byte.b	128	;R (11)
    617  5515		       0e		      .byte.b	14	;G
    618  5516		       00		      .byte.b	0	;B
    619  5517		       c0		      .byte.b	192	;R (10)
    620  5518		       ca		      .byte.b	202	;G
    621  5519		       00		      .byte.b	0	;B
    622  551a		       84		      .byte.b	132	;R (9)
    623  551b		       8e		      .byte.b	142	;G
    624  551c		       00		      .byte.b	0	;B
    625  551d		       00		      .byte.b	0	;R (8)
    626  551e		       8e		      .byte.b	142	;G
    627  551f		       00		      .byte.b	0	;B
    628  5520		       00		      .byte.b	0	;R (7)
    629  5521		       15		      .byte.b	21	;G
    630  5522		       00		      .byte.b	0	;B
    631  5523		       00		      .byte.b	0	;R (6)
    632  5524		       14		      .byte.b	20	;G
    633  5525		       00		      .byte.b	0	;B
    634  5526		       00		      .byte.b	0	;R (5)
    635  5527		       14		      .byte.b	20	;G
    636  5528		       00		      .byte.b	0	;B
    637  5529		       00		      .byte.b	0	;R (4)
    638  552a		       0a		      .byte.b	10	;G
    639  552b		       00		      .byte.b	0	;B
    640  552c		       00		      .byte.b	0	;R (3)
    641  552d		       10		      .byte.b	16	;G
    642  552e		       00		      .byte.b	0	;B
    643  552f		       08		      .byte.b	8	;R (2)
    644  5530		       88		      .byte.b	136	;G
    645  5531		       00		      .byte.b	0	;B
    646  5532		       40		      .byte.b	64	;R (1)
    647  5533		       42		      .byte.b	66	;G
    648  5534		       00		      .byte.b	0	;B
    649  5535		       00		      .byte.b	0	;R (0)
    650  5536		       00		      .byte.b	0	;G
    651  5537		       00		      .byte.b	0	;B
    652  5538				   COL_3
    653  5538		       90		      .byte.b	144	;R (71)
    654  5539		       90		      .byte.b	144	;G
    655  553a		       00		      .byte.b	0	;B
    656  553b		       40		      .byte.b	64	;R (70)
    657  553c		       40		      .byte.b	64	;G
    658  553d		       00		      .byte.b	0	;B
    659  553e		       b0		      .byte.b	176	;R (69)
    660  553f		       b0		      .byte.b	176	;G
    661  5540		       00		      .byte.b	0	;B
    662  5541		       d0		      .byte.b	208	;R (68)
    663  5542		       00		      .byte.b	0	;G
    664  5543		       20		      .byte.b	32	;B
    665  5544		       f0		      .byte.b	240	;R (67)
    666  5545		       00		      .byte.b	0	;G
    667  5546		       00		      .byte.b	0	;B
    668  5547		       f0		      .byte.b	240	;R (66)
    669  5548		       d0		      .byte.b	208	;G
    670  5549		       00		      .byte.b	0	;B
    671  554a		       f0		      .byte.b	240	;R (65)
    672  554b		       00		      .byte.b	0	;G
    673  554c		       00		      .byte.b	0	;B
    674  554d		       f0		      .byte.b	240	;R (64)
    675  554e		       00		      .byte.b	0	;G
    676  554f		       00		      .byte.b	0	;B
    677  5550		       f0		      .byte.b	240	;R (63)
    678  5551		       50		      .byte.b	80	;G
    679  5552		       00		      .byte.b	0	;B
    680  5553		       f0		      .byte.b	240	;R (62)
    681  5554		       00		      .byte.b	0	;G
    682  5555		       00		      .byte.b	0	;B
    683  5556		       f0		      .byte.b	240	;R (61)
    684  5557		       a0		      .byte.b	160	;G
    685  5558		       00		      .byte.b	0	;B
    686  5559		       f0		      .byte.b	240	;R (60)
    687  555a		       00		      .byte.b	0	;G
    688  555b		       00		      .byte.b	0	;B
    689  555c		       f0		      .byte.b	240	;R (59)
    690  555d		       d0		      .byte.b	208	;G
    691  555e		       00		      .byte.b	0	;B
    692  555f		       f0		      .byte.b	240	;R (58)
    693  5560		       c0		      .byte.b	192	;G
    694  5561		       00		      .byte.b	0	;B
    695  5562		       f0		      .byte.b	240	;R (57)
    696  5563		       90		      .byte.b	144	;G
    697  5564		       00		      .byte.b	0	;B
    698  5565		       f0		      .byte.b	240	;R (56)
    699  5566		       80		      .byte.b	128	;G
    700  5567		       00		      .byte.b	0	;B
    701  5568		       f0		      .byte.b	240	;R (55)
    702  5569		       40		      .byte.b	64	;G
    703  556a		       00		      .byte.b	0	;B
    704  556b		       70		      .byte.b	112	;R (54)
    705  556c		       00		      .byte.b	0	;G
    706  556d		       80		      .byte.b	128	;B
    707  556e		       d0		      .byte.b	208	;R (53)
    708  556f		       00		      .byte.b	0	;G
    709  5570		       20		      .byte.b	32	;B
    710  5571		       f0		      .byte.b	240	;R (52)
    711  5572		       80		      .byte.b	128	;G
    712  5573		       00		      .byte.b	0	;B
    713  5574		       f0		      .byte.b	240	;R (51)
    714  5575		       00		      .byte.b	0	;G
    715  5576		       00		      .byte.b	0	;B
    716  5577		       f0		      .byte.b	240	;R (50)
    717  5578		       a0		      .byte.b	160	;G
    718  5579		       00		      .byte.b	0	;B
    719  557a		       f0		      .byte.b	240	;R (49)
    720  557b		       80		      .byte.b	128	;G
    721  557c		       00		      .byte.b	0	;B
    722  557d		       f0		      .byte.b	240	;R (48)
    723  557e		       40		      .byte.b	64	;G
    724  557f		       00		      .byte.b	0	;B
    725  5580		       f0		      .byte.b	240	;R (47)
    726  5581		       20		      .byte.b	32	;G
    727  5582		       00		      .byte.b	0	;B
    728  5583		       f0		      .byte.b	240	;R (46)
    729  5584		       00		      .byte.b	0	;G
    730  5585		       00		      .byte.b	0	;B
    731  5586		       f0		      .byte.b	240	;R (45)
    732  5587		       80		      .byte.b	128	;G
    733  5588		       00		      .byte.b	0	;B
    734  5589		       f0		      .byte.b	240	;R (44)
    735  558a		       00		      .byte.b	0	;G
    736  558b		       00		      .byte.b	0	;B
    737  558c		       f0		      .byte.b	240	;R (43)
    738  558d		       40		      .byte.b	64	;G
    739  558e		       00		      .byte.b	0	;B
    740  558f		       f0		      .byte.b	240	;R (42)
    741  5590		       00		      .byte.b	0	;G
    742  5591		       00		      .byte.b	0	;B
    743  5592		       f0		      .byte.b	240	;R (41)
    744  5593		       20		      .byte.b	32	;G
    745  5594		       00		      .byte.b	0	;B
    746  5595		       f0		      .byte.b	240	;R (40)
    747  5596		       20		      .byte.b	32	;G
    748  5597		       00		      .byte.b	0	;B
    749  5598		       f0		      .byte.b	240	;R (39)
    750  5599		       50		      .byte.b	80	;G
    751  559a		       00		      .byte.b	0	;B
    752  559b		       f0		      .byte.b	240	;R (38)
    753  559c		       10		      .byte.b	16	;G
    754  559d		       00		      .byte.b	0	;B
    755  559e		       70		      .byte.b	112	;R (37)
    756  559f		       80		      .byte.b	128	;G
    757  55a0		       80		      .byte.b	128	;B
    758  55a1		       f0		      .byte.b	240	;R (36)
    759  55a2		       50		      .byte.b	80	;G
    760  55a3		       00		      .byte.b	0	;B
    761  55a4		       f0		      .byte.b	240	;R (35)
    762  55a5		       00		      .byte.b	0	;G
    763  55a6		       00		      .byte.b	0	;B
    764  55a7		       f0		      .byte.b	240	;R (34)
    765  55a8		       40		      .byte.b	64	;G
    766  55a9		       00		      .byte.b	0	;B
    767  55aa		       f0		      .byte.b	240	;R (33)
    768  55ab		       10		      .byte.b	16	;G
    769  55ac		       00		      .byte.b	0	;B
    770  55ad		       f0		      .byte.b	240	;R (32)
    771  55ae		       b0		      .byte.b	176	;G
    772  55af		       00		      .byte.b	0	;B
    773  55b0		       e0		      .byte.b	224	;R (31)
    774  55b1		       00		      .byte.b	0	;G
    775  55b2		       10		      .byte.b	16	;B
    776  55b3		       e0		      .byte.b	224	;R (30)
    777  55b4		       40		      .byte.b	64	;G
    778  55b5		       00		      .byte.b	0	;B
    779  55b6		       e0		      .byte.b	224	;R (29)
    780  55b7		       20		      .byte.b	32	;G
    781  55b8		       00		      .byte.b	0	;B
    782  55b9		       c0		      .byte.b	192	;R (28)
    783  55ba		       00		      .byte.b	0	;G
    784  55bb		       00		      .byte.b	0	;B
    785  55bc		       c0		      .byte.b	192	;R (27)
    786  55bd		       10		      .byte.b	16	;G
    787  55be		       00		      .byte.b	0	;B
    788  55bf		       c0		      .byte.b	192	;R (26)
    789  55c0		       40		      .byte.b	64	;G
    790  55c1		       10		      .byte.b	16	;B
    791  55c2		       90		      .byte.b	144	;R (25)
    792  55c3		       00		      .byte.b	0	;G
    793  55c4		       00		      .byte.b	0	;B
    794  55c5		       f0		      .byte.b	240	;R (24)
    795  55c6		       60		      .byte.b	96	;G
    796  55c7		       00		      .byte.b	0	;B
    797  55c8		       f0		      .byte.b	240	;R (23)
    798  55c9		       00		      .byte.b	0	;G
    799  55ca		       00		      .byte.b	0	;B
    800  55cb		       f0		      .byte.b	240	;R (22)
    801  55cc		       40		      .byte.b	64	;G
    802  55cd		       00		      .byte.b	0	;B
    803  55ce		       f0		      .byte.b	240	;R (21)
    804  55cf		       10		      .byte.b	16	;G
    805  55d0		       00		      .byte.b	0	;B
    806  55d1		       f0		      .byte.b	240	;R (20)
    807  55d2		       00		      .byte.b	0	;G
    808  55d3		       00		      .byte.b	0	;B
    809  55d4		       f0		      .byte.b	240	;R (19)
    810  55d5		       60		      .byte.b	96	;G
    811  55d6		       00		      .byte.b	0	;B
    812  55d7		       f0		      .byte.b	240	;R (18)
    813  55d8		       20		      .byte.b	32	;G
    814  55d9		       00		      .byte.b	0	;B
    815  55da		       f0		      .byte.b	240	;R (17)
    816  55db		       50		      .byte.b	80	;G
    817  55dc		       00		      .byte.b	0	;B
    818  55dd		       f0		      .byte.b	240	;R (16)
    819  55de		       40		      .byte.b	64	;G
    820  55df		       00		      .byte.b	0	;B
    821  55e0		       f0		      .byte.b	240	;R (15)
    822  55e1		       80		      .byte.b	128	;G
    823  55e2		       00		      .byte.b	0	;B
    824  55e3		       f0		      .byte.b	240	;R (14)
    825  55e4		       40		      .byte.b	64	;G
    826  55e5		       00		      .byte.b	0	;B
    827  55e6		       f0		      .byte.b	240	;R (13)
    828  55e7		       00		      .byte.b	0	;G
    829  55e8		       00		      .byte.b	0	;B
    830  55e9		       f0		      .byte.b	240	;R (12)
    831  55ea		       10		      .byte.b	16	;G
    832  55eb		       00		      .byte.b	0	;B
    833  55ec		       f0		      .byte.b	240	;R (11)
    834  55ed		       50		      .byte.b	80	;G
    835  55ee		       00		      .byte.b	0	;B
    836  55ef		       f0		      .byte.b	240	;R (10)
    837  55f0		       00		      .byte.b	0	;G
    838  55f1		       00		      .byte.b	0	;B
    839  55f2		       f0		      .byte.b	240	;R (9)
    840  55f3		       b0		      .byte.b	176	;G
    841  55f4		       00		      .byte.b	0	;B
    842  55f5		       f0		      .byte.b	240	;R (8)
    843  55f6		       90		      .byte.b	144	;G
    844  55f7		       00		      .byte.b	0	;B
    845  55f8		       e0		      .byte.b	224	;R (7)
    846  55f9		       e0		      .byte.b	224	;G
    847  55fa		       00		      .byte.b	0	;B
    848  55fb		       f0		      .byte.b	240	;R (6)
    849  55fc		       d0		      .byte.b	208	;G
    850  55fd		       00		      .byte.b	0	;B
    851  55fe		       60		      .byte.b	96	;R (5)
    852  55ff		       00		      .byte.b	0	;G
    853  5600		       00		      .byte.b	0	;B
    854  5601		       60		      .byte.b	96	;R (4)
    855  5602		       40		      .byte.b	64	;G
    856  5603		       00		      .byte.b	0	;B
    857  5604		       40		      .byte.b	64	;R (3)
    858  5605		       50		      .byte.b	80	;G
    859  5606		       00		      .byte.b	0	;B
    860  5607		       00		      .byte.b	0	;R (2)
    861  5608		       00		      .byte.b	0	;G
    862  5609		       00		      .byte.b	0	;B
    863  560a		       00		      .byte.b	0	;R (1)
    864  560b		       80		      .byte.b	128	;G
    865  560c		       00		      .byte.b	0	;B
    866  560d		       00		      .byte.b	0	;R (0)
    867  560e		       00		      .byte.b	0	;G
    868  560f		       00		      .byte.b	0	;B
    869  5610				   COL_4
    870  5610		       25		      .byte.b	37	;R (71)
    871  5611		       25		      .byte.b	37	;G
    872  5612		       00		      .byte.b	0	;B
    873  5613		       48		      .byte.b	72	;R (70)
    874  5614		       48		      .byte.b	72	;G
    875  5615		       00		      .byte.b	0	;B
    876  5616		       25		      .byte.b	37	;R (69)
    877  5617		       25		      .byte.b	37	;G
    878  5618		       88		      .byte.b	136	;B
    879  5619		       ff		      .byte.b	255	;R (68)
    880  561a		       00		      .byte.b	0	;G
    881  561b		       00		      .byte.b	0	;B
    882  561c		       ff		      .byte.b	255	;R (67)
    883  561d		       04		      .byte.b	4	;G
    884  561e		       00		      .byte.b	0	;B
    885  561f		       ef		      .byte.b	239	;R (66)
    886  5620		       40		      .byte.b	64	;G
    887  5621		       10		      .byte.b	16	;B
    888  5622		       ff		      .byte.b	255	;R (65)
    889  5623		       00		      .byte.b	0	;G
    890  5624		       00		      .byte.b	0	;B
    891  5625		       ff		      .byte.b	255	;R (64)
    892  5626		       02		      .byte.b	2	;G
    893  5627		       00		      .byte.b	0	;B
    894  5628		       ff		      .byte.b	255	;R (63)
    895  5629		       20		      .byte.b	32	;G
    896  562a		       00		      .byte.b	0	;B
    897  562b		       ff		      .byte.b	255	;R (62)
    898  562c		       a5		      .byte.b	165	;G
    899  562d		       00		      .byte.b	0	;B
    900  562e		       ff		      .byte.b	255	;R (61)
    901  562f		       09		      .byte.b	9	;G
    902  5630		       00		      .byte.b	0	;B
    903  5631		       ff		      .byte.b	255	;R (60)
    904  5632		       00		      .byte.b	0	;G
    905  5633		       00		      .byte.b	0	;B
    906  5634		       7f		      .byte.b	127	;R (59)
    907  5635		       42		      .byte.b	66	;G
    908  5636		       80		      .byte.b	128	;B
    909  5637		       ff		      .byte.b	255	;R (58)
    910  5638		       88		      .byte.b	136	;G
    911  5639		       00		      .byte.b	0	;B
    912  563a		       ff		      .byte.b	255	;R (57)
    913  563b		       40		      .byte.b	64	;G
    914  563c		       00		      .byte.b	0	;B
    915  563d		       ff		      .byte.b	255	;R (56)
    916  563e		       09		      .byte.b	9	;G
    917  563f		       00		      .byte.b	0	;B
    918  5640		       7f		      .byte.b	127	;R (55)
    919  5641		       01		      .byte.b	1	;G
    920  5642		       80		      .byte.b	128	;B
    921  5643		       ff		      .byte.b	255	;R (54)
    922  5644		       91		      .byte.b	145	;G
    923  5645		       00		      .byte.b	0	;B
    924  5646		       fe		      .byte.b	254	;R (53)
    925  5647		       81		      .byte.b	129	;G
    926  5648		       00		      .byte.b	0	;B
    927  5649		       fe		      .byte.b	254	;R (52)
    928  564a		       20		      .byte.b	32	;G
    929  564b		       00		      .byte.b	0	;B
    930  564c		       ff		      .byte.b	255	;R (51)
    931  564d		       03		      .byte.b	3	;G
    932  564e		       00		      .byte.b	0	;B
    933  564f		       ff		      .byte.b	255	;R (50)
    934  5650		       83		      .byte.b	131	;G
    935  5651		       00		      .byte.b	0	;B
    936  5652		       fe		      .byte.b	254	;R (49)
    937  5653		       90		      .byte.b	144	;G
    938  5654		       00		      .byte.b	0	;B
    939  5655		       fe		      .byte.b	254	;R (48)
    940  5656		       83		      .byte.b	131	;G
    941  5657		       00		      .byte.b	0	;B
    942  5658		       7e		      .byte.b	126	;R (47)
    943  5659		       12		      .byte.b	18	;G
    944  565a		       80		      .byte.b	128	;B
    945  565b		       fc		      .byte.b	252	;R (46)
    946  565c		       00		      .byte.b	0	;G
    947  565d		       00		      .byte.b	0	;B
    948  565e		       fe		      .byte.b	254	;R (45)
    949  565f		       07		      .byte.b	7	;G
    950  5660		       00		      .byte.b	0	;B
    951  5661		       ef		      .byte.b	239	;R (44)
    952  5662		       03		      .byte.b	3	;G
    953  5663		       10		      .byte.b	16	;B
    954  5664		       ff		      .byte.b	255	;R (43)
    955  5665		       40		      .byte.b	64	;G
    956  5666		       00		      .byte.b	0	;B
    957  5667		       ff		      .byte.b	255	;R (42)
    958  5668		       01		      .byte.b	1	;G
    959  5669		       00		      .byte.b	0	;B
    960  566a		       ff		      .byte.b	255	;R (41)
    961  566b		       01		      .byte.b	1	;G
    962  566c		       00		      .byte.b	0	;B
    963  566d		       bf		      .byte.b	191	;R (40)
    964  566e		       01		      .byte.b	1	;G
    965  566f		       40		      .byte.b	64	;B
    966  5670		       f7		      .byte.b	247	;R (39)
    967  5671		       80		      .byte.b	128	;G
    968  5672		       08		      .byte.b	8	;B
    969  5673		       ff		      .byte.b	255	;R (38)
    970  5674		       40		      .byte.b	64	;G
    971  5675		       00		      .byte.b	0	;B
    972  5676		       ff		      .byte.b	255	;R (37)
    973  5677		       00		      .byte.b	0	;G
    974  5678		       00		      .byte.b	0	;B
    975  5679		       ff		      .byte.b	255	;R (36)
    976  567a		       40		      .byte.b	64	;G
    977  567b		       00		      .byte.b	0	;B
    978  567c		       ff		      .byte.b	255	;R (35)
    979  567d		       a1		      .byte.b	161	;G
    980  567e		       00		      .byte.b	0	;B
    981  567f		       7f		      .byte.b	127	;R (34)
    982  5680		       05		      .byte.b	5	;G
    983  5681		       80		      .byte.b	128	;B
    984  5682		       ff		      .byte.b	255	;R (33)
    985  5683		       21		      .byte.b	33	;G
    986  5684		       00		      .byte.b	0	;B
    987  5685		       bf		      .byte.b	191	;R (32)
    988  5686		       40		      .byte.b	64	;G
    989  5687		       40		      .byte.b	64	;B
    990  5688		       ff		      .byte.b	255	;R (31)
    991  5689		       61		      .byte.b	97	;G
    992  568a		       00		      .byte.b	0	;B
    993  568b		       7f		      .byte.b	127	;R (30)
    994  568c		       81		      .byte.b	129	;G
    995  568d		       80		      .byte.b	128	;B
    996  568e		       f7		      .byte.b	247	;R (29)
    997  568f		       60		      .byte.b	96	;G
    998  5690		       08		      .byte.b	8	;B
    999  5691		       ff		      .byte.b	255	;R (28)
   1000  5692		       81		      .byte.b	129	;G
   1001  5693		       00		      .byte.b	0	;B
   1002  5694		       ef		      .byte.b	239	;R (27)
   1003  5695		       40		      .byte.b	64	;G
   1004  5696		       10		      .byte.b	16	;B
   1005  5697		       ff		      .byte.b	255	;R (26)
   1006  5698		       60		      .byte.b	96	;G
   1007  5699		       00		      .byte.b	0	;B
   1008  569a		       ff		      .byte.b	255	;R (25)
   1009  569b		       18		      .byte.b	24	;G
   1010  569c		       00		      .byte.b	0	;B
   1011  569d		       ff		      .byte.b	255	;R (24)
   1012  569e		       20		      .byte.b	32	;G
   1013  569f		       00		      .byte.b	0	;B
   1014  56a0		       ff		      .byte.b	255	;R (23)
   1015  56a1		       8a		      .byte.b	138	;G
   1016  56a2		       00		      .byte.b	0	;B
   1017  56a3		       f7		      .byte.b	247	;R (22)
   1018  56a4		       10		      .byte.b	16	;G
   1019  56a5		       08		      .byte.b	8	;B
   1020  56a6		       ff		      .byte.b	255	;R (21)
   1021  56a7		       04		      .byte.b	4	;G
   1022  56a8		       00		      .byte.b	0	;B
   1023  56a9		       df		      .byte.b	223	;R (20)
   1024  56aa		       10		      .byte.b	16	;G
   1025  56ab		       20		      .byte.b	32	;B
   1026  56ac		       ff		      .byte.b	255	;R (19)
   1027  56ad		       90		      .byte.b	144	;G
   1028  56ae		       00		      .byte.b	0	;B
   1029  56af		       ff		      .byte.b	255	;R (18)
   1030  56b0		       12		      .byte.b	18	;G
   1031  56b1		       00		      .byte.b	0	;B
   1032  56b2		       ff		      .byte.b	255	;R (17)
   1033  56b3		       00		      .byte.b	0	;G
   1034  56b4		       00		      .byte.b	0	;B
   1035  56b5		       ff		      .byte.b	255	;R (16)
   1036  56b6		       45		      .byte.b	69	;G
   1037  56b7		       00		      .byte.b	0	;B
   1038  56b8		       ff		      .byte.b	255	;R (15)
   1039  56b9		       10		      .byte.b	16	;G
   1040  56ba		       00		      .byte.b	0	;B
   1041  56bb		       ff		      .byte.b	255	;R (14)
   1042  56bc		       23		      .byte.b	35	;G
   1043  56bd		       00		      .byte.b	0	;B
   1044  56be		       fc		      .byte.b	252	;R (13)
   1045  56bf		       12		      .byte.b	18	;G
   1046  56c0		       00		      .byte.b	0	;B
   1047  56c1		       fc		      .byte.b	252	;R (12)
   1048  56c2		       20		      .byte.b	32	;G
   1049  56c3		       00		      .byte.b	0	;B
   1050  56c4		       fe		      .byte.b	254	;R (11)
   1051  56c5		       46		      .byte.b	70	;G
   1052  56c6		       00		      .byte.b	0	;B
   1053  56c7		       f8		      .byte.b	248	;R (10)
   1054  56c8		       48		      .byte.b	72	;G
   1055  56c9		       00		      .byte.b	0	;B
   1056  56ca		       f0		      .byte.b	240	;R (9)
   1057  56cb		       04		      .byte.b	4	;G
   1058  56cc		       00		      .byte.b	0	;B
   1059  56cd		       e0		      .byte.b	224	;R (8)
   1060  56ce		       20		      .byte.b	32	;G
   1061  56cf		       00		      .byte.b	0	;B
   1062  56d0		       e0		      .byte.b	224	;R (7)
   1063  56d1		       29		      .byte.b	41	;G
   1064  56d2		       00		      .byte.b	0	;B
   1065  56d3		       e0		      .byte.b	224	;R (6)
   1066  56d4		       20		      .byte.b	32	;G
   1067  56d5		       00		      .byte.b	0	;B
   1068  56d6		       e0		      .byte.b	224	;R (5)
   1069  56d7		       84		      .byte.b	132	;G
   1070  56d8		       00		      .byte.b	0	;B
   1071  56d9		       60		      .byte.b	96	;R (4)
   1072  56da		       40		      .byte.b	64	;G
   1073  56db		       00		      .byte.b	0	;B
   1074  56dc		       00		      .byte.b	0	;R (3)
   1075  56dd		       88		      .byte.b	136	;G
   1076  56de		       00		      .byte.b	0	;B
   1077  56df		       00		      .byte.b	0	;R (2)
   1078  56e0		       11		      .byte.b	17	;G
   1079  56e1		       00		      .byte.b	0	;B
   1080  56e2		       24		      .byte.b	36	;R (1)
   1081  56e3		       24		      .byte.b	36	;G
   1082  56e4		       00		      .byte.b	0	;B
   1083  56e5		       00		      .byte.b	0	;R (0)
   1084  56e6		       00		      .byte.b	0	;G
   1085  56e7		       00		      .byte.b	0	;B
   1086  56e8				   COL_5
   1087  56e8		       02		      .byte.b	2	;R (71)
   1088  56e9		       12		      .byte.b	18	;G
   1089  56ea		       00		      .byte.b	0	;B
   1090  56eb		       00		      .byte.b	0	;R (70)
   1091  56ec		       00		      .byte.b	0	;G
   1092  56ed		       00		      .byte.b	0	;B
   1093  56ee		       00		      .byte.b	0	;R (69)
   1094  56ef		       02		      .byte.b	2	;G
   1095  56f0		       00		      .byte.b	0	;B
   1096  56f1		       03		      .byte.b	3	;R (68)
   1097  56f2		       12		      .byte.b	18	;G
   1098  56f3		       00		      .byte.b	0	;B
   1099  56f4		       0b		      .byte.b	11	;R (67)
   1100  56f5		       09		      .byte.b	9	;G
   1101  56f6		       00		      .byte.b	0	;B
   1102  56f7		       07		      .byte.b	7	;R (66)
   1103  56f8		       05		      .byte.b	5	;G
   1104  56f9		       00		      .byte.b	0	;B
   1105  56fa		       03		      .byte.b	3	;R (65)
   1106  56fb		       06		      .byte.b	6	;G
   1107  56fc		       00		      .byte.b	0	;B
   1108  56fd		       01		      .byte.b	1	;R (64)
   1109  56fe		       20		      .byte.b	32	;G
   1110  56ff		       00		      .byte.b	0	;B
   1111  5700		       03		      .byte.b	3	;R (63)
   1112  5701		       03		      .byte.b	3	;G
   1113  5702		       00		      .byte.b	0	;B
   1114  5703		       03		      .byte.b	3	;R (62)
   1115  5704		       0a		      .byte.b	10	;G
   1116  5705		       00		      .byte.b	0	;B
   1117  5706		       03		      .byte.b	3	;R (61)
   1118  5707		       02		      .byte.b	2	;G
   1119  5708		       00		      .byte.b	0	;B
   1120  5709		       03		      .byte.b	3	;R (60)
   1121  570a		       00		      .byte.b	0	;G
   1122  570b		       00		      .byte.b	0	;B
   1123  570c		       03		      .byte.b	3	;R (59)
   1124  570d		       0a		      .byte.b	10	;G
   1125  570e		       00		      .byte.b	0	;B
   1126  570f		       03		      .byte.b	3	;R (58)
   1127  5710		       02		      .byte.b	2	;G
   1128  5711		       00		      .byte.b	0	;B
   1129  5712		       01		      .byte.b	1	;R (57)
   1130  5713		       03		      .byte.b	3	;G
   1131  5714		       00		      .byte.b	0	;B
   1132  5715		       01		      .byte.b	1	;R (56)
   1133  5716		       01		      .byte.b	1	;G
   1134  5717		       00		      .byte.b	0	;B
   1135  5718		       00		      .byte.b	0	;R (55)
   1136  5719		       25		      .byte.b	37	;G
   1137  571a		       00		      .byte.b	0	;B
   1138  571b		       00		      .byte.b	0	;R (54)
   1139  571c		       00		      .byte.b	0	;G
   1140  571d		       00		      .byte.b	0	;B
   1141  571e		       00		      .byte.b	0	;R (53)
   1142  571f		       20		      .byte.b	32	;G
   1143  5720		       00		      .byte.b	0	;B
   1144  5721		       00		      .byte.b	0	;R (52)
   1145  5722		       08		      .byte.b	8	;G
   1146  5723		       00		      .byte.b	0	;B
   1147  5724		       00		      .byte.b	0	;R (51)
   1148  5725		       02		      .byte.b	2	;G
   1149  5726		       00		      .byte.b	0	;B
   1150  5727		       00		      .byte.b	0	;R (50)
   1151  5728		       40		      .byte.b	64	;G
   1152  5729		       00		      .byte.b	0	;B
   1153  572a		       00		      .byte.b	0	;R (49)
   1154  572b		       11		      .byte.b	17	;G
   1155  572c		       00		      .byte.b	0	;B
   1156  572d		       00		      .byte.b	0	;R (48)
   1157  572e		       00		      .byte.b	0	;G
   1158  572f		       00		      .byte.b	0	;B
   1159  5730		       00		      .byte.b	0	;R (47)
   1160  5731		       20		      .byte.b	32	;G
   1161  5732		       00		      .byte.b	0	;B
   1162  5733		       00		      .byte.b	0	;R (46)
   1163  5734		       08		      .byte.b	8	;G
   1164  5735		       00		      .byte.b	0	;B
   1165  5736		       00		      .byte.b	0	;R (45)
   1166  5737		       00		      .byte.b	0	;G
   1167  5738		       00		      .byte.b	0	;B
   1168  5739		       00		      .byte.b	0	;R (44)
   1169  573a		       24		      .byte.b	36	;G
   1170  573b		       00		      .byte.b	0	;B
   1171  573c		       00		      .byte.b	0	;R (43)
   1172  573d		       00		      .byte.b	0	;G
   1173  573e		       00		      .byte.b	0	;B
   1174  573f		       00		      .byte.b	0	;R (42)
   1175  5740		       04		      .byte.b	4	;G
   1176  5741		       00		      .byte.b	0	;B
   1177  5742		       00		      .byte.b	0	;R (41)
   1178  5743		       21		      .byte.b	33	;G
   1179  5744		       00		      .byte.b	0	;B
   1180  5745		       01		      .byte.b	1	;R (40)
   1181  5746		       01		      .byte.b	1	;G
   1182  5747		       00		      .byte.b	0	;B
   1183  5748		       01		      .byte.b	1	;R (39)
   1184  5749		       25		      .byte.b	37	;G
   1185  574a		       00		      .byte.b	0	;B
   1186  574b		       01		      .byte.b	1	;R (38)
   1187  574c		       01		      .byte.b	1	;G
   1188  574d		       00		      .byte.b	0	;B
   1189  574e		       03		      .byte.b	3	;R (37)
   1190  574f		       23		      .byte.b	35	;G
   1191  5750		       00		      .byte.b	0	;B
   1192  5751		       03		      .byte.b	3	;R (36)
   1193  5752		       13		      .byte.b	19	;G
   1194  5753		       00		      .byte.b	0	;B
   1195  5754		       01		      .byte.b	1	;R (35)
   1196  5755		       02		      .byte.b	2	;G
   1197  5756		       00		      .byte.b	0	;B
   1198  5757		       01		      .byte.b	1	;R (34)
   1199  5758		       10		      .byte.b	16	;G
   1200  5759		       00		      .byte.b	0	;B
   1201  575a		       03		      .byte.b	3	;R (33)
   1202  575b		       02		      .byte.b	2	;G
   1203  575c		       00		      .byte.b	0	;B
   1204  575d		       01		      .byte.b	1	;R (32)
   1205  575e		       08		      .byte.b	8	;G
   1206  575f		       00		      .byte.b	0	;B
   1207  5760		       03		      .byte.b	3	;R (31)
   1208  5761		       20		      .byte.b	32	;G
   1209  5762		       00		      .byte.b	0	;B
   1210  5763		       03		      .byte.b	3	;R (30)
   1211  5764		       00		      .byte.b	0	;G
   1212  5765		       00		      .byte.b	0	;B
   1213  5766		       03		      .byte.b	3	;R (29)
   1214  5767		       10		      .byte.b	16	;G
   1215  5768		       00		      .byte.b	0	;B
   1216  5769		       03		      .byte.b	3	;R (28)
   1217  576a		       00		      .byte.b	0	;G
   1218  576b		       00		      .byte.b	0	;B
   1219  576c		       07		      .byte.b	7	;R (27)
   1220  576d		       0e		      .byte.b	14	;G
   1221  576e		       00		      .byte.b	0	;B
   1222  576f		       03		      .byte.b	3	;R (26)
   1223  5770		       41		      .byte.b	65	;G
   1224  5771		       00		      .byte.b	0	;B
   1225  5772		       07		      .byte.b	7	;R (25)
   1226  5773		       04		      .byte.b	4	;G
   1227  5774		       00		      .byte.b	0	;B
   1228  5775		       03		      .byte.b	3	;R (24)
   1229  5776		       21		      .byte.b	33	;G
   1230  5777		       00		      .byte.b	0	;B
   1231  5778		       03		      .byte.b	3	;R (23)
   1232  5779		       04		      .byte.b	4	;G
   1233  577a		       00		      .byte.b	0	;B
   1234  577b		       03		      .byte.b	3	;R (22)
   1235  577c		       02		      .byte.b	2	;G
   1236  577d		       00		      .byte.b	0	;B
   1237  577e		       03		      .byte.b	3	;R (21)
   1238  577f		       26		      .byte.b	38	;G
   1239  5780		       00		      .byte.b	0	;B
   1240  5781		       01		      .byte.b	1	;R (20)
   1241  5782		       01		      .byte.b	1	;G
   1242  5783		       00		      .byte.b	0	;B
   1243  5784		       00		      .byte.b	0	;R (19)
   1244  5785		       21		      .byte.b	33	;G
   1245  5786		       00		      .byte.b	0	;B
   1246  5787		       01		      .byte.b	1	;R (18)
   1247  5788		       09		      .byte.b	9	;G
   1248  5789		       00		      .byte.b	0	;B
   1249  578a		       23		      .byte.b	35	;R (17)
   1250  578b		       22		      .byte.b	34	;G
   1251  578c		       00		      .byte.b	0	;B
   1252  578d		       01		      .byte.b	1	;R (16)
   1253  578e		       01		      .byte.b	1	;G
   1254  578f		       00		      .byte.b	0	;B
   1255  5790		       00		      .byte.b	0	;R (15)
   1256  5791		       29		      .byte.b	41	;G
   1257  5792		       00		      .byte.b	0	;B
   1258  5793		       00		      .byte.b	0	;R (14)
   1259  5794		       00		      .byte.b	0	;G
   1260  5795		       00		      .byte.b	0	;B
   1261  5796		       00		      .byte.b	0	;R (13)
   1262  5797		       04		      .byte.b	4	;G
   1263  5798		       00		      .byte.b	0	;B
   1264  5799		       00		      .byte.b	0	;R (12)
   1265  579a		       20		      .byte.b	32	;G
   1266  579b		       00		      .byte.b	0	;B
   1267  579c		       10		      .byte.b	16	;R (11)
   1268  579d		       12		      .byte.b	18	;G
   1269  579e		       00		      .byte.b	0	;B
   1270  579f		       00		      .byte.b	0	;R (10)
   1271  57a0		       00		      .byte.b	0	;G
   1272  57a1		       00		      .byte.b	0	;B
   1273  57a2		       00		      .byte.b	0	;R (9)
   1274  57a3		       21		      .byte.b	33	;G
   1275  57a4		       00		      .byte.b	0	;B
   1276  57a5		       00		      .byte.b	0	;R (8)
   1277  57a6		       08		      .byte.b	8	;G
   1278  57a7		       00		      .byte.b	0	;B
   1279  57a8		       00		      .byte.b	0	;R (7)
   1280  57a9		       20		      .byte.b	32	;G
   1281  57aa		       00		      .byte.b	0	;B
   1282  57ab		       00		      .byte.b	0	;R (6)
   1283  57ac		       04		      .byte.b	4	;G
   1284  57ad		       00		      .byte.b	0	;B
   1285  57ae		       20		      .byte.b	32	;R (5)
   1286  57af		       20		      .byte.b	32	;G
   1287  57b0		       00		      .byte.b	0	;B
   1288  57b1		       00		      .byte.b	0	;R (4)
   1289  57b2		       09		      .byte.b	9	;G
   1290  57b3		       00		      .byte.b	0	;B
   1291  57b4		       00		      .byte.b	0	;R (3)
   1292  57b5		       00		      .byte.b	0	;G
   1293  57b6		       00		      .byte.b	0	;B
   1294  57b7		       00		      .byte.b	0	;R (2)
   1295  57b8		       48		      .byte.b	72	;G
   1296  57b9		       00		      .byte.b	0	;B
   1297  57ba		       02		      .byte.b	2	;R (1)
   1298  57bb		       02		      .byte.b	2	;G
   1299  57bc		       00		      .byte.b	0	;B
   1300  57bd		       00		      .byte.b	0	;R (0)
   1301  57be		       00		      .byte.b	0	;G
   1302  57bf		       00		      .byte.b	0	;B
------- FILE titleScreen.asm
    262  57c0							;    include "pizza.asm"
    263  57c0
      0  57c0					      CHECK_BANK_SIZE	"TITLESCREEN"
      1  57c0		       07 c0	   .TEMP      =	* - BANK_START
 TITLESCREEN (2K) SIZE =  $7c0 , FREE= $40
      2  57c0					      ECHO	"TITLESCREEN", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  57c0				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  57c0				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  57c0				  -	      ERR
      6  57c0					      endif
------- FILE ./chess.asm
    366  57c0
    367  57c0							; The handlers for piece move generation
------- FILE Handler_BANK1.asm LEVEL 2 PASS 2
      0  57c0					      include	"Handler_BANK1.asm"
      1  57c0							; Copyright (C)2020 Andrew Davie
      2  57c0
      3  57c0							;---------------------------------------------------------------------------------------------------
      4  57c0
      0  57c0					      NEWRAMBANK	MOVES_RAM	; RAM bank for holding the following ROM shadow
      1  57c0
      2  57c0
      3  57c0
      4 U2000 ????				      SEG.U	MOVES_RAM
      5 U2000					      ORG	ORIGIN_RAM
      6 U2000					      RORG	RAM_3E
      7 U2000				   BANK_START SET	*
      8 U2000				   RAMBANK_MOVES_RAM SET	ORIGIN_RAM / RAM_SIZE
      9 U2000				   _CURRENT_RAMBANK SET	RAMBANK_MOVES_RAM
     10 U2000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U2000					      NEWBANK	MOVES	; copy the following bank to RAMBANK_MOVES_RAM
      1  5bdf ????				      SEG	MOVES
      2  5800					      ORG	ORIGIN
      3  5800					      RORG	$F000
      4  5800				   BANK_START SET	*
      5  5800				   MOVES      SET	ORIGIN / 2048
      6  5800				   ORIGIN     SET	ORIGIN + 2048
      7  5800				   _CURRENT_BANK SET	MOVES
      7  5800
      8  5800
      9  5800							; Board is a 10 x 12 object which simplifies the generation of moves
     10  5800							; The squares marked '░░░' are illegal. The ("X12") index of each square is the left
     11  5800							; number + the bottom number. The "BASE64" square numbering is used to simplify movement code.
     12  5800							; Bottom left legal square (AS VISIBLE ON SCREEN) is #22
     13  5800
     14  5800							;     X12 numbering
     15  5800							;    ┏━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┓
     16  5800							;110 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃	      BASE64 numbering
     17  5800							;100 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃	      ┏━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┓
     18  5800							; 90 ┃░░░┊░░░┊ 92┊ 93┊ 94┊ 95┊ 96┊ 97┊ 98┊ 99┃  BLACK    8 ┃ 56┊ 57┊ 58┊ 59┊ 60┊ 61┊ 62┊ 63┃
     19  5800							; 80 ┃░░░┊░░░┊ 82┊ 83┊ 84┊ 85┊ 86┊ 87┊ 88┊ 89┃  BLACK    7 ┃ 48┊ 49┊ 50┊ 51┊ 52┊ 53┊ 54┊ 55┃
     20  5800							; 70 ┃░░░┊░░░┊ 72┊ 73┊ 74┊ 75┊ 76┊ 77┊ 78┊ 79┃	    6 ┃ 40┊ 41┊ 42┊ 43┊ 44┊ 45┊ 46┊ 47┃
     21  5800							; 60 ┃░░░┊░░░┊ 62┊ 63┊ 64┊ 65┊ 66┊ 67┊ 68┊ 69┃	    5 ┃ 32┊ 33┊ 34┊ 35┊ 36┊ 37┊ 38┊ 39┃
     22  5800							; 50 ┃░░░┊░░░┊ 52┊ 53┊ 54┊ 55┊ 56┊ 57┊ 58┊ 59┃	    4 ┃ 24┊ 25┊ 26┊ 27┊ 28┊ 29┊ 30┊ 31┃
     23  5800							; 40 ┃░░░┊░░░┊ 42┊ 43┊ 44┊ 45┊ 46┊ 47┊ 48┊ 49┃	    3 ┃ 16┊ 17┊ 18┊ 19┊ 20┊ 21┊ 22┊ 23┃
     24  5800							; 30 ┃░░░┊░░░┊ 32┊ 33┊ 34┊ 35┊ 36┊ 37┊ 38┊ 39┃  WHITE    2 ┃  8┊  9┊ 10┊ 11┊ 12┊ 13┊ 14┊ 15┃
     25  5800							; 20 ┃░░░┊░░░┊ 22┊ 23┊ 24┊ 25┊ 26┊ 27┊ 28┊ 29┃  WHITE    1 ┃  0┊  1┊  2┊  3┊  4┊  5┊  6┊  7┃
     26  5800							; 10 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃	      ┗━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┛
     27  5800							;  0 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃		A   B	C   D	E   F	G   H
     28  5800							;    ┗━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┛
     29  5800							;	0   1	2   3	4   5	6   7	8   9
     30  5800							;		A   B	C   D	E   F	G   H
     31  5800
     32  5800							;     HEX X12
     33  5800							;    ┏━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┯━━━┓
     34  5800							;110 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃
     35  5800							;100 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃
     36  5800							; 90 ┃░░░┊░░░┊$5C┊$5D┊$5E┊$5F┊$60┊$61┊$62┊$63┃
     37  5800							; 80 ┃░░░┊░░░┊$52┊$53┊$54┊$55┊$56┊$57┊$58┊$59┃
     38  5800							; 70 ┃░░░┊░░░┊$48┊$49┊$4A┊$4B┊$4C┊$4D┊$4E┊$4F┃
     39  5800							; 60 ┃░░░┊░░░┊$3E┊$3F┊$40┊$41┊$42┊$43┊$44┊$45┃
     40  5800							; 50 ┃░░░┊░░░┊$34┊$35┊$36┊$37┊$38┊$39┊$3A┊$3B┃
     41  5800							; 40 ┃░░░┊░░░┊$2A┊$2B┊$2C┊$2D┊$2E┊$2F┊$30┊$31┃
     42  5800							; 30 ┃░░░┊░░░┊$20┊$21┊$22┊$23┊$24┊$25┊$26|$27┃
     43  5800							; 20 ┃░░░┊░░░┊$16┊$17┊$18┊$19┊$1A┊$1B┊$1C┊$1D┃
     44  5800							; 10 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃
     45  5800							;  0 ┃░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┊░░░┃
     46  5800							;    ┗━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┷━━━┛
     47  5800							;	0   1	2   3	4   5	6   7	8   9
     48  5800							;		A   B	C   D	E   F	G   H
     49  5800
     50  5800
     51  5800							; We put a short buffer before 'ValidSquare' when it is at the start of the bank, so that
     52  5800							; the move indexing (ie., "ValidSquare+{1},x" won't drop off the beginning of the bank
     53  5800							; and sause "segfaults". 22 is the max offset (a knight move). These spare bytes can
     54  5800							; be re-used for something else - we just need to guarantee there are 22 of them there
     55  5800
     56  5800		       00 00 00 00*	      ds	22	; so indexing of "ValidSquare-22,x" won't fail
     57  5816
     58  5816							; Note, we will never index INTO the above bytes - x will always be >= 22
     59  5816							; We just need to make sure that the actual indexing will not have an address before
     60  5816							; the index of outside the page.
     61  5816
      0  5816					      OPTIONAL_PAGEBREAK	"ValidSquare", 120 + 80
     10  5816					      LIST	ON
      0  5816					      DEF	ValidSquare
      1  5816				   BANK_ValidSquare SET	_CURRENT_BANK
      2  5816
      3  5816				   ValidSquare
     64  5816
     65  5816
     66  5816							; Use this table to
     67  5816							;   a) Determine if a square is valid (-1 = NO)
     68  5816							;   b) Move pieces without addition.  e.g., "lda ValidSquareTable+10,x" will let you know
     69  5816							;	if a white pawn on square "x" can move "up" the board.
     70  5816
     71  5816		       ff ff ff ff*	      .byte.b	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1
     72  5820		       ff ff ff ff*	      .byte.b	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1
     73  582a		       ff ff 16 17*	      .byte.b	-1, -1, 22, 23, 24, 25, 26, 27, 28, 29
     74  5834		       ff ff 20 21*	      .byte.b	-1, -1, 32, 33, 34, 35, 36, 37, 38, 39
     75  583e		       ff ff 2a 2b*	      .byte.b	-1, -1, 42, 43, 44, 45, 46, 47, 48, 49
     76  5848		       ff ff 34 35*	      .byte.b	-1, -1, 52, 53, 54, 55, 56, 57, 58, 59
     77  5852		       ff ff 3e 3f*	      .byte.b	-1, -1, 62, 63, 64, 65, 66, 67, 68, 69
     78  585c		       ff ff 48 49*	      .byte.b	-1, -1, 72, 73, 74, 75, 76, 77, 78, 79
     79  5866		       ff ff 52 53*	      .byte.b	-1, -1, 82, 83, 84, 85, 86, 87, 88, 89
     80  5870		       ff ff 5c 5d*	      .byte.b	-1, -1, 92, 93, 94, 95, 96, 97, 98, 99	; CONTINUES...
     81  587a
      0  587a					      DEF	Board
      1  587a				   BANK_Board SET	_CURRENT_BANK
      2  587a
      3  587a				   Board
     83  587a
     84  587a							; A 10X10... we should never write using invalid square
     85  587a							; ON COPY TO RAM BANK, 'BOARD' SELF-INITIALISES TO THE FOLLOWING VALUES
     86  587a							; FROM THEN ON IT'S WRITEABLE (REMEMBER TO +RAM_WRITE) FOR MODIFICATIONS
     87  587a
     88  587a		       ff ff ff ff*	      .byte.b	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1	; shared with above table
     89  5884		       ff ff ff ff*	      .byte.b	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1	; shared with above table
     90  588e
     91  588e					      REPEAT	8
     92  588e		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  588e					      REPEND
     92  5898		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  5898					      REPEND
     92  58a2		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  58a2					      REPEND
     92  58ac		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  58ac					      REPEND
     92  58b6		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  58b6					      REPEND
     92  58c0		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  58c0					      REPEND
     92  58ca		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     91  58ca					      REPEND
     92  58d4		       ff ff 00 00*	      .byte.b	-1, -1, 0, 0, 0, 0, 0, 0, 0, 0
     93  58de					      REPEND
     94  58de
     95  58de							; DON'T OVERSTEP BOUNDS WHEN WRITING BOARD - MAXIMUM INDEX = 99
     96  58de
     97  58de							; PARANOIA... following not used, but there in case above violated
     98  58de							;.byte -1, -1, -1, -1, -1, -1, -1, -1, -1, -1	      ; shared with above table
     99  58de							;.byte -1, -1, -1, -1, -1, -1, -1, -1, -1, -1	      ; shared with above table
    100  58de
    101  58de							;---------------------------------------------------------------------------------------------------
    102  58de
------- FILE Handler_QUEEN.asm LEVEL 3 PASS 2
      0  58de					      include	"Handler_QUEEN.asm"
      1  58de							; Copyright (C)2020 Andrew Davie
      2  58de
      3  58de							;---------------------------------------------------------------------------------------------------
      4  58de							; QUEEN
      5  58de							;---------------------------------------------------------------------------------------------------
      6  58de
      0  58de					      DEF	Handle_QUEEN
      1  58de				   BANK_Handle_QUEEN SET	_CURRENT_BANK
      2  58de
      3  58de				   Handle_QUEEN
      8  58de
      9  58de							; Pass...
     10  58de							; x = currentSquare (square the piece is on)
     11  58de							; currentPiece (with flags/colour attached)
     12  58de
      0  58de					      MOVE_TOWARDS	_DOWN+_LEFT
      1  58de					      SUBROUTINE
      2  58de
      3  58de
      4  58de		       a6 98		      ldx	currentSquare
      5  58e0		       d0 03		      bne	.project
      6  58e2
      7  58e2		       20 be fc    .empty     jsr	AddMove
      8  58e5		       bc 0b f0    .project   ldy	ValidSquare+_DOWN+_LEFT,x
      9  58e8		       30 0c		      bmi	.invalid
     10  58ea		       b9 7a f0 	      lda	Board,y
     11  58ed		       f0 f3		      beq	.empty
     12  58ef		       45 97		      eor	currentPiece
     13  58f1		       10 03		      bpl	.invalid
     14  58f3		       20 be fc 	      jsr	AddMove
     15  58f6
     16  58f6				   .invalid
      0  58f6					      MOVE_TOWARDS	_DOWN
      1  58f6					      SUBROUTINE
      2  58f6
      3  58f6
      4  58f6		       a6 98		      ldx	currentSquare
      5  58f8		       d0 03		      bne	.project
      6  58fa
      7  58fa		       20 be fc    .empty     jsr	AddMove
      8  58fd		       bc 0c f0    .project   ldy	ValidSquare+_DOWN,x
      9  5900		       30 0c		      bmi	.invalid
     10  5902		       b9 7a f0 	      lda	Board,y
     11  5905		       f0 f3		      beq	.empty
     12  5907		       45 97		      eor	currentPiece
     13  5909		       10 03		      bpl	.invalid
     14  590b		       20 be fc 	      jsr	AddMove
     15  590e
     16  590e				   .invalid
      0  590e					      MOVE_TOWARDS	_DOWN+_RIGHT
      1  590e					      SUBROUTINE
      2  590e
      3  590e
      4  590e		       a6 98		      ldx	currentSquare
      5  5910		       d0 03		      bne	.project
      6  5912
      7  5912		       20 be fc    .empty     jsr	AddMove
      8  5915		       bc 0d f0    .project   ldy	ValidSquare+_DOWN+_RIGHT,x
      9  5918		       30 0c		      bmi	.invalid
     10  591a		       b9 7a f0 	      lda	Board,y
     11  591d		       f0 f3		      beq	.empty
     12  591f		       45 97		      eor	currentPiece
     13  5921		       10 03		      bpl	.invalid
     14  5923		       20 be fc 	      jsr	AddMove
     15  5926
     16  5926				   .invalid
      0  5926					      MOVE_TOWARDS	_RIGHT
      1  5926					      SUBROUTINE
      2  5926
      3  5926
      4  5926		       a6 98		      ldx	currentSquare
      5  5928		       d0 03		      bne	.project
      6  592a
      7  592a		       20 be fc    .empty     jsr	AddMove
      8  592d		       bc 17 f0    .project   ldy	ValidSquare+_RIGHT,x
      9  5930		       30 0c		      bmi	.invalid
     10  5932		       b9 7a f0 	      lda	Board,y
     11  5935		       f0 f3		      beq	.empty
     12  5937		       45 97		      eor	currentPiece
     13  5939		       10 03		      bpl	.invalid
     14  593b		       20 be fc 	      jsr	AddMove
     15  593e
     16  593e				   .invalid
      0  593e					      MOVE_TOWARDS	_UP+_RIGHT
      1  593e					      SUBROUTINE
      2  593e
      3  593e
      4  593e		       a6 98		      ldx	currentSquare
      5  5940		       d0 03		      bne	.project
      6  5942
      7  5942		       20 be fc    .empty     jsr	AddMove
      8  5945		       bc 21 f0    .project   ldy	ValidSquare+_UP+_RIGHT,x
      9  5948		       30 0c		      bmi	.invalid
     10  594a		       b9 7a f0 	      lda	Board,y
     11  594d		       f0 f3		      beq	.empty
     12  594f		       45 97		      eor	currentPiece
     13  5951		       10 03		      bpl	.invalid
     14  5953		       20 be fc 	      jsr	AddMove
     15  5956
     16  5956				   .invalid
      0  5956					      MOVE_TOWARDS	_UP
      1  5956					      SUBROUTINE
      2  5956
      3  5956
      4  5956		       a6 98		      ldx	currentSquare
      5  5958		       d0 03		      bne	.project
      6  595a
      7  595a		       20 be fc    .empty     jsr	AddMove
      8  595d		       bc 20 f0    .project   ldy	ValidSquare+_UP,x
      9  5960		       30 0c		      bmi	.invalid
     10  5962		       b9 7a f0 	      lda	Board,y
     11  5965		       f0 f3		      beq	.empty
     12  5967		       45 97		      eor	currentPiece
     13  5969		       10 03		      bpl	.invalid
     14  596b		       20 be fc 	      jsr	AddMove
     15  596e
     16  596e				   .invalid
      0  596e					      MOVE_TOWARDS	_UP+_LEFT
      1  596e					      SUBROUTINE
      2  596e
      3  596e
      4  596e		       a6 98		      ldx	currentSquare
      5  5970		       d0 03		      bne	.project
      6  5972
      7  5972		       20 be fc    .empty     jsr	AddMove
      8  5975		       bc 1f f0    .project   ldy	ValidSquare+_UP+_LEFT,x
      9  5978		       30 0c		      bmi	.invalid
     10  597a		       b9 7a f0 	      lda	Board,y
     11  597d		       f0 f3		      beq	.empty
     12  597f		       45 97		      eor	currentPiece
     13  5981		       10 03		      bpl	.invalid
     14  5983		       20 be fc 	      jsr	AddMove
     15  5986
     16  5986				   .invalid
      0  5986					      MOVE_TOWARDS	_LEFT
      1  5986					      SUBROUTINE
      2  5986
      3  5986
      4  5986		       a6 98		      ldx	currentSquare
      5  5988		       d0 03		      bne	.project
      6  598a
      7  598a		       20 be fc    .empty     jsr	AddMove
      8  598d		       bc 15 f0    .project   ldy	ValidSquare+_LEFT,x
      9  5990		       30 0c		      bmi	.invalid
     10  5992		       b9 7a f0 	      lda	Board,y
     11  5995		       f0 f3		      beq	.empty
     12  5997		       45 97		      eor	currentPiece
     13  5999		       10 03		      bpl	.invalid
     14  599b		       20 be fc 	      jsr	AddMove
     15  599e
     16  599e				   .invalid
     21  599e
     22  599e		       4c 93 fa 	      jmp	MoveReturn
     23  59a1
     24  59a1							; EOF
------- FILE Handler_BANK1.asm
------- FILE Handler_BISHOP.asm LEVEL 3 PASS 2
      0  59a1					      include	"Handler_BISHOP.asm"
      1  59a1							; Copyright (C)2020 Andrew Davie
      2  59a1
      3  59a1							;---------------------------------------------------------------------------------------------------
      4  59a1							; BISHOP
      5  59a1							;---------------------------------------------------------------------------------------------------
      6  59a1
      0  59a1					      DEF	Handle_BISHOP
      1  59a1				   BANK_Handle_BISHOP SET	_CURRENT_BANK
      2  59a1
      3  59a1				   Handle_BISHOP
      8  59a1
      9  59a1							; x = currentSquare (square the piece is on)
     10  59a1							; currentPiece (with flags/colour attached)
     11  59a1
      0  59a1					      MOVE_TOWARDS	_DOWN+_LEFT
      1  59a1					      SUBROUTINE
      2  59a1
      3  59a1
      4  59a1		       a6 98		      ldx	currentSquare
      5  59a3		       d0 03		      bne	.project
      6  59a5
      7  59a5		       20 be fc    .empty     jsr	AddMove
      8  59a8		       bc 0b f0    .project   ldy	ValidSquare+_DOWN+_LEFT,x
      9  59ab		       30 0c		      bmi	.invalid
     10  59ad		       b9 7a f0 	      lda	Board,y
     11  59b0		       f0 f3		      beq	.empty
     12  59b2		       45 97		      eor	currentPiece
     13  59b4		       10 03		      bpl	.invalid
     14  59b6		       20 be fc 	      jsr	AddMove
     15  59b9
     16  59b9				   .invalid
      0  59b9					      MOVE_TOWARDS	_DOWN+_RIGHT
      1  59b9					      SUBROUTINE
      2  59b9
      3  59b9
      4  59b9		       a6 98		      ldx	currentSquare
      5  59bb		       d0 03		      bne	.project
      6  59bd
      7  59bd		       20 be fc    .empty     jsr	AddMove
      8  59c0		       bc 0d f0    .project   ldy	ValidSquare+_DOWN+_RIGHT,x
      9  59c3		       30 0c		      bmi	.invalid
     10  59c5		       b9 7a f0 	      lda	Board,y
     11  59c8		       f0 f3		      beq	.empty
     12  59ca		       45 97		      eor	currentPiece
     13  59cc		       10 03		      bpl	.invalid
     14  59ce		       20 be fc 	      jsr	AddMove
     15  59d1
     16  59d1				   .invalid
      0  59d1					      MOVE_TOWARDS	_UP+_LEFT
      1  59d1					      SUBROUTINE
      2  59d1
      3  59d1
      4  59d1		       a6 98		      ldx	currentSquare
      5  59d3		       d0 03		      bne	.project
      6  59d5
      7  59d5		       20 be fc    .empty     jsr	AddMove
      8  59d8		       bc 1f f0    .project   ldy	ValidSquare+_UP+_LEFT,x
      9  59db		       30 0c		      bmi	.invalid
     10  59dd		       b9 7a f0 	      lda	Board,y
     11  59e0		       f0 f3		      beq	.empty
     12  59e2		       45 97		      eor	currentPiece
     13  59e4		       10 03		      bpl	.invalid
     14  59e6		       20 be fc 	      jsr	AddMove
     15  59e9
     16  59e9				   .invalid
      0  59e9					      MOVE_TOWARDS	_UP+_RIGHT
      1  59e9					      SUBROUTINE
      2  59e9
      3  59e9
      4  59e9		       a6 98		      ldx	currentSquare
      5  59eb		       d0 03		      bne	.project
      6  59ed
      7  59ed		       20 be fc    .empty     jsr	AddMove
      8  59f0		       bc 21 f0    .project   ldy	ValidSquare+_UP+_RIGHT,x
      9  59f3		       30 0c		      bmi	.invalid
     10  59f5		       b9 7a f0 	      lda	Board,y
     11  59f8		       f0 f3		      beq	.empty
     12  59fa		       45 97		      eor	currentPiece
     13  59fc		       10 03		      bpl	.invalid
     14  59fe		       20 be fc 	      jsr	AddMove
     15  5a01
     16  5a01				   .invalid
     16  5a01
     17  5a01		       4c 93 fa 	      jmp	MoveReturn
     18  5a04
     19  5a04							;---------------------------------------------------------------------------------------------------
     20  5a04							; EOF
------- FILE Handler_BANK1.asm
------- FILE Handler_ROOK.asm LEVEL 3 PASS 2
      0  5a04					      include	"Handler_ROOK.asm"
      1  5a04							; Copyright (C)2020 Andrew Davie
      2  5a04							; Rook move handler
      3  5a04
      4  5a04							;---------------------------------------------------------------------------------------------------
      5  5a04							; ROOK
      6  5a04							;---------------------------------------------------------------------------------------------------
      7  5a04
      0  5a04					      DEF	Handle_ROOK
      1  5a04				   BANK_Handle_ROOK SET	_CURRENT_BANK
      2  5a04
      3  5a04				   Handle_ROOK
      9  5a04
     10  5a04							; Pass...
     11  5a04							; x = currentSquare (square the piece is on)
     12  5a04							; currentPiece (with flags/colour attached)
     13  5a04
      0  5a04					      MOVE_TOWARDS	_DOWN
      1  5a04					      SUBROUTINE
      2  5a04
      3  5a04
      4  5a04		       a6 98		      ldx	currentSquare
      5  5a06		       d0 03		      bne	.project
      6  5a08
      7  5a08		       20 be fc    .empty     jsr	AddMove
      8  5a0b		       bc 0c f0    .project   ldy	ValidSquare+_DOWN,x
      9  5a0e		       30 0c		      bmi	.invalid
     10  5a10		       b9 7a f0 	      lda	Board,y
     11  5a13		       f0 f3		      beq	.empty
     12  5a15		       45 97		      eor	currentPiece
     13  5a17		       10 03		      bpl	.invalid
     14  5a19		       20 be fc 	      jsr	AddMove
     15  5a1c
     16  5a1c				   .invalid
      0  5a1c					      MOVE_TOWARDS	_RIGHT
      1  5a1c					      SUBROUTINE
      2  5a1c
      3  5a1c
      4  5a1c		       a6 98		      ldx	currentSquare
      5  5a1e		       d0 03		      bne	.project
      6  5a20
      7  5a20		       20 be fc    .empty     jsr	AddMove
      8  5a23		       bc 17 f0    .project   ldy	ValidSquare+_RIGHT,x
      9  5a26		       30 0c		      bmi	.invalid
     10  5a28		       b9 7a f0 	      lda	Board,y
     11  5a2b		       f0 f3		      beq	.empty
     12  5a2d		       45 97		      eor	currentPiece
     13  5a2f		       10 03		      bpl	.invalid
     14  5a31		       20 be fc 	      jsr	AddMove
     15  5a34
     16  5a34				   .invalid
      0  5a34					      MOVE_TOWARDS	_UP
      1  5a34					      SUBROUTINE
      2  5a34
      3  5a34
      4  5a34		       a6 98		      ldx	currentSquare
      5  5a36		       d0 03		      bne	.project
      6  5a38
      7  5a38		       20 be fc    .empty     jsr	AddMove
      8  5a3b		       bc 20 f0    .project   ldy	ValidSquare+_UP,x
      9  5a3e		       30 0c		      bmi	.invalid
     10  5a40		       b9 7a f0 	      lda	Board,y
     11  5a43		       f0 f3		      beq	.empty
     12  5a45		       45 97		      eor	currentPiece
     13  5a47		       10 03		      bpl	.invalid
     14  5a49		       20 be fc 	      jsr	AddMove
     15  5a4c
     16  5a4c				   .invalid
      0  5a4c					      MOVE_TOWARDS	_LEFT
      1  5a4c					      SUBROUTINE
      2  5a4c
      3  5a4c
      4  5a4c		       a6 98		      ldx	currentSquare
      5  5a4e		       d0 03		      bne	.project
      6  5a50
      7  5a50		       20 be fc    .empty     jsr	AddMove
      8  5a53		       bc 15 f0    .project   ldy	ValidSquare+_LEFT,x
      9  5a56		       30 0c		      bmi	.invalid
     10  5a58		       b9 7a f0 	      lda	Board,y
     11  5a5b		       f0 f3		      beq	.empty
     12  5a5d		       45 97		      eor	currentPiece
     13  5a5f		       10 03		      bpl	.invalid
     14  5a61		       20 be fc 	      jsr	AddMove
     15  5a64
     16  5a64				   .invalid
     18  5a64
     19  5a64		       4c 93 fa 	      jmp	MoveReturn
     20  5a67
     21  5a67							;---------------------------------------------------------------------------------------------------
     22  5a67							; EOF
------- FILE Handler_BANK1.asm
------- FILE Handler_KING.asm LEVEL 3 PASS 2
      0  5a67					      include	"Handler_KING.asm"
      1  5a67							; Copyright (C)2020 Andrew Davie
      2  5a67
      3  5a67							;---------------------------------------------------------------------------------------------------
      4  5a67							; KING
      5  5a67							; This is the move handler for a KING
      6  5a67							; "Check" is detected in the next ply of the search.
      7  5a67
      8  5a67
      9  5a67							;---------------------------------------------------------------------------------------------------
     10  5a67
     11  5a67							; MACRO - Castling
     12  5a67
     13  5a67		       00 03	   KINGSIDE   =	3
     14  5a67		       ff ff ff fc QUEENSIDE  =	-4
     15  5a67
     16  5a67					      MAC	castle
     17  5a67							; {1} = "KINGSIDE" or "QUEENSIDE"
     18  5a67
     19  5a67					      ldx	currentSquare
     20  5a67					      lda	Board+{1},x	; kingside/queenside R position
     21  5a67					      and	#PIECE_MASK|FLAG_MOVED
     22  5a67					      cmp	#ROOK
     23  5a67					      bne	.noCastle	; not a R that hasn't moved
     24  5a67
     25  5a67							; It's a R and it *HAS* to be correct colour because it hasn't moved!
     26  5a67							; AND the K hasn't moved (earlier check), so check for vacant squares between K and R
     27  5a67
     28  5a67					      IF	{1} = QUEENSIDE
     29  5a67					      lda	Board-3,x	; nothing in N pos
     30  5a67					      bne	.noCastle
     31  5a67					      lda	Board-2,x	; nothing in B pos
     32  5a67					      bne	.noCastle
     33  5a67					      lda	Board-1,x	; nothing in Q pos
     34  5a67					      bne	.noCastle
     35  5a67
     36  5a67					      ENDIF
     37  5a67
     38  5a67					      IF	{1} = KINGSIDE
     39  5a67					      lda	Board+2,x	; check N pos
     40  5a67					      bne	.noCastle
     41  5a67					      lda	Board+1,x	; check B pos
     42  5a67					      bne	.noCastle
     43  5a67					      ENDIF
     44  5a67
     45  5a67							; appropriate N/B/(Q) squares are vacant so we proceed...
     46  5a67
     47  5a67							; FINALLY -- king can castle
     48  5a67							; note: when we actually DO the move we MUST insert "Phantom" kings onto the board over the
     49  5a67							; squares the king traverses so that "check" (and thus illegal moves) can be detected on the
     50  5a67							; next move. Castling will be detected by K moving > 1 square. (TODO: FIX?? not CASTLE flag??)
     51  5a67
     52  5a67					      lda	currentPiece
     53  5a67					      ora	#FLAG_CASTLE	; flag it's a castling move
     54  5a67					      sta	currentPiece
     55  5a67
     56  5a67					      IF	{1} = KINGSIDE
     57  5a67					      ldy	ValidSquare+2,x
     58  5a67					      ENDIF
     59  5a67
     60  5a67					      IF	{1} = QUEENSIDE
     61  5a67					      ldy	ValidSquare-2,x
     62  5a67					      ENDIF
     63  5a67
     64  5a67					      jsr	AddMove	; 57
     65  5a67
     66  5a67				   .noCastle
     67  5a67					      ENDM
     68  5a67
     69  5a67
     70  5a67							;---------------------------------------------------------------------------------------------------
     71  5a67
      0  5a67					      DEF	Handle_KING
      1  5a67				   BANK_Handle_KING SET	_CURRENT_BANK
      2  5a67
      3  5a67				   Handle_KING
     73  5a67					      SUBROUTINE
     74  5a67
     75  5a67							; x = currentSquare (square the KING is on)
     76  5a67							; currentPiece (KING of course, but with flags/colour attached)
     77  5a67
      0  5a67					      MOVE_TO	_DOWN+_LEFT
      1  5a67					      SUBROUTINE
      2  5a67		       bc 0b f0 	      ldy	ValidSquare+_DOWN+_LEFT,x
      3  5a6a		       30 0c		      bmi	.invalid
      4  5a6c		       b9 7a f0 	      lda	Board,y
      5  5a6f		       f0 04		      beq	.squareEmpty
      6  5a71		       45 97		      eor	currentPiece
      7  5a73		       10 03		      bpl	.invalid
      8  5a75		       20 be fc    .squareEmpty jsr	AddMove
      9  5a78				   .invalid
      0  5a78					      MOVE_TO_X	_DOWN
      1  5a78		       a6 98		      ldx	currentSquare
      0  5a7a					      MOVE_TO	_DOWN
      1  5a7a					      SUBROUTINE
      2  5a7a		       bc 0c f0 	      ldy	ValidSquare+_DOWN,x
      3  5a7d		       30 0c		      bmi	.invalid
      4  5a7f		       b9 7a f0 	      lda	Board,y
      5  5a82		       f0 04		      beq	.squareEmpty
      6  5a84		       45 97		      eor	currentPiece
      7  5a86		       10 03		      bpl	.invalid
      8  5a88		       20 be fc    .squareEmpty jsr	AddMove
      9  5a8b				   .invalid
      0  5a8b					      MOVE_TO_X	_DOWN+_RIGHT
      1  5a8b		       a6 98		      ldx	currentSquare
      0  5a8d					      MOVE_TO	_DOWN+_RIGHT
      1  5a8d					      SUBROUTINE
      2  5a8d		       bc 0d f0 	      ldy	ValidSquare+_DOWN+_RIGHT,x
      3  5a90		       30 0c		      bmi	.invalid
      4  5a92		       b9 7a f0 	      lda	Board,y
      5  5a95		       f0 04		      beq	.squareEmpty
      6  5a97		       45 97		      eor	currentPiece
      7  5a99		       10 03		      bpl	.invalid
      8  5a9b		       20 be fc    .squareEmpty jsr	AddMove
      9  5a9e				   .invalid
      0  5a9e					      MOVE_TO_X	_RIGHT
      1  5a9e		       a6 98		      ldx	currentSquare
      0  5aa0					      MOVE_TO	_RIGHT
      1  5aa0					      SUBROUTINE
      2  5aa0		       bc 17 f0 	      ldy	ValidSquare+_RIGHT,x
      3  5aa3		       30 0c		      bmi	.invalid
      4  5aa5		       b9 7a f0 	      lda	Board,y
      5  5aa8		       f0 04		      beq	.squareEmpty
      6  5aaa		       45 97		      eor	currentPiece
      7  5aac		       10 03		      bpl	.invalid
      8  5aae		       20 be fc    .squareEmpty jsr	AddMove
      9  5ab1				   .invalid
      0  5ab1					      MOVE_TO_X	_UP+_RIGHT
      1  5ab1		       a6 98		      ldx	currentSquare
      0  5ab3					      MOVE_TO	_UP+_RIGHT
      1  5ab3					      SUBROUTINE
      2  5ab3		       bc 21 f0 	      ldy	ValidSquare+_UP+_RIGHT,x
      3  5ab6		       30 0c		      bmi	.invalid
      4  5ab8		       b9 7a f0 	      lda	Board,y
      5  5abb		       f0 04		      beq	.squareEmpty
      6  5abd		       45 97		      eor	currentPiece
      7  5abf		       10 03		      bpl	.invalid
      8  5ac1		       20 be fc    .squareEmpty jsr	AddMove
      9  5ac4				   .invalid
      0  5ac4					      MOVE_TO_X	_UP
      1  5ac4		       a6 98		      ldx	currentSquare
      0  5ac6					      MOVE_TO	_UP
      1  5ac6					      SUBROUTINE
      2  5ac6		       bc 20 f0 	      ldy	ValidSquare+_UP,x
      3  5ac9		       30 0c		      bmi	.invalid
      4  5acb		       b9 7a f0 	      lda	Board,y
      5  5ace		       f0 04		      beq	.squareEmpty
      6  5ad0		       45 97		      eor	currentPiece
      7  5ad2		       10 03		      bpl	.invalid
      8  5ad4		       20 be fc    .squareEmpty jsr	AddMove
      9  5ad7				   .invalid
      0  5ad7					      MOVE_TO_X	_UP+_LEFT
      1  5ad7		       a6 98		      ldx	currentSquare
      0  5ad9					      MOVE_TO	_UP+_LEFT
      1  5ad9					      SUBROUTINE
      2  5ad9		       bc 1f f0 	      ldy	ValidSquare+_UP+_LEFT,x
      3  5adc		       30 0c		      bmi	.invalid
      4  5ade		       b9 7a f0 	      lda	Board,y
      5  5ae1		       f0 04		      beq	.squareEmpty
      6  5ae3		       45 97		      eor	currentPiece
      7  5ae5		       10 03		      bpl	.invalid
      8  5ae7		       20 be fc    .squareEmpty jsr	AddMove
      9  5aea				   .invalid
      0  5aea					      MOVE_TO_X	_LEFT
      1  5aea		       a6 98		      ldx	currentSquare
      0  5aec					      MOVE_TO	_LEFT
      1  5aec					      SUBROUTINE
      2  5aec		       bc 15 f0 	      ldy	ValidSquare+_LEFT,x
      3  5aef		       30 0c		      bmi	.invalid
      4  5af1		       b9 7a f0 	      lda	Board,y
      5  5af4		       f0 04		      beq	.squareEmpty
      6  5af6		       45 97		      eor	currentPiece
      7  5af8		       10 03		      bpl	.invalid
      8  5afa		       20 be fc    .squareEmpty jsr	AddMove
      9  5afd				   .invalid
     86  5afd
     87  5afd		       24 97		      bit	currentPiece
     88  5aff		       70 47		      bvs	.exit	; king has moved, so no castling
     89  5b01
      0  5b01					      CASTLE	KINGSIDE
      1  5b01
      2  5b01
      3  5b01		       a6 98		      ldx	currentSquare
      4  5b03		       bd 7d f0 	      lda	Board+KINGSIDE,x
      5  5b06		       29 4f		      and	#PIECE_MASK|FLAG_MOVED
      6  5b08		       c9 05		      cmp	#ROOK
      7  5b0a		       d0 16		      bne	.noCastle
      8  5b0c
      9  5b0c
     10  5b0c
     11  5b0c
     12  5b0c				  -	      IF	KINGSIDE = QUEENSIDE
     13  5b0c				  -	      lda	Board-3,x
     14  5b0c				  -	      bne	.noCastle
     15  5b0c				  -	      lda	Board-2,x
     16  5b0c				  -	      bne	.noCastle
     17  5b0c				  -	      lda	Board-1,x
     18  5b0c				  -	      bne	.noCastle
     19  5b0c				  -
     20  5b0c					      ENDIF
     21  5b0c
     22  5b0c					      IF	KINGSIDE = KINGSIDE
     23  5b0c		       bd 7c f0 	      lda	Board+2,x
     24  5b0f		       d0 11		      bne	.noCastle
     25  5b11		       bd 7b f0 	      lda	Board+1,x
     26  5b14		       d0 0c		      bne	.noCastle
     27  5b16					      ENDIF
     28  5b16
     29  5b16
     30  5b16
     31  5b16
     32  5b16
     33  5b16
     34  5b16
     35  5b16
     36  5b16		       a5 97		      lda	currentPiece
     37  5b18		       09 10		      ora	#FLAG_CASTLE
     38  5b1a		       85 97		      sta	currentPiece
     39  5b1c
     40  5b1c					      IF	KINGSIDE = KINGSIDE
     41  5b1c		       bc 18 f0 	      ldy	ValidSquare+2,x
     42  5b1f					      ENDIF
     43  5b1f
     44  5b1f				  -	      IF	KINGSIDE = QUEENSIDE
     45  5b1f				  -	      ldy	ValidSquare-2,x
     46  5b1f					      ENDIF
     47  5b1f
     48  5b1f		       20 be fc 	      jsr	AddMove
     49  5b22
     50  5b22				   .noCastle
      0  5b22					      CASTLE	QUEENSIDE
      1  5b22
      2  5b22
      3  5b22		       a6 98		      ldx	currentSquare
      4  5b24		       bd 76 f0 	      lda	Board+QUEENSIDE,x
      5  5b27		       29 4f		      and	#PIECE_MASK|FLAG_MOVED
      6  5b29		       c9 05		      cmp	#ROOK
      7  5b2b		       d0 1b		      bne	.noCastle
      8  5b2d
      9  5b2d
     10  5b2d
     11  5b2d
     12  5b2d					      IF	QUEENSIDE = QUEENSIDE
     13  5b2d		       bd 77 f0 	      lda	Board-3,x
     14  5b30		       d0 16		      bne	.noCastle
     15  5b32		       bd 78 f0 	      lda	Board-2,x
     16  5b35		       d0 11		      bne	.noCastle
     17  5b37		       bd 79 f0 	      lda	Board-1,x
     18  5b3a		       d0 0c		      bne	.noCastle
     19  5b3c
     20  5b3c					      ENDIF
     21  5b3c
     22  5b3c				  -	      IF	QUEENSIDE = KINGSIDE
     23  5b3c				  -	      lda	Board+2,x
     24  5b3c				  -	      bne	.noCastle
     25  5b3c				  -	      lda	Board+1,x
     26  5b3c				  -	      bne	.noCastle
     27  5b3c					      ENDIF
     28  5b3c
     29  5b3c
     30  5b3c
     31  5b3c
     32  5b3c
     33  5b3c
     34  5b3c
     35  5b3c
     36  5b3c		       a5 97		      lda	currentPiece
     37  5b3e		       09 10		      ora	#FLAG_CASTLE
     38  5b40		       85 97		      sta	currentPiece
     39  5b42
     40  5b42				  -	      IF	QUEENSIDE = KINGSIDE
     41  5b42				  -	      ldy	ValidSquare+2,x
     42  5b42					      ENDIF
     43  5b42
     44  5b42					      IF	QUEENSIDE = QUEENSIDE
     45  5b42		       bc 14 f0 	      ldy	ValidSquare-2,x
     46  5b45					      ENDIF
     47  5b45
     48  5b45		       20 be fc 	      jsr	AddMove
     49  5b48
     50  5b48				   .noCastle
     92  5b48
     93  5b48		       4c 93 fa    .exit      jmp	MoveReturn
     94  5b4b
     95  5b4b							;---------------------------------------------------------------------------------------------------
     96  5b4b							; EOF
------- FILE Handler_BANK1.asm
    107  5b4b
    108  5b4b
      0  5b4b					      OPTIONAL_PAGEBREAK	"Base64ToIndex", 64
     10  5b4b					      LIST	ON
      0  5b4b					      DEF	Base64ToIndex
      1  5b4b				   BANK_Base64ToIndex SET	_CURRENT_BANK
      2  5b4b
      3  5b4b				   Base64ToIndex
    111  5b4b							; Convert from 0-63 numbering into an index into the Chessboard
    112  5b4b
    113  5b4b		       16 17 18 19*	      .byte.b	22,23,24,25,26,27,28,29
    114  5b53		       20 21 22 23*	      .byte.b	32,33,34,35,36,37,38,39
    115  5b5b		       2a 2b 2c 2d*	      .byte.b	42,43,44,45,46,47,48,49
    116  5b63		       34 35 36 37*	      .byte.b	52,53,54,55,56,57,58,59
    117  5b6b		       3e 3f 40 41*	      .byte.b	62,63,64,65,66,67,68,69
    118  5b73		       48 49 4a 4b*	      .byte.b	72,73,74,75,76,77,78,79
    119  5b7b		       52 53 54 55*	      .byte.b	82,83,84,85,86,87,88,89
    120  5b83		       5c 5d 5e 5f*	      .byte.b	92,93,94,95,96,97,98,99
    121  5b8b
    122  5b8b
    123  5b8b							;---------------------------------------------------------------------------------------------------
    124  5b8b
      0  5b8b					      DEF	PutAllPieces
      1  5b8b				   BANK_PutAllPieces SET	_CURRENT_BANK
      2  5b8b
      3  5b8b				   PutAllPieces
    126  5b8b					      SUBROUTINE
    127  5b8b
    128  5b8b							; Call SAFEly
    129  5b8b
    130  5b8b		       a0 63		      ldy	#99
    131  5b8d		       b9 7a f0    .zeroBoard lda	Board,y
    132  5b90		       20 90 fd 	      jsr	SAFE_PutPieceToBoard
    133  5b93
    134  5b93		       88		      dey
    135  5b94		       10 f7		      bpl	.zeroBoard
    136  5b96		       60		      rts
    137  5b97
    138  5b97
    139  5b97							;---------------------------------------------------------------------------------------------------
    140  5b97
      0  5b97					      DEF	CopySetupForMarker
      1  5b97				   BANK_CopySetupForMarker SET	_CURRENT_BANK
      2  5b97
      3  5b97				   CopySetupForMarker
    142  5b97					      SUBROUTINE
    143  5b97
    144  5b97							;lda #RAMBANK_MOVES_RAM
    145  5b97							;sta SET_BANK_RAM
    146  5b97
    147  5b97		       a5 80		      lda	drawPieceNumber
    148  5b99		       29 03		      and	#3	; shift position in PF
    149  5b9b		       18		      clc
    150  5b9c		       69 3c		      adc	#INDEX_WHITE_MARKER_on_BLACK_SQUARE_0
    151  5b9e		       a8		      tay
    152  5b9f		       60		      rts
    153  5ba0
    154  5ba0
    155  5ba0							;---------------------------------------------------------------------------------------------------
    156  5ba0
      0  5ba0					      DEF	CopySetup
      1  5ba0				   BANK_CopySetup SET	_CURRENT_BANK
      2  5ba0
      3  5ba0				   CopySetup
    158  5ba0					      SUBROUTINE
    159  5ba0
    160  5ba0							; figure colouration of square
    161  5ba0
    162  5ba0		       a5 80		      lda	drawPieceNumber	;0-63
    163  5ba2		       4a		      lsr
    164  5ba3		       4a		      lsr
    165  5ba4		       4a		      lsr
    166  5ba5		       18		      clc
    167  5ba6		       65 80		      adc	drawPieceNumber
    168  5ba8		       29 01		      and	#1
    169  5baa		       49 01		      eor	#1
    170  5bac		       f0 02		      beq	.white
    171  5bae		       a9 20		      lda	#32
    172  5bb0		       85 a7	   .white     sta	__pieceColour	; actually SQUARE black/white
    173  5bb2
    174  5bb2							; PieceColour = 0 for white square, 28 for black square
    175  5bb2
    176  5bb2							;lda #RAMBANK_MOVES_RAM
    177  5bb2							;sta SET_BANK_RAM
    178  5bb2
    179  5bb2		       a4 80		      ldy	drawPieceNumber	; 0-63
    180  5bb4		       be 4b f3 	      ldx	Base64ToIndex,y
    181  5bb7
    182  5bb7		       bd 7a f0 	      lda	Board,x
    183  5bba		       0a		      asl
    184  5bbb		       90 02		      bcc	.blackAdjust
    185  5bbd		       09 10		      ora	#16
    186  5bbf		       4a	   .blackAdjust lsr
    187  5bc0		       29 0f		      and	#%1111
    188  5bc2		       aa		      tax
    189  5bc3
    190  5bc3		       98		      tya
    191  5bc4		       29 03		      and	#3	; shift position in PF
    192  5bc6
    193  5bc6		       18		      clc
    194  5bc7		       7d cf f3 	      adc	PieceToShape,x
    195  5bca		       18		      clc
    196  5bcb		       65 a7		      adc	__pieceColour
    197  5bcd		       a8		      tay
    198  5bce		       60		      rts
    199  5bcf
    200  5bcf				   PieceToShape
    201  5bcf
    202  5bcf		       00		      .byte.b	INDEX_WHITE_BLANK_on_WHITE_SQUARE_0
    203  5bd0		       04		      .byte.b	INDEX_WHITE_PAWN_on_WHITE_SQUARE_0
    204  5bd1		       44		      .byte.b	INDEX_BLACK_PAWN_on_WHITE_SQUARE_0
    205  5bd2		       08		      .byte.b	INDEX_WHITE_KNIGHT_on_WHITE_SQUARE_0
    206  5bd3		       0c		      .byte.b	INDEX_WHITE_BISHOP_on_WHITE_SQUARE_0
    207  5bd4		       10		      .byte.b	INDEX_WHITE_ROOK_on_WHITE_SQUARE_0
    208  5bd5		       14		      .byte.b	INDEX_WHITE_QUEEN_on_WHITE_SQUARE_0
    209  5bd6		       18		      .byte.b	INDEX_WHITE_KING_on_WHITE_SQUARE_0
    210  5bd7
    211  5bd7		       40		      .byte.b	INDEX_BLACK_BLANK_on_WHITE_SQUARE_0
    212  5bd8		       04		      .byte.b	INDEX_WHITE_PAWN_on_WHITE_SQUARE_0
    213  5bd9		       44		      .byte.b	INDEX_BLACK_PAWN_on_WHITE_SQUARE_0
    214  5bda		       48		      .byte.b	INDEX_BLACK_KNIGHT_on_WHITE_SQUARE_0
    215  5bdb		       4c		      .byte.b	INDEX_BLACK_BISHOP_on_WHITE_SQUARE_0
    216  5bdc		       50		      .byte.b	INDEX_BLACK_ROOK_on_WHITE_SQUARE_0
    217  5bdd		       54		      .byte.b	INDEX_BLACK_QUEEN_on_WHITE_SQUARE_0
    218  5bde		       58		      .byte.b	INDEX_BLACK_KING_on_WHITE_SQUARE_0
    219  5bdf
    220  5bdf
    221  5bdf							;---------------------------------------------------------------------------------------------------
    222  5bdf
    223  5bdf
      0  5bdf					      CHECK_HALF_BANK_SIZE	"HANDLER_BANK1 -- 1K"
      1  5bdf
      2  5bdf
      3  5bdf		       03 df	   .TEMP      =	* - BANK_START
 HANDLER_BANK1 -- 1K (1K) SIZE =  $3df , FREE= $21
      4  5bdf					      ECHO	"HANDLER_BANK1 -- 1K", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  5bdf				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  5bdf				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  5bdf				  -	      ERR
      8  5bdf					      endif
    225  5bdf
    226  5bdf
    227  5bdf							; There is space here (1K) for use as ROM
    228  5bdf							; but NOT when the above bank is switched in as RAM, of course!
    229  5bdf
    230  5bdf
    231  5bdf
    232  5bdf
    233  5bdf							;---------------------------------------------------------------------------------------------------
    234  5bdf							; EOF
------- FILE ./chess.asm
------- FILE ply.asm LEVEL 2 PASS 2
      0  5bdf					      include	"ply.asm"
      1  5bdf							; Copyright (C)2020 Andrew Davie
      2  5bdf							; andrew@taswegian.com
      3  5bdf
      4  5bdf							;---------------------------------------------------------------------------------------------------
      5  5bdf							; Define the RAM banks
      6  5bdf							; A "PLY" bank represents all the data required on any single ply of the search tree.
      7  5bdf							; The banks are organised sequentially, MAX_PLY of them starting at RAMBANK_PLY
      8  5bdf							; The startup code copies the ROM shadow into each of these PLY banks, and from then on
      9  5bdf							; they act as independant switchable banks usable for data on each ply during the search.
     10  5bdf							; A ply will hold the move list for that position
     11  5bdf
     12  5bdf
     13  5bdf		       00 06	   MAX_PLY    =	6
      0  5bdf					      NEWRAMBANK	PLY	; RAM bank for holding the following ROM shadow
      1  5bdf
      2  5bdf
      3  5bdf
      4 U2400 ????				      SEG.U	PLY
      5 U2400					      ORG	ORIGIN_RAM
      6 U2400					      RORG	RAM_3E
      7 U2400				   BANK_START SET	*
      8 U2400				   RAMBANK_PLY SET	ORIGIN_RAM / RAM_SIZE
      9 U2400				   _CURRENT_RAMBANK SET	RAMBANK_PLY
     10 U2400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
     15 U2400					      REPEAT	MAX_PLY-1
      0 U2400					      NEWRAMBANK	.DUMMY_PLY
      1 U2400
      2 U2400
      3 U2400
      4 U3800 ????				      SEG.U	.DUMMY_PLY
      5 U2800					      ORG	ORIGIN_RAM
      6 U2800					      RORG	RAM_3E
      7 U2800				   BANK_START SET	*
      8 U2800				   RAMBANK_.DUMMY_PLY SET	ORIGIN_RAM / RAM_SIZE
      9 U2800				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY_PLY
     10 U2800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
     15 U2800					      REPEND
      0 U2800					      NEWRAMBANK	.DUMMY_PLY
      1 U2800
      2 U2800
      3 U2800
      4 U2800					      SEG.U	.DUMMY_PLY
      5 U2c00					      ORG	ORIGIN_RAM
      6 U2c00					      RORG	RAM_3E
      7 U2c00				   BANK_START SET	*
      8 U2c00				   RAMBANK_.DUMMY_PLY SET	ORIGIN_RAM / RAM_SIZE
      9 U2c00				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY_PLY
     10 U2c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
     15 U2c00					      REPEND
      0 U2c00					      NEWRAMBANK	.DUMMY_PLY
      1 U2c00
      2 U2c00
      3 U2c00
      4 U2c00					      SEG.U	.DUMMY_PLY
      5 U3000					      ORG	ORIGIN_RAM
      6 U3000					      RORG	RAM_3E
      7 U3000				   BANK_START SET	*
      8 U3000				   RAMBANK_.DUMMY_PLY SET	ORIGIN_RAM / RAM_SIZE
      9 U3000				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY_PLY
     10 U3000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
     15 U3000					      REPEND
      0 U3000					      NEWRAMBANK	.DUMMY_PLY
      1 U3000
      2 U3000
      3 U3000
      4 U3000					      SEG.U	.DUMMY_PLY
      5 U3400					      ORG	ORIGIN_RAM
      6 U3400					      RORG	RAM_3E
      7 U3400				   BANK_START SET	*
      8 U3400				   RAMBANK_.DUMMY_PLY SET	ORIGIN_RAM / RAM_SIZE
      9 U3400				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY_PLY
     10 U3400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
     15 U3400					      REPEND
      0 U3400					      NEWRAMBANK	.DUMMY_PLY
      1 U3400
      2 U3400
      3 U3400
      4 U3400					      SEG.U	.DUMMY_PLY
      5 U3800					      ORG	ORIGIN_RAM
      6 U3800					      RORG	RAM_3E
      7 U3800				   BANK_START SET	*
      8 U3800				   RAMBANK_.DUMMY_PLY SET	ORIGIN_RAM / RAM_SIZE
      9 U3800				   _CURRENT_RAMBANK SET	RAMBANK_.DUMMY_PLY
     10 U3800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
     17 U3800					      REPEND
     18 U3800
     19 U3800							;---------------------------------------------------------------------------------------------------
     20 U3800							; and now the ROM shadow - this is copied to ALL of the RAM ply banks
     21 U3800
      0 U3800					      NEWBANK	BANK_PLY	; ROM SHADOW
      1  63db ????				      SEG	BANK_PLY
      2  6000					      ORG	ORIGIN
      3  6000					      RORG	$F000
      4  6000				   BANK_START SET	*
      5  6000				   BANK_PLY   SET	ORIGIN / 2048
      6  6000				   ORIGIN     SET	ORIGIN + 2048
      7  6000				   _CURRENT_BANK SET	BANK_PLY
     23  6000
     24  6000
     25  6000							;---------------------------------------------------------------------------------------------------
     26  6000							; The piece-lists
     27  6000							; ONLY the very first bank piecelist is used - all other banks switch to the first for
     28  6000							; piecelist usage. Note that this initialisation (below) comes from the shadow ROM/RAM copy
     29  6000							; but this needs to be initialised programatically on new game.
     30  6000
     31  6000							; We have TWO piecelists, in different banks
     32  6000							; WHITE pieces in bank BANK_PLY
     33  6000							; BLACK pieces in bank BANK_PLY+1
     34  6000
      0  6000					      OPTIONAL_PAGEBREAK	"PieceLists", 48
     10  6000					      LIST	ON
     36  6000
     37  6000		       00 00 00 00*SortedPieceList ds	16	; indexes into PieceSquare, PieceType.  NEG = no piece
     38  6010		       00 00 00 00*PieceSquare ds	16
     39  6020		       00 00 00 00*PieceType  ds	16
     40  6030
     41  6030		       00	   PieceListPtr ds	1
     42  6031
     43  6031							;---------------------------------------------------------------------------------------------------
     44  6031
     45  6031		       7f ff	   infinity   =	32767
     46  6031
     47  6031		       00 00	   plyValue   ds	2	; 16-bit signed score value
     48  6033		       00	   bestMove   ds	1	; index of move (-1 = none)
     49  6034
     50  6034				  -	      if	0
     51  6034				  -			; reverting a move
     52  6034				  -			; from/to/piece/toOriginal
     53  6034				  -			; castling   affects 4 squares (2xfrom/to each with original piece)
     54  6034				  -			; en-passant
     55  6034				  -
     56  6034				  -from/to/piece
     57  6034				  -
     58  6034				  -
     59  6034				  -from       =	piece
     60  6034				  -to	      =	originalPiece
     61  6034				  -from2      =	piece2
     62  6034				  -to2	      =	originalPiece2
     63  6034				  -
     64  6034				  -
     65  6034				  -
     66  6034				  -so,	      normal	move (N)
     67  6034				  -
     68  6034				  -B1	      =	knight
     69  6034				  -C3	      =	blank
     70  6034				  -null/null
     71  6034				  -
     72  6034				  -pawn       promot	with capture
     73  6034				  -A7	      =	WP
     74  6034				  -B8	      =	BLACK_ROOK
     75  6034				  -
     76  6034				  -
     77  6034				  -castle
     78  6034				  -E1	      =	king
     79  6034				  -G1	      =	blank
     80  6034				  -H1	      =	rook
     81  6034				  -F1	      =	blank
     82  6034				  -
     83  6034				  -
     84  6034				  -en-passant
     85  6034				  -B4	      =	P
     86  6034				  -A3	      =	blank
     87  6034				  -A4	      =	P
     88  6034				  -A3	      =	blank
     89  6034				  -
     90  6034				  -FROM
     91  6034				  -TO
     92  6034				  -CAPTURED_PIECE
     93  6034				  -ORIG_PIECE
     94  6034				  -FROM2
     95  6034				  -TO2
     96  6034				  -PIECE2
     97  6034				  -
     98  6034				  -board[FROM] =	ORIG_PIECE
     99  6034				  -board[TO]  =	CAPTURED_PIECE
    100  6034				  -
    101  6034				  -value      =	-new_piece + orig_piece - captured_piece
    102  6034				  -
    103  6034				  -
    104  6034					      endif
    105  6034
    106  6034
    107  6034
    108  6034
    109  6034
    110  6034
    111  6034
    112  6034
    113  6034
    114  6034
    115  6034							;---------------------------------------------------------------------------------------------------
    116  6034
    117  6034							; The X12 square at which a pawn CAN be taken en-passant. Normally 0.
    118  6034							; This is set/cleared whenever a move is made. The flag is indicated in the move description.
    119  6034
    120  6034		       00	   enPassantSquare ds	1
    121  6035
    122  6035							;---------------------------------------------------------------------------------------------------
    123  6035							; Move tables hold piece moves for this current ply
    124  6035
    125  6035		       00	   moveIndex  ds	1	; points to first available 'slot' for move storage
    126  6036
    127  6036
    128  6036		       00 80	   MAX_MOVES  =	128
    129  6036
      0  6036					      OPTIONAL_PAGEBREAK	"MoveFrom", MAX_MOVES
     10  6036					      LIST	ON
      0  6036					      DEF	MoveFrom
      1  6036				   BANK_MoveFrom SET	_CURRENT_BANK
      2  6036
      3  6036				   MoveFrom
    132  6036		       00 00 00 00*	      ds	MAX_MOVES
    133  60b6
      0  60b6					      OPTIONAL_PAGEBREAK	"MoveTo", MAX_MOVES
 PAGE BREAK INSERTED FOR  MoveTo
 REQUESTED SIZE =  $80
 WASTED SPACE =  $4a
 PAGEBREAK LOCATION =  $f100
     10  6100					      LIST	ON
      0  6100					      DEF	MoveTo
      1  6100				   BANK_MoveTo SET	_CURRENT_BANK
      2  6100
      3  6100				   MoveTo
    136  6100		       00 00 00 00*	      ds	MAX_MOVES
    137  6180
      0  6180					      OPTIONAL_PAGEBREAK	"MovePiece", MAX_MOVES
     10  6180					      LIST	ON
      0  6180					      DEF	MovePiece
      1  6180				   BANK_MovePiece SET	_CURRENT_BANK
      2  6180
      3  6180				   MovePiece
    140  6180		       00 00 00 00*	      ds	MAX_MOVES
    141  6200
    142  6200							;---------------------------------------------------------------------------------------------------
    143  6200
      0  6200					      DEF	InitPieceLists
      1  6200				   BANK_InitPieceLists SET	_CURRENT_BANK
      2  6200
      3  6200				   InitPieceLists
    145  6200
    146  6200		       a9 ff		      lda	#-1
    147  6202		       8d 30 f4 	      sta	PieceListPtr+RAM_WRITE
    148  6205
    149  6205		       a2 0f		      ldx	#15
    150  6207		       9d 00 f4    .clearLists sta	SortedPieceList+RAM_WRITE,x
    151  620a		       9d 10 f4 	      sta	PieceSquare+RAM_WRITE,x
    152  620d		       9d 20 f4 	      sta	PieceType+RAM_WRITE,x
    153  6210		       ca		      dex
    154  6211		       10 f4		      bpl	.clearLists
    155  6213
    156  6213							; General inits that are moved out of FIXED....
    157  6213
    158  6213
    159  6213		       a9 07		      lda	#%111	; 111= quad
    160  6215		       85 44		      sta	NUSIZ0
    161  6217		       85 45		      sta	NUSIZ1	; quad-width
    162  6219
    163  6219
    164  6219
    165  6219
    166  6219		       a9 04		      lda	#%00000100
    167  621b		       85 4a		      sta	CTRLPF
    168  621d		       a9 00		      lda	#BACKGCOL
    169  621f		       85 49		      sta	COLUBK
    170  6221
      0  6221					      PHASE	AI_StartClearBoard
      1  6221		       a9 0e		      lda	#AI_StartClearBoard
      2  6223		       85 8f		      sta	aiPhase
    172  6225		       60		      rts
    173  6226
    174  6226
    175  6226							;---------------------------------------------------------------------------------------------------
    176  6226
    177  6226					      if	ASSERTS
    178  6226
      0  6226					      DEF	checkPiecesBank
      1  6226				   BANK_checkPiecesBank SET	_CURRENT_BANK
      2  6226
      3  6226				   checkPiecesBank
    180  6226							; odd usage - switches between concurrent bank code
    181  6226
    182  6226		       a2 0f		      ldx	#15
    183  6228		       a5 a8	   .check     lda	__bank
    184  622a		       85 3e		      sta	SET_BANK_RAM
    185  622c		       bc 10 f0 	      ldy	PieceSquare,x
    186  622f		       f0 0d		      beq	.nonehere
    187  6231
    188  6231		       86 a7		      stx	__x
    189  6233
    190  6233		       20 38 fd 	      jsr	SAFE_GetPieceFromBoard
    191  6236		       f0 fe	   .fail      beq	.fail
    192  6238		       c9 ff		      cmp	#-1
    193  623a		       f0 fe	   .fail2     beq	.fail2
    194  623c
    195  623c		       a6 a7		      ldx	__x
    196  623e
    197  623e		       ca	   .nonehere  dex
    198  623f		       10 e7		      bpl	.check
    199  6241		       60		      rts
    200  6242
    201  6242
      0  6242					      DEF	DIAGNOSTIC_checkPieces
      1  6242				   BANK_DIAGNOSTIC_checkPieces SET	_CURRENT_BANK
      2  6242
      3  6242				   DIAGNOSTIC_checkPieces
    203  6242							; SAFE call
    204  6242							; DIAGNOSTIC ONLY
    205  6242							; Scan the piecelist and the board square it points to and make sure non blank, non -1
    206  6242
    207  6242		       a9 09		      lda	#RAMBANK_PLY
    208  6244		       85 a8		      sta	__bank
    209  6246		       20 26 f2 	      jsr	checkPiecesBank
    210  6249		       e6 a8		      inc	__bank
    211  624b		       20 26 f2 	      jsr	checkPiecesBank
    212  624e		       60		      rts
    213  624f
    214  624f					      endif
    215  624f
    216  624f							;---------------------------------------------------------------------------------------------------
    217  624f
    218  624f					      if	!TEST_POSITION
    219  624f				   InitPieceList
    220  624f
    221  624f		       06 19		      .byte.b	WHITE|Q, 25
    222  6251		       04 18		      .byte.b	WHITE|B, 24
    223  6253		       04 1b		      .byte.b	WHITE|B, 27
    224  6255		       05 16		      .byte.b	WHITE|R, 22
    225  6257		       05 1d		      .byte.b	WHITE|R, 29
    226  6259		       03 17		      .byte.b	WHITE|N, 23
    227  625b		       03 1c		      .byte.b	WHITE|N, 28
    228  625d
    229  625d		       01 23		      .byte.b	WHITE|WP, 35
    230  625f		       01 24		      .byte.b	WHITE|WP, 36
    231  6261		       01 22		      .byte.b	WHITE|WP, 34
    232  6263		       01 25		      .byte.b	WHITE|WP, 37
    233  6265		       01 21		      .byte.b	WHITE|WP, 33
    234  6267		       01 26		      .byte.b	WHITE|WP, 38
    235  6269		       01 20		      .byte.b	WHITE|WP, 32
    236  626b		       01 27		      .byte.b	WHITE|WP, 39
    237  626d
    238  626d		       07 1a		      .byte.b	WHITE|K, 26
    239  626f
    240  626f		       86 5f		      .byte.b	BLACK|Q, 95
    241  6271		       84 5e		      .byte.b	BLACK|B, 94
    242  6273		       84 61		      .byte.b	BLACK|B, 97
    243  6275		       85 5c		      .byte.b	BLACK|R, 92
    244  6277		       85 63		      .byte.b	BLACK|R, 99
    245  6279		       83 5d		      .byte.b	BLACK|N, 93
    246  627b		       83 62		      .byte.b	BLACK|N, 98
    247  627d
    248  627d		       82 55		      .byte.b	BLACK|BP, 85
    249  627f		       82 56		      .byte.b	BLACK|BP, 86
    250  6281		       82 54		      .byte.b	BLACK|BP, 84
    251  6283		       82 57		      .byte.b	BLACK|BP, 87
    252  6285		       82 53		      .byte.b	BLACK|BP, 83
    253  6287		       82 58		      .byte.b	BLACK|BP, 88
    254  6289		       82 52		      .byte.b	BLACK|BP, 82
    255  628b		       82 59		      .byte.b	BLACK|BP, 89
    256  628d
    257  628d		       87 60		      .byte.b	BLACK|K, 96
    258  628f
    259  628f		       00		      .byte.b	0	;end
    260  6290
    261  6290					      endif
    262  6290
    263  6290				  -	      if	TEST_POSITION
    264  6290				  -WhitePiecelist
    265  6290				  -	      .byte	65,0,0,0,0,0,0,0
    266  6290				  -	      .byte	0,0,0,0,0,0,0,0
    267  6290				  -
    268  6290				  -BlackPiecelist
    269  6290				  -	      .byte	66,0,0,0,0,0,0,0
    270  6290				  -	      .byte	0,0,0,0,0,0,0,0
    271  6290					      endif
    272  6290
    273  6290
    274  6290
    275  6290							;---------------------------------------------------------------------------------------------------
    276  6290
    277  6290
      0  6290					      DEF	NewPlyInitialise
      1  6290				   BANK_NewPlyInitialise SET	_CURRENT_BANK
      2  6290
      3  6290				   NewPlyInitialise
    279  6290
    280  6290							; This MUST be called at the start of a new ply
    281  6290							; It initialises the movelist to empty
    282  6290
    283  6290		       a2 ff		      ldx	#-1
    284  6292		       8e 35 f4 	      stx	moveIndex+RAM_WRITE	; no valid moves
    285  6295		       8d 33 f4 	      sta	bestMove+RAM_WRITE
    286  6298
    287  6298					      if	!TEST_POSITION
    288  6298		       a9 00		      lda	#0
    289  629a					      endif
    290  629a
    291  629a				  -	      if	TEST_POSITION
    292  629a				  -	      lda	#66
    293  629a					      endif
    294  629a		       8d 34 f4 	      sta	enPassantSquare+RAM_WRITE	; no enPassant available
    295  629d
    296  629d
    297  629d							; The evaluation of the current position is a signed 16-bit number
    298  629d							; +ve is good for the current side.
    299  629d							; This is used during the alpha-beta search for finding best position
    300  629d
    301  629d		       a9 01		      lda	#<(-infinity)
    302  629f		       8d 31 f4 	      sta	plyValue+RAM_WRITE
    303  62a2		       a9 80		      lda	#>(-infinity)
    304  62a4		       8d 32 f4 	      sta	plyValue+RAM_WRITE+1
    305  62a7
    306  62a7
    307  62a7		       a9 00		      lda	#0
    308  62a9		       85 9d		      sta	piecelistIndex
    309  62ab
    310  62ab		       60		      rts
    311  62ac
    312  62ac
    313  62ac							;---------------------------------------------------------------------------------------------------
    314  62ac
      0  62ac					      DEF	GenerateMovesForNextPiece
      1  62ac				   BANK_GenerateMovesForNextPiece SET	_CURRENT_BANK
      2  62ac
      3  62ac				   GenerateMovesForNextPiece
    316  62ac
    317  62ac		       a5 9d		      lda	piecelistIndex
    318  62ae		       29 0f		      and	#15
    319  62b0		       aa		      tax
    320  62b1
    321  62b1		       a5 9e		      lda	sideToMove
    322  62b3		       0a		      asl
    323  62b4		       a9 09		      lda	#RAMBANK_PLY	; W piecelist in "PLY0" bank, and B in "PLY1"
    324  62b6		       69 00		      adc	#0
    325  62b8		       85 3e		      sta	SET_BANK_RAM	; ooh! self-switching bank
    326  62ba
    327  62ba		       bd 10 f0 	      lda	PieceSquare,x
    328  62bd		       f0 05		      beq	.noPieceHere	; piece deleted
    329  62bf		       85 98		      sta	currentSquare
    330  62c1
    331  62c1		       20 70 fa 	      jsr	MoveForSinglePiece
    332  62c4
    333  62c4		       e6 9d	   .noPieceHere inc	piecelistIndex
    334  62c6		       60		      rts
    335  62c7
    336  62c7							;---------------------------------------------------------------------------------------------------
    337  62c7
      0  62c7					      DEF	FixPieceList
      1  62c7				   BANK_FixPieceList SET	_CURRENT_BANK
      2  62c7
      3  62c7				   FixPieceList
    339  62c7
    340  62c7							; uses OVERLAY Overlay001
    341  62c7							; fromX12	      X12 square piece moved from
    342  62c7							; toX12	      X12 square piece moved to (0 to erase piece from list)
    343  62c7
    344  62c7							; It scans the piece list looking for the '__from' square and sets it to the '__to' square
    345  62c7							; Eventually this will have to be more sophisticated when moves (like castling) involve
    346  62c7							; more than one piece.
    347  62c7
    348  62c7							; TODO: this is slow and should use a pointer to pieces instead
    349  62c7
    350  62c7
    351  62c7		       a2 0f		      ldx	#15
    352  62c9		       a5 86		      lda	fromX12
    353  62cb		       dd 10 f0    .pieceCheck cmp	PieceSquare,x
    354  62ce		       f0 04		      beq	.adjustPiece
    355  62d0		       ca		      dex
    356  62d1		       10 f8		      bpl	.pieceCheck
    357  62d3		       60		      rts
    358  62d4
    359  62d4		       a5 87	   .adjustPiece lda	toX12
    360  62d6		       9d 10 f4 	      sta	PieceSquare+RAM_WRITE,x
    361  62d9		       60		      rts
    362  62da
    363  62da							;---------------------------------------------------------------------------------------------------
    364  62da
    365  62da				  -	      if	0
    366  62da				  -	      DEF	DeletePiece
    367  62da				  -
    368  62da				  -	      lda	fromX12
    369  62da				  -	      ldy	toX12
    370  62da				  -
    371  62da				  -			;		  lda sideToMove
    372  62da				  -			;		  eor #128
    373  62da				  -			;		  asl
    374  62da				  -			;		  adc #RAMBANK_PLY
    375  62da				  -	      lda	currentPly
    376  62da				  -	      sta	SET_BANK_RAM
    377  62da				  -
    378  62da				  -	      lda	toX12
    379  62da				  -	      jsr	DeletePiece
    380  62da					      endif
    381  62da
    382  62da							;---------------------------------------------------------------------------------------------------
    383  62da
      0  62da					      DEF	alphaBeta
      1  62da				   BANK_alphaBeta SET	_CURRENT_BANK
      2  62da
      3  62da				   alphaBeta
    385  62da
    386  62da		       60		      rts
    387  62db		       e6 9c		      inc	currentPly
    388  62dd		       a5 9c		      lda	currentPly
    389  62df
    390  62df		       c9 0f		      cmp	#MAX_PLY+RAMBANK_PLY
    391  62e1		       f0 31		      beq	.bottomOut	; at a leaf node of the search?
    392  62e3		       85 3e		      sta	SET_BANK_RAM	; self-referential weirdness!
    393  62e5
    394  62e5		       a5 9e		      lda	sideToMove
    395  62e7		       49 80		      eor	#128
    396  62e9		       85 9e		      sta	sideToMove
    397  62eb
    398  62eb		       20 90 f2 	      jsr	NewPlyInitialise
    399  62ee
    400  62ee		       a5 9c		      lda	currentPly
    401  62f0		       85 3e		      sta	SET_BANK_RAM
    402  62f2
    403  62f2		       a9 00		      lda	#0
    404  62f4		       85 9d		      sta	piecelistIndex
    405  62f6		       20 ac f2    iterPieces jsr	GenerateMovesForNextPiece
    406  62f9		       a5 9d		      lda	piecelistIndex
    407  62fb		       c9 0f		      cmp	#15
    408  62fd		       d0 f7		      bne	iterPieces
    409  62ff
    410  62ff							; Perform a recursive search
    411  62ff							; simulate alpha-beta cull to just 7 moves per node
    412  62ff
    413  62ff					      REPEAT	7
    414  62ff							;jsr PhysicallyMovePiece
    415  62ff							;jsr FinaliseMove
    416  62ff		       20 da f2 	      jsr	alphaBeta
    413  62ff					      REPEND
    414  6302							;jsr PhysicallyMovePiece
    415  6302							;jsr FinaliseMove
    416  6302		       20 da f2 	      jsr	alphaBeta
    413  6302					      REPEND
    414  6305							;jsr PhysicallyMovePiece
    415  6305							;jsr FinaliseMove
    416  6305		       20 da f2 	      jsr	alphaBeta
    413  6305					      REPEND
    414  6308							;jsr PhysicallyMovePiece
    415  6308							;jsr FinaliseMove
    416  6308		       20 da f2 	      jsr	alphaBeta
    413  6308					      REPEND
    414  630b							;jsr PhysicallyMovePiece
    415  630b							;jsr FinaliseMove
    416  630b		       20 da f2 	      jsr	alphaBeta
    413  630b					      REPEND
    414  630e							;jsr PhysicallyMovePiece
    415  630e							;jsr FinaliseMove
    416  630e		       20 da f2 	      jsr	alphaBeta
    413  630e					      REPEND
    414  6311							;jsr PhysicallyMovePiece
    415  6311							;jsr FinaliseMove
    416  6311		       20 da f2 	      jsr	alphaBeta
    417  6314					      REPEND
    418  6314
    419  6314				   .bottomOut
    420  6314
    421  6314							; TODO: evaluate board position
    422  6314							; reverse move to previous position
    423  6314							; check the results, update scores and move pointers
    424  6314							; and return vars to expected
    425  6314
    426  6314		       a5 9e		      lda	sideToMove
    427  6316		       49 80		      eor	#128
    428  6318		       85 9e		      sta	sideToMove
    429  631a
    430  631a		       c6 9c		      dec	currentPly
    431  631c		       a5 9c		      lda	currentPly
    432  631e		       85 3e		      sta	SET_BANK_RAM	; self-referential weirdness!
    433  6320
    434  6320		       60		      rts
    435  6321
    436  6321							;---------------------------------------------------------------------------------------------------
    437  6321
      0  6321					      DEF	RevertMove
      1  6321				   BANK_RevertMove SET	_CURRENT_BANK
      2  6321
      3  6321				   RevertMove
    439  6321
    440  6321							; backtrack after a move, restoring things to the way they were
    441  6321
    442  6321
    443  6321
    444  6321
    445  6321
    446  6321
    447  6321
    448  6321
    449  6321		       60		      rts
    450  6322
    451  6322
    452  6322							;---------------------------------------------------------------------------------------------------
    453  6322
      0  6322					      DEF	MoveViaListAtPly
      1  6322				   BANK_MoveViaListAtPly SET	_CURRENT_BANK
      2  6322
      3  6322				   MoveViaListAtPly
    455  6322
    456  6322		       ad 35 f0 	      lda	moveIndex
    457  6325		       c9 ff		      cmp	#-1
    458  6327		       f0 41		      beq	halted	; no valid moves
    459  6329
    460  6329		       a8		      tay		; loop count
    461  632a		       c0 00		      cpy	#0
    462  632c		       f0 17		      beq	muldone
    463  632e		       c8		      iny
    464  632f
      0  632f					      NEXT_RANDOM
      1  632f		       a5 81		      lda	rnd
      2  6331		       4a		      lsr
      3  6332		       90 02		      bcc	.skipEOR
      4  6334		       49 fe		      eor	#RND_EOR_VAL
      5  6336		       85 81	   .skipEOR   sta	rnd
    466  6338
    467  6338		       a2 00		      ldx	#0
    468  633a		       a9 00		      lda	#0
    469  633c		       18	   .mulx      clc
    470  633d		       65 81		      adc	rnd
    471  633f		       90 01		      bcc	.nover
    472  6341		       e8		      inx
    473  6342		       88	   .nover     dey
    474  6343		       d0 f7		      bne	.mulx
    475  6345				   muldone
    476  6345
    477  6345							; fall through...
    478  6345							;---------------------------------------------------------------------------------------------------
    479  6345
      0  6345					      DEF	PhysicallyMovePiece
      1  6345				   BANK_PhysicallyMovePiece SET	_CURRENT_BANK
      2  6345
      3  6345				   PhysicallyMovePiece
    481  6345
    482  6345				   .foundMove
    483  6345		       bd 36 f0 	      lda	MoveFrom,x
    484  6348		       85 9f		      sta	fromSquare
    485  634a		       85 86		      sta	fromX12
    486  634c		       bd 00 f1 	      lda	MoveTo,x
    487  634f		       85 a1		      sta	toSquare
    488  6351		       85 87		      sta	toX12
    489  6353
    490  6353
    491  6353							; If en-passant flag set (pawn doing opening double-move) then record its square as the
    492  6353							; en-passant square for the ply.
    493  6353
    494  6353				  -	      if	0
    495  6353				  -	      TODO	BANK/BUGGERED AFTER
    496  6353				  -	      lda	currentPly
    497  6353				  -	      sta	SET_BANK_RAM
    498  6353				  -
    499  6353				  -	      ldy	#0
    500  6353				  -	      lda	MovePiece,x
    501  6353				  -	      and	#FLAG_ENPASSANT
    502  6353				  -	      beq	.notEP
    503  6353				  -	      ldy	toSquare
    504  6353				  -.notEP     sty	enPassantSquare+RAM_WRITE
    505  6353				  -
    506  6353					      endif
    507  6353
    508  6353
    509  6353		       bd 80 f1 	      lda	MovePiece,x
    510  6356		       29 df		      and	#~FLAG_ENPASSANT	;? unsure
    511  6358		       09 40		      ora	#FLAG_MOVED	; prevents usage in castling (for K/R)
    512  635a		       85 a0		      sta	fromPiece	; MIGHT have castling bit set, which should be handled last
    513  635c
    514  635c
    515  635c		       a6 9f		      ldx	fromSquare
    516  635e		       bc 00 ff 	      ldy	X12toBase64,x
    517  6361		       84 9f		      sty	fromSquare	;B64
    518  6363
    519  6363		       a6 a1		      ldx	toSquare
    520  6365		       bc 00 ff 	      ldy	X12toBase64,x
    521  6368		       84 a1		      sty	toSquare	;B64
    522  636a
    523  636a		       60	   halted     rts
    524  636b
    525  636b
    526  636b							;---------------------------------------------------------------------------------------------------
    527  636b
      0  636b					      DEF	CheckMoveListFromSquare
      1  636b				   BANK_CheckMoveListFromSquare SET	_CURRENT_BANK
      2  636b
      3  636b				   CheckMoveListFromSquare
    529  636b					      SUBROUTINE
    530  636b
    531  636b							; X12 in A
    532  636b							; y = -1 on return if NOT FOUND
    533  636b
    534  636b		       ac 35 f0 	      ldy	moveIndex
    535  636e		       30 0d		      bmi	.failed
    536  6370
    537  6370		       d9 36 f0    .scan      cmp	MoveFrom,y
    538  6373		       f0 03		      beq	.scanned
    539  6375		       88		      dey
    540  6376		       10 f8		      bpl	.scan
    541  6378
    542  6378		       b9 80 f1    .scanned   lda	MovePiece,y
    543  637b		       85 a6		      sta	aiPiece
    544  637d
    545  637d		       60	   .failed    rts
    546  637e
    547  637e							;---------------------------------------------------------------------------------------------------
    548  637e
      0  637e					      DEF	IsSquareUnderAttack
      1  637e				   BANK_IsSquareUnderAttack SET	_CURRENT_BANK
      2  637e
      3  637e				   IsSquareUnderAttack
    550  637e					      SUBROUTINE
    551  637e
    552  637e							; Scan the movelist to find if given square is under attack
    553  637e
    554  637e							; Pass:	 A = X12 square to check
    555  637e							; Return:	 CC = no
    556  637e
    557  637e		       ac 35 f0 	      ldy	moveIndex
    558  6381		       30 08		      bmi	.exit
    559  6383		       d9 00 f1    .scan      cmp	MoveTo,y
    560  6386		       f0 04		      beq	.found	; YES!
    561  6388		       88		      dey
    562  6389		       10 f8		      bpl	.scan
    563  638b
    564  638b		       18	   .exit      clc
    565  638c		       60	   .found     rts
    566  638d
    567  638d
    568  638d							;---------------------------------------------------------------------------------------------------
    569  638d
      0  638d					      DEF	GetKingSquare
      1  638d				   BANK_GetKingSquare SET	_CURRENT_BANK
      2  638d
      3  638d				   GetKingSquare
    571  638d					      SUBROUTINE
    572  638d
    573  638d							; Return:	 a = square king is on (or -1)
    574  638d
    575  638d		       ac 30 f0 	      ldy	PieceListPtr
    576  6390		       30 0c		      bmi	.exit	; no pieces?!
    577  6392		       b9 20 f0    .find      lda	PieceType,y
    578  6395		       29 0f		      and	#PIECE_MASK
    579  6397		       c9 07		      cmp	#KING
    580  6399		       f0 06		      beq	.found
    581  639b		       88		      dey
    582  639c		       10 f4		      bpl	.find
    583  639e
    584  639e		       a9 ff	   .exit      lda	#-1	; not found/no king square
    585  63a0		       60		      rts
    586  63a1
    587  63a1		       b9 10 f0    .found     lda	PieceSquare,y
    588  63a4		       60		      rts
    589  63a5
    590  63a5
    591  63a5							;---------------------------------------------------------------------------------------------------
    592  63a5
      0  63a5					      DEF	GetPieceGivenFromToSquares
      1  63a5				   BANK_GetPieceGivenFromToSquares SET	_CURRENT_BANK
      2  63a5
      3  63a5				   GetPieceGivenFromToSquares
    594  63a5					      SUBROUTINE
    595  63a5
    596  63a5							; We need to get the piece from the movelist because it contains flags (e.g., castling) about
    597  63a5							; the move. We need to do from/to checks because moves can have multiple origin/desinations.
    598  63a5							; This fixes the move with/without castle flag
    599  63a5
    600  63a5		       ac 35 f0 	      ldy	moveIndex
    601  63a8		       30 11		      bmi	.fail	; shouldn't happen
    602  63aa		       a5 86	   .scan      lda	fromX12
    603  63ac		       d9 36 f0 	      cmp	MoveFrom,y
    604  63af		       d0 07		      bne	.next
    605  63b1		       a5 87		      lda	toX12
    606  63b3		       d9 00 f1 	      cmp	MoveTo,y
    607  63b6		       f0 04		      beq	.found
    608  63b8		       88	   .next      dey
    609  63b9		       10 ef		      bpl	.scan
    610  63bb		       60	   .fail      rts
    611  63bc
    612  63bc		       b9 80 f1    .found     lda	MovePiece,y
    613  63bf		       85 a6		      sta	aiPiece
    614  63c1		       60		      rts
    615  63c2
    616  63c2
    617  63c2
    618  63c2							;---------------------------------------------------------------------------------------------------
    619  63c2
      0  63c2					      DEF	CheckMoveListToSquare
      1  63c2				   BANK_CheckMoveListToSquare SET	_CURRENT_BANK
      2  63c2
      3  63c2				   CheckMoveListToSquare
    621  63c2					      SUBROUTINE
    622  63c2
    623  63c2							; X12 in A
    624  63c2							; y = -1 on return if NOT FOUND
    625  63c2
    626  63c2		       ac 35 f0 	      ldy	moveIndex
    627  63c5		       30 13		      bmi	.sout
    628  63c7		       d9 00 f1    .scan      cmp	MoveTo,y
    629  63ca		       d0 09		      bne	.xscanned
    630  63cc
    631  63cc		       48		      pha
    632  63cd		       b9 36 f0 	      lda	MoveFrom,y
    633  63d0		       c5 93		      cmp	aiFromSquareX12
    634  63d2		       f0 05		      beq	.scanned
    635  63d4		       68		      pla
    636  63d5
    637  63d5		       88	   .xscanned  dey
    638  63d6		       10 ef		      bpl	.scan
    639  63d8		       48		      pha
    640  63d9
    641  63d9		       68	   .scanned   pla
    642  63da		       60	   .sout      rts
    643  63db
    644  63db
      0  63db					      CHECK_HALF_BANK_SIZE	"PLY -- 1K"
      1  63db
      2  63db
      3  63db		       03 db	   .TEMP      =	* - BANK_START
 PLY -- 1K (1K) SIZE =  $3db , FREE= $25
      4  63db					      ECHO	"PLY -- 1K", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  63db				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  63db				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  63db				  -	      ERR
      8  63db					      endif
    646  63db
    647  63db							;---------------------------------------------------------------------------------------------------
    648  63db
    649  63db							; There is space here (1K) for use as ROM
    650  63db							; but NOT when the above bank is switched in as RAM, of course!
    651  63db
    652  63db
    653  63db
    654  63db
    655  63db							;---------------------------------------------------------------------------------------------------
    656  63db							; EOF
------- FILE ./chess.asm
    370  63db
    371  63db							; MUST BE LAST...
------- FILE BANK_FIXED.asm LEVEL 2 PASS 2
      0  63db					      include	"BANK_FIXED.asm"
      1  63db							; Chess
      2  63db							; Copyright (c) 2019-2020 Andrew Davie
      3  63db							; andrew@taswegian.com
      4  63db
      5  63db
      6  63db							;---------------------------------------------------------------------------------------------------
      7  63db							;#########################################  FIXED BANK  ############################################
      8  63db							;---------------------------------------------------------------------------------------------------
      9  63db
     10  63db				   ORIGIN     SET	FIXED_BANK
     11  63db
      0  63db					      NEWBANK	THE_FIXED_BANK
      1  7f64 ????				      SEG	THE_FIXED_BANK
      2  7800					      ORG	ORIGIN
      3  7800					      RORG	$F000
      4  7800				   BANK_START SET	*
      5  7800				   THE_FIXED_BANK SET	ORIGIN / 2048
      6  7800				   ORIGIN     SET	ORIGIN + 2048
      7  7800				   _CURRENT_BANK SET	THE_FIXED_BANK
     13  7800					      RORG	$f800
     14  7800
     15  7800							;---------------------------------------------------------------------------------------------------
     16  7800
      0  7800					      DEF	Reset
      1  7800				   BANK_Reset SET	_CURRENT_BANK
      2  7800
      3  7800				   Reset
     18  7800					      SUBROUTINE
     19  7800
     20  7800		       78		      sei
     21  7801		       d8		      cld
     22  7802		       a2 ff		      ldx	#$FF
     23  7804		       9a		      txs
     24  7805
     25  7805
     26  7805							; See if we can come up with something 'random' for startup
     27  7805
     28  7805		       ac 84 02 	      ldy	INTIM
     29  7808		       d0 02		      bne	.toR
     30  780a		       a0 9a		      ldy	#$9A
     31  780c		       84 81	   .toR       sty	rnd
     32  780e
     33  780e							;lda #BANK_TitleScreen
     34  780e							;sta SET_BANK
     35  780e							;jsr TitleScreen
     36  780e
     37  780e
     38  780e							; Move a copy of the row bank template to the first 8 banks of RAM
     39  780e							; and then terminate the draw subroutine by substituting in a RTS on the last one
     40  780e
      0  780e					      JSRAM_SAFE	SetupBanks
      1  780e
      2  780e
      3  780e
      4  780e		       a9 00		      lda	#BANK_SetupBanks
      5  7810		       85 8e		      sta	savedBank
      6  7812		       85 3f		      sta	SET_BANK
      7  7814		       20 40 f1 	      jsr	SetupBanks
     42  7817
     43  7817							; Patch the final row's "loop" to a RTS
     44  7817
     45  7817		       a2 07		      ldx	#7
     46  7819		       86 3e		      stx	SET_BANK_RAM
     47  781b		       a9 60		      lda	#$60	; "rts"
     48  781d		       8d 00 f6 	      sta	SELFMOD_RTS_ON_LAST_ROW+RAM_WRITE
     49  7820
     50  7820
     51  7820		       a5 9c		      lda	currentPly
     52  7822		       85 3e		      sta	SET_BANK_RAM
     53  7824		       20 90 f2 	      jsr	NewPlyInitialise	; must be called at the start of every new ply
     54  7827
     55  7827		       a9 09		      lda	#RAMBANK_PLY
     56  7829		       85 3e		      sta	SET_BANK_RAM
     57  782b		       20 dd fc 	      jsr	InitialisePieceSquares
     58  782e
     59  782e		       a9 00		      lda	#WHITE
     60  7830		       85 9e		      sta	sideToMove
     61  7832
     62  7832							; Now the board is "living" in RAM (along with support code) we can do stuff with it
     63  7832
     64  7832		       a9 00		      lda	#0
     65  7834		       85 82		      sta	drawPhase
     66  7836
     67  7836							;---------------------------------------------------------------------------------------------------
     68  7836
     69  7836							;RESYNC
     70  7836				   .StartFrame
     71  7836
     72  7836
     73  7836							; START OF FRAME
     74  7836
     75  7836		       a9 0e		      lda	#%1110	; VSYNC ON
     76  7838		       85 42	   .loopVSync3 sta	WSYNC
     77  783a		       85 40		      sta	VSYNC
     78  783c		       4a		      lsr
     79  783d		       d0 f9		      bne	.loopVSync3	; branch until VYSNC has been reset
     80  783f
     81  783f		       a0 37		      ldy	#55	;VBLANK_TIM_NTSC
     82  7841		       8c 96 02 	      sty	TIM64T
     83  7844
     84  7844							; LOTS OF PROCESSING TIME - USE IT
     85  7844
     86  7844		       a2 00		      ldx	#0
     87  7846		       86 41		      stx	VBLANK
     88  7848
     89  7848
     90  7848					      IF	ASSERTS
     91  7848							;		      lda #$C2
     92  7848							;		      sta COLUBK		     ; colour timing band top of screen
     93  7848					      ENDIF
     94  7848
     95  7848							;		      lda #STATEMACHINE
     96  7848							;		      sta SET_BANK
     97  7848		       20 9e f8 	      jsr	AiStateMachine
     98  784b
     99  784b							;jsr SAFE_PhasedProcessor
    100  784b
    101  784b					      IF	ASSERTS
    102  784b							;		      lda #0
    103  784b							;		      sta COLUBK		     ; end of timing band
    104  784b					      ENDIF
    105  784b
    106  784b					      if	ASSERTS
    107  784b							; Catch timer expired already
    108  784b		       2c 85 02 	      bit	TIMINT
    109  784e							;.whoops	      bmi .whoops
    110  784e					      endif
    111  784e
    112  784e
    113  784e		       2c 85 02    .wait      bit	TIMINT
    114  7851		       10 fb		      bpl	.wait
    115  7853
    116  7853
    117  7853
    118  7853							; START OF VISIBLE SCANLINES
    119  7853
    120  7853		       85 42		      sta	WSYNC
    121  7855
    122  7855		       20 9d f8 	      jsr	_rts
    123  7858		       20 9d f8 	      jsr	_rts
    124  785b		       20 9d f8 	      jsr	_rts
    125  785e		       20 9d f8 	      jsr	_rts
      0  7861					      SLEEP	3
      1  7861				   .CYCLES    SET	3
      2  7861
      3  7861				  -	      IF	.CYCLES < 2
      4  7861				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  7861				  -	      ERR
      6  7861					      ENDIF
      7  7861
      8  7861					      IF	.CYCLES & 1
      9  7861					      IFNCONST	NO_ILLEGAL_OPCODES
     10  7861		       04 00		      nop	0
     11  7863				  -	      ELSE
     12  7863				  -	      bit	VSYNC
     13  7863					      ENDIF
     14  7863				   .CYCLES    SET	.CYCLES - 3
     15  7863					      ENDIF
     16  7863
     17  7863				  -	      REPEAT	.CYCLES / 2
     18  7863				  -	      nop
     19  7863					      REPEND
    127  7863
    128  7863		       a2 00		      ldx	#0
    129  7865		       86 41		      stx	VBLANK
    130  7867
    131  7867		       86 3e		      stx	SET_BANK_RAM
    132  7869		       20 03 f2 	      jsr	DrawRow	; draw the ENTIRE visible screen!
    133  786c
    134  786c
    135  786c
    136  786c
    137  786c		       a9 00		      lda	#0
    138  786e		       85 4d		      sta	PF0
    139  7870		       85 4e		      sta	PF1
    140  7872		       85 4f		      sta	PF2
    141  7874		       85 5b		      sta	GRP0
    142  7876		       85 5c		      sta	GRP1
    143  7878
    144  7878		       a9 42		      lda	#%01000010	; bit6 is not required
    145  787a		       85 41		      sta	VBLANK	; end of screen - enter blanking
    146  787c
    147  787c
    148  787c							; END OF VISIBLE SCREEN
    149  787c							; HERE'S SOME TIME TO DO STUFF
    150  787c
    151  787c		       a9 26		      lda	#38
    152  787e		       8d 96 02 	      sta	TIM64T
    153  7881
    154  7881							;
      0  7881					      JSRAM	PositionSprites
      1  7881
      2  7881		       a9 09		      lda	#BANK_PositionSprites
      3  7883		       85 3f		      sta	SET_BANK
      4  7885		       20 84 f2 	      jsr	PositionSprites
    156  7888
    157  7888
    158  7888
    159  7888							; "draw" sprite shapes into row banks
    160  7888
    161  7888		       a2 07		      ldx	#7
    162  788a		       86 3e	   zapem      stx	SET_BANK_RAM
    163  788c		       20 a6 f2 	      jsr	WriteBlank
    164  788f		       ca		      dex
    165  7890		       10 f8		      bpl	zapem
    166  7892
    167  7892		       20 cf f2 	      jsr	WriteCursor
    168  7895
    169  7895
    170  7895		       2c 85 02    Waitforit  bit	TIMINT
    171  7898		       10 fb		      bpl	Waitforit
    172  789a
    173  789a		       4c 36 f8 	      jmp	.StartFrame
    174  789d
    175  789d
    176  789d		       60	   _rts       rts
    177  789e
    178  789e
    179  789e							;---------------------------------------------------------------------------------------------------
    180  789e
      0  789e					      DEF	AiStateMachine
      1  789e				   BANK_AiStateMachine SET	_CURRENT_BANK
      2  789e
      3  789e				   AiStateMachine
    182  789e					      SUBROUTINE
    183  789e
    184  789e		       a9 09		      lda	#BANK_AiVectorLO
    185  78a0		       85 3f		      sta	SET_BANK	; to access vectors
    186  78a2
    187  78a2		       a6 8f		      ldx	aiPhase
    188  78a4		       bd 00 f0 	      lda	AiVectorLO,x
    189  78a7		       85 ef		      sta	__ptr
    190  78a9		       bd 1e f0 	      lda	AiVectorHI,x
    191  78ac		       85 f0		      sta	__ptr+1
    192  78ae
    193  78ae		       bd 3c f0 	      lda	AiVectorBANK,x
    194  78b1		       85 8e		      sta	savedBank
    195  78b3		       85 3f		      sta	SET_BANK
    196  78b5
    197  78b5		       6c ef 00 	      jmp	(__ptr)
    198  78b8
    199  78b8
    200  78b8							;---------------------------------------------------------------------------------------------------
    201  78b8
    202  78b8							;    DEF SAFE_PhasedProcessor
    203  78b8							;    SUBROUTINE
    204  78b8
    205  78b8							;		      jsr PhaseJump
    206  78b8							;		      lda savedBank
    207  78b8							;		      sta SET_BANK
    208  78b8							;		      rts
    209  78b8
    210  78b8							;---------------------------------------------------------------------------------------------------
    211  78b8
    212  78b8				  -	      if	0
    213  78b8				  -	      DEF	PhaseJump
    214  78b8				  -	      SUBROUTINE
    215  78b8				  -
    216  78b8				  -	      ldx	drawPhase
    217  78b8				  -	      lda	DrawVectorLO,x
    218  78b8				  -	      sta	__ptr
    219  78b8				  -	      lda	DrawVectorHI,x
    220  78b8				  -	      sta	__ptr+1
    221  78b8				  -	      lda	DrawVectorBANK,x
    222  78b8				  -	      sta	savedBank
    223  78b8				  -	      sta	SET_BANK
    224  78b8				  -	      jmp	(__ptr)
    225  78b8					      endif
    226  78b8
    227  78b8		       00 0a	   MARCH      =	10
    228  78b8		       00 04	   STARTMOVE  =	4
    229  78b8		       00 07	   CSL	      =	7
    230  78b8
    231  78b8				  -	      if	0
    232  78b8				  -
    233  78b8				  -DrawVectorLO
    234  78b8				  -	      .byte	<aiStartClearBoard	; 0
    235  78b8				  -	      .byte	<aiClearEachRow	; 1
    236  78b8				  -	      .byte	<aiDrawEntireBoard	; 2
    237  78b8				  -	      .byte	<aiDEB2	; 3
    238  78b8				  -	      .byte	<FlipBuffers	; 4
    239  78b8				  -	      .byte	<FB0	; 5
    240  78b8				  -	      .byte	<FB2	; 6
    241  78b8				  -	      .byte	<FB3	; 7
    242  78b8				  -	      .byte	<EraseStartPiece	; 8
    243  78b8				  -	      .byte	<WriteStartPieceBlank	; 9
    244  78b8				  -	      .byte	<MarchToTargetA	; 10
    245  78b8				  -	      .byte	<MarchB	; 11
    246  78b8				  -	      .byte	<MarchToTargetB	; 12
    247  78b8				  -	      .byte	<MarchB2	; 13
    248  78b8				  -	      .byte	<FinalFlash	; 14
    249  78b8				  -	      .byte	<SpecialMoveFixup	; 15
    250  78b8				  -
    251  78b8				  -DrawVectorHI
    252  78b8				  -	      .byte	>aiStartClearBoard
    253  78b8				  -	      .byte	>aiClearEachRow
    254  78b8				  -	      .byte	>aiDrawEntireBoard
    255  78b8				  -	      .byte	>aiDEB2
    256  78b8				  -	      .byte	>FlipBuffers
    257  78b8				  -	      .byte	>FB0
    258  78b8				  -	      .byte	>FB2
    259  78b8				  -	      .byte	>FB3
    260  78b8				  -	      .byte	>EraseStartPiece
    261  78b8				  -	      .byte	>WriteStartPieceBlank
    262  78b8				  -	      .byte	>MarchToTargetA
    263  78b8				  -	      .byte	>MarchB
    264  78b8				  -	      .byte	>MarchToTargetB
    265  78b8				  -	      .byte	>MarchB2
    266  78b8				  -	      .byte	>FinalFlash
    267  78b8				  -	      .byte	>SpecialMoveFixup
    268  78b8				  -
    269  78b8				  -DrawVectorBANK
    270  78b8				  -
    271  78b8				  -	      .byte	BANK_aiStartClearBoard
    272  78b8				  -	      .byte	BANK_aiClearEachRow
    273  78b8				  -	      .byte	BANK_aiDrawEntireBoard
    274  78b8				  -	      .byte	BANK_aiDEB2
    275  78b8				  -	      .byte	BANK_FlipBuffers
    276  78b8				  -	      .byte	BANK_FB0
    277  78b8				  -	      .byte	BANK_FB2
    278  78b8				  -	      .byte	BANK_FB3
    279  78b8				  -	      .byte	BANK_EraseStartPiece
    280  78b8				  -	      .byte	BANK_WriteStartPieceBlank
    281  78b8				  -	      .byte	BANK_MarchToTargetA
    282  78b8				  -	      .byte	BANK_MarchB
    283  78b8				  -	      .byte	BANK_MarchToTargetB
    284  78b8				  -	      .byte	BANK_MarchB2
    285  78b8				  -	      .byte	BANK_FinalFlash
    286  78b8				  -	      .byte	BANK_SpecialMoveFixup
    287  78b8				  -
    288  78b8					      endif
    289  78b8
    290  78b8
    291  78b8							;---------------------------------------------------------------------------------------------------
    292  78b8
      0  78b8					      DEF	CallClear
      1  78b8				   BANK_CallClear SET	_CURRENT_BANK
      2  78b8
      3  78b8				   CallClear
    294  78b8					      SUBROUTINE
    295  78b8
    296  78b8		       84 3e		      sty	SET_BANK_RAM
    297  78ba		       20 c8 f0 	      jsr	ClearRowBitmap
    298  78bd		       60		      rts
    299  78be
    300  78be							;---------------------------------------------------------------------------------------------------
    301  78be
      0  78be					      DEF	SAFE_Get64toX12Board
      1  78be				   BANK_SAFE_Get64toX12Board SET	_CURRENT_BANK
      2  78be
      3  78be				   SAFE_Get64toX12Board
    303  78be					      SUBROUTINE
    304  78be
    305  78be		       a9 08		      lda	#RAMBANK_MOVES_RAM
    306  78c0		       85 3e		      sta	SET_BANK_RAM
    307  78c2		       bc 4b f3 	      ldy	Base64ToIndex,x
    308  78c5		       b9 7a f0 	      lda	Board,y
    309  78c8		       a4 8e		      ldy	savedBank
    310  78ca		       84 3f		      sty	SET_BANK
    311  78cc		       60		      rts
    312  78cd
    313  78cd							;---------------------------------------------------------------------------------------------------
    314  78cd
      0  78cd					      DEF	aiDrawEntireBoard
      1  78cd				   BANK_aiDrawEntireBoard SET	_CURRENT_BANK
      2  78cd
      3  78cd				   aiDrawEntireBoard
    316  78cd					      SUBROUTINE
    317  78cd
    318  78cd		       a9 08		      lda	#RAMBANK_MOVES_RAM
    319  78cf		       85 3e		      sta	SET_BANK_RAM
    320  78d1
    321  78d1		       a6 80		      ldx	drawPieceNumber
    322  78d3		       bc 4b f3 	      ldy	Base64ToIndex,x
    323  78d6		       b9 7a f0 	      lda	Board,y
    324  78d9		       f0 16		      beq	.isablank
    325  78db		       48		      pha
    326  78dc		       a9 00		      lda	#BLANK
    327  78de		       99 7a f4 	      sta	Board+RAM_WRITE,y
    328  78e1
    329  78e1		       20 d8 fd 	      jsr	CopySinglePiece
    330  78e4
    331  78e4		       a9 08		      lda	#RAMBANK_MOVES_RAM
    332  78e6		       85 3e		      sta	SET_BANK_RAM
    333  78e8		       a6 80		      ldx	drawPieceNumber
    334  78ea		       bc 4b f3 	      ldy	Base64ToIndex,x
    335  78ed		       68		      pla
    336  78ee		       99 7a f4 	      sta	Board+RAM_WRITE,y
    337  78f1
    338  78f1		       e6 82	   .isablank  inc	drawPhase
    339  78f3
      0  78f3					      PHASE	AI_DEB2
      1  78f3		       a9 11		      lda	#AI_DEB2
      2  78f5		       85 8f		      sta	aiPhase
    341  78f7		       60		      rts
    342  78f8
    343  78f8
    344  78f8							;---------------------------------------------------------------------------------------------------
    345  78f8
      0  78f8					      DEF	aiFlipBuffers
      1  78f8				   BANK_aiFlipBuffers SET	_CURRENT_BANK
      2  78f8
      3  78f8				   aiFlipBuffers
    347  78f8					      SUBROUTINE
    348  78f8
    349  78f8							; Initialise for a new move
    350  78f8
    351  78f8
    352  78f8
    353  78f8		       a5 9c		      lda	currentPly
    354  78fa		       85 3e		      sta	SET_BANK_RAM
    355  78fc
    356  78fc		       20 90 f2 	      jsr	NewPlyInitialise	; zap movelist for this ply
    357  78ff
    358  78ff		       ad 34 f0 	      lda	enPassantSquare	; potentially set by move in previous ply
    359  7902		       85 9a		      sta	enPassantPawn	; grab enPassant flag from PLY for later checking
    360  7904
    361  7904
      0  7904					      PHASE	AI_FB0
      1  7904		       a9 13		      lda	#AI_FB0
      2  7906		       85 8f		      sta	aiPhase
    363  7908
    364  7908		       e6 82		      inc	drawPhase
    365  790a		       60		      rts
    366  790b
    367  790b
    368  790b							;---------------------------------------------------------------------------------------------------
    369  790b
      0  790b					      DEF	SAFE_InitialiseMoveGeneration
      1  790b				   BANK_SAFE_InitialiseMoveGeneration SET	_CURRENT_BANK
      2  790b
      3  790b				   SAFE_InitialiseMoveGeneration
    371  790b					      SUBROUTINE
    372  790b
    373  790b		       a5 9c		      lda	currentPly
    374  790d		       85 3e		      sta	SET_BANK_RAM
    375  790f
    376  790f		       20 90 f2 	      jsr	NewPlyInitialise
    377  7912
    378  7912		       a5 8e		      lda	savedBank
    379  7914		       85 3f		      sta	SET_BANK
    380  7916		       60		      rts
    381  7917
    382  7917
    383  7917							;---------------------------------------------------------------------------------------------------
    384  7917
    385  7917							;TODO...
      0  7917					      DEF	SAFE_GenerateOneMove
      1  7917				   BANK_SAFE_GenerateOneMove SET	_CURRENT_BANK
      2  7917
      3  7917				   SAFE_GenerateOneMove
    387  7917					      SUBROUTINE
    388  7917
    389  7917		       a5 9c		      lda	currentPly
    390  7919		       85 3e		      sta	SET_BANK_RAM
    391  791b		       20 ac f2 	      jsr	GenerateMovesForNextPiece
    392  791e
    393  791e		       a5 8e		      lda	savedBank
    394  7920		       85 3f		      sta	SET_BANK
    395  7922		       60		      rts
    396  7923
    397  7923
    398  7923							;---------------------------------------------------------------------------------------------------
    399  7923
    400  7923							;TODO...
      0  7923					      DEF	SAFE_LookForCheck
      1  7923				   BANK_SAFE_LookForCheck SET	_CURRENT_BANK
      2  7923
      3  7923				   SAFE_LookForCheck
    402  7923					      SUBROUTINE
    403  7923
    404  7923		       a5 9c		      lda	currentPly
    405  7925		       85 3e		      sta	SET_BANK_RAM
    406  7927
    407  7927		       ac 35 f0 	      ldy	moveIndex
    408  792a		       30 0f		      bmi	.failed
    409  792c
    410  792c		       be 00 f1    .scan      ldx	MoveTo,y
    411  792f		       bd 7a f0 	      lda	Board,x
    412  7932		       29 0f		      and	#PIECE_MASK
    413  7934		       c9 07		      cmp	#KING
    414  7936		       f0 04		      beq	.inCheck	; --> CS too
    415  7938		       88		      dey
    416  7939		       10 f1		      bpl	.scan
    417  793b
    418  793b		       18	   .failed    clc
    419  793c
    420  793c		       a5 8e	   .inCheck   lda	savedBank	; CS or CC
    421  793e		       85 3f		      sta	SET_BANK
    422  7940		       60		      rts
    423  7941
    424  7941							;---------------------------------------------------------------------------------------------------
    425  7941
      0  7941					      DEF	aiFB0
      1  7941				   BANK_aiFB0 SET	_CURRENT_BANK
      2  7941
      3  7941				   aiFB0
    427  7941					      SUBROUTINE
    428  7941
    429  7941							; Call move generation for all pieces
    430  7941							; Test alpha-beta
    431  7941
    432  7941							;lda currentPly
    433  7941							;sta SET_BANK_RAM
    434  7941							;jsr alphaBeta
    435  7941
    436  7941		       a5 9c		      lda	currentPly
    437  7943		       85 3e		      sta	SET_BANK_RAM
    438  7945		       20 ac f2 	      jsr	GenerateMovesForNextPiece
    439  7948
    440  7948		       a5 9d		      lda	piecelistIndex
    441  794a		       29 0f		      and	#15
    442  794c		       c9 00		      cmp	#0
    443  794e		       d0 0f		      bne	.wait
    444  7950
    445  7950		       e6 82		      inc	drawPhase
    446  7952
    447  7952
    448  7952		       a6 9e		      ldx	sideToMove
    449  7954		       10 05		      bpl	.player
    450  7956
      0  7956					      PHASE	AI_FB2	; computer select move
      1  7956		       a9 14		      lda	#AI_FB2
      2  7958		       85 8f		      sta	aiPhase
    452  795a		       60		      rts
    453  795b
    454  795b
      0  795b				   .player    PHASE	AI_StartMoveGen
      1  795b		       a9 0b		      lda	#AI_StartMoveGen
      2  795d		       85 8f		      sta	aiPhase
    456  795f
    457  795f
    458  795f
    459  795f
    460  795f		       60	   .wait      rts
    461  7960
    462  7960
    463  7960							;---------------------------------------------------------------------------------------------------
    464  7960
      0  7960					      DEF	aiFB2
      1  7960				   BANK_aiFB2 SET	_CURRENT_BANK
      2  7960
      3  7960				   aiFB2
    466  7960					      SUBROUTINE
    467  7960
    468  7960							; Choose one of the moves
    469  7960
    470  7960		       a5 9c		      lda	currentPly
    471  7962		       85 3e		      sta	SET_BANK_RAM	; switch in movelist
    472  7964
    473  7964		       ad 35 f0 	      lda	moveIndex
    474  7967		       c9 ff		      cmp	#-1
    475  7969		       f0 13		      beq	.halted	; no valid moves
    476  796b
    477  796b
    478  796b		       a9 ff		      lda	#-1
    479  796d		       85 9f		      sta	fromSquare
    480  796f		       85 a1		      sta	toSquare
    481  7971
    482  7971		       a5 9e		      lda	sideToMove
    483  7973		       10 03		      bpl	.notComputer
    484  7975
    485  7975		       20 0f fe 	      jsr	MoveViaList
    486  7978
    487  7978		       e6 82	   .notComputer inc	drawPhase
      0  797a					      PHASE	AI_FB3
      1  797a		       a9 15		      lda	#AI_FB3
      2  797c		       85 8f		      sta	aiPhase
    489  797e		       60	   .halted    rts
    490  797f
    491  797f
    492  797f							;---------------------------------------------------------------------------------------------------
    493  797f
      0  797f					      DEF	debug
      1  797f				   BANK_debug SET	_CURRENT_BANK
      2  797f
      3  797f				   debug
    495  797f					      SUBROUTINE
    496  797f
    497  797f							; Use this to trap breakpoints in "unknown" banks. Just "jsr catch" from wherever you want
    498  797f							; to catch the code, and put a breakpoint here instead. Then step, and you're at the place
    499  797f							; you wanted to see, without knowing the bank.
    500  797f
    501  797f		       60		      rts
    502  7980
    503  7980
    504  7980							;---------------------------------------------------------------------------------------------------
    505  7980
      0  7980					      DEF	aiMarchToTargetA
      1  7980				   BANK_aiMarchToTargetA SET	_CURRENT_BANK
      2  7980
      3  7980				   aiMarchToTargetA
    507  7980					      SUBROUTINE
    508  7980
    509  7980							; Start marching towards destination
    510  7980
    511  7980		       a5 83		      lda	drawDelay
    512  7982		       f0 00		      beq	.progress
    513  7984							;dec drawDelay
    514  7984							;rts
    515  7984				   .progress
    516  7984
    517  7984		       a5 9f		      lda	fromSquare
    518  7986		       c5 a1		      cmp	toSquare
    519  7988		       f0 68		      beq	.unmoved
    520  798a
    521  798a							; Now we calculate move to new square
    522  798a
    523  798a		       a5 9f		      lda	fromSquare
    524  798c		       85 84		      sta	lastSquare
    525  798e		       4a		      lsr
    526  798f		       4a		      lsr
    527  7990		       4a		      lsr
    528  7991		       85 a7		      sta	__fromRow
    529  7993		       a5 a1		      lda	toSquare
    530  7995		       4a		      lsr
    531  7996		       4a		      lsr
    532  7997		       4a		      lsr
    533  7998		       c5 a7		      cmp	__fromRow
    534  799a		       f0 11		      beq	rowOK
    535  799c		       b0 09		      bcs	.downRow
    536  799e		       a5 9f		      lda	fromSquare
    537  79a0		       e9 07		      sbc	#7
    538  79a2		       85 9f		      sta	fromSquare
    539  79a4		       4c ad f9 	      jmp	nowcol
    540  79a7		       a5 9f	   .downRow   lda	fromSquare
    541  79a9		       69 07		      adc	#7
    542  79ab		       85 9f		      sta	fromSquare
    543  79ad				   rowOK
    544  79ad				   nowcol
    545  79ad
    546  79ad		       a5 9f		      lda	fromSquare
    547  79af		       29 07		      and	#7
    548  79b1		       85 a7		      sta	__fromRow
    549  79b3		       a5 a1		      lda	toSquare
    550  79b5		       29 07		      and	#7
    551  79b7		       c5 a7		      cmp	__fromRow
    552  79b9		       f0 09		      beq	colok
    553  79bb		       90 05		      bcc	.leftCol
    554  79bd		       e6 9f		      inc	fromSquare
    555  79bf		       4c c4 f9 	      jmp	colok
    556  79c2		       c6 9f	   .leftCol   dec	fromSquare
    557  79c4				   colok
    558  79c4
    559  79c4							; erase object in new sqare --> blank
    560  79c4
    561  79c4		       a6 9f		      ldx	fromSquare
    562  79c6		       86 80		      stx	drawPieceNumber
    563  79c8		       a9 08		      lda	#RAMBANK_MOVES_RAM
    564  79ca		       85 3e		      sta	SET_BANK_RAM
    565  79cc		       bc 4b f3 	      ldy	Base64ToIndex,x
    566  79cf		       b9 7a f0 	      lda	Board,y
    567  79d2		       f0 03		      beq	.skipbl
    568  79d4		       20 d8 fd 	      jsr	CopySinglePiece	; erase next square along --> blank
    569  79d7
    570  79d7		       a9 08	   .skipbl    lda	#RAMBANK_MOVES_RAM
    571  79d9		       85 3e		      sta	SET_BANK_RAM
    572  79db		       a6 9f		      ldx	fromSquare
    573  79dd		       bc 4b f3 	      ldy	Base64ToIndex,x
    574  79e0
    575  79e0		       b9 7a f0 	      lda	Board,y
    576  79e3		       85 a3		      sta	lastPiece	; what we are overwriting
    577  79e5		       a5 a0		      lda	fromPiece
    578  79e7		       09 40		      ora	#FLAG_MOVED	; prevents usage in castling for K/R
    579  79e9		       99 7a f4 	      sta	Board+RAM_WRITE,y	; and what's actually moving there
    580  79ec
    581  79ec		       e6 82		      inc	drawPhase
      0  79ee					      PHASE	AI_MarchB
      1  79ee		       a9 19		      lda	#AI_MarchB
      2  79f0		       85 8f		      sta	aiPhase
    583  79f2
    584  79f2		       60	   .unmoved   rts
    585  79f3
    586  79f3
    587  79f3							;---------------------------------------------------------------------------------------------------
    588  79f3
      0  79f3					      DEF	aiMarchToTargetB
      1  79f3				   BANK_aiMarchToTargetB SET	_CURRENT_BANK
      2  79f3
      3  79f3				   aiMarchToTargetB
    590  79f3					      SUBROUTINE
    591  79f3
    592  79f3		       a5 83		      lda	drawDelay
    593  79f5		       f0 00		      beq	.mb
    594  79f7							;dec drawDelay
    595  79f7							;rts
    596  79f7				   .mb
    597  79f7
    598  79f7
    599  79f7							; now we want to undraw the piece in the old square
    600  79f7
    601  79f7		       a5 84		      lda	lastSquare
    602  79f9		       85 80		      sta	drawPieceNumber
    603  79fb		       20 d8 fd 	      jsr	CopySinglePiece	; erase whatever was on the previous square (completely blank)
    604  79fe
    605  79fe		       a9 08		      lda	#RAMBANK_MOVES_RAM
    606  7a00		       85 3e		      sta	SET_BANK_RAM
    607  7a02		       a5 a4		      lda	previousPiece
    608  7a04
    609  7a04		       a6 84		      ldx	lastSquare
    610  7a06		       bc 4b f3 	      ldy	Base64ToIndex,x
    611  7a09		       99 7a f4 	      sta	Board+RAM_WRITE,y
    612  7a0c
    613  7a0c		       a5 a3		      lda	lastPiece
    614  7a0e		       85 a4		      sta	previousPiece
    615  7a10
    616  7a10		       e6 82		      inc	drawPhase
      0  7a12					      PHASE	AI_MarchB2
      1  7a12		       a9 1b		      lda	#AI_MarchB2
      2  7a14		       85 8f		      sta	aiPhase
    618  7a16
    619  7a16		       60		      rts
    620  7a17
    621  7a17
    622  7a17							;---------------------------------------------------------------------------------------------------
    623  7a17
      0  7a17					      DEF	aiMarchB2
      1  7a17				   BANK_aiMarchB2 SET	_CURRENT_BANK
      2  7a17
      3  7a17				   aiMarchB2
    625  7a17					      SUBROUTINE
    626  7a17
    627  7a17		       a6 84		      ldx	lastSquare
    628  7a19		       86 80		      stx	drawPieceNumber
    629  7a1b
    630  7a1b		       a9 08		      lda	#RAMBANK_MOVES_RAM
    631  7a1d		       85 3e		      sta	SET_BANK_RAM
    632  7a1f		       bc 4b f3 	      ldy	Base64ToIndex,x
    633  7a22		       b9 7a f0 	      lda	Board,y
    634  7a25		       f0 03		      beq	.skipbl2
    635  7a27
    636  7a27		       20 d8 fd 	      jsr	CopySinglePiece	; draw previous piece back in old position
    637  7a2a				   .skipbl2
    638  7a2a		       a5 9f		      lda	fromSquare
    639  7a2c		       c5 a1		      cmp	toSquare
    640  7a2e		       f0 0d		      beq	xhalt
    641  7a30
    642  7a30		       a9 00		      lda	#0	; inter-move segment speed (can be 0)
    643  7a32		       85 83		      sta	drawDelay
    644  7a34
    645  7a34		       a9 0a		      lda	#MARCH
    646  7a36		       85 82		      sta	drawPhase
    647  7a38
      0  7a38					      PHASE	AI_MarchToTargetA
      1  7a38		       a9 18		      lda	#AI_MarchToTargetA
      2  7a3a		       85 8f		      sta	aiPhase
    649  7a3c
    650  7a3c		       60		      rts
    651  7a3d
    652  7a3d				   xhalt
    653  7a3d
    654  7a3d		       20 17 fe 	      jsr	FinaliseMove
    655  7a40
    656  7a40
    657  7a40		       a9 04		      lda	#4	; on/off count
    658  7a42		       85 85		      sta	drawCount	; flashing for piece about to move
    659  7a44		       a9 00		      lda	#0
    660  7a46		       85 83		      sta	drawDelay
    661  7a48
    662  7a48		       e6 82		      inc	drawPhase
    663  7a4a
      0  7a4a					      PHASE	AI_FinalFlash
      1  7a4a		       a9 1c		      lda	#AI_FinalFlash
      2  7a4c		       85 8f		      sta	aiPhase
    665  7a4e		       60		      rts
    666  7a4f
    667  7a4f
    668  7a4f							;---------------------------------------------------------------------------------------------------
    669  7a4f
      0  7a4f					      DEF	aiSpecialMoveFixup
      1  7a4f				   BANK_aiSpecialMoveFixup SET	_CURRENT_BANK
      2  7a4f
      3  7a4f				   aiSpecialMoveFixup
    671  7a4f					      SUBROUTINE
    672  7a4f
    673  7a4f		       a9 04		      lda	#STARTMOVE
    674  7a51		       85 82		      sta	drawPhase
    675  7a53
    676  7a53
      0  7a53					      PHASE	AI_FlipBuffers
      1  7a53		       a9 12		      lda	#AI_FlipBuffers
      2  7a55		       85 8f		      sta	aiPhase
    678  7a57
      0  7a57					      JSRAM_SAFE	CastleFixup
      1  7a57
      2  7a57
      3  7a57
      4  7a57		       a9 00		      lda	#BANK_CastleFixup
      5  7a59		       85 8e		      sta	savedBank
      6  7a5b		       85 3f		      sta	SET_BANK
      7  7a5d		       20 eb f0 	      jsr	CastleFixup
    680  7a60
    681  7a60
    682  7a60							; Handle en-passant captures
    683  7a60
    684  7a60		       a5 a0		      lda	fromPiece
    685  7a62		       29 20		      and	#FLAG_ENPASSANT
    686  7a64		       f0 00		      beq	.noEP
    687  7a66
    688  7a66
    689  7a66							; TODO - handle the en-passant capture and fixup
    690  7a66
    691  7a66				   .noEP
    692  7a66
    693  7a66
    694  7a66
    695  7a66					      if	ASSERTS
      0  7a66					      JSRAM_SAFE	DIAGNOSTIC_checkPieces
      1  7a66
      2  7a66
      3  7a66
      4  7a66		       a9 0c		      lda	#BANK_DIAGNOSTIC_checkPieces
      5  7a68		       85 8e		      sta	savedBank
      6  7a6a		       85 3f		      sta	SET_BANK
      7  7a6c		       20 42 f2 	      jsr	DIAGNOSTIC_checkPieces
    697  7a6f					      endif
    698  7a6f
    699  7a6f		       60		      rts
    700  7a70
    701  7a70
    702  7a70							;---------------------------------------------------------------------------------------------------
    703  7a70
      0  7a70					      DEF	MoveForSinglePiece
      1  7a70				   BANK_MoveForSinglePiece SET	_CURRENT_BANK
      2  7a70
      3  7a70				   MoveForSinglePiece
    705  7a70					      SUBROUTINE
    706  7a70
    707  7a70		       a9 08		      lda	#RAMBANK_MOVES_RAM
    708  7a72		       85 3e		      sta	SET_BANK_RAM
    709  7a74
    710  7a74		       a6 98		      ldx	currentSquare	; used in move handlers
    711  7a76		       bd 7a f0 	      lda	Board,x
    712  7a79		       85 97		      sta	currentPiece
    713  7a7b
    714  7a7b							;***********************************************************************************************
    715  7a7b					      IF	ASSERTS
    716  7a7b					      SUBROUTINE
    717  7a7b							; DEBUG: Make sure we're looking at correct colour
    718  7a7b		       45 9e		      eor	sideToMove
    719  7a7d		       30 fe	   .lock      bmi	.lock
    720  7a7f		       a5 97		      lda	currentPiece
    721  7a81					      ENDIF
    722  7a81							;***********************************************************************************************
    723  7a81
    724  7a81		       29 0f		      and	#PIECE_MASK
    725  7a83		       a8		      tay
    726  7a84
    727  7a84							;***********************************************************************************************
    728  7a84					      IF	ASSERTS
    729  7a84							; DEBUG: Make sure we have an actual piece, not an empty square
    730  7a84					      SUBROUTINE
    731  7a84		       f0 fe	   .lock      beq	.lock	; catch errors
    732  7a86					      ENDIF
    733  7a86							;***********************************************************************************************
    734  7a86
    735  7a86		       b9 98 fa 	      lda	HandlerVectorLO-1,y
    736  7a89		       85 a8		      sta	__vector
    737  7a8b		       b9 9f fa 	      lda	HandlerVectorHI-1,y
    738  7a8e		       85 a9		      sta	__vector+1
    739  7a90		       6c a8 00 	      jmp	(__vector)
    740  7a93
    741  7a93		       a5 9c	   MoveReturn lda	currentPly
    742  7a95		       85 3e		      sta	SET_BANK_RAM
    743  7a97
    744  7a97		       60		      rts
    745  7a98
      0  7a98					      OPTIONAL_PAGEBREAK	"Vector Tables", 15
     10  7a98					      LIST	ON
    747  7a98
    748  7a98		       00		      .byte.b	0	; dummy to prevent page cross access on index 0
    749  7a99
    750  7a99				   HandlerVectorLO
    751  7a99		       d2		      .byte.b	<Handle_WHITE_PAWN	; 1
    752  7a9a		       92		      .byte.b	<Handle_BLACK_PAWN	; 2
    753  7a9b		       25		      .byte.b	<Handle_KNIGHT	; 3
    754  7a9c		       a1		      .byte.b	<Handle_BISHOP	; 4
    755  7a9d		       04		      .byte.b	<Handle_ROOK	; 5
    756  7a9e		       de		      .byte.b	<Handle_QUEEN	; 6
    757  7a9f		       67		      .byte.b	<Handle_KING	; 7
    758  7aa0
    759  7aa0				   HandlerVectorHI
    760  7aa0		       fa		      .byte.b	>Handle_WHITE_PAWN
    761  7aa1		       fb		      .byte.b	>Handle_BLACK_PAWN
    762  7aa2		       fc		      .byte.b	>Handle_KNIGHT
    763  7aa3		       f1		      .byte.b	>Handle_BISHOP
    764  7aa4		       f2		      .byte.b	>Handle_ROOK
    765  7aa5		       f0		      .byte.b	>Handle_QUEEN
    766  7aa6		       f2		      .byte.b	>Handle_KING
    767  7aa7
    768  7aa7							;---------------------------------------------------------------------------------------------------
    769  7aa7
------- FILE Handler_PAWN.asm LEVEL 3 PASS 2
      0  7aa7					      include	"Handler_PAWN.asm"
      1  7aa7							; Copyright (C)2020 Andrew Davie
      2  7aa7							; Pawn move handlers
      3  7aa7
      4  7aa7							;---------------------------------------------------------------------------------------------------
      5  7aa7							; WHITE PAWN
      6  7aa7							;---------------------------------------------------------------------------------------------------
      7  7aa7
      8  7aa7		       00 28	   WHITE_HOME_ROW =	40	; < this, on home row
      9  7aa7		       00 52	   BLACK_HOME_ROW =	82	; >= this, on home row
     10  7aa7
     11  7aa7							;---------------------------------------------------------------------------------------------------
     12  7aa7
     13  7aa7					      MAC	en_passant
     14  7aa7					      SUBROUTINE
     15  7aa7							; {1} = _LEFT or _RIGHT
     16  7aa7					      ldy	ValidSquare+{1},x
     17  7aa7					      cpy	enPassantPawn
     18  7aa7					      bne	.invalid
     19  7aa7					      ldy	ValidSquare+{1}+{2},x	; en-passant endpoint must be blank
     20  7aa7					      lda	Board,y
     21  7aa7					      bne	.invalid
     22  7aa7					      jsr	AddMove	; the MOVE will need to deal with the details of en-passant??
     23  7aa7				   .invalid
     24  7aa7					      ENDM
     25  7aa7
     26  7aa7							;---------------------------------------------------------------------------------------------------
     27  7aa7
     28  7aa7					      MAC	promote_pawn
     29  7aa7					      SUBROUTINE
     30  7aa7							;{1} = BLACK or WHITE
     31  7aa7
     32  7aa7					      lda	currentPiece
     33  7aa7					      pha
     34  7aa7
     35  7aa7					      sty	__temp
     36  7aa7					      lda	#{1}|QUEEN
     37  7aa7					      sta	currentPiece
     38  7aa7					      jsr	AddMove
     39  7aa7
     40  7aa7					      lda	#{1}|ROOK
     41  7aa7					      sta	currentPiece
     42  7aa7					      ldy	__temp
     43  7aa7					      jsr	AddMove
     44  7aa7
     45  7aa7					      lda	#{1}|BISHOP
     46  7aa7					      sta	currentPiece
     47  7aa7					      ldy	__temp
     48  7aa7					      jsr	AddMove
     49  7aa7
     50  7aa7					      lda	#{1}|KNIGHT
     51  7aa7					      sta	currentPiece
     52  7aa7					      ldy	__temp
     53  7aa7					      jsr	AddMove
     54  7aa7
     55  7aa7					      pla
     56  7aa7					      sta	currentPiece
     57  7aa7					      ENDM
     58  7aa7
     59  7aa7							;---------------------------------------------------------------------------------------------------
     60  7aa7
     61  7aa7					      MAC	move_or_promote_pawn
     62  7aa7					      SUBROUTINE
     63  7aa7							; {1} = BLACK or WHITE
     64  7aa7
     65  7aa7					      IF	{1} = WHITE
     66  7aa7					      cpy	#90	; last rank?
     67  7aa7					      bcc	.standard
     68  7aa7					      jsr	PromoteWhitePawn
     69  7aa7					      jmp	.pMoved
     70  7aa7					      ENDIF
     71  7aa7
     72  7aa7					      IF	{1} = BLACK
     73  7aa7					      cpy	#30	; last rank?
     74  7aa7					      bcs	.standard
     75  7aa7					      jsr	PromoteBlackPawn
     76  7aa7					      jmp	.pMoved
     77  7aa7					      ENDIF
     78  7aa7
     79  7aa7				   .standard  jsr	AddMove	; add +1UP move
     80  7aa7				   .pMoved
     81  7aa7
     82  7aa7					      ENDM
     83  7aa7
     84  7aa7							;---------------------------------------------------------------------------------------------------
     85  7aa7
     86  7aa7					      MAC	take
     87  7aa7					      SUBROUTINE
     88  7aa7							; {1} = capture square offset
     89  7aa7
     90  7aa7					      ldy	ValidSquare+{1},x
     91  7aa7					      bmi	.invalid
     92  7aa7					      lda	Board,y
     93  7aa7					      beq	.invalid	; square empty
     94  7aa7					      eor	currentPiece
     95  7aa7					      bpl	.invalid	; same colour
     96  7aa7
     97  7aa7					      MOVE_OR_PROMOTE_PAWN	{2}
     98  7aa7				   .invalid
     99  7aa7					      ENDM
    100  7aa7
    101  7aa7							;---------------------------------------------------------------------------------------------------
    102  7aa7
      0  7aa7					      DEF	PromoteWhitePawn
      1  7aa7				   BANK_PromoteWhitePawn SET	_CURRENT_BANK
      2  7aa7
      3  7aa7				   PromoteWhitePawn
      0  7aa7					      PROMOTE_PAWN	WHITE
      1  7aa7					      SUBROUTINE
      2  7aa7
      3  7aa7
      4  7aa7		       a5 97		      lda	currentPiece
      5  7aa9		       48		      pha
      6  7aaa
      7  7aaa		       84 a9		      sty	__temp
      8  7aac		       a9 06		      lda	#WHITE|QUEEN
      9  7aae		       85 97		      sta	currentPiece
     10  7ab0		       20 be fc 	      jsr	AddMove
     11  7ab3
     12  7ab3		       a9 05		      lda	#WHITE|ROOK
     13  7ab5		       85 97		      sta	currentPiece
     14  7ab7		       a4 a9		      ldy	__temp
     15  7ab9		       20 be fc 	      jsr	AddMove
     16  7abc
     17  7abc		       a9 04		      lda	#WHITE|BISHOP
     18  7abe		       85 97		      sta	currentPiece
     19  7ac0		       a4 a9		      ldy	__temp
     20  7ac2		       20 be fc 	      jsr	AddMove
     21  7ac5
     22  7ac5		       a9 03		      lda	#WHITE|KNIGHT
     23  7ac7		       85 97		      sta	currentPiece
     24  7ac9		       a4 a9		      ldy	__temp
     25  7acb		       20 be fc 	      jsr	AddMove
     26  7ace
     27  7ace		       68		      pla
     28  7acf		       85 97		      sta	currentPiece
    105  7ad1		       60		      rts
    106  7ad2
    107  7ad2							;---------------------------------------------------------------------------------------------------
    108  7ad2
      0  7ad2					      DEF	Handle_WHITE_PAWN
      1  7ad2				   BANK_Handle_WHITE_PAWN SET	_CURRENT_BANK
      2  7ad2
      3  7ad2				   Handle_WHITE_PAWN
    110  7ad2
    111  7ad2		       bc 20 f0 	      ldy	ValidSquare+_UP,x	; square above must be blank (WILL NOT EVER be off-board!)
    112  7ad5		       b9 7a f0 	      lda	Board,y
    113  7ad8		       d0 20		      bne	.pMoved	; occupied
    114  7ada
    115  7ada							; we may need to promote the pawn
    116  7ada							; All possibilites (Q/R/B/N) are added as individual moves
    117  7ada
      0  7ada					      MOVE_OR_PROMOTE_PAWN	WHITE
      1  7ada					      SUBROUTINE
      2  7ada
      3  7ada
      4  7ada					      IF	WHITE = WHITE
      5  7ada		       c0 5a		      cpy	#90
      6  7adc		       90 06		      bcc	.standard
      7  7ade		       20 a7 fa 	      jsr	PromoteWhitePawn
      8  7ae1		       4c e7 fa 	      jmp	.pMoved
      9  7ae4					      ENDIF
     10  7ae4
     11  7ae4				  -	      IF	WHITE = BLACK
     12  7ae4				  -	      cpy	#30
     13  7ae4				  -	      bcs	.standard
     14  7ae4				  -	      jsr	PromoteBlackPawn
     15  7ae4				  -	      jmp	.pMoved
     16  7ae4					      ENDIF
     17  7ae4
     18  7ae4		       20 be fc    .standard  jsr	AddMove
     19  7ae7				   .pMoved
     20  7ae7
    119  7ae7
    120  7ae7
    121  7ae7
    122  7ae7							; the +2 move off the home rank...
    123  7ae7
    124  7ae7		       a6 98		      ldx	currentSquare
    125  7ae9		       e0 28		      cpx	#WHITE_HOME_ROW
    126  7aeb		       b0 0d		      bcs	.pMoved	; pawn has moved so can't do +2
    127  7aed		       bc 2a f0 	      ldy	ValidSquare+_UP+_UP,x	; WILL be a valid square
    128  7af0		       b9 7a f0 	      lda	Board,y
    129  7af3		       d0 05		      bne	.pMoved	; destination square occupied
    130  7af5
    131  7af5		       20 be fc 	      jsr	AddMove	; add the +2UP move off home row
    132  7af8		       a6 98		      ldx	currentSquare
    133  7afa
    134  7afa				   .pMoved
    135  7afa
    136  7afa							; regular captures...
    137  7afa
      0  7afa					      TAKE	_UP+_LEFT, WHITE
      1  7afa					      SUBROUTINE
      2  7afa
      3  7afa
      4  7afa		       bc 1f f0 	      ldy	ValidSquare+_UP+_LEFT,x
      5  7afd		       30 16		      bmi	.invalid
      6  7aff		       b9 7a f0 	      lda	Board,y
      7  7b02		       f0 11		      beq	.invalid
      8  7b04		       45 97		      eor	currentPiece
      9  7b06		       10 0d		      bpl	.invalid
     10  7b08
      0  7b08					      MOVE_OR_PROMOTE_PAWN	WHITE
      1  7b08					      SUBROUTINE
      2  7b08
      3  7b08
      4  7b08					      IF	WHITE = WHITE
      5  7b08		       c0 5a		      cpy	#90
      6  7b0a		       90 06		      bcc	.standard
      7  7b0c		       20 a7 fa 	      jsr	PromoteWhitePawn
      8  7b0f		       4c 15 fb 	      jmp	.pMoved
      9  7b12					      ENDIF
     10  7b12
     11  7b12				  -	      IF	WHITE = BLACK
     12  7b12				  -	      cpy	#30
     13  7b12				  -	      bcs	.standard
     14  7b12				  -	      jsr	PromoteBlackPawn
     15  7b12				  -	      jmp	.pMoved
     16  7b12					      ENDIF
     17  7b12
     18  7b12		       20 be fc    .standard  jsr	AddMove
     19  7b15				   .pMoved
     20  7b15
     12  7b15				   .invalid
    139  7b15		       a6 98		      ldx	currentSquare
      0  7b17					      TAKE	_UP+_RIGHT, WHITE
      1  7b17					      SUBROUTINE
      2  7b17
      3  7b17
      4  7b17		       bc 21 f0 	      ldy	ValidSquare+_UP+_RIGHT,x
      5  7b1a		       30 16		      bmi	.invalid
      6  7b1c		       b9 7a f0 	      lda	Board,y
      7  7b1f		       f0 11		      beq	.invalid
      8  7b21		       45 97		      eor	currentPiece
      9  7b23		       10 0d		      bpl	.invalid
     10  7b25
      0  7b25					      MOVE_OR_PROMOTE_PAWN	WHITE
      1  7b25					      SUBROUTINE
      2  7b25
      3  7b25
      4  7b25					      IF	WHITE = WHITE
      5  7b25		       c0 5a		      cpy	#90
      6  7b27		       90 06		      bcc	.standard
      7  7b29		       20 a7 fa 	      jsr	PromoteWhitePawn
      8  7b2c		       4c 32 fb 	      jmp	.pMoved
      9  7b2f					      ENDIF
     10  7b2f
     11  7b2f				  -	      IF	WHITE = BLACK
     12  7b2f				  -	      cpy	#30
     13  7b2f				  -	      bcs	.standard
     14  7b2f				  -	      jsr	PromoteBlackPawn
     15  7b2f				  -	      jmp	.pMoved
     16  7b2f					      ENDIF
     17  7b2f
     18  7b2f		       20 be fc    .standard  jsr	AddMove
     19  7b32				   .pMoved
     20  7b32
     12  7b32				   .invalid
    141  7b32
    142  7b32
    143  7b32							; en-passant captures...
    144  7b32				   EN_PASSANTING
    145  7b32					      if	1
    146  7b32		       a5 9a		      lda	enPassantPawn
    147  7b34		       f0 2e		      beq	.noEnPassant
    148  7b36
    149  7b36		       a5 97		      lda	currentPiece
    150  7b38		       09 20		      ora	#FLAG_ENPASSANT
    151  7b3a		       85 97		      sta	currentPiece
    152  7b3c
    153  7b3c		       a6 98		      ldx	currentSquare
      0  7b3e					      EN_PASSANT	_LEFT, _UP
      1  7b3e					      SUBROUTINE
      2  7b3e
      3  7b3e		       bc 15 f0 	      ldy	ValidSquare+_LEFT,x
      4  7b41		       c4 9a		      cpy	enPassantPawn
      5  7b43		       d0 0b		      bne	.invalid
      6  7b45		       bc 1f f0 	      ldy	ValidSquare+_LEFT+_UP,x
      7  7b48		       b9 7a f0 	      lda	Board,y
      8  7b4b		       d0 03		      bne	.invalid
      9  7b4d		       20 be fc 	      jsr	AddMove
     10  7b50				   .invalid
    155  7b50		       a6 98		      ldx	currentSquare
      0  7b52					      EN_PASSANT	_RIGHT, _UP
      1  7b52					      SUBROUTINE
      2  7b52
      3  7b52		       bc 17 f0 	      ldy	ValidSquare+_RIGHT,x
      4  7b55		       c4 9a		      cpy	enPassantPawn
      5  7b57		       d0 0b		      bne	.invalid
      6  7b59		       bc 21 f0 	      ldy	ValidSquare+_RIGHT+_UP,x
      7  7b5c		       b9 7a f0 	      lda	Board,y
      8  7b5f		       d0 03		      bne	.invalid
      9  7b61		       20 be fc 	      jsr	AddMove
     10  7b64				   .invalid
    157  7b64
    158  7b64				   .noEnPassant
    159  7b64					      endif
    160  7b64
    161  7b64		       4c 93 fa 	      jmp	MoveReturn
    162  7b67
    163  7b67
    164  7b67							;---------------------------------------------------------------------------------------------------
    165  7b67							; BLACK PAWN
    166  7b67							;---------------------------------------------------------------------------------------------------
    167  7b67
      0  7b67					      DEF	PromoteBlackPawn
      1  7b67				   BANK_PromoteBlackPawn SET	_CURRENT_BANK
      2  7b67
      3  7b67				   PromoteBlackPawn
      0  7b67					      PROMOTE_PAWN	BLACK
      1  7b67					      SUBROUTINE
      2  7b67
      3  7b67
      4  7b67		       a5 97		      lda	currentPiece
      5  7b69		       48		      pha
      6  7b6a
      7  7b6a		       84 a9		      sty	__temp
      8  7b6c		       a9 86		      lda	#BLACK|QUEEN
      9  7b6e		       85 97		      sta	currentPiece
     10  7b70		       20 be fc 	      jsr	AddMove
     11  7b73
     12  7b73		       a9 85		      lda	#BLACK|ROOK
     13  7b75		       85 97		      sta	currentPiece
     14  7b77		       a4 a9		      ldy	__temp
     15  7b79		       20 be fc 	      jsr	AddMove
     16  7b7c
     17  7b7c		       a9 84		      lda	#BLACK|BISHOP
     18  7b7e		       85 97		      sta	currentPiece
     19  7b80		       a4 a9		      ldy	__temp
     20  7b82		       20 be fc 	      jsr	AddMove
     21  7b85
     22  7b85		       a9 83		      lda	#BLACK|KNIGHT
     23  7b87		       85 97		      sta	currentPiece
     24  7b89		       a4 a9		      ldy	__temp
     25  7b8b		       20 be fc 	      jsr	AddMove
     26  7b8e
     27  7b8e		       68		      pla
     28  7b8f		       85 97		      sta	currentPiece
    170  7b91		       60		      rts
    171  7b92
      0  7b92					      DEF	Handle_BLACK_PAWN
      1  7b92				   BANK_Handle_BLACK_PAWN SET	_CURRENT_BANK
      2  7b92
      3  7b92				   Handle_BLACK_PAWN
    173  7b92					      SUBROUTINE
    174  7b92
    175  7b92		       bc 0c f0 	      ldy	ValidSquare+_DOWN,x	; square below must be blank (WILL NOT EVER be off-board!)
    176  7b95		       b9 7a f0 	      lda	Board,y
    177  7b98		       d0 20		      bne	.pMoved	; occupied
    178  7b9a
    179  7b9a							; we may need to promote the pawn
    180  7b9a							; All possibilites (Q/R/B/N) are added as individual moves
    181  7b9a
      0  7b9a					      MOVE_OR_PROMOTE_PAWN	BLACK
      1  7b9a					      SUBROUTINE
      2  7b9a
      3  7b9a
      4  7b9a				  -	      IF	BLACK = WHITE
      5  7b9a				  -	      cpy	#90
      6  7b9a				  -	      bcc	.standard
      7  7b9a				  -	      jsr	PromoteWhitePawn
      8  7b9a				  -	      jmp	.pMoved
      9  7b9a					      ENDIF
     10  7b9a
     11  7b9a					      IF	BLACK = BLACK
     12  7b9a		       c0 1e		      cpy	#30
     13  7b9c		       b0 06		      bcs	.standard
     14  7b9e		       20 67 fb 	      jsr	PromoteBlackPawn
     15  7ba1		       4c a7 fb 	      jmp	.pMoved
     16  7ba4					      ENDIF
     17  7ba4
     18  7ba4		       20 be fc    .standard  jsr	AddMove
     19  7ba7				   .pMoved
     20  7ba7
    183  7ba7
    184  7ba7							; the +2 move off the home rank...
    185  7ba7
    186  7ba7		       a6 98		      ldx	currentSquare
    187  7ba9		       e0 52		      cpx	#BLACK_HOME_ROW
    188  7bab		       90 0d		      bcc	.pMoved	; pawn has moved so can't do +2
    189  7bad		       bc 02 f0 	      ldy	ValidSquare+_DOWN+_DOWN,x	; WILL be a valid square
    190  7bb0		       b9 7a f0 	      lda	Board,y
    191  7bb3		       d0 05		      bne	.pMoved	; destination square occupied
    192  7bb5
    193  7bb5		       20 be fc 	      jsr	AddMove	; add the +2DOWN move off home row
    194  7bb8		       a6 98		      ldx	currentSquare
    195  7bba
    196  7bba				   .pMoved
    197  7bba
    198  7bba							; regular captures...
    199  7bba
      0  7bba					      TAKE	_DOWN+_LEFT, BLACK
      1  7bba					      SUBROUTINE
      2  7bba
      3  7bba
      4  7bba		       bc 0b f0 	      ldy	ValidSquare+_DOWN+_LEFT,x
      5  7bbd		       30 16		      bmi	.invalid
      6  7bbf		       b9 7a f0 	      lda	Board,y
      7  7bc2		       f0 11		      beq	.invalid
      8  7bc4		       45 97		      eor	currentPiece
      9  7bc6		       10 0d		      bpl	.invalid
     10  7bc8
      0  7bc8					      MOVE_OR_PROMOTE_PAWN	BLACK
      1  7bc8					      SUBROUTINE
      2  7bc8
      3  7bc8
      4  7bc8				  -	      IF	BLACK = WHITE
      5  7bc8				  -	      cpy	#90
      6  7bc8				  -	      bcc	.standard
      7  7bc8				  -	      jsr	PromoteWhitePawn
      8  7bc8				  -	      jmp	.pMoved
      9  7bc8					      ENDIF
     10  7bc8
     11  7bc8					      IF	BLACK = BLACK
     12  7bc8		       c0 1e		      cpy	#30
     13  7bca		       b0 06		      bcs	.standard
     14  7bcc		       20 67 fb 	      jsr	PromoteBlackPawn
     15  7bcf		       4c d5 fb 	      jmp	.pMoved
     16  7bd2					      ENDIF
     17  7bd2
     18  7bd2		       20 be fc    .standard  jsr	AddMove
     19  7bd5				   .pMoved
     20  7bd5
     12  7bd5				   .invalid
    201  7bd5		       a6 98		      ldx	currentSquare
      0  7bd7					      TAKE	_DOWN+_RIGHT, BLACK
      1  7bd7					      SUBROUTINE
      2  7bd7
      3  7bd7
      4  7bd7		       bc 0d f0 	      ldy	ValidSquare+_DOWN+_RIGHT,x
      5  7bda		       30 16		      bmi	.invalid
      6  7bdc		       b9 7a f0 	      lda	Board,y
      7  7bdf		       f0 11		      beq	.invalid
      8  7be1		       45 97		      eor	currentPiece
      9  7be3		       10 0d		      bpl	.invalid
     10  7be5
      0  7be5					      MOVE_OR_PROMOTE_PAWN	BLACK
      1  7be5					      SUBROUTINE
      2  7be5
      3  7be5
      4  7be5				  -	      IF	BLACK = WHITE
      5  7be5				  -	      cpy	#90
      6  7be5				  -	      bcc	.standard
      7  7be5				  -	      jsr	PromoteWhitePawn
      8  7be5				  -	      jmp	.pMoved
      9  7be5					      ENDIF
     10  7be5
     11  7be5					      IF	BLACK = BLACK
     12  7be5		       c0 1e		      cpy	#30
     13  7be7		       b0 06		      bcs	.standard
     14  7be9		       20 67 fb 	      jsr	PromoteBlackPawn
     15  7bec		       4c f2 fb 	      jmp	.pMoved
     16  7bef					      ENDIF
     17  7bef
     18  7bef		       20 be fc    .standard  jsr	AddMove
     19  7bf2				   .pMoved
     20  7bf2
     12  7bf2				   .invalid
    203  7bf2
    204  7bf2							; en-passant captures...
    205  7bf2
    206  7bf2					      if	1
    207  7bf2		       a5 9a		      lda	enPassantPawn
    208  7bf4		       f0 2c		      beq	.noEnPassant
    209  7bf6
    210  7bf6		       a5 97		      lda	currentPiece
    211  7bf8		       09 20		      ora	#FLAG_ENPASSANT
    212  7bfa		       85 97		      sta	currentPiece
    213  7bfc
      0  7bfc					      EN_PASSANT	_LEFT, _DOWN
      1  7bfc					      SUBROUTINE
      2  7bfc
      3  7bfc		       bc 15 f0 	      ldy	ValidSquare+_LEFT,x
      4  7bff		       c4 9a		      cpy	enPassantPawn
      5  7c01		       d0 0b		      bne	.invalid
      6  7c03		       bc 0b f0 	      ldy	ValidSquare+_LEFT+_DOWN,x
      7  7c06		       b9 7a f0 	      lda	Board,y
      8  7c09		       d0 03		      bne	.invalid
      9  7c0b		       20 be fc 	      jsr	AddMove
     10  7c0e				   .invalid
    215  7c0e		       a6 98		      ldx	currentSquare
      0  7c10					      EN_PASSANT	_RIGHT, _DOWN
      1  7c10					      SUBROUTINE
      2  7c10
      3  7c10		       bc 17 f0 	      ldy	ValidSquare+_RIGHT,x
      4  7c13		       c4 9a		      cpy	enPassantPawn
      5  7c15		       d0 0b		      bne	.invalid
      6  7c17		       bc 0d f0 	      ldy	ValidSquare+_RIGHT+_DOWN,x
      7  7c1a		       b9 7a f0 	      lda	Board,y
      8  7c1d		       d0 03		      bne	.invalid
      9  7c1f		       20 be fc 	      jsr	AddMove
     10  7c22				   .invalid
    217  7c22
    218  7c22				   .noEnPassant
    219  7c22					      endif
    220  7c22
    221  7c22		       4c 93 fa    Handle_BLANK jmp	MoveReturn
    222  7c25
    223  7c25							; EOF
------- FILE BANK_FIXED.asm
------- FILE Handler_KNIGHT.asm LEVEL 3 PASS 2
      0  7c25					      include	"Handler_KNIGHT.asm"
      1  7c25							; Copyright (C)2020 Andrew Davie
      2  7c25							; Knight move handler
      3  7c25
      4  7c25							;---------------------------------------------------------------------------------------------------
      5  7c25							; KNIGHT
      6  7c25							;---------------------------------------------------------------------------------------------------
      7  7c25
      0  7c25					      DEF	Handle_KNIGHT
      1  7c25				   BANK_Handle_KNIGHT SET	_CURRENT_BANK
      2  7c25
      3  7c25				   Handle_KNIGHT
      9  7c25
     10  7c25							; x = currentSquare (square the piece is on)
     11  7c25							; currentPiece (with flags/colour attached)
     12  7c25
      0  7c25					      MOVE_TO	_DOWN+_DOWN+_LEFT
      1  7c25					      SUBROUTINE
      2  7c25		       bc 01 f0 	      ldy	ValidSquare+_DOWN+_DOWN+_LEFT,x
      3  7c28		       30 0c		      bmi	.invalid
      4  7c2a		       b9 7a f0 	      lda	Board,y
      5  7c2d		       f0 04		      beq	.squareEmpty
      6  7c2f		       45 97		      eor	currentPiece
      7  7c31		       10 03		      bpl	.invalid
      8  7c33		       20 be fc    .squareEmpty jsr	AddMove
      9  7c36				   .invalid
      0  7c36					      MOVE_TO_X	_DOWN+_DOWN+_RIGHT
      1  7c36		       a6 98		      ldx	currentSquare
      0  7c38					      MOVE_TO	_DOWN+_DOWN+_RIGHT
      1  7c38					      SUBROUTINE
      2  7c38		       bc 03 f0 	      ldy	ValidSquare+_DOWN+_DOWN+_RIGHT,x
      3  7c3b		       30 0c		      bmi	.invalid
      4  7c3d		       b9 7a f0 	      lda	Board,y
      5  7c40		       f0 04		      beq	.squareEmpty
      6  7c42		       45 97		      eor	currentPiece
      7  7c44		       10 03		      bpl	.invalid
      8  7c46		       20 be fc    .squareEmpty jsr	AddMove
      9  7c49				   .invalid
      0  7c49					      MOVE_TO_X	_UP+_UP+_LEFT
      1  7c49		       a6 98		      ldx	currentSquare
      0  7c4b					      MOVE_TO	_UP+_UP+_LEFT
      1  7c4b					      SUBROUTINE
      2  7c4b		       bc 29 f0 	      ldy	ValidSquare+_UP+_UP+_LEFT,x
      3  7c4e		       30 0c		      bmi	.invalid
      4  7c50		       b9 7a f0 	      lda	Board,y
      5  7c53		       f0 04		      beq	.squareEmpty
      6  7c55		       45 97		      eor	currentPiece
      7  7c57		       10 03		      bpl	.invalid
      8  7c59		       20 be fc    .squareEmpty jsr	AddMove
      9  7c5c				   .invalid
      0  7c5c					      MOVE_TO_X	_UP+_UP+_RIGHT
      1  7c5c		       a6 98		      ldx	currentSquare
      0  7c5e					      MOVE_TO	_UP+_UP+_RIGHT
      1  7c5e					      SUBROUTINE
      2  7c5e		       bc 2b f0 	      ldy	ValidSquare+_UP+_UP+_RIGHT,x
      3  7c61		       30 0c		      bmi	.invalid
      4  7c63		       b9 7a f0 	      lda	Board,y
      5  7c66		       f0 04		      beq	.squareEmpty
      6  7c68		       45 97		      eor	currentPiece
      7  7c6a		       10 03		      bpl	.invalid
      8  7c6c		       20 be fc    .squareEmpty jsr	AddMove
      9  7c6f				   .invalid
     17  7c6f
      0  7c6f					      MOVE_TO_X	_DOWN+_LEFT+_LEFT
      1  7c6f		       a6 98		      ldx	currentSquare
      0  7c71					      MOVE_TO	_DOWN+_LEFT+_LEFT
      1  7c71					      SUBROUTINE
      2  7c71		       bc 0a f0 	      ldy	ValidSquare+_DOWN+_LEFT+_LEFT,x
      3  7c74		       30 0c		      bmi	.invalid
      4  7c76		       b9 7a f0 	      lda	Board,y
      5  7c79		       f0 04		      beq	.squareEmpty
      6  7c7b		       45 97		      eor	currentPiece
      7  7c7d		       10 03		      bpl	.invalid
      8  7c7f		       20 be fc    .squareEmpty jsr	AddMove
      9  7c82				   .invalid
      0  7c82					      MOVE_TO_X	_DOWN+_RIGHT+_RIGHT
      1  7c82		       a6 98		      ldx	currentSquare
      0  7c84					      MOVE_TO	_DOWN+_RIGHT+_RIGHT
      1  7c84					      SUBROUTINE
      2  7c84		       bc 0e f0 	      ldy	ValidSquare+_DOWN+_RIGHT+_RIGHT,x
      3  7c87		       30 0c		      bmi	.invalid
      4  7c89		       b9 7a f0 	      lda	Board,y
      5  7c8c		       f0 04		      beq	.squareEmpty
      6  7c8e		       45 97		      eor	currentPiece
      7  7c90		       10 03		      bpl	.invalid
      8  7c92		       20 be fc    .squareEmpty jsr	AddMove
      9  7c95				   .invalid
      0  7c95					      MOVE_TO_X	_UP+_LEFT+_LEFT
      1  7c95		       a6 98		      ldx	currentSquare
      0  7c97					      MOVE_TO	_UP+_LEFT+_LEFT
      1  7c97					      SUBROUTINE
      2  7c97		       bc 1e f0 	      ldy	ValidSquare+_UP+_LEFT+_LEFT,x
      3  7c9a		       30 0c		      bmi	.invalid
      4  7c9c		       b9 7a f0 	      lda	Board,y
      5  7c9f		       f0 04		      beq	.squareEmpty
      6  7ca1		       45 97		      eor	currentPiece
      7  7ca3		       10 03		      bpl	.invalid
      8  7ca5		       20 be fc    .squareEmpty jsr	AddMove
      9  7ca8				   .invalid
      0  7ca8					      MOVE_TO_X	_UP+_RIGHT+_RIGHT
      1  7ca8		       a6 98		      ldx	currentSquare
      0  7caa					      MOVE_TO	_UP+_RIGHT+_RIGHT
      1  7caa					      SUBROUTINE
      2  7caa		       bc 22 f0 	      ldy	ValidSquare+_UP+_RIGHT+_RIGHT,x
      3  7cad		       30 0c		      bmi	.invalid
      4  7caf		       b9 7a f0 	      lda	Board,y
      5  7cb2		       f0 04		      beq	.squareEmpty
      6  7cb4		       45 97		      eor	currentPiece
      7  7cb6		       10 03		      bpl	.invalid
      8  7cb8		       20 be fc    .squareEmpty jsr	AddMove
      9  7cbb				   .invalid
     22  7cbb
     23  7cbb		       4c 93 fa 	      jmp	MoveReturn
     24  7cbe
     25  7cbe							; EOF
------- FILE BANK_FIXED.asm
    772  7cbe
    773  7cbe							;---------------------------------------------------------------------------------------------------
    774  7cbe
      0  7cbe					      DEF	AddMove
      1  7cbe				   BANK_AddMove SET	_CURRENT_BANK
      2  7cbe
      3  7cbe				   AddMove
    776  7cbe					      SUBROUTINE
    777  7cbe							; =57 including call
    778  7cbe
    779  7cbe							; add square in y register to movelist as destination (X12 format)
    780  7cbe							; currentPiece = piece moving
    781  7cbe							; currentSquare = start square (X12)
    782  7cbe							; ??do not modify y
    783  7cbe
    784  7cbe		       a5 9c		      lda	currentPly	; 3
    785  7cc0		       85 3e		      sta	SET_BANK_RAM	; 3
    786  7cc2
    787  7cc2							; [y]		     to square (X12)
    788  7cc2							; currentSquare     from square (X12)
    789  7cc2							; currentPiece      piece. ENPASSANT flag set if pawn double-moving off opening rank
    790  7cc2							; do not modify [Y]
    791  7cc2
    792  7cc2							; add a move to the movelist
    793  7cc2
    794  7cc2		       98		      tya		; 2
    795  7cc3
    796  7cc3		       ac 35 f0 	      ldy	moveIndex	; 3
    797  7cc6		       c8		      iny		; 2
    798  7cc7		       8c 35 f4 	      sty	moveIndex+RAM_WRITE	; 4
    799  7cca
    800  7cca		       99 00 f5 	      sta	MoveTo+RAM_WRITE,y	; 5
    801  7ccd		       aa		      tax		; 2   new square (for projections)
    802  7cce
    803  7cce		       a5 98		      lda	currentSquare	; 3
    804  7cd0		       99 36 f4 	      sta	MoveFrom+RAM_WRITE,y	; 5
    805  7cd3		       a5 97		      lda	currentPiece	; 3
    806  7cd5		       99 80 f5 	      sta	MovePiece+RAM_WRITE,y	; 5
    807  7cd8
    808  7cd8		       a9 08		      lda	#RAMBANK_MOVES_RAM	; 2
    809  7cda		       85 3e		      sta	SET_BANK_RAM	; 3
    810  7cdc		       60		      rts		; 6
    811  7cdd
    812  7cdd
    813  7cdd							;---------------------------------------------------------------------------------------------------
    814  7cdd
      0  7cdd					      DEF	InitialisePieceSquares
      1  7cdd				   BANK_InitialisePieceSquares SET	_CURRENT_BANK
      2  7cdd
      3  7cdd				   InitialisePieceSquares
    816  7cdd					      SUBROUTINE
    817  7cdd
    818  7cdd							; Zap the board with the "blank" ROM copy
    819  7cdd
      0  7cdd					      JSRAM_SAFE	PutAllPieces
      1  7cdd
      2  7cdd
      3  7cdd
      4  7cdd		       a9 0b		      lda	#BANK_PutAllPieces
      5  7cdf		       85 8e		      sta	savedBank
      6  7ce1		       85 3f		      sta	SET_BANK
      7  7ce3		       20 8b f3 	      jsr	PutAllPieces
    821  7ce6
    822  7ce6							; Initialise the piecelists and the board for the two piecelist banks (BLACK/WHITE)
    823  7ce6
    824  7ce6		       a9 09		      lda	#RAMBANK_PLY
    825  7ce8		       85 3e		      sta	SET_BANK_RAM
    826  7cea		       20 00 f2 	      jsr	InitPieceLists	; for white
    827  7ced		       a9 0a		      lda	#RAMBANK_PLY+1
    828  7cef		       85 3e		      sta	SET_BANK_RAM
    829  7cf1		       20 00 f2 	      jsr	InitPieceLists	; for black
    830  7cf4
    831  7cf4
    832  7cf4							; Now setup the board/piecelists
    833  7cf4
    834  7cf4		       a2 00		      ldx	#0
    835  7cf6				   .fillPieceLists
    836  7cf6
    837  7cf6		       a9 09		      lda	#RAMBANK_PLY
    838  7cf8		       85 3e		      sta	SET_BANK_RAM
    839  7cfa
    840  7cfa		       bd 4f f2 	      lda	InitPieceList,x	; colour/-1
    841  7cfd		       f0 2e		      beq	.finish
    842  7cff
    843  7cff		       0a		      asl
    844  7d00		       a9 09		      lda	#RAMBANK_PLY
    845  7d02		       69 00		      adc	#0
    846  7d04		       85 3e		      sta	SET_BANK_RAM	; BLACK/WHITE
    847  7d06
    848  7d06		       ac 30 f0 	      ldy	PieceListPtr
    849  7d09		       c8		      iny
    850  7d0a
    851  7d0a		       bd 50 f2 	      lda	InitPieceList+1,x	; square
    852  7d0d		       99 10 f4 	      sta	PieceSquare+RAM_WRITE,y
    853  7d10		       98		      tya
    854  7d11		       99 00 f4 	      sta	SortedPieceList+RAM_WRITE,y
    855  7d14
    856  7d14		       bd 4f f2 	      lda	InitPieceList,x	; piece type
    857  7d17		       99 20 f4 	      sta	PieceType+RAM_WRITE,y
    858  7d1a		       48		      pha
    859  7d1b
    860  7d1b		       8c 30 f4 	      sty	PieceListPtr+RAM_WRITE
    861  7d1e
    862  7d1e
    863  7d1e		       bc 50 f2 	      ldy	InitPieceList+1,x	; square
    864  7d21
    865  7d21		       a9 08		      lda	#RAMBANK_MOVES_RAM
    866  7d23		       85 3e		      sta	SET_BANK_RAM
    867  7d25		       68		      pla
    868  7d26		       99 7a f4 	      sta	Board+RAM_WRITE,y
    869  7d29
    870  7d29		       e8		      inx
    871  7d2a		       e8		      inx
    872  7d2b		       10 c9		      bpl	.fillPieceLists
    873  7d2d
    874  7d2d		       60	   .finish    rts
    875  7d2e
    876  7d2e
    877  7d2e							;---------------------------------------------------------------------------------------------------
    878  7d2e
      0  7d2e					      DEF	SAFE_GetKingSquare
      1  7d2e				   BANK_SAFE_GetKingSquare SET	_CURRENT_BANK
      2  7d2e
      3  7d2e				   SAFE_GetKingSquare
    880  7d2e					      SUBROUTINE
    881  7d2e
    882  7d2e							; Pass:	 A = correct bank for current side (RAMBANK_PLY/+1)
    883  7d2e							; Return:	 A = square king is on (or -1)
    884  7d2e
    885  7d2e		       85 3e		      sta	SET_BANK_RAM
    886  7d30		       20 8d f3 	      jsr	GetKingSquare
    887  7d33		       a4 8e		      ldy	savedBank
    888  7d35		       84 3f		      sty	SET_BANK
    889  7d37		       60		      rts
    890  7d38
    891  7d38							;---------------------------------------------------------------------------------------------------
    892  7d38
      0  7d38					      DEF	SAFE_GetPieceFromBoard
      1  7d38				   BANK_SAFE_GetPieceFromBoard SET	_CURRENT_BANK
      2  7d38
      3  7d38				   SAFE_GetPieceFromBoard
    894  7d38					      SUBROUTINE
    895  7d38
    896  7d38							; y = X12 board index
    897  7d38
    898  7d38		       a2 08		      ldx	#RAMBANK_MOVES_RAM
    899  7d3a		       86 3e		      stx	SET_BANK_RAM
    900  7d3c		       a6 8e		      ldx	savedBank
    901  7d3e		       b9 7a f0 	      lda	Board,y
    902  7d41		       86 3f		      stx	SET_BANK
    903  7d43		       60		      rts
    904  7d44
    905  7d44
    906  7d44							;---------------------------------------------------------------------------------------------------
    907  7d44
      0  7d44					      DEF	calculateBase64Square
      1  7d44				   BANK_calculateBase64Square SET	_CURRENT_BANK
      2  7d44
      3  7d44				   calculateBase64Square
    909  7d44					      SUBROUTINE
    910  7d44
    911  7d44							; Convert row/column into Base64 index
    912  7d44
    913  7d44		       a5 88		      lda	highlight_row
    914  7d46		       49 07		      eor	#7
    915  7d48		       0a		      asl
    916  7d49		       0a		      asl
    917  7d4a		       0a		      asl
    918  7d4b		       05 8a		      ora	highlight_col
    919  7d4d		       aa		      tax
    920  7d4e		       60		      rts
    921  7d4f
    922  7d4f							;---------------------------------------------------------------------------------------------------
    923  7d4f
      0  7d4f					      DEF	SAFE_IsValidMoveFromSquare
      1  7d4f				   BANK_SAFE_IsValidMoveFromSquare SET	_CURRENT_BANK
      2  7d4f
      3  7d4f				   SAFE_IsValidMoveFromSquare
    925  7d4f					      SUBROUTINE
    926  7d4f
    927  7d4f							; Does the square exist in the movelist?
    928  7d4f
    929  7d4f		       20 44 fd 	      jsr	calculateBase64Square
    930  7d52		       86 91		      stx	aiFromSquare
    931  7d54
    932  7d54		       a9 08		      lda	#RAMBANK_MOVES_RAM
    933  7d56		       85 3e		      sta	SET_BANK_RAM
    934  7d58		       bc 4b f3 	      ldy	Base64ToIndex,x
    935  7d5b		       84 93		      sty	aiFromSquareX12
    936  7d5d
    937  7d5d		       98		      tya
    938  7d5e
    939  7d5e		       a4 9c		      ldy	currentPly
    940  7d60		       84 3e		      sty	SET_BANK_RAM
    941  7d62		       20 6b f3 	      jsr	CheckMoveListFromSquare
    942  7d65
    943  7d65		       a5 8e		      lda	savedBank
    944  7d67		       85 3f		      sta	SET_BANK
    945  7d69		       60		      rts
    946  7d6a
    947  7d6a
    948  7d6a							;---------------------------------------------------------------------------------------------------
    949  7d6a
      0  7d6a					      DEF	SAFE_GetPiece
      1  7d6a				   BANK_SAFE_GetPiece SET	_CURRENT_BANK
      2  7d6a
      3  7d6a				   SAFE_GetPiece
    951  7d6a					      SUBROUTINE
    952  7d6a
    953  7d6a							; Retrieve the piece+flags from the movelist, given from/to squares
    954  7d6a							; Required as moves have different flags but same origin squares (e.g., castling)
    955  7d6a
    956  7d6a		       a5 9c		      lda	currentPly
    957  7d6c		       85 3e		      sta	SET_BANK_RAM
    958  7d6e
    959  7d6e		       20 a5 f3 	      jsr	GetPieceGivenFromToSquares
    960  7d71
    961  7d71		       a5 8e		      lda	savedBank
    962  7d73		       85 3f		      sta	SET_BANK
    963  7d75		       60		      rts
    964  7d76
    965  7d76							;---------------------------------------------------------------------------------------------------
    966  7d76
      0  7d76					      DEF	SAFE_IsValidMoveToSquare
      1  7d76				   BANK_SAFE_IsValidMoveToSquare SET	_CURRENT_BANK
      2  7d76
      3  7d76				   SAFE_IsValidMoveToSquare
    968  7d76					      SUBROUTINE
    969  7d76
    970  7d76							; Does the square exist in the movelist?
    971  7d76
    972  7d76		       20 44 fd 	      jsr	calculateBase64Square
    973  7d79		       86 92		      stx	aiToSquare
    974  7d7b
    975  7d7b		       a9 08		      lda	#RAMBANK_MOVES_RAM
    976  7d7d		       85 3e		      sta	SET_BANK_RAM
    977  7d7f		       bd 4b f3 	      lda	Base64ToIndex,x
    978  7d82		       85 94		      sta	aiToSquareX12
    979  7d84
    980  7d84		       a4 9c		      ldy	currentPly
    981  7d86		       84 3e		      sty	SET_BANK_RAM
    982  7d88		       20 c2 f3 	      jsr	CheckMoveListToSquare
    983  7d8b
    984  7d8b		       a5 8e	   .found     lda	savedBank
    985  7d8d		       85 3f		      sta	SET_BANK
    986  7d8f		       60		      rts
    987  7d90
    988  7d90							;---------------------------------------------------------------------------------------------------
    989  7d90
      0  7d90					      DEF	SAFE_PutPieceToBoard
      1  7d90				   BANK_SAFE_PutPieceToBoard SET	_CURRENT_BANK
      2  7d90
      3  7d90				   SAFE_PutPieceToBoard
    991  7d90					      SUBROUTINE
    992  7d90
    993  7d90							; y = board index
    994  7d90							; a = piece
    995  7d90
    996  7d90		       a2 08		      ldx	#RAMBANK_MOVES_RAM
    997  7d92		       86 3e		      stx	SET_BANK_RAM
    998  7d94		       99 7a f4 	      sta	Board+RAM_WRITE,y
    999  7d97		       a6 8e		      ldx	savedBank
   1000  7d99		       86 3f		      stx	SET_BANK
   1001  7d9b		       60		      rts
   1002  7d9c
   1003  7d9c							;---------------------------------------------------------------------------------------------------
   1004  7d9c
      0  7d9c					      DEF	SAFE_CopyShadowROMtoRAM
      1  7d9c				   BANK_SAFE_CopyShadowROMtoRAM SET	_CURRENT_BANK
      2  7d9c
      3  7d9c				   SAFE_CopyShadowROMtoRAM
   1006  7d9c					      SUBROUTINE
   1007  7d9c
   1008  7d9c		       20 a4 fd 	      jsr	CopyShadowROMtoRAM
   1009  7d9f		       a5 8e		      lda	savedBank
   1010  7da1		       85 3f		      sta	SET_BANK
   1011  7da3		       60		      rts
   1012  7da4
   1013  7da4
   1014  7da4							;---------------------------------------------------------------------------------------------------
   1015  7da4
      0  7da4					      DEF	CopyShadowROMtoRAM
      1  7da4				   BANK_CopyShadowROMtoRAM SET	_CURRENT_BANK
      2  7da4
      3  7da4				   CopyShadowROMtoRAM
   1017  7da4					      SUBROUTINE
   1018  7da4
   1019  7da4							; Copy a whole 1K ROM SHADOW into a destination RAM 1K bank
   1020  7da4							; used to setup callable RAM code from ROM templates
   1021  7da4
   1022  7da4							; x = source ROM bank
   1023  7da4							; y = destination RAM bank (preserved)
   1024  7da4
   1025  7da4		       86 a8		      stx	__sourceBank
   1026  7da6
   1027  7da6		       a2 00		      ldx	#0
   1028  7da8		       a5 a8	   .copyPage  lda	__sourceBank
   1029  7daa		       85 3f		      sta	SET_BANK
   1030  7dac
   1031  7dac		       bd 00 f0 	      lda	$F000,x
   1032  7daf		       48		      pha
   1033  7db0		       bd 00 f1 	      lda	$F100,x
   1034  7db3		       48		      pha
   1035  7db4		       bd 00 f2 	      lda	$F200,x
   1036  7db7		       48		      pha
   1037  7db8		       bd 00 f3 	      lda	$F300,x
   1038  7dbb
   1039  7dbb		       84 3e		      sty	SET_BANK_RAM
   1040  7dbd
   1041  7dbd		       9d 00 f7 	      sta	$F300+RAM_WRITE,x
   1042  7dc0		       68		      pla
   1043  7dc1		       9d 00 f6 	      sta	$F200+RAM_WRITE,x
   1044  7dc4		       68		      pla
   1045  7dc5		       9d 00 f5 	      sta	$F100+RAM_WRITE,x
   1046  7dc8		       68		      pla
   1047  7dc9		       9d 00 f4 	      sta	$F000+RAM_WRITE,x
   1048  7dcc
   1049  7dcc		       ca		      dex
   1050  7dcd		       d0 d9		      bne	.copyPage
   1051  7dcf		       60		      rts
   1052  7dd0
   1053  7dd0
   1054  7dd0							;---------------------------------------------------------------------------------------------------
   1055  7dd0
      0  7dd0					      DEF	SAFE_CopySinglePiece
      1  7dd0				   BANK_SAFE_CopySinglePiece SET	_CURRENT_BANK
      2  7dd0
      3  7dd0				   SAFE_CopySinglePiece
   1057  7dd0					      SUBROUTINE
   1058  7dd0
   1059  7dd0		       20 d8 fd 	      jsr	CopySinglePiece
   1060  7dd3		       a5 8e		      lda	savedBank
   1061  7dd5		       85 3f		      sta	SET_BANK
   1062  7dd7		       60		      rts
   1063  7dd8
   1064  7dd8							;---------------------------------------------------------------------------------------------------
   1065  7dd8
      0  7dd8					      DEF	CopySinglePiece
      1  7dd8				   BANK_CopySinglePiece SET	_CURRENT_BANK
      2  7dd8
      3  7dd8				   CopySinglePiece
   1067  7dd8					      SUBROUTINE
   1068  7dd8							; @2150 max
   1069  7dd8							; = 33 TIM64T
   1070  7dd8
   1071  7dd8
   1072  7dd8		       a9 08		      lda	#RAMBANK_MOVES_RAM
   1073  7dda		       85 3e		      sta	SET_BANK_RAM
   1074  7ddc		       20 a0 f3 	      jsr	CopySetup
   1075  7ddf
   1076  7ddf
      0  7ddf					      DEF	InterceptMarkerCopy
      1  7ddf				   BANK_InterceptMarkerCopy SET	_CURRENT_BANK
      2  7ddf
      3  7ddf				   InterceptMarkerCopy
   1078  7ddf
   1079  7ddf							; Copy a piece shape (3 PF bytes wide x 24 lines) to the RAM buffer
   1080  7ddf							; y = piece index
   1081  7ddf
   1082  7ddf		       a9 08		      lda	#BANK_PIECE_VECTOR_BANK
   1083  7de1		       85 3f		      sta	SET_BANK
   1084  7de3
   1085  7de3		       b9 00 f0 	      lda	PIECE_VECTOR_LO,y
   1086  7de6		       85 ef		      sta	__ptr
   1087  7de8		       b9 80 f0 	      lda	PIECE_VECTOR_HI,y
   1088  7deb		       85 f0		      sta	__ptr+1
   1089  7ded		       b9 00 f1 	      lda	PIECE_VECTOR_BANK,y
   1090  7df0		       85 3f		      sta	SET_BANK
   1091  7df2
   1092  7df2		       a0 47		      ldy	#PIECE_SHAPE_SIZE-1
   1093  7df4		       b1 ef	   .copy      lda	(__ptr),y
   1094  7df6		       99 a7 00 	      sta	__pieceShapeBuffer,y
   1095  7df9		       88		      dey
   1096  7dfa		       10 f8		      bpl	.copy
   1097  7dfc
   1098  7dfc
   1099  7dfc		       a5 80		      lda	drawPieceNumber
   1100  7dfe		       4a		      lsr
   1101  7dff		       4a		      lsr
   1102  7e00		       4a		      lsr
   1103  7e01		       49 07		      eor	#7
   1104  7e03		       aa		      tax
   1105  7e04
   1106  7e04		       a5 80		      lda	drawPieceNumber
   1107  7e06		       29 04		      and	#4
   1108  7e08		       c9 04		      cmp	#4	; cc = left side, cs = right side
   1109  7e0a
   1110  7e0a		       86 3e		      stx	SET_BANK_RAM
   1111  7e0c		       4c d3 f0 	      jmp	CopyPieceToRowBitmap
   1112  7e0f
   1113  7e0f							;---------------------------------------------------------------------------------------------------
   1114  7e0f
      0  7e0f					      DEF	MoveViaList
      1  7e0f				   BANK_MoveViaList SET	_CURRENT_BANK
      2  7e0f
      3  7e0f				   MoveViaList
   1116  7e0f					      SUBROUTINE
   1117  7e0f
   1118  7e0f							; Given an existing movelist, pick one of the moves and make it
   1119  7e0f							; Used for random computer moves
   1120  7e0f
   1121  7e0f		       a5 9c		      lda	currentPly
   1122  7e11		       85 3e		      sta	SET_BANK_RAM	; switch in movelist
   1123  7e13
   1124  7e13		       20 22 f3 	      jsr	MoveViaListAtPly
   1125  7e16		       60		      rts
   1126  7e17
   1127  7e17
   1128  7e17							;---------------------------------------------------------------------------------------------------
   1129  7e17
      0  7e17					      DEF	FinaliseMove
      1  7e17				   BANK_FinaliseMove SET	_CURRENT_BANK
      2  7e17
      3  7e17				   FinaliseMove
   1131  7e17					      SUBROUTINE
   1132  7e17
   1133  7e17							; Now the visible movement on the board has happened, fix up the pointers to the pieces
   1134  7e17							; for both sides.
   1135  7e17
   1136  7e17
   1137  7e17		       a5 9e		      lda	sideToMove
   1138  7e19		       0a		      asl
   1139  7e1a		       a9 09		      lda	#RAMBANK_PLY
   1140  7e1c		       69 00		      adc	#0
   1141  7e1e		       85 3e		      sta	SET_BANK_RAM
   1142  7e20
   1143  7e20		       20 c7 f2 	      jsr	FixPieceList
   1144  7e23
   1145  7e23		       a5 87		      lda	toX12
   1146  7e25		       85 86		      sta	fromX12	; there MAY be no other-side piece at this square - that is OK!
   1147  7e27		       a9 00		      lda	#0
   1148  7e29		       85 87		      sta	toX12	; --> deleted (square=0)
   1149  7e2b
   1150  7e2b		       a5 a3		      lda	lastPiece
   1151  7e2d		       f0 0e		      beq	.notake
   1152  7e2f
   1153  7e2f		       a5 9e		      lda	sideToMove
   1154  7e31		       49 80		      eor	#128
   1155  7e33		       0a		      asl
   1156  7e34		       a9 09		      lda	#RAMBANK_PLY
   1157  7e36		       69 00		      adc	#0
   1158  7e38		       85 3e		      sta	SET_BANK_RAM
   1159  7e3a
   1160  7e3a		       20 c7 f2 	      jsr	FixPieceList	; REMOVE any captured object
   1161  7e3d
   1162  7e3d		       60	   .notake    rts
   1163  7e3e
   1164  7e3e
   1165  7e3e							;---------------------------------------------------------------------------------------------------
   1166  7e3e
      0  7e3e					      DEF	SAFE_getMoveIndex
      1  7e3e				   BANK_SAFE_getMoveIndex SET	_CURRENT_BANK
      2  7e3e
      3  7e3e				   SAFE_getMoveIndex
   1168  7e3e					      SUBROUTINE
   1169  7e3e
   1170  7e3e		       a9 09		      lda	#RAMBANK_PLY
   1171  7e40		       85 3e		      sta	SET_BANK_RAM
   1172  7e42		       ad 35 f0 	      lda	moveIndex
   1173  7e45		       a6 8e		      ldx	savedBank
   1174  7e47		       86 3f		      stx	SET_BANK
   1175  7e49		       60		      rts
   1176  7e4a
   1177  7e4a
   1178  7e4a							;---------------------------------------------------------------------------------------------------
   1179  7e4a
      0  7e4a					      DEF	SAFE_showMoveOptions
      1  7e4a				   BANK_SAFE_showMoveOptions SET	_CURRENT_BANK
      2  7e4a
      3  7e4a				   SAFE_showMoveOptions
   1181  7e4a					      SUBROUTINE
   1182  7e4a
   1183  7e4a							;SAFETIME = 40 	  ; time required to be able to safely do a piece draw TODO: optimise
   1184  7e4a
   1185  7e4a
   1186  7e4a							; place a marker on the board for any square matching the piece
   1187  7e4a							; EXCEPT for squares which are occupied (we'll flash those later)
   1188  7e4a							; x = movelist item # being checked
   1189  7e4a
   1190  7e4a
   1191  7e4a		       a6 95	   .next      ldx	aiMoveIndex
   1192  7e4c		       30 2a		      bmi	.skip
   1193  7e4e
   1194  7e4e							;lda INTIM
   1195  7e4e							;cmp #SAFETIME
   1196  7e4e							;bcc .skip
   1197  7e4e
   1198  7e4e		       a9 09		      lda	#RAMBANK_PLY	; white
   1199  7e50		       85 3e		      sta	SET_BANK_RAM
   1200  7e52
   1201  7e52		       c6 95		      dec	aiMoveIndex
   1202  7e54
   1203  7e54		       bd 36 f0 	      lda	MoveFrom,x
   1204  7e57		       c5 93		      cmp	aiFromSquareX12
   1205  7e59		       d0 ef		      bne	.next
   1206  7e5b
   1207  7e5b		       bc 00 f1 	      ldy	MoveTo,x
   1208  7e5e
   1209  7e5e		       a9 08		      lda	#RAMBANK_MOVES_RAM
   1210  7e60		       85 3e		      sta	SET_BANK_RAM
   1211  7e62
   1212  7e62		       b9 7a f0 	      lda	Board,y
   1213  7e65		       d0 e3		      bne	.next
   1214  7e67
   1215  7e67		       a5 80		      lda	drawPieceNumber
   1216  7e69		       48		      pha
   1217  7e6a
   1218  7e6a		       b9 00 ff 	      lda	X12toBase64,y
   1219  7e6d		       85 80		      sta	drawPieceNumber
   1220  7e6f
   1221  7e6f		       20 97 f3 	      jsr	CopySetupForMarker
   1222  7e72		       20 df fd 	      jsr	InterceptMarkerCopy
   1223  7e75
   1224  7e75		       68		      pla
   1225  7e76		       85 80		      sta	drawPieceNumber
   1226  7e78
   1227  7e78		       a5 8e	   .skip      lda	savedBank
   1228  7e7a		       85 3f		      sta	SET_BANK
   1229  7e7c		       60		      rts
   1230  7e7d
   1231  7e7d
   1232  7e7d							;---------------------------------------------------------------------------------------------------
   1233  7e7d
      0  7e7d					      DEF	SAFE_IsSquareUnderAttack
      1  7e7d				   BANK_SAFE_IsSquareUnderAttack SET	_CURRENT_BANK
      2  7e7d
      3  7e7d				   SAFE_IsSquareUnderAttack
   1235  7e7d
   1236  7e7d							; Check if passed X12 square is in the "TO" squares in the movelist (and thus under attack)
   1237  7e7d
   1238  7e7d							; Pass:	 currentPly = which movelist to check
   1239  7e7d							;		 A = X12 square to check
   1240  7e7d							; Return:	 CC = No, CS = Yes
   1241  7e7d
   1242  7e7d		       a6 9c		      ldx	currentPly
   1243  7e7f		       86 3e		      stx	SET_BANK_RAM
   1244  7e81		       20 7e f3 	      jsr	IsSquareUnderAttack
   1245  7e84		       a5 8e		      lda	savedBank
   1246  7e86		       85 3f		      sta	SET_BANK
   1247  7e88		       60		      rts
   1248  7e89
   1249  7e89							;---------------------------------------------------------------------------------------------------
   1250  7e89
      0  7e89					      DEF	SAFE_showMoveCaptures
      1  7e89				   BANK_SAFE_showMoveCaptures SET	_CURRENT_BANK
      2  7e89
      3  7e89				   SAFE_showMoveCaptures
   1252  7e89					      SUBROUTINE
   1253  7e89
   1254  7e89							; place a marker on the board for any square matching the piece
   1255  7e89							; EXCEPT for squares which are occupied (we'll flash those later)
   1256  7e89							; x = movelist item # being checked
   1257  7e89
   1258  7e89
   1259  7e89		       a6 95	   .next      ldx	aiMoveIndex
   1260  7e8b		       30 27		      bmi	.skip	; no moves in list
   1261  7e8d
   1262  7e8d							;lda INTIM
   1263  7e8d							;cmp #24 ;SAFETIME
   1264  7e8d							;bcc .skip
   1265  7e8d
   1266  7e8d		       a9 09		      lda	#RAMBANK_PLY	; white
   1267  7e8f		       85 3e		      sta	SET_BANK_RAM
   1268  7e91		       c6 95		      dec	aiMoveIndex
   1269  7e93
   1270  7e93		       bd 36 f0 	      lda	MoveFrom,x
   1271  7e96		       c5 93		      cmp	aiFromSquareX12
   1272  7e98		       d0 ef		      bne	.next
   1273  7e9a
   1274  7e9a		       bc 00 f1 	      ldy	MoveTo,x
   1275  7e9d
   1276  7e9d		       a9 08		      lda	#RAMBANK_MOVES_RAM
   1277  7e9f		       85 3e		      sta	SET_BANK_RAM
   1278  7ea1
   1279  7ea1		       b9 7a f0 	      lda	Board,y
   1280  7ea4		       f0 e3		      beq	.next
   1281  7ea6
   1282  7ea6		       a5 80		      lda	drawPieceNumber
   1283  7ea8		       48		      pha
   1284  7ea9
   1285  7ea9		       b9 00 ff 	      lda	X12toBase64,y
   1286  7eac		       85 80		      sta	drawPieceNumber
   1287  7eae
   1288  7eae		       20 d8 fd 	      jsr	CopySinglePiece
   1289  7eb1
   1290  7eb1		       68		      pla
   1291  7eb2		       85 80		      sta	drawPieceNumber
   1292  7eb4
   1293  7eb4		       a5 8e	   .skip      lda	savedBank
   1294  7eb6		       85 3f		      sta	SET_BANK
   1295  7eb8		       60		      rts
   1296  7eb9
   1297  7eb9
      0  7eb9					      OPTIONAL_PAGEBREAK	"X12toBase64", 100
 PAGE BREAK INSERTED FOR  X12toBase64
 REQUESTED SIZE =  $64
 WASTED SPACE =  $47
 PAGEBREAK LOCATION =  $ff00
     10  7f00					      LIST	ON
   1299  7f00
   1300  7f00				   X12toBase64
   1301  7f00
   1302  7f00							; Use this table to
   1303  7f00							;   a) Determine if a square is valid (-1 = NO)
   1304  7f00							;   b) Move pieces without addition.  e.g., "lda ValidSquareTable+10,x" will let you know
   1305  7f00							;	if a white pawn on square "x" can move "up" the board.
   1306  7f00
   1307  7f00		       ff ff ff ff*	      .byte.b	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1
   1308  7f0a		       ff ff ff ff*	      .byte.b	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1
   1309  7f14		       ff ff 00 01*	      .byte.b	-1, -1, 0, 1, 2, 3, 4, 5, 6, 7
   1310  7f1e		       ff ff 08 09*	      .byte.b	-1, -1, 8, 9, 10, 11, 12, 13, 14, 15
   1311  7f28		       ff ff 10 11*	      .byte.b	-1, -1, 16, 17, 18, 19, 20, 21, 22, 23
   1312  7f32		       ff ff 18 19*	      .byte.b	-1, -1, 24, 25, 26, 27, 28, 29, 30, 31
   1313  7f3c		       ff ff 20 21*	      .byte.b	-1, -1, 32, 33, 34, 35, 36, 37, 38, 39
   1314  7f46		       ff ff 28 29*	      .byte.b	-1, -1, 40, 41, 42, 43, 44, 45, 46, 47
   1315  7f50		       ff ff 30 31*	      .byte.b	-1, -1, 48, 49, 50, 51, 52, 53, 54, 55
   1316  7f5a		       ff ff 38 39*	      .byte.b	-1, -1, 56, 57, 58, 59, 60, 61, 62, 63
   1317  7f64
   1318  7f64
 FREE BYTES IN FIXED BANK =  $98
   1319  7f64					      ECHO	"FREE BYTES IN FIXED BANK = ", $FFFC - *
   1320  7f64
   1321  7f64							;---------------------------------------------------------------------------------------------------
   1322  7f64							; The reset vectors
   1323  7f64							; these must live in the fixed bank (last 2K of any ROM image in TigerVision)
   1324  7f64
   1325  8000 ????				      SEG	InterruptVectors
   1326  7ffc					      ORG	FIXED_BANK + $7FC
   1327  7ffc					      RORG	$7ffC
   1328  7ffc
   1329  7ffc		       00 f8		      .word.w	Reset	; RESET
   1330  7ffe		       00 f8		      .word.w	Reset	; IRQ	      (not used)
   1331  8000
   1332  8000							;---------------------------------------------------------------------------------------------------
   1333  8000							; EOF
------- FILE ./chess.asm
    373  8000
    374  8000							;END
